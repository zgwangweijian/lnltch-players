(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function O(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(o){if(o.ep)return;o.ep=!0;const a=O(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(t){const e=Object.create(null);for(const O of t.split(","))e[O]=1;return O=>O in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const O=t.indexOf(e);O>-1&&t.splice(O,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty$1.call(t,e),isArray=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject(t)||isFunction(t))&&isFunction(t.then)&&isFunction(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return O=>e[O]||(e[O]=t(O))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,O)=>O?O.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,...e)=>{for(let O=0;O<t.length;O++)t[O](...e)},def=(t,e,O,d=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:d,value:O})},looseToNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray(t)){const e={};for(let O=0;O<t.length;O++){const d=t[O],o=isString(d)?parseStringStyle(d):normalizeStyle(d);if(o)for(const a in o)e[a]=o[a]}return e}else if(isString(t)||isObject(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(O=>{if(O){const d=O.split(propertyDelimiterRE);d.length>1&&(e[d[0].trim()]=d[1].trim())}}),e}function normalizeClass(t){let e="";if(isString(t))e=t;else if(isArray(t))for(let O=0;O<t.length;O++){const d=normalizeClass(t[O]);d&&(e+=d+" ")}else if(isObject(t))for(const O in t)t[O]&&(e+=O+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,O;if(this.scopes)for(e=0,O=this.scopes.length;e<O;e++)this.scopes[e].pause();for(e=0,O=this.effects.length;e<O;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,O;if(this.scopes)for(e=0,O=this.scopes.length;e<O;e++)this.scopes[e].resume();for(e=0,O=this.effects.length;e<O;e++)this.effects[e].resume()}}run(e){if(this._active){const O=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=O}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let O,d;for(O=0,d=this.effects.length;O<d;O++)this.effects[O].stop();for(this.effects.length=0,O=0,d=this.cleanups.length;O<d;O++)this.cleanups[O]();if(this.cleanups.length=0,this.scopes){for(O=0,d=this.scopes.length;O<d;O++)this.scopes[O].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,O=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=O,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(t,e=!1){if(t.flags|=8,e){t.next=batchedComputed,batchedComputed=t;return}t.next=batchedSub,batchedSub=t}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const O=e.next;e.next=void 0,e.flags&=-9,e=O}}let t;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const O=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(d){t||(t=d)}e=O}}if(t)throw t}function prepareDeps(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(t){let e,O=t.depsTail,d=O;for(;d;){const o=d.prevDep;d.version===-1?(d===O&&(O=o),removeSub(d),removeDep(d)):e=d,d.dep.activeLink=d.prevActiveLink,d.prevActiveLink=void 0,d=o}t.deps=e,t.depsTail=O}function isDirty(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function refreshComputed(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===globalVersion)||(t.globalVersion=globalVersion,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!isDirty(t))))return;t.flags|=2;const e=t.dep,O=activeSub,d=shouldTrack;activeSub=t,shouldTrack=!0;try{prepareDeps(t);const o=t.fn(t._value);(e.version===0||hasChanged(o,t._value))&&(t.flags|=128,t._value=o,e.version++)}catch(o){throw e.version++,o}finally{activeSub=O,shouldTrack=d,cleanupDeps(t),t.flags&=-3}}function removeSub(t,e=!1){const{dep:O,prevSub:d,nextSub:o}=t;if(d&&(d.nextSub=o,t.prevSub=void 0),o&&(o.prevSub=d,t.nextSub=void 0),O.subs===t&&(O.subs=d,!d&&O.computed)){O.computed.flags&=-5;for(let a=O.computed.deps;a;a=a.nextDep)removeSub(a,!0)}!e&&!--O.sc&&O.map&&O.map.delete(O.key)}function removeDep(t){const{prevDep:e,nextDep:O}=t;e&&(e.nextDep=O,t.prevDep=void 0),O&&(O.prevDep=e,t.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function cleanupEffect(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const O=activeSub;activeSub=void 0;try{e()}finally{activeSub=O}}}let globalVersion=0;class Link{constructor(e,O){this.sub=e,this.dep=O,this.version=O.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let O=this.activeLink;if(O===void 0||O.sub!==activeSub)O=this.activeLink=new Link(activeSub,this),activeSub.deps?(O.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=O,activeSub.depsTail=O):activeSub.deps=activeSub.depsTail=O,addSub(O);else if(O.version===-1&&(O.version=this.version,O.nextDep)){const d=O.nextDep;d.prevDep=O.prevDep,O.prevDep&&(O.prevDep.nextDep=d),O.prevDep=activeSub.depsTail,O.nextDep=void 0,activeSub.depsTail.nextDep=O,activeSub.depsTail=O,activeSub.deps===O&&(activeSub.deps=d)}return O}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let O=this.subs;O;O=O.prevSub)O.sub.notify()&&O.sub.dep.notify()}finally{endBatch()}}}function addSub(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let d=e.deps;d;d=d.nextDep)addSub(d)}const O=t.dep.subs;O!==t&&(t.prevSub=O,O&&(O.nextSub=t)),t.dep.subs=t}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(t,e,O){if(shouldTrack&&activeSub){let d=targetMap.get(t);d||targetMap.set(t,d=new Map);let o=d.get(O);o||(d.set(O,o=new Dep),o.map=d,o.key=O),o.track()}}function trigger(t,e,O,d,o,a){const u=targetMap.get(t);if(!u){globalVersion++;return}const s=r=>{r&&r.trigger()};if(startBatch(),e==="clear")u.forEach(s);else{const r=isArray(t),n=r&&isIntegerKey(O);if(r&&O==="length"){const l=Number(d);u.forEach((c,h)=>{(h==="length"||h===ARRAY_ITERATE_KEY||!isSymbol(h)&&h>=l)&&s(c)})}else switch((O!==void 0||u.has(void 0))&&s(u.get(O)),n&&s(u.get(ARRAY_ITERATE_KEY)),e){case"add":r?n&&s(u.get("length")):(s(u.get(ITERATE_KEY)),isMap(t)&&s(u.get(MAP_KEY_ITERATE_KEY)));break;case"delete":r||(s(u.get(ITERATE_KEY)),isMap(t)&&s(u.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&s(u.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(t){const e=toRaw(t);return e===t?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(t)?e:e.map(toReactive))}function shallowReadArray(t){return track(t=toRaw(t),"iterate",ARRAY_ITERATE_KEY),t}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...t){return reactiveReadArray(this).concat(...t.map(e=>isArray(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",t=>(t[1]=toReactive(t[1]),t))},every(t,e){return apply(this,"every",t,e,void 0,arguments)},filter(t,e){return apply(this,"filter",t,e,O=>O.map(toReactive),arguments)},find(t,e){return apply(this,"find",t,e,toReactive,arguments)},findIndex(t,e){return apply(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return apply(this,"findLast",t,e,toReactive,arguments)},findLastIndex(t,e){return apply(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return apply(this,"forEach",t,e,void 0,arguments)},includes(...t){return searchProxy(this,"includes",t)},indexOf(...t){return searchProxy(this,"indexOf",t)},join(t){return reactiveReadArray(this).join(t)},lastIndexOf(...t){return searchProxy(this,"lastIndexOf",t)},map(t,e){return apply(this,"map",t,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...t){return noTracking(this,"push",t)},reduce(t,...e){return reduce(this,"reduce",t,e)},reduceRight(t,...e){return reduce(this,"reduceRight",t,e)},shift(){return noTracking(this,"shift")},some(t,e){return apply(this,"some",t,e,void 0,arguments)},splice(...t){return noTracking(this,"splice",t)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(t){return reactiveReadArray(this).toSorted(t)},toSpliced(...t){return reactiveReadArray(this).toSpliced(...t)},unshift(...t){return noTracking(this,"unshift",t)},values(){return iterator(this,"values",toReactive)}};function iterator(t,e,O){const d=shallowReadArray(t),o=d[e]();return d!==t&&!isShallow(t)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.value&&(a.value=O(a.value)),a}),o}const arrayProto=Array.prototype;function apply(t,e,O,d,o,a){const u=shallowReadArray(t),s=u!==t&&!isShallow(t),r=u[e];if(r!==arrayProto[e]){const c=r.apply(t,a);return s?toReactive(c):c}let n=O;u!==t&&(s?n=function(c,h){return O.call(this,toReactive(c),h,t)}:O.length>2&&(n=function(c,h){return O.call(this,c,h,t)}));const l=r.call(u,n,d);return s&&o?o(l):l}function reduce(t,e,O,d){const o=shallowReadArray(t);let a=O;return o!==t&&(isShallow(t)?O.length>3&&(a=function(u,s,r){return O.call(this,u,s,r,t)}):a=function(u,s,r){return O.call(this,u,toReactive(s),r,t)}),o[e](a,...d)}function searchProxy(t,e,O){const d=toRaw(t);track(d,"iterate",ARRAY_ITERATE_KEY);const o=d[e](...O);return(o===-1||o===!1)&&isProxy(O[0])?(O[0]=toRaw(O[0]),d[e](...O)):o}function noTracking(t,e,O=[]){pauseTracking(),startBatch();const d=toRaw(t)[e].apply(t,O);return endBatch(),resetTracking(),d}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol));function hasOwnProperty(t){isSymbol(t)||(t=String(t));const e=toRaw(this);return track(e,"has",t),e.hasOwnProperty(t)}class BaseReactiveHandler{constructor(e=!1,O=!1){this._isReadonly=e,this._isShallow=O}get(e,O,d){if(O==="__v_skip")return e.__v_skip;const o=this._isReadonly,a=this._isShallow;if(O==="__v_isReactive")return!o;if(O==="__v_isReadonly")return o;if(O==="__v_isShallow")return a;if(O==="__v_raw")return d===(o?a?shallowReadonlyMap:readonlyMap:a?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(d)?e:void 0;const u=isArray(e);if(!o){let r;if(u&&(r=arrayInstrumentations[O]))return r;if(O==="hasOwnProperty")return hasOwnProperty}const s=Reflect.get(e,O,isRef(e)?e:d);return(isSymbol(O)?builtInSymbols.has(O):isNonTrackableKeys(O))||(o||track(e,"get",O),a)?s:isRef(s)?u&&isIntegerKey(O)?s:s.value:isObject(s)?o?readonly(s):reactive(s):s}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,O,d,o){let a=e[O];if(!this._isShallow){const r=isReadonly(a);if(!isShallow(d)&&!isReadonly(d)&&(a=toRaw(a),d=toRaw(d)),!isArray(e)&&isRef(a)&&!isRef(d))return r?!1:(a.value=d,!0)}const u=isArray(e)&&isIntegerKey(O)?Number(O)<e.length:hasOwn(e,O),s=Reflect.set(e,O,d,isRef(e)?e:o);return e===toRaw(o)&&(u?hasChanged(d,a)&&trigger(e,"set",O,d):trigger(e,"add",O,d)),s}deleteProperty(e,O){const d=hasOwn(e,O);e[O];const o=Reflect.deleteProperty(e,O);return o&&d&&trigger(e,"delete",O,void 0),o}has(e,O){const d=Reflect.has(e,O);return(!isSymbol(O)||!builtInSymbols.has(O))&&track(e,"has",O),d}ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,O){return!0}deleteProperty(e,O){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function createIterableMethod(t,e,O){return function(...d){const o=this.__v_raw,a=toRaw(o),u=isMap(a),s=t==="entries"||t===Symbol.iterator&&u,r=t==="keys"&&u,n=o[t](...d),l=O?toShallow:e?toReadonly:toReactive;return!e&&track(a,"iterate",r?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:c,done:h}=n.next();return h?{value:c,done:h}:{value:s?[l(c[0]),l(c[1])]:l(c),done:h}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function createInstrumentations(t,e){const O={get(o){const a=this.__v_raw,u=toRaw(a),s=toRaw(o);t||(hasChanged(o,s)&&track(u,"get",o),track(u,"get",s));const{has:r}=getProto(u),n=e?toShallow:t?toReadonly:toReactive;if(r.call(u,o))return n(a.get(o));if(r.call(u,s))return n(a.get(s));a!==u&&a.get(o)},get size(){const o=this.__v_raw;return!t&&track(toRaw(o),"iterate",ITERATE_KEY),Reflect.get(o,"size",o)},has(o){const a=this.__v_raw,u=toRaw(a),s=toRaw(o);return t||(hasChanged(o,s)&&track(u,"has",o),track(u,"has",s)),o===s?a.has(o):a.has(o)||a.has(s)},forEach(o,a){const u=this,s=u.__v_raw,r=toRaw(s),n=e?toShallow:t?toReadonly:toReactive;return!t&&track(r,"iterate",ITERATE_KEY),s.forEach((l,c)=>o.call(a,n(l),n(c),u))}};return extend(O,t?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(o){!e&&!isShallow(o)&&!isReadonly(o)&&(o=toRaw(o));const a=toRaw(this);return getProto(a).has.call(a,o)||(a.add(o),trigger(a,"add",o,o)),this},set(o,a){!e&&!isShallow(a)&&!isReadonly(a)&&(a=toRaw(a));const u=toRaw(this),{has:s,get:r}=getProto(u);let n=s.call(u,o);n||(o=toRaw(o),n=s.call(u,o));const l=r.call(u,o);return u.set(o,a),n?hasChanged(a,l)&&trigger(u,"set",o,a):trigger(u,"add",o,a),this},delete(o){const a=toRaw(this),{has:u,get:s}=getProto(a);let r=u.call(a,o);r||(o=toRaw(o),r=u.call(a,o)),s&&s.call(a,o);const n=a.delete(o);return r&&trigger(a,"delete",o,void 0),n},clear(){const o=toRaw(this),a=o.size!==0,u=o.clear();return a&&trigger(o,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(o=>{O[o]=createIterableMethod(o,t,e)}),O}function createInstrumentationGetter(t,e){const O=createInstrumentations(t,e);return(d,o,a)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?d:Reflect.get(hasOwn(O,o)&&o in d?O:d,o,a)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(t){return createReactiveObject(t,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(t,e,O,d,o){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=getTargetType(t);if(a===0)return t;const u=o.get(t);if(u)return u;const s=new Proxy(t,a===2?d:O);return o.set(t,s),s}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return t?!!t.__v_raw:!1}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return!hasOwn(t,"__v_skip")&&Object.isExtensible(t)&&def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;function isRef(t){return t?t.__v_isRef===!0:!1}function ref(t){return createRef(t,!1)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,O){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=O?e:toRaw(e),this._value=O?e:toReactive(e),this.__v_isShallow=O}get value(){return this.dep.track(),this._value}set value(e){const O=this._rawValue,d=this.__v_isShallow||isShallow(e)||isReadonly(e);e=d?e:toRaw(e),hasChanged(e,O)&&(this._rawValue=e,this._value=d?e:toReactive(e),this.dep.trigger())}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,O)=>e==="__v_raw"?t:unref(Reflect.get(t,e,O)),set:(t,e,O,d)=>{const o=t[e];return isRef(o)&&!isRef(O)?(o.value=O,!0):Reflect.set(t,e,O,d)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,O,d){this.fn=e,this.setter=O,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!O,this.isSSR=d}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(t,e,O=!1){let d,o;return isFunction(t)?d=t:(d=t.get,o=t.set),new ComputedRefImpl(d,o,O)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(t,e=!1,O=activeWatcher){if(O){let d=cleanupMap.get(O);d||cleanupMap.set(O,d=[]),d.push(t)}}function watch$1(t,e,O=EMPTY_OBJ){const{immediate:d,deep:o,once:a,scheduler:u,augmentJob:s,call:r}=O,n=K=>o?K:isShallow(K)||o===!1||o===0?traverse(K,1):traverse(K);let l,c,h,j,F=!1,f=!1;if(isRef(t)?(c=()=>t.value,F=isShallow(t)):isReactive(t)?(c=()=>n(t),F=!0):isArray(t)?(f=!0,F=t.some(K=>isReactive(K)||isShallow(K)),c=()=>t.map(K=>{if(isRef(K))return K.value;if(isReactive(K))return n(K);if(isFunction(K))return r?r(K,2):K()})):isFunction(t)?e?c=r?()=>r(t,2):t:c=()=>{if(h){pauseTracking();try{h()}finally{resetTracking()}}const K=activeWatcher;activeWatcher=l;try{return r?r(t,3,[j]):t(j)}finally{activeWatcher=K}}:c=NOOP,e&&o){const K=c,G=o===!0?1/0:o;c=()=>traverse(K(),G)}const W=getCurrentScope(),U=()=>{l.stop(),W&&W.active&&remove(W.effects,l)};if(a&&e){const K=e;e=(...G)=>{K(...G),U()}}let M=f?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const R=K=>{if(!(!(l.flags&1)||!l.dirty&&!K))if(e){const G=l.run();if(o||F||(f?G.some((X,z)=>hasChanged(X,M[z])):hasChanged(G,M))){h&&h();const X=activeWatcher;activeWatcher=l;try{const z=[G,M===INITIAL_WATCHER_VALUE?void 0:f&&M[0]===INITIAL_WATCHER_VALUE?[]:M,j];M=G,r?r(e,3,z):e(...z)}finally{activeWatcher=X}}}else l.run()};return s&&s(R),l=new ReactiveEffect(c),l.scheduler=u?()=>u(R,!1):R,j=K=>onWatcherCleanup(K,!1,l),h=l.onStop=()=>{const K=cleanupMap.get(l);if(K){if(r)r(K,4);else for(const G of K)G();cleanupMap.delete(l)}},e?d?R(!0):M=l.run():u?u(R.bind(null,!0),!0):l.run(),U.pause=l.pause.bind(l),U.resume=l.resume.bind(l),U.stop=U,U}function traverse(t,e=1/0,O){if(e<=0||!isObject(t)||t.__v_skip||(O=O||new Set,O.has(t)))return t;if(O.add(t),e--,isRef(t))traverse(t.value,e,O);else if(isArray(t))for(let d=0;d<t.length;d++)traverse(t[d],e,O);else if(isSet(t)||isMap(t))t.forEach(d=>{traverse(d,e,O)});else if(isPlainObject(t)){for(const d in t)traverse(t[d],e,O);for(const d of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,d)&&traverse(t[d],e,O)}return t}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(t,...e){if(isWarning)return;isWarning=!0,pauseTracking();const O=stack.length?stack[stack.length-1].component:null,d=O&&O.appContext.config.warnHandler,o=getComponentTrace();if(d)callWithErrorHandling(d,O,11,[t+e.map(a=>{var u,s;return(s=(u=a.toString)==null?void 0:u.call(a))!=null?s:JSON.stringify(a)}).join(""),O&&O.proxy,o.map(({vnode:a})=>`at <${formatComponentName(O,a.type)}>`).join(`
`),o]);else{const a=[`[Vue warn]: ${t}`,...e];o.length&&a.push(`
`,...formatTrace(o)),console.warn(...a)}resetTracking(),isWarning=!1}function getComponentTrace(){let t=stack[stack.length-1];if(!t)return[];const e=[];for(;t;){const O=e[0];O&&O.vnode===t?O.recurseCount++:e.push({vnode:t,recurseCount:0});const d=t.component&&t.component.parent;t=d&&d.vnode}return e}function formatTrace(t){const e=[];return t.forEach((O,d)=>{e.push(...d===0?[]:[`
`],...formatTraceEntry(O))}),e}function formatTraceEntry({vnode:t,recurseCount:e}){const O=e>0?`... (${e} recursive calls)`:"",d=t.component?t.component.parent==null:!1,o=` at <${formatComponentName(t.component,t.type,d)}`,a=">"+O;return t.props?[o,...formatProps(t.props),a]:[o+a]}function formatProps(t){const e=[],O=Object.keys(t);return O.slice(0,3).forEach(d=>{e.push(...formatProp(d,t[d]))}),O.length>3&&e.push(" ..."),e}function formatProp(t,e,O){return isString(e)?(e=JSON.stringify(e),O?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?O?e:[`${t}=${e}`]:isRef(e)?(e=formatProp(t,toRaw(e.value),!0),O?e:[`${t}=Ref<`,e,">"]):isFunction(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),O?e:[`${t}=`,e])}function callWithErrorHandling(t,e,O,d){try{return d?t(...d):t()}catch(o){handleError(o,e,O)}}function callWithAsyncErrorHandling(t,e,O,d){if(isFunction(t)){const o=callWithErrorHandling(t,e,O,d);return o&&isPromise(o)&&o.catch(a=>{handleError(a,e,O)}),o}if(isArray(t)){const o=[];for(let a=0;a<t.length;a++)o.push(callWithAsyncErrorHandling(t[a],e,O,d));return o}}function handleError(t,e,O,d=!0){const o=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:u}=e&&e.appContext.config||EMPTY_OBJ;if(e){let s=e.parent;const r=e.proxy,n=`https://vuejs.org/error-reference/#runtime-${O}`;for(;s;){const l=s.ec;if(l){for(let c=0;c<l.length;c++)if(l[c](t,r,n)===!1)return}s=s.parent}if(a){pauseTracking(),callWithErrorHandling(a,null,10,[t,r,n]),resetTracking();return}}logError(t,O,o,d,u)}function logError(t,e,O,d=!0,o=!1){if(o)throw t;console.error(t)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,O=queue.length;for(;e<O;){const d=e+O>>>1,o=queue[d],a=getId(o);a<t||a===t&&o.flags&2?e=d+1:O=d}return e}function queueJob(t){if(!(t.flags&1)){const e=getId(t),O=queue[queue.length-1];!O||!(t.flags&2)&&e>=getId(O)?queue.push(t):queue.splice(findInsertionIndex(e),0,t),t.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(t){isArray(t)?pendingPostFlushCbs.push(...t):activePostFlushCbs&&t.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,t):t.flags&1||(pendingPostFlushCbs.push(t),t.flags|=1),queueFlush()}function flushPreFlushCbs(t,e,O=flushIndex+1){for(;O<queue.length;O++){const d=queue[O];if(d&&d.flags&2){if(t&&d.id!==t.uid)continue;queue.splice(O,1),O--,d.flags&4&&(d.flags&=-2),d(),d.flags&4||(d.flags&=-2)}}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((O,d)=>getId(O)-getId(d));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const O=activePostFlushCbs[postFlushIndex];O.flags&4&&(O.flags&=-2),O.flags&8||O(),O.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?t.flags&2?-1:1/0:t.id;function flushJobs(t){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),callWithErrorHandling(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&(e.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,O){if(!e||t._n)return t;const d=(...o)=>{d._d&&setBlockTracking(-1);const a=setCurrentRenderingInstance(e);let u;try{u=t(...o)}finally{setCurrentRenderingInstance(a),d._d&&setBlockTracking(1)}return u};return d._n=!0,d._c=!0,d._d=!0,d}function invokeDirectiveHook(t,e,O,d){const o=t.dirs,a=e&&e.dirs;for(let u=0;u<o.length;u++){const s=o[u];a&&(s.oldValue=a[u].value);let r=s.dir[d];r&&(pauseTracking(),callWithAsyncErrorHandling(r,O,8,[t.el,s,t,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=t=>t.__isTeleport;function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?(t.transition=e,setTransitionHooks(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(t,e){return isFunction(t)?extend({name:t.name},e,{setup:t}):t}function markAsyncBoundary(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function setRef(t,e,O,d,o=!1){if(isArray(t)){t.forEach((F,f)=>setRef(F,e&&(isArray(e)?e[f]:e),O,d,o));return}if(isAsyncWrapper(d)&&!o){d.shapeFlag&512&&d.type.__asyncResolved&&d.component.subTree.component&&setRef(t,e,O,d.component.subTree);return}const a=d.shapeFlag&4?getComponentPublicInstance(d.component):d.el,u=o?null:a,{i:s,r}=t,n=e&&e.r,l=s.refs===EMPTY_OBJ?s.refs={}:s.refs,c=s.setupState,h=toRaw(c),j=c===EMPTY_OBJ?()=>!1:F=>hasOwn(h,F);if(n!=null&&n!==r&&(isString(n)?(l[n]=null,j(n)&&(c[n]=null)):isRef(n)&&(n.value=null)),isFunction(r))callWithErrorHandling(r,s,12,[u,l]);else{const F=isString(r),f=isRef(r);if(F||f){const W=()=>{if(t.f){const U=F?j(r)?c[r]:l[r]:r.value;o?isArray(U)&&remove(U,a):isArray(U)?U.includes(a)||U.push(a):F?(l[r]=[a],j(r)&&(c[r]=l[r])):(r.value=[a],t.k&&(l[t.k]=r.value))}else F?(l[r]=u,j(r)&&(c[r]=u)):f&&(r.value=u,t.k&&(l[t.k]=u))};u?(W.id=-1,queuePostRenderEffect(W,O)):W()}}}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,O=currentInstance){const d=t.__wdc||(t.__wdc=()=>{let o=O;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(injectHook(e,d,O),O){let o=O.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(d,e,O,o),o=o.parent}}function injectToKeepAliveRoot(t,e,O,d){const o=injectHook(e,t,d,!0);onUnmounted(()=>{remove(d[e],o)},O)}function injectHook(t,e,O=currentInstance,d=!1){if(O){const o=O[t]||(O[t]=[]),a=e.__weh||(e.__weh=(...u)=>{pauseTracking();const s=setCurrentInstance(O),r=callWithAsyncErrorHandling(e,O,t,u);return s(),resetTracking(),r});return d?o.unshift(a):o.push(a),a}}const createHook=t=>(e,O=currentInstance)=>{(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...d)=>e(...d),O)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc"),getPublicInstance=t=>t?isStatefulComponent(t)?getComponentPublicInstance(t):getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>{queueJob(t.update)}),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:O,setupState:d,data:o,props:a,accessCache:u,type:s,appContext:r}=t;let n;if(e[0]!=="$"){const j=u[e];if(j!==void 0)switch(j){case 1:return d[e];case 2:return o[e];case 4:return O[e];case 3:return a[e]}else{if(hasSetupBinding(d,e))return u[e]=1,d[e];if(o!==EMPTY_OBJ&&hasOwn(o,e))return u[e]=2,o[e];if((n=t.propsOptions[0])&&hasOwn(n,e))return u[e]=3,a[e];if(O!==EMPTY_OBJ&&hasOwn(O,e))return u[e]=4,O[e];shouldCacheAccess&&(u[e]=0)}}const l=publicPropertiesMap[e];let c,h;if(l)return e==="$attrs"&&track(t.attrs,"get",""),l(t);if((c=s.__cssModules)&&(c=c[e]))return c;if(O!==EMPTY_OBJ&&hasOwn(O,e))return u[e]=4,O[e];if(h=r.config.globalProperties,hasOwn(h,e))return h[e]},set({_:t},e,O){const{data:d,setupState:o,ctx:a}=t;return hasSetupBinding(o,e)?(o[e]=O,!0):d!==EMPTY_OBJ&&hasOwn(d,e)?(d[e]=O,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=O,!0)},has({_:{data:t,setupState:e,accessCache:O,ctx:d,appContext:o,propsOptions:a}},u){let s;return!!O[u]||t!==EMPTY_OBJ&&hasOwn(t,u)||hasSetupBinding(e,u)||(s=a[0])&&hasOwn(s,u)||hasOwn(d,u)||hasOwn(publicPropertiesMap,u)||hasOwn(o.config.globalProperties,u)},defineProperty(t,e,O){return O.get!=null?t._.accessCache[e]=0:hasOwn(O,"value")&&this.set(t,e,O.value,null),Reflect.defineProperty(t,e,O)}};function normalizePropsOrEmits(t){return isArray(t)?t.reduce((e,O)=>(e[O]=null,e),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),O=t.proxy,d=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:u,watch:s,provide:r,inject:n,created:l,beforeMount:c,mounted:h,beforeUpdate:j,updated:F,activated:f,deactivated:W,beforeDestroy:U,beforeUnmount:M,destroyed:R,unmounted:K,render:G,renderTracked:X,renderTriggered:z,errorCaptured:te,serverPrefetch:ee,expose:Y,inheritAttrs:ie,components:ae,directives:de,filters:ce}=e;if(n&&resolveInjections(n,d,null),u)for(const se in u){const Z=u[se];isFunction(Z)&&(d[se]=Z.bind(O))}if(o){const se=o.call(O,O);isObject(se)&&(t.data=reactive(se))}if(shouldCacheAccess=!0,a)for(const se in a){const Z=a[se],oe=isFunction(Z)?Z.bind(O,O):isFunction(Z.get)?Z.get.bind(O,O):NOOP,re=!isFunction(Z)&&isFunction(Z.set)?Z.set.bind(O):NOOP,Te=computed({get:oe,set:re});Object.defineProperty(d,se,{enumerable:!0,configurable:!0,get:()=>Te.value,set:Ce=>Te.value=Ce})}if(s)for(const se in s)createWatcher(s[se],d,O,se);if(r){const se=isFunction(r)?r.call(O):r;Reflect.ownKeys(se).forEach(Z=>{provide(Z,se[Z])})}l&&callHook(l,t,"c");function he(se,Z){isArray(Z)?Z.forEach(oe=>se(oe.bind(O))):Z&&se(Z.bind(O))}if(he(onBeforeMount,c),he(onMounted,h),he(onBeforeUpdate,j),he(onUpdated,F),he(onActivated,f),he(onDeactivated,W),he(onErrorCaptured,te),he(onRenderTracked,X),he(onRenderTriggered,z),he(onBeforeUnmount,M),he(onUnmounted,K),he(onServerPrefetch,ee),isArray(Y))if(Y.length){const se=t.exposed||(t.exposed={});Y.forEach(Z=>{Object.defineProperty(se,Z,{get:()=>O[Z],set:oe=>O[Z]=oe,enumerable:!0})})}else t.exposed||(t.exposed={});G&&t.render===NOOP&&(t.render=G),ie!=null&&(t.inheritAttrs=ie),ae&&(t.components=ae),de&&(t.directives=de),ee&&markAsyncBoundary(t)}function resolveInjections(t,e,O=NOOP){isArray(t)&&(t=normalizeInject(t));for(const d in t){const o=t[d];let a;isObject(o)?"default"in o?a=inject(o.from||d,o.default,!0):a=inject(o.from||d):a=inject(o),isRef(a)?Object.defineProperty(e,d,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):e[d]=a}}function callHook(t,e,O){callWithAsyncErrorHandling(isArray(t)?t.map(d=>d.bind(e.proxy)):t.bind(e.proxy),e,O)}function createWatcher(t,e,O,d){let o=d.includes(".")?createPathGetter(O,d):()=>O[d];if(isString(t)){const a=e[t];isFunction(a)&&watch(o,a)}else if(isFunction(t))watch(o,t.bind(O));else if(isObject(t))if(isArray(t))t.forEach(a=>createWatcher(a,e,O,d));else{const a=isFunction(t.handler)?t.handler.bind(O):e[t.handler];isFunction(a)&&watch(o,a,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:O,extends:d}=e,{mixins:o,optionsCache:a,config:{optionMergeStrategies:u}}=t.appContext,s=a.get(e);let r;return s?r=s:!o.length&&!O&&!d?r=e:(r={},o.length&&o.forEach(n=>mergeOptions(r,n,u,!0)),mergeOptions(r,e,u)),isObject(e)&&a.set(e,r),r}function mergeOptions(t,e,O,d=!1){const{mixins:o,extends:a}=e;a&&mergeOptions(t,a,O,!0),o&&o.forEach(u=>mergeOptions(t,u,O,!0));for(const u in e)if(!(d&&u==="expose")){const s=internalOptionMergeStrats[u]||O&&O[u];t[u]=s?s(t[u],e[u]):e[u]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction(t)?t.call(this,this):t,isFunction(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray(t)){const e={};for(let O=0;O<t.length;O++)e[t[O]]=t[O];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(Object.create(null),t,e):e}function mergeEmitsOrPropsOptions(t,e){return t?isArray(t)&&isArray(e)?[...new Set([...t,...e])]:extend(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const O=extend(Object.create(null),t);for(const d in e)O[d]=mergeAsArray(t[d],e[d]);return O}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,e){return function(d,o=null){isFunction(d)||(d=extend({},d)),o!=null&&!isObject(o)&&(o=null);const a=createAppContext(),u=new WeakSet,s=[];let r=!1;const n=a.app={_uid:uid$1++,_component:d,_props:o,_container:null,_context:a,_instance:null,version,get config(){return a.config},set config(l){},use(l,...c){return u.has(l)||(l&&isFunction(l.install)?(u.add(l),l.install(n,...c)):isFunction(l)&&(u.add(l),l(n,...c))),n},mixin(l){return a.mixins.includes(l)||a.mixins.push(l),n},component(l,c){return c?(a.components[l]=c,n):a.components[l]},directive(l,c){return c?(a.directives[l]=c,n):a.directives[l]},mount(l,c,h){if(!r){const j=n._ceVNode||createVNode(d,o);return j.appContext=a,h===!0?h="svg":h===!1&&(h=void 0),t(j,l,h),r=!0,n._container=l,l.__vue_app__=n,getComponentPublicInstance(j.component)}},onUnmount(l){s.push(l)},unmount(){r&&(callWithAsyncErrorHandling(s,n._instance,16),t(null,n._container),delete n._container.__vue_app__)},provide(l,c){return a.provides[l]=c,n},runWithContext(l){const c=currentApp;currentApp=n;try{return l()}finally{currentApp=c}}};return n}}let currentApp=null;function provide(t,e){if(currentInstance){let O=currentInstance.provides;const d=currentInstance.parent&&currentInstance.parent.provides;d===O&&(O=currentInstance.provides=Object.create(d)),O[t]=e}}function inject(t,e,O=!1){const d=getCurrentInstance();if(d||currentApp){let o=currentApp?currentApp._context.provides:d?d.parent==null||d.ce?d.vnode.appContext&&d.vnode.appContext.provides:d.parent.provides:void 0;if(o&&t in o)return o[t];if(arguments.length>1)return O&&isFunction(e)?e.call(d&&d.proxy):e}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=t=>Object.getPrototypeOf(t)===internalObjectProto;function initProps(t,e,O,d=!1){const o={},a=createInternalObject();t.propsDefaults=Object.create(null),setFullProps(t,e,o,a);for(const u in t.propsOptions[0])u in o||(o[u]=void 0);O?t.props=d?o:shallowReactive(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function updateProps(t,e,O,d){const{props:o,attrs:a,vnode:{patchFlag:u}}=t,s=toRaw(o),[r]=t.propsOptions;let n=!1;if((d||u>0)&&!(u&16)){if(u&8){const l=t.vnode.dynamicProps;for(let c=0;c<l.length;c++){let h=l[c];if(isEmitListener(t.emitsOptions,h))continue;const j=e[h];if(r)if(hasOwn(a,h))j!==a[h]&&(a[h]=j,n=!0);else{const F=camelize(h);o[F]=resolvePropValue(r,s,F,j,t,!1)}else j!==a[h]&&(a[h]=j,n=!0)}}}else{setFullProps(t,e,o,a)&&(n=!0);let l;for(const c in s)(!e||!hasOwn(e,c)&&((l=hyphenate(c))===c||!hasOwn(e,l)))&&(r?O&&(O[c]!==void 0||O[l]!==void 0)&&(o[c]=resolvePropValue(r,s,c,void 0,t,!0)):delete o[c]);if(a!==s)for(const c in a)(!e||!hasOwn(e,c))&&(delete a[c],n=!0)}n&&trigger(t.attrs,"set","")}function setFullProps(t,e,O,d){const[o,a]=t.propsOptions;let u=!1,s;if(e)for(let r in e){if(isReservedProp(r))continue;const n=e[r];let l;o&&hasOwn(o,l=camelize(r))?!a||!a.includes(l)?O[l]=n:(s||(s={}))[l]=n:isEmitListener(t.emitsOptions,r)||(!(r in d)||n!==d[r])&&(d[r]=n,u=!0)}if(a){const r=toRaw(O),n=s||EMPTY_OBJ;for(let l=0;l<a.length;l++){const c=a[l];O[c]=resolvePropValue(o,r,c,n[c],t,!hasOwn(n,c))}}return u}function resolvePropValue(t,e,O,d,o,a){const u=t[O];if(u!=null){const s=hasOwn(u,"default");if(s&&d===void 0){const r=u.default;if(u.type!==Function&&!u.skipFactory&&isFunction(r)){const{propsDefaults:n}=o;if(O in n)d=n[O];else{const l=setCurrentInstance(o);d=n[O]=r.call(null,e),l()}}else d=r;o.ce&&o.ce._setProp(O,d)}u[0]&&(a&&!s?d=!1:u[1]&&(d===""||d===hyphenate(O))&&(d=!0))}return d}const mixinPropsCache=new WeakMap;function normalizePropsOptions(t,e,O=!1){const d=O?mixinPropsCache:e.propsCache,o=d.get(t);if(o)return o;const a=t.props,u={},s=[];let r=!1;if(!isFunction(t)){const l=c=>{r=!0;const[h,j]=normalizePropsOptions(c,e,!0);extend(u,h),j&&s.push(...j)};!O&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!a&&!r)return isObject(t)&&d.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray(a))for(let l=0;l<a.length;l++){const c=camelize(a[l]);validatePropName(c)&&(u[c]=EMPTY_OBJ)}else if(a)for(const l in a){const c=camelize(l);if(validatePropName(c)){const h=a[l],j=u[c]=isArray(h)||isFunction(h)?{type:h}:extend({},h),F=j.type;let f=!1,W=!0;if(isArray(F))for(let U=0;U<F.length;++U){const M=F[U],R=isFunction(M)&&M.name;if(R==="Boolean"){f=!0;break}else R==="String"&&(W=!1)}else f=isFunction(F)&&F.name==="Boolean";j[0]=f,j[1]=W,(f||hasOwn(j,"default"))&&s.push(c)}}const n=[u,s];return isObject(t)&&d.set(t,n),n}function validatePropName(t){return t[0]!=="$"&&!isReservedProp(t)}const isInternalKey=t=>t==="_"||t==="__"||t==="_ctx"||t==="$stable",normalizeSlotValue=t=>isArray(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot=(t,e,O)=>{if(e._n)return e;const d=withCtx((...o)=>normalizeSlotValue(e(...o)),O);return d._c=!1,d},normalizeObjectSlots=(t,e,O)=>{const d=t._ctx;for(const o in t){if(isInternalKey(o))continue;const a=t[o];if(isFunction(a))e[o]=normalizeSlot(o,a,d);else if(a!=null){const u=normalizeSlotValue(a);e[o]=()=>u}}},normalizeVNodeSlots=(t,e)=>{const O=normalizeSlotValue(e);t.slots.default=()=>O},assignSlots=(t,e,O)=>{for(const d in e)(O||!isInternalKey(d))&&(t[d]=e[d])},initSlots=(t,e,O)=>{const d=t.slots=createInternalObject();if(t.vnode.shapeFlag&32){const o=e.__;o&&def(d,"__",o,!0);const a=e._;a?(assignSlots(d,e,O),O&&def(d,"_",a,!0)):normalizeObjectSlots(e,d)}else e&&normalizeVNodeSlots(t,e)},updateSlots=(t,e,O)=>{const{vnode:d,slots:o}=t;let a=!0,u=EMPTY_OBJ;if(d.shapeFlag&32){const s=e._;s?O&&s===1?a=!1:assignSlots(o,e,O):(a=!e.$stable,normalizeObjectSlots(e,o)),u=e}else e&&(normalizeVNodeSlots(t,e),u={default:1});if(a)for(const s in o)!isInternalKey(s)&&u[s]==null&&delete o[s]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const O=getGlobalThis();O.__VUE__=!0;const{insert:d,remove:o,patchProp:a,createElement:u,createText:s,createComment:r,setText:n,setElementText:l,parentNode:c,nextSibling:h,setScopeId:j=NOOP,insertStaticContent:F}=t,f=(ue,ve,Le,Ne=null,Ue=null,$e=null,rt=void 0,Je=null,et=!!ve.dynamicChildren)=>{if(ue===ve)return;ue&&!isSameVNodeType(ue,ve)&&(Ne=Ee(ue),Ce(ue,Ue,$e,!0),ue=null),ve.patchFlag===-2&&(et=!1,ve.dynamicChildren=null);const{type:De,ref:Xe,shapeFlag:Ke}=ve;switch(De){case Text:W(ue,ve,Le,Ne);break;case Comment:U(ue,ve,Le,Ne);break;case Static:ue==null&&M(ve,Le,Ne,rt);break;case Fragment:ae(ue,ve,Le,Ne,Ue,$e,rt,Je,et);break;default:Ke&1?G(ue,ve,Le,Ne,Ue,$e,rt,Je,et):Ke&6?de(ue,ve,Le,Ne,Ue,$e,rt,Je,et):(Ke&64||Ke&128)&&De.process(ue,ve,Le,Ne,Ue,$e,rt,Je,et,Oe)}Xe!=null&&Ue?setRef(Xe,ue&&ue.ref,$e,ve||ue,!ve):Xe==null&&ue&&ue.ref!=null&&setRef(ue.ref,null,$e,ue,!0)},W=(ue,ve,Le,Ne)=>{if(ue==null)d(ve.el=s(ve.children),Le,Ne);else{const Ue=ve.el=ue.el;ve.children!==ue.children&&n(Ue,ve.children)}},U=(ue,ve,Le,Ne)=>{ue==null?d(ve.el=r(ve.children||""),Le,Ne):ve.el=ue.el},M=(ue,ve,Le,Ne)=>{[ue.el,ue.anchor]=F(ue.children,ve,Le,Ne,ue.el,ue.anchor)},R=({el:ue,anchor:ve},Le,Ne)=>{let Ue;for(;ue&&ue!==ve;)Ue=h(ue),d(ue,Le,Ne),ue=Ue;d(ve,Le,Ne)},K=({el:ue,anchor:ve})=>{let Le;for(;ue&&ue!==ve;)Le=h(ue),o(ue),ue=Le;o(ve)},G=(ue,ve,Le,Ne,Ue,$e,rt,Je,et)=>{ve.type==="svg"?rt="svg":ve.type==="math"&&(rt="mathml"),ue==null?X(ve,Le,Ne,Ue,$e,rt,Je,et):ee(ue,ve,Ue,$e,rt,Je,et)},X=(ue,ve,Le,Ne,Ue,$e,rt,Je)=>{let et,De;const{props:Xe,shapeFlag:Ke,transition:Ye,dirs:it}=ue;if(et=ue.el=u(ue.type,$e,Xe&&Xe.is,Xe),Ke&8?l(et,ue.children):Ke&16&&te(ue.children,et,null,Ne,Ue,resolveChildrenNamespace(ue,$e),rt,Je),it&&invokeDirectiveHook(ue,null,Ne,"created"),z(et,ue,ue.scopeId,rt,Ne),Xe){for(const at in Xe)at!=="value"&&!isReservedProp(at)&&a(et,at,null,Xe[at],$e,Ne);"value"in Xe&&a(et,"value",null,Xe.value,$e),(De=Xe.onVnodeBeforeMount)&&invokeVNodeHook(De,Ne,ue)}it&&invokeDirectiveHook(ue,null,Ne,"beforeMount");const ut=needTransition(Ue,Ye);ut&&Ye.beforeEnter(et),d(et,ve,Le),((De=Xe&&Xe.onVnodeMounted)||ut||it)&&queuePostRenderEffect(()=>{De&&invokeVNodeHook(De,Ne,ue),ut&&Ye.enter(et),it&&invokeDirectiveHook(ue,null,Ne,"mounted")},Ue)},z=(ue,ve,Le,Ne,Ue)=>{if(Le&&j(ue,Le),Ne)for(let $e=0;$e<Ne.length;$e++)j(ue,Ne[$e]);if(Ue){let $e=Ue.subTree;if(ve===$e||isSuspense($e.type)&&($e.ssContent===ve||$e.ssFallback===ve)){const rt=Ue.vnode;z(ue,rt,rt.scopeId,rt.slotScopeIds,Ue.parent)}}},te=(ue,ve,Le,Ne,Ue,$e,rt,Je,et=0)=>{for(let De=et;De<ue.length;De++){const Xe=ue[De]=Je?cloneIfMounted(ue[De]):normalizeVNode(ue[De]);f(null,Xe,ve,Le,Ne,Ue,$e,rt,Je)}},ee=(ue,ve,Le,Ne,Ue,$e,rt)=>{const Je=ve.el=ue.el;let{patchFlag:et,dynamicChildren:De,dirs:Xe}=ve;et|=ue.patchFlag&16;const Ke=ue.props||EMPTY_OBJ,Ye=ve.props||EMPTY_OBJ;let it;if(Le&&toggleRecurse(Le,!1),(it=Ye.onVnodeBeforeUpdate)&&invokeVNodeHook(it,Le,ve,ue),Xe&&invokeDirectiveHook(ve,ue,Le,"beforeUpdate"),Le&&toggleRecurse(Le,!0),(Ke.innerHTML&&Ye.innerHTML==null||Ke.textContent&&Ye.textContent==null)&&l(Je,""),De?Y(ue.dynamicChildren,De,Je,Le,Ne,resolveChildrenNamespace(ve,Ue),$e):rt||Z(ue,ve,Je,null,Le,Ne,resolveChildrenNamespace(ve,Ue),$e,!1),et>0){if(et&16)ie(Je,Ke,Ye,Le,Ue);else if(et&2&&Ke.class!==Ye.class&&a(Je,"class",null,Ye.class,Ue),et&4&&a(Je,"style",Ke.style,Ye.style,Ue),et&8){const ut=ve.dynamicProps;for(let at=0;at<ut.length;at++){const ct=ut[at],_t=Ke[ct],bt=Ye[ct];(bt!==_t||ct==="value")&&a(Je,ct,_t,bt,Ue,Le)}}et&1&&ue.children!==ve.children&&l(Je,ve.children)}else!rt&&De==null&&ie(Je,Ke,Ye,Le,Ue);((it=Ye.onVnodeUpdated)||Xe)&&queuePostRenderEffect(()=>{it&&invokeVNodeHook(it,Le,ve,ue),Xe&&invokeDirectiveHook(ve,ue,Le,"updated")},Ne)},Y=(ue,ve,Le,Ne,Ue,$e,rt)=>{for(let Je=0;Je<ve.length;Je++){const et=ue[Je],De=ve[Je],Xe=et.el&&(et.type===Fragment||!isSameVNodeType(et,De)||et.shapeFlag&198)?c(et.el):Le;f(et,De,Xe,null,Ne,Ue,$e,rt,!0)}},ie=(ue,ve,Le,Ne,Ue)=>{if(ve!==Le){if(ve!==EMPTY_OBJ)for(const $e in ve)!isReservedProp($e)&&!($e in Le)&&a(ue,$e,ve[$e],null,Ue,Ne);for(const $e in Le){if(isReservedProp($e))continue;const rt=Le[$e],Je=ve[$e];rt!==Je&&$e!=="value"&&a(ue,$e,Je,rt,Ue,Ne)}"value"in Le&&a(ue,"value",ve.value,Le.value,Ue)}},ae=(ue,ve,Le,Ne,Ue,$e,rt,Je,et)=>{const De=ve.el=ue?ue.el:s(""),Xe=ve.anchor=ue?ue.anchor:s("");let{patchFlag:Ke,dynamicChildren:Ye,slotScopeIds:it}=ve;it&&(Je=Je?Je.concat(it):it),ue==null?(d(De,Le,Ne),d(Xe,Le,Ne),te(ve.children||[],Le,Xe,Ue,$e,rt,Je,et)):Ke>0&&Ke&64&&Ye&&ue.dynamicChildren?(Y(ue.dynamicChildren,Ye,Le,Ue,$e,rt,Je),(ve.key!=null||Ue&&ve===Ue.subTree)&&traverseStaticChildren(ue,ve,!0)):Z(ue,ve,Le,Xe,Ue,$e,rt,Je,et)},de=(ue,ve,Le,Ne,Ue,$e,rt,Je,et)=>{ve.slotScopeIds=Je,ue==null?ve.shapeFlag&512?Ue.ctx.activate(ve,Le,Ne,rt,et):ce(ve,Le,Ne,Ue,$e,rt,et):ge(ue,ve,et)},ce=(ue,ve,Le,Ne,Ue,$e,rt)=>{const Je=ue.component=createComponentInstance(ue,Ne,Ue);if(isKeepAlive(ue)&&(Je.ctx.renderer=Oe),setupComponent(Je,!1,rt),Je.asyncDep){if(Ue&&Ue.registerDep(Je,he,rt),!ue.el){const et=Je.subTree=createVNode(Comment);U(null,et,ve,Le),ue.placeholder=et.el}}else he(Je,ue,ve,Le,Ue,$e,rt)},ge=(ue,ve,Le)=>{const Ne=ve.component=ue.component;if(shouldUpdateComponent(ue,ve,Le))if(Ne.asyncDep&&!Ne.asyncResolved){se(Ne,ve,Le);return}else Ne.next=ve,Ne.update();else ve.el=ue.el,Ne.vnode=ve},he=(ue,ve,Le,Ne,Ue,$e,rt)=>{const Je=()=>{if(ue.isMounted){let{next:Ke,bu:Ye,u:it,parent:ut,vnode:at}=ue;{const gt=locateNonHydratedAsyncRoot(ue);if(gt){Ke&&(Ke.el=at.el,se(ue,Ke,rt)),gt.asyncDep.then(()=>{ue.isUnmounted||Je()});return}}let ct=Ke,_t;toggleRecurse(ue,!1),Ke?(Ke.el=at.el,se(ue,Ke,rt)):Ke=at,Ye&&invokeArrayFns(Ye),(_t=Ke.props&&Ke.props.onVnodeBeforeUpdate)&&invokeVNodeHook(_t,ut,Ke,at),toggleRecurse(ue,!0);const bt=renderComponentRoot(ue),vt=ue.subTree;ue.subTree=bt,f(vt,bt,c(vt.el),Ee(vt),ue,Ue,$e),Ke.el=bt.el,ct===null&&updateHOCHostEl(ue,bt.el),it&&queuePostRenderEffect(it,Ue),(_t=Ke.props&&Ke.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(_t,ut,Ke,at),Ue)}else{let Ke;const{el:Ye,props:it}=ve,{bm:ut,m:at,parent:ct,root:_t,type:bt}=ue,vt=isAsyncWrapper(ve);toggleRecurse(ue,!1),ut&&invokeArrayFns(ut),!vt&&(Ke=it&&it.onVnodeBeforeMount)&&invokeVNodeHook(Ke,ct,ve),toggleRecurse(ue,!0);{_t.ce&&_t.ce._def.shadowRoot!==!1&&_t.ce._injectChildStyle(bt);const gt=ue.subTree=renderComponentRoot(ue);f(null,gt,Le,Ne,ue,Ue,$e),ve.el=gt.el}if(at&&queuePostRenderEffect(at,Ue),!vt&&(Ke=it&&it.onVnodeMounted)){const gt=ve;queuePostRenderEffect(()=>invokeVNodeHook(Ke,ct,gt),Ue)}(ve.shapeFlag&256||ct&&isAsyncWrapper(ct.vnode)&&ct.vnode.shapeFlag&256)&&ue.a&&queuePostRenderEffect(ue.a,Ue),ue.isMounted=!0,ve=Le=Ne=null}};ue.scope.on();const et=ue.effect=new ReactiveEffect(Je);ue.scope.off();const De=ue.update=et.run.bind(et),Xe=ue.job=et.runIfDirty.bind(et);Xe.i=ue,Xe.id=ue.uid,et.scheduler=()=>queueJob(Xe),toggleRecurse(ue,!0),De()},se=(ue,ve,Le)=>{ve.component=ue;const Ne=ue.vnode.props;ue.vnode=ve,ue.next=null,updateProps(ue,ve.props,Ne,Le),updateSlots(ue,ve.children,Le),pauseTracking(),flushPreFlushCbs(ue),resetTracking()},Z=(ue,ve,Le,Ne,Ue,$e,rt,Je,et=!1)=>{const De=ue&&ue.children,Xe=ue?ue.shapeFlag:0,Ke=ve.children,{patchFlag:Ye,shapeFlag:it}=ve;if(Ye>0){if(Ye&128){re(De,Ke,Le,Ne,Ue,$e,rt,Je,et);return}else if(Ye&256){oe(De,Ke,Le,Ne,Ue,$e,rt,Je,et);return}}it&8?(Xe&16&&fe(De,Ue,$e),Ke!==De&&l(Le,Ke)):Xe&16?it&16?re(De,Ke,Le,Ne,Ue,$e,rt,Je,et):fe(De,Ue,$e,!0):(Xe&8&&l(Le,""),it&16&&te(Ke,Le,Ne,Ue,$e,rt,Je,et))},oe=(ue,ve,Le,Ne,Ue,$e,rt,Je,et)=>{ue=ue||EMPTY_ARR,ve=ve||EMPTY_ARR;const De=ue.length,Xe=ve.length,Ke=Math.min(De,Xe);let Ye;for(Ye=0;Ye<Ke;Ye++){const it=ve[Ye]=et?cloneIfMounted(ve[Ye]):normalizeVNode(ve[Ye]);f(ue[Ye],it,Le,null,Ue,$e,rt,Je,et)}De>Xe?fe(ue,Ue,$e,!0,!1,Ke):te(ve,Le,Ne,Ue,$e,rt,Je,et,Ke)},re=(ue,ve,Le,Ne,Ue,$e,rt,Je,et)=>{let De=0;const Xe=ve.length;let Ke=ue.length-1,Ye=Xe-1;for(;De<=Ke&&De<=Ye;){const it=ue[De],ut=ve[De]=et?cloneIfMounted(ve[De]):normalizeVNode(ve[De]);if(isSameVNodeType(it,ut))f(it,ut,Le,null,Ue,$e,rt,Je,et);else break;De++}for(;De<=Ke&&De<=Ye;){const it=ue[Ke],ut=ve[Ye]=et?cloneIfMounted(ve[Ye]):normalizeVNode(ve[Ye]);if(isSameVNodeType(it,ut))f(it,ut,Le,null,Ue,$e,rt,Je,et);else break;Ke--,Ye--}if(De>Ke){if(De<=Ye){const it=Ye+1,ut=it<Xe?ve[it].el:Ne;for(;De<=Ye;)f(null,ve[De]=et?cloneIfMounted(ve[De]):normalizeVNode(ve[De]),Le,ut,Ue,$e,rt,Je,et),De++}}else if(De>Ye)for(;De<=Ke;)Ce(ue[De],Ue,$e,!0),De++;else{const it=De,ut=De,at=new Map;for(De=ut;De<=Ye;De++){const pt=ve[De]=et?cloneIfMounted(ve[De]):normalizeVNode(ve[De]);pt.key!=null&&at.set(pt.key,De)}let ct,_t=0;const bt=Ye-ut+1;let vt=!1,gt=0;const wt=new Array(bt);for(De=0;De<bt;De++)wt[De]=0;for(De=it;De<=Ke;De++){const pt=ue[De];if(_t>=bt){Ce(pt,Ue,$e,!0);continue}let yt;if(pt.key!=null)yt=at.get(pt.key);else for(ct=ut;ct<=Ye;ct++)if(wt[ct-ut]===0&&isSameVNodeType(pt,ve[ct])){yt=ct;break}yt===void 0?Ce(pt,Ue,$e,!0):(wt[yt-ut]=De+1,yt>=gt?gt=yt:vt=!0,f(pt,ve[yt],Le,null,Ue,$e,rt,Je,et),_t++)}const xt=vt?getSequence(wt):EMPTY_ARR;for(ct=xt.length-1,De=bt-1;De>=0;De--){const pt=ut+De,yt=ve[pt],He=ve[pt+1],qe=pt+1<Xe?He.el||He.placeholder:Ne;wt[De]===0?f(null,yt,Le,qe,Ue,$e,rt,Je,et):vt&&(ct<0||De!==xt[ct]?Te(yt,Le,qe,2):ct--)}}},Te=(ue,ve,Le,Ne,Ue=null)=>{const{el:$e,type:rt,transition:Je,children:et,shapeFlag:De}=ue;if(De&6){Te(ue.component.subTree,ve,Le,Ne);return}if(De&128){ue.suspense.move(ve,Le,Ne);return}if(De&64){rt.move(ue,ve,Le,Oe);return}if(rt===Fragment){d($e,ve,Le);for(let Ke=0;Ke<et.length;Ke++)Te(et[Ke],ve,Le,Ne);d(ue.anchor,ve,Le);return}if(rt===Static){R(ue,ve,Le);return}if(Ne!==2&&De&1&&Je)if(Ne===0)Je.beforeEnter($e),d($e,ve,Le),queuePostRenderEffect(()=>Je.enter($e),Ue);else{const{leave:Ke,delayLeave:Ye,afterLeave:it}=Je,ut=()=>{ue.ctx.isUnmounted?o($e):d($e,ve,Le)},at=()=>{Ke($e,()=>{ut(),it&&it()})};Ye?Ye($e,ut,at):at()}else d($e,ve,Le)},Ce=(ue,ve,Le,Ne=!1,Ue=!1)=>{const{type:$e,props:rt,ref:Je,children:et,dynamicChildren:De,shapeFlag:Xe,patchFlag:Ke,dirs:Ye,cacheIndex:it}=ue;if(Ke===-2&&(Ue=!1),Je!=null&&(pauseTracking(),setRef(Je,null,Le,ue,!0),resetTracking()),it!=null&&(ve.renderCache[it]=void 0),Xe&256){ve.ctx.deactivate(ue);return}const ut=Xe&1&&Ye,at=!isAsyncWrapper(ue);let ct;if(at&&(ct=rt&&rt.onVnodeBeforeUnmount)&&invokeVNodeHook(ct,ve,ue),Xe&6)J(ue.component,Le,Ne);else{if(Xe&128){ue.suspense.unmount(Le,Ne);return}ut&&invokeDirectiveHook(ue,null,ve,"beforeUnmount"),Xe&64?ue.type.remove(ue,ve,Le,Oe,Ne):De&&!De.hasOnce&&($e!==Fragment||Ke>0&&Ke&64)?fe(De,ve,Le,!1,!0):($e===Fragment&&Ke&384||!Ue&&Xe&16)&&fe(et,ve,Le),Ne&&ke(ue)}(at&&(ct=rt&&rt.onVnodeUnmounted)||ut)&&queuePostRenderEffect(()=>{ct&&invokeVNodeHook(ct,ve,ue),ut&&invokeDirectiveHook(ue,null,ve,"unmounted")},Le)},ke=ue=>{const{type:ve,el:Le,anchor:Ne,transition:Ue}=ue;if(ve===Fragment){ye(Le,Ne);return}if(ve===Static){K(ue);return}const $e=()=>{o(Le),Ue&&!Ue.persisted&&Ue.afterLeave&&Ue.afterLeave()};if(ue.shapeFlag&1&&Ue&&!Ue.persisted){const{leave:rt,delayLeave:Je}=Ue,et=()=>rt(Le,$e);Je?Je(ue.el,$e,et):et()}else $e()},ye=(ue,ve)=>{let Le;for(;ue!==ve;)Le=h(ue),o(ue),ue=Le;o(ve)},J=(ue,ve,Le)=>{const{bum:Ne,scope:Ue,job:$e,subTree:rt,um:Je,m:et,a:De,parent:Xe,slots:{__:Ke}}=ue;invalidateMount(et),invalidateMount(De),Ne&&invokeArrayFns(Ne),Xe&&isArray(Ke)&&Ke.forEach(Ye=>{Xe.renderCache[Ye]=void 0}),Ue.stop(),$e&&($e.flags|=8,Ce(rt,ue,ve,Le)),Je&&queuePostRenderEffect(Je,ve),queuePostRenderEffect(()=>{ue.isUnmounted=!0},ve),ve&&ve.pendingBranch&&!ve.isUnmounted&&ue.asyncDep&&!ue.asyncResolved&&ue.suspenseId===ve.pendingId&&(ve.deps--,ve.deps===0&&ve.resolve())},fe=(ue,ve,Le,Ne=!1,Ue=!1,$e=0)=>{for(let rt=$e;rt<ue.length;rt++)Ce(ue[rt],ve,Le,Ne,Ue)},Ee=ue=>{if(ue.shapeFlag&6)return Ee(ue.component.subTree);if(ue.shapeFlag&128)return ue.suspense.next();const ve=h(ue.anchor||ue.el),Le=ve&&ve[TeleportEndKey];return Le?h(Le):ve};let Ie=!1;const Me=(ue,ve,Le)=>{ue==null?ve._vnode&&Ce(ve._vnode,null,null,!0):f(ve._vnode||null,ue,ve,null,null,null,Le),ve._vnode=ue,Ie||(Ie=!0,flushPreFlushCbs(),flushPostFlushCbs(),Ie=!1)},Oe={p:f,um:Ce,m:Te,r:ke,mt:ce,mc:te,pc:Z,pbc:Y,n:Ee,o:t};return{render:Me,hydrate:void 0,createApp:createAppAPI(Me)}}function resolveChildrenNamespace({type:t,props:e},O){return O==="svg"&&t==="foreignObject"||O==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:O}function toggleRecurse({effect:t,job:e},O){O?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function needTransition(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(t,e,O=!1){const d=t.children,o=e.children;if(isArray(d)&&isArray(o))for(let a=0;a<d.length;a++){const u=d[a];let s=o[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=o[a]=cloneIfMounted(o[a]),s.el=u.el),!O&&s.patchFlag!==-2&&traverseStaticChildren(u,s)),s.type===Text&&(s.el=u.el),s.type===Comment&&!s.el&&(s.el=u.el)}}function getSequence(t){const e=t.slice(),O=[0];let d,o,a,u,s;const r=t.length;for(d=0;d<r;d++){const n=t[d];if(n!==0){if(o=O[O.length-1],t[o]<n){e[d]=o,O.push(d);continue}for(a=0,u=O.length-1;a<u;)s=a+u>>1,t[O[s]]<n?a=s+1:u=s;n<t[O[a]]&&(a>0&&(e[d]=O[a-1]),O[a]=d)}}for(a=O.length,u=O[a-1];a-- >0;)O[a]=u,u=e[u];return O}function locateNonHydratedAsyncRoot(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch(t,e,O){return doWatch(t,e,O)}function doWatch(t,e,O=EMPTY_OBJ){const{immediate:d,deep:o,flush:a,once:u}=O,s=extend({},O),r=e&&d||!e&&a!=="post";let n;if(isInSSRComponentSetup){if(a==="sync"){const j=useSSRContext();n=j.__watcherHandles||(j.__watcherHandles=[])}else if(!r){const j=()=>{};return j.stop=NOOP,j.resume=NOOP,j.pause=NOOP,j}}const l=currentInstance;s.call=(j,F,f)=>callWithAsyncErrorHandling(j,l,F,f);let c=!1;a==="post"?s.scheduler=j=>{queuePostRenderEffect(j,l&&l.suspense)}:a!=="sync"&&(c=!0,s.scheduler=(j,F)=>{F?j():queueJob(j)}),s.augmentJob=j=>{e&&(j.flags|=4),c&&(j.flags|=2,l&&(j.id=l.uid,j.i=l))};const h=watch$1(t,e,s);return isInSSRComponentSetup&&(n?n.push(h):r&&h()),h}function instanceWatch(t,e,O){const d=this.proxy,o=isString(t)?t.includes(".")?createPathGetter(d,t):()=>d[t]:t.bind(d,d);let a;isFunction(e)?a=e:(a=e.handler,O=e);const u=setCurrentInstance(this),s=doWatch(o,a.bind(d),O);return u(),s}function createPathGetter(t,e){const O=e.split(".");return()=>{let d=t;for(let o=0;o<O.length&&d;o++)d=d[O[o]];return d}}const getModelModifiers=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${camelize(e)}Modifiers`]||t[`${hyphenate(e)}Modifiers`];function emit(t,e,...O){if(t.isUnmounted)return;const d=t.vnode.props||EMPTY_OBJ;let o=O;const a=e.startsWith("update:"),u=a&&getModelModifiers(d,e.slice(7));u&&(u.trim&&(o=O.map(l=>isString(l)?l.trim():l)),u.number&&(o=O.map(looseToNumber)));let s,r=d[s=toHandlerKey(e)]||d[s=toHandlerKey(camelize(e))];!r&&a&&(r=d[s=toHandlerKey(hyphenate(e))]),r&&callWithAsyncErrorHandling(r,t,6,o);const n=d[s+"Once"];if(n){if(!t.emitted)t.emitted={};else if(t.emitted[s])return;t.emitted[s]=!0,callWithAsyncErrorHandling(n,t,6,o)}}function normalizeEmitsOptions(t,e,O=!1){const d=e.emitsCache,o=d.get(t);if(o!==void 0)return o;const a=t.emits;let u={},s=!1;if(!isFunction(t)){const r=n=>{const l=normalizeEmitsOptions(n,e,!0);l&&(s=!0,extend(u,l))};!O&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return!a&&!s?(isObject(t)&&d.set(t,null),null):(isArray(a)?a.forEach(r=>u[r]=null):extend(u,a),isObject(t)&&d.set(t,u),u)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:O,proxy:d,withProxy:o,propsOptions:[a],slots:u,attrs:s,emit:r,render:n,renderCache:l,props:c,data:h,setupState:j,ctx:F,inheritAttrs:f}=t,W=setCurrentRenderingInstance(t);let U,M;try{if(O.shapeFlag&4){const K=o||d,G=K;U=normalizeVNode(n.call(G,K,l,c,j,h,F)),M=s}else{const K=e;U=normalizeVNode(K.length>1?K(c,{attrs:s,slots:u,emit:r}):K(c,null)),M=e.props?s:getFunctionalFallthrough(s)}}catch(K){blockStack.length=0,handleError(K,t,1),U=createVNode(Comment)}let R=U;if(M&&f!==!1){const K=Object.keys(M),{shapeFlag:G}=R;K.length&&G&7&&(a&&K.some(isModelListener)&&(M=filterModelListeners(M,a)),R=cloneVNode(R,M,!1,!0))}return O.dirs&&(R=cloneVNode(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(O.dirs):O.dirs),O.transition&&setTransitionHooks(R,O.transition),U=R,setCurrentRenderingInstance(W),U}const getFunctionalFallthrough=t=>{let e;for(const O in t)(O==="class"||O==="style"||isOn(O))&&((e||(e={}))[O]=t[O]);return e},filterModelListeners=(t,e)=>{const O={};for(const d in t)(!isModelListener(d)||!(d.slice(9)in e))&&(O[d]=t[d]);return O};function shouldUpdateComponent(t,e,O){const{props:d,children:o,component:a}=t,{props:u,children:s,patchFlag:r}=e,n=a.emitsOptions;if(e.dirs||e.transition)return!0;if(O&&r>=0){if(r&1024)return!0;if(r&16)return d?hasPropsChanged(d,u,n):!!u;if(r&8){const l=e.dynamicProps;for(let c=0;c<l.length;c++){const h=l[c];if(u[h]!==d[h]&&!isEmitListener(n,h))return!0}}}else return(o||s)&&(!s||!s.$stable)?!0:d===u?!1:d?u?hasPropsChanged(d,u,n):!0:!!u;return!1}function hasPropsChanged(t,e,O){const d=Object.keys(e);if(d.length!==Object.keys(t).length)return!0;for(let o=0;o<d.length;o++){const a=d[o];if(e[a]!==t[a]&&!isEmitListener(O,a))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},O){for(;e;){const d=e.subTree;if(d.suspense&&d.suspense.activeBranch===t&&(d.el=t.el),d===t)(t=e.vnode).el=O,e=e.parent;else break}}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t,e=!1){isBlockTreeEnabled+=t,t<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,O,d,o,a){return setupBlock(createBaseVNode(t,e,O,d,o,a,!0))}function createBlock(t,e,O,d,o){return setupBlock(createVNode(t,e,O,d,o,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:O})=>(typeof t=="number"&&(t=""+t),t!=null?isString(t)||isRef(t)||isFunction(t)?{i:currentRenderingInstance,r:t,k:e,f:!!O}:t:null);function createBaseVNode(t,e=null,O=null,d=0,o=null,a=t===Fragment?0:1,u=!1,s=!1){const r={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:O,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:d,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return s?(normalizeChildren(r,O),a&128&&t.normalize(r)):O&&(r.shapeFlag|=isString(O)?8:16),isBlockTreeEnabled>0&&!u&&currentBlock&&(r.patchFlag>0||a&6)&&r.patchFlag!==32&&currentBlock.push(r),r}const createVNode=_createVNode;function _createVNode(t,e=null,O=null,d=0,o=null,a=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const s=cloneVNode(t,e,!0);return O&&normalizeChildren(s,O),isBlockTreeEnabled>0&&!a&&currentBlock&&(s.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=s:currentBlock.push(s)),s.patchFlag=-2,s}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:s,style:r}=e;s&&!isString(s)&&(e.class=normalizeClass(s)),isObject(r)&&(isProxy(r)&&!isArray(r)&&(r=extend({},r)),e.style=normalizeStyle(r))}const u=isString(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction(t)?2:0;return createBaseVNode(t,e,O,d,o,u,a,!0)}function guardReactiveProps(t){return t?isProxy(t)||isInternalObject(t)?extend({},t):t:null}function cloneVNode(t,e,O=!1,d=!1){const{props:o,ref:a,patchFlag:u,children:s,transition:r}=t,n=e?mergeProps(o||{},e):o,l={__v_isVNode:!0,__v_skip:!0,type:t.type,props:n,key:n&&normalizeKey(n),ref:e&&e.ref?O&&a?isArray(a)?a.concat(normalizeRef(e)):[a,normalizeRef(e)]:normalizeRef(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:s,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?u===-1?16:u|16:u,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:r,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return r&&d&&setTransitionHooks(l,r.clone(l)),l}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray(t)?createVNode(Fragment,null,t.slice()):isVNode(t)?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let O=0;const{shapeFlag:d}=t;if(e==null)e=null;else if(isArray(e))O=16;else if(typeof e=="object")if(d&65){const o=e.default;o&&(o._c&&(o._d=!1),normalizeChildren(t,o()),o._c&&(o._d=!0));return}else{O=32;const o=e._;!o&&!isInternalObject(e)?e._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},O=32):(e=String(e),d&64?(O=16,e=[createTextVNode(e)]):O=8);t.children=e,t.shapeFlag|=O}function mergeProps(...t){const e={};for(let O=0;O<t.length;O++){const d=t[O];for(const o in d)if(o==="class")e.class!==d.class&&(e.class=normalizeClass([e.class,d.class]));else if(o==="style")e.style=normalizeStyle([e.style,d.style]);else if(isOn(o)){const a=e[o],u=d[o];u&&a!==u&&!(isArray(a)&&a.includes(u))&&(e[o]=a?[].concat(a,u):u)}else o!==""&&(e[o]=d[o])}return e}function invokeVNodeHook(t,e,O,d=null){callWithAsyncErrorHandling(t,e,7,[O,d])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,e,O){const d=t.type,o=(e?e.appContext:t.appContext)||emptyAppContext,a={uid:uid++,vnode:t,type:d,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(d,o),emitsOptions:normalizeEmitsOptions(d,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:d.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:O,suspenseId:O?O.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=emit.bind(null,a),t.ce&&t.ce(a),a}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const t=getGlobalThis(),e=(O,d)=>{let o;return(o=t[O])||(o=t[O]=[]),o.push(d),a=>{o.length>1?o.forEach(u=>u(a)):o[0](a)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",O=>currentInstance=O),setInSSRSetupState=e("__VUE_SSR_SETTERS__",O=>isInSSRComponentSetup=O)}const setCurrentInstance=t=>{const e=currentInstance;return internalSetCurrentInstance(t),t.scope.on(),()=>{t.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1,O=!1){e&&setInSSRSetupState(e);const{props:d,children:o}=t.vnode,a=isStatefulComponent(t);initProps(t,d,a,e),initSlots(t,o,O||e);const u=a?setupStatefulComponent(t,e):void 0;return e&&setInSSRSetupState(!1),u}function setupStatefulComponent(t,e){const O=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,PublicInstanceProxyHandlers);const{setup:d}=O;if(d){pauseTracking();const o=t.setupContext=d.length>1?createSetupContext(t):null,a=setCurrentInstance(t),u=callWithErrorHandling(d,t,0,[t.props,o]),s=isPromise(u);if(resetTracking(),a(),(s||t.sp)&&!isAsyncWrapper(t)&&markAsyncBoundary(t),s){if(u.then(unsetCurrentInstance,unsetCurrentInstance),e)return u.then(r=>{handleSetupResult(t,r)}).catch(r=>{handleError(r,t,0)});t.asyncDep=u}else handleSetupResult(t,u)}else finishComponentSetup(t)}function handleSetupResult(t,e,O){isFunction(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t)}function finishComponentSetup(t,e,O){const d=t.type;t.render||(t.render=d.render||NOOP);{const o=setCurrentInstance(t);pauseTracking();try{applyOptions(t)}finally{resetTracking(),o()}}}const attrsProxyHandlers={get(t,e){return track(t,"get",""),t[e]}};function createSetupContext(t){const e=O=>{t.exposed=O||{}};return{attrs:new Proxy(t.attrs,attrsProxyHandlers),slots:t.slots,emit:t.emit,expose:e}}function getComponentPublicInstance(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,O){if(O in e)return e[O];if(O in publicPropertiesMap)return publicPropertiesMap[O](t)},has(e,O){return O in e||O in publicPropertiesMap}})):t.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=t=>t.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(t,e=!0){return isFunction(t)?t.displayName||t.name:t.name||e&&t.__name}function formatComponentName(t,e,O=!1){let d=getComponentName(e);if(!d&&e.__file){const o=e.__file.match(/([^/\\]+)\.\w+$/);o&&(d=o[1])}if(!d&&t&&t.parent){const o=a=>{for(const u in a)if(a[u]===e)return u};d=o(t.components||t.parent.type.components)||o(t.appContext.components)}return d?classify(d):O?"App":"Anonymous"}function isClassComponent(t){return isFunction(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup),version="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:t=>t})}catch{}const unsafeToTrustedHTML=policy?t=>policy.createHTML(t):t=>t,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,O)=>{e.insertBefore(t,O||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,O,d)=>{const o=e==="svg"?doc.createElementNS(svgNS,t):e==="mathml"?doc.createElementNS(mathmlNS,t):O?doc.createElement(t,{is:O}):doc.createElement(t);return t==="select"&&d&&d.multiple!=null&&o.setAttribute("multiple",d.multiple),o},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,O,d,o,a){const u=O?O.previousSibling:e.lastChild;if(o&&(o===a||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),O),!(o===a||!(o=o.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(d==="svg"?`<svg>${t}</svg>`:d==="mathml"?`<math>${t}</math>`:t);const s=templateContainer.content;if(d==="svg"||d==="mathml"){const r=s.firstChild;for(;r.firstChild;)s.appendChild(r.firstChild);s.removeChild(r)}e.insertBefore(s,O)}return[u?u.nextSibling:e.firstChild,O?O.previousSibling:e.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(t,e,O){const d=t[vtcKey];d&&(e=(e?[e,...d]:[...d]).join(" ")),e==null?t.removeAttribute("class"):O?t.setAttribute("class",e):t.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(t,e,O){const d=t.style,o=isString(O);let a=!1;if(O&&!o){if(e)if(isString(e))for(const u of e.split(";")){const s=u.slice(0,u.indexOf(":")).trim();O[s]==null&&setStyle(d,s,"")}else for(const u in e)O[u]==null&&setStyle(d,u,"");for(const u in O)u==="display"&&(a=!0),setStyle(d,u,O[u])}else if(o){if(e!==O){const u=d[CSS_VAR_TEXT];u&&(O+=";"+u),d.cssText=O,a=displayRE.test(O)}}else e&&t.removeAttribute("style");vShowOriginalDisplay in t&&(t[vShowOriginalDisplay]=a?d.display:"",t[vShowHidden]&&(d.display="none"))}const importantRE=/\s*!important$/;function setStyle(t,e,O){if(isArray(O))O.forEach(d=>setStyle(t,e,d));else if(O==null&&(O=""),e.startsWith("--"))t.setProperty(e,O);else{const d=autoPrefix(t,e);importantRE.test(O)?t.setProperty(hyphenate(d),O.replace(importantRE,""),"important"):t[d]=O}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const O=prefixCache[e];if(O)return O;let d=camelize(e);if(d!=="filter"&&d in t)return prefixCache[e]=d;d=capitalize(d);for(let o=0;o<prefixes.length;o++){const a=prefixes[o]+d;if(a in t)return prefixCache[e]=a}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,O,d,o,a=isSpecialBooleanAttr(e)){d&&e.startsWith("xlink:")?O==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,O):O==null||a&&!includeBooleanAttr(O)?t.removeAttribute(e):t.setAttribute(e,a?"":isSymbol(O)?String(O):O)}function patchDOMProp(t,e,O,d,o){if(e==="innerHTML"||e==="textContent"){O!=null&&(t[e]=e==="innerHTML"?unsafeToTrustedHTML(O):O);return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const s=a==="OPTION"?t.getAttribute("value")||"":t.value,r=O==null?t.type==="checkbox"?"on":"":String(O);(s!==r||!("_value"in t))&&(t.value=r),O==null&&t.removeAttribute(e),t._value=O;return}let u=!1;if(O===""||O==null){const s=typeof t[e];s==="boolean"?O=includeBooleanAttr(O):O==null&&s==="string"?(O="",u=!0):s==="number"&&(O=0,u=!0)}try{t[e]=O}catch{}u&&t.removeAttribute(o||e)}function addEventListener(t,e,O,d){t.addEventListener(e,O,d)}function removeEventListener(t,e,O,d){t.removeEventListener(e,O,d)}const veiKey=Symbol("_vei");function patchEvent(t,e,O,d,o=null){const a=t[veiKey]||(t[veiKey]={}),u=a[e];if(d&&u)u.value=d;else{const[s,r]=parseName(e);if(d){const n=a[e]=createInvoker(d,o);addEventListener(t,s,n,r)}else u&&(removeEventListener(t,s,u,r),a[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let d;for(;d=t.match(optionsModifierRE);)t=t.slice(0,t.length-d[0].length),e[d[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const O=d=>{if(!d._vts)d._vts=Date.now();else if(d._vts<=O.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(d,O.value),e,5,[d])};return O.value=t,O.attached=getNow(),O}function patchStopImmediatePropagation(t,e){if(isArray(e)){const O=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{O.call(t),t._stopped=!0},e.map(d=>o=>!o._stopped&&d&&d(o))}else return e}const isNativeOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,patchProp=(t,e,O,d,o,a)=>{const u=o==="svg";e==="class"?patchClass(t,d,u):e==="style"?patchStyle(t,O,d):isOn(e)?isModelListener(e)||patchEvent(t,e,O,d,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,d,u))?(patchDOMProp(t,e,d),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(t,e,d,u,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!isString(d))?patchDOMProp(t,camelize(e),d,a,e):(e==="true-value"?t._trueValue=d:e==="false-value"&&(t._falseValue=d),patchAttr(t,e,d,u))};function shouldSetAsProp(t,e,O,d){if(d)return!!(e==="innerHTML"||e==="textContent"||e in t&&isNativeOn(e)&&isFunction(O));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=t.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return isNativeOn(e)&&isString(O)?!1:e in t}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:O}=e;return e.mount=d=>{const o=normalizeContainer(d);if(!o)return;const a=e._component;!isFunction(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const u=O(o,!1,resolveRootNamespace(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),u},e};function resolveRootNamespace(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function normalizeContainer(t){return isString(t)?document.querySelector(t):t}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aliplayerMin={exports:{}};/*! aliyun-aliplayer - v2.32.0 - 2025-07-02 19.16.46 */var hasRequiredAliplayerMin;function requireAliplayerMin(){return hasRequiredAliplayerMin||(hasRequiredAliplayerMin=1,function(module,exports){(function(t){module.exports=t()})(function(){return function t(e,O,d){function o(s,r){if(!O[s]){if(!e[s]){var n=typeof commonjsRequire=="function"&&commonjsRequire;if(!r&&n)return n(s,!0);if(a)return a(s,!0);throw(r=new Error("Cannot find module '"+s+"'")).code="MODULE_NOT_FOUND",r}n=O[s]={exports:{}},e[s][0].call(n.exports,function(l){return o(e[s][1][l]||l)},n,n.exports,t,e,O,d)}return O[s].exports}for(var a=typeof commonjsRequire=="function"&&commonjsRequire,u=0;u<d.length;u++)o(d[u]);return o}({1:[function(t,e,O){var d,o,a=Object.defineProperty,u=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=(He,qe,ze)=>qe in He?a(He,qe,{enumerable:!0,configurable:!0,writable:!0,value:ze}):He[qe]=ze,h=(He,qe)=>{for(var ze in qe=qe||{})n.call(qe,ze)&&c(He,ze,qe[ze]);if(r)for(var ze of r(qe))l.call(qe,ze)&&c(He,ze,qe[ze]);return He},j=(He,qe,ze)=>(c(He,typeof qe!="symbol"?qe+"":qe,ze),ze),F=(Object.defineProperties(O,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),{exports:{}}),f={exports:{}};function W(){var He,qe,ze;return o||(o=1,Date.now=Date.now||function(){return new Date().getTime()},He=Date.now(),ze={noop:qe=function(){},warn:(()=>{var me=typeof console=="object"?console.warn:qe;try{var ne={warn:me};ne.warn.call(ne)}catch{return qe}return me})(),key:"__bl",selfErrKey:"ARMS_SDK_ERROR",selfErrPage:"ARMSSDK",win:typeof window=="object"&&window.document?window:void 0,regionMap:{cn:"https://arms-retcode.aliyuncs.com/r.png?",sg:"https://arms-retcode-sg.aliyuncs.com/r.png?",sg_2:"https://retcode-sg-lazada.arms.aliyuncs.com/r.png?",daily:"http://arms-retcode-daily.alibaba.net/r.png?",daily_2:"https://arms-retcode-daily.alibaba.net/r.png?",daily_3:"http://arms-retcode-daily.aliyun.test/r.png?",us:"https://retcode-us-west-1.arms.aliyuncs.com/r.png?",tw:"https://arms-retcode.orientalgame.com.tw/r.png?",tw_sg:"https://arms-retcode-sg.orientalgame.com.tw/r.png?",hz_finance:"https://arms-retcode-hz-finance.aliyuncs.com/r.png?"},defaultImgUrl:"https://arms-retcode.aliyuncs.com/r.png?",createObject:function(me){var ne;return Object.create?Object.create(me):((ne=function(){}).prototype=me,new ne)},each:function(me,ne){var pe=0,le=me.length;if(this.T(me,"Array"))for(;pe<le&&ne.call(me[pe],me[pe],pe)!==!1;pe++);else for(pe in me)if(ne.call(me[pe],me[pe],pe)===!1)break;return me},safetyCall:function(me,ne,pe){if(typeof me!="function")return pe;try{return me.apply(this,ne)}catch{return pe}},T:function(me,ne){return me=Object.prototype.toString.call(me).substring(8).replace("]",""),ne?me===ne:me},duration:function(){var me=Date;try{performance&&this.T(performance.now,"Function")&&(me=performance)}catch{me=Date}var ne=me.now();return function(){return Math.round(me.now()-ne)}},filterByRule:function(){var me,ne,pe,le,_e,Re=[].slice.call(arguments),xe=Re.length;return xe<2?Re[0]:(me=Re[xe-1],(ne=Re[0])?me?(le=(pe=this).T(me),_e=Re.slice(0,xe-1),le==="Function"?pe.safetyCall(me,_e,ne):le==="Array"?(this.each(me,function(Ae){_e[0]=ne=pe.filterByRule.apply(pe,[].concat(_e,Ae))}),ne):le==="Object"?ne.replace(me.rule,me.target||""):ne.replace(me,"")):ne:"")},ignoreByRule:function(me,ne){if(!me||!ne)return!1;if((this.isString(ne)||ne.source||this.T(ne)==="Function")&&(ne=[ne]),!this.isArray(ne))return this.warn("[arms] invalid rules of ignore config, (list of) String/RegExp/Funcitons are available"),!1;for(var pe,le=[],_e=0,Re=ne.length;_e<Re;_e++)if(pe=ne[_e],this.isString(pe))le.push(pe.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"));else if(pe&&pe.source)le.push(pe.source);else if(pe&&this.T(pe)==="Function"&&this.safetyCall(pe,[me],!1)===!0)return!0;var xe=new RegExp(le.join("|"),"i");return!!(le.length&&xe.test&&xe.test(me))},J:function(me){if(!me||typeof me!="string")return me;var ne=null;try{ne=JSON.parse(me)}catch{}return ne},pick:function(me){return me===1||Math.ceil(Math.random()*me)===1},verifyConfig:function(me){var ne,pe;return"sample"in me&&(1<=(pe=0<(pe=(pe=ne=me.sample)&&/^\d+(\.\d+)?%$/.test(ne)?parseInt(100/parseFloat(ne)):pe)&&pe<1?parseInt(1/pe):pe)&&pe<=100?me.sample=pe:delete me.sample),me},on:function(me,ne,pe,le,_e){return me.addEventListener?(_e=_e||!1,me.addEventListener(ne,function Re(xe){le&&me.removeEventListener(ne,Re,_e),pe.call(this,xe)},_e)):me.attachEvent&&me.attachEvent("on"+ne,function Re(xe){le&&me.detachEvent("on"+ne,Re),pe.call(this,xe)}),this},off:function(me,ne,pe){return pe&&(me.removeEventListener?me.removeEventListener(ne,pe):me.detachEvent&&me.detachEvent(ne,pe)),this},delay:function(me,ne){return ne===-1?(me(),null):setTimeout(me,ne||0)},ext:function(me){for(var ne=1,pe=arguments.length;ne<pe;ne++){var le,_e=arguments[ne];for(le in _e)Object.prototype.hasOwnProperty.call(_e,le)&&(me[le]=_e[le])}return me},sub:function(me,ne){var pe={};return this.each(me,function(le,_e){ne.indexOf(_e)!==-1&&(pe[_e]=le)}),pe},uu:function(){for(var me,ne,pe=20,le=new Array(pe),_e=Date.now().toString(36).split("");0<pe--;)ne=(me=36*Math.random()|0).toString(36),le[pe]=me%3?ne:ne.toUpperCase();for(var Re=0;Re<8;Re++)le.splice(3*Re+2,0,_e[Re]);return le.join("")},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(me){var ne=16*Math.random()|0;return(me==="x"?ne:3&ne|8).toString(16)})},seq:function(){return(He++).toString(36)},decode:function(me){try{me=decodeURIComponent(me)}catch{}return me},encode:function(me,ne){try{me=ne?encodeURIComponent(me).replace(/\(/g,"%28").replace(/\)/g,"%29"):encodeURIComponent(me)}catch{}return me},serialize:function(me){var ne,pe=[];for(ne in me=me||{})Object.prototype.hasOwnProperty.call(me,ne)&&me[ne]!==void 0&&pe.push(ne+"="+this.encode(me[ne],ne==="msg"));return pe.join("&")},checkAPI:function(me,ne){var pe;return!(!me||typeof me!="string"||(!(pe=/arms-retcode[\w-]*\.aliyuncs/.test(me))&&ne?/(alicdn\.com)|(mmstat\.com)/.test(me):pe))},checkAutoError:function(me){return!(!me||!me.message||/failed[\w\s]+fetch/i.test(me.message))},cutUrlSearch:function(me){return me&&typeof me=="string"?me.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},removeUrlSearch:function(me){return me&&typeof me=="string"?me.replace(/\?.*$/,""):""},createFakeToString:function(me){return function(){return me+"() { [native code] }"}},checkSameOrigin:function(me,ne){var pe;return!(!ne||!me||(pe="//"+ne.split("/")[2],me!==ne&&me.slice(0,ne.length+1)!==ne+"/"&&me!==pe&&me.slice(0,pe.length+1)!==pe+"/"&&/^(\/\/|http:|https:).*/.test(me)))},getRandIP:function(){for(var me=[],ne=0;ne<4;ne++){var pe=Math.floor(256*Math.random());me[ne]=(15<pe?"":"0")+pe.toString(16)}return me.join("").replace(/^0/,"1")},getSortNum:function(me){return me?1e3<=(me+=1)&&me<=9999?me:me<1e3?me+1e3:me%1e4+1e3:1e3},getRandNum:function(me){return!me||typeof me!="string"||me.length<5?this.getNum(5):me.substring(me.length-5)},getNum:function(me){for(var ne=[],pe=0;pe<me;pe++){var le=Math.floor(16*Math.random());ne[pe]=le.toString(16)}return ne.join("")},getCurDomain:function(){return location&&location.hostname||""},getSrcType:function(me,ne){var pe=location&&location.host||"";if(!pe)return"";var le=new URL(me).host;if(le===pe)return"self";for(var _e=0;_e<ne.length;_e+=1)if(le.includes(ne[_e]))return"cdn";return"others"},parseFetchHeaders:function(me){if(!me)return{};var ne={};try{if(typeof me.keys=="function")for(var pe=me.keys(),le=pe.next();!le.done;){var _e=le.value;ne[_e]=me.get(_e),le=pe.next()}else ne=me}catch{ne={}}return ne},parseXhrHeaders:function(me){if(!me&&typeof me!="string")return{};var ne={};try{ne=me.split(`\r
`).reduce(function(pe,le){return le=le.split(": "),pe[le[0]]=le[1],pe},{})}catch{ne={}}return ne},getQuerys:function(me){if(!me)return"";var ne,pe,le,_e={};try{var Re=[];if(0<(Re=0<=me.indexOf("?")?me.substring(me.indexOf("?")+1,me.length).split("&"):Re).length)for(var xe in Re)pe=(ne=Re[xe].split("="))[0],le=ne[1],_e[pe]=le}catch{_e={}}return _e},getURL:function(me){if(!me)return null;var ne={},_e=me.length,pe=me.indexOf("://");if(pe<0)return null;ne.protocol=me.substring(0,pe+1);var Re=me.indexOf("#"),le=me.indexOf("?"),_e=(Re<0&&(Re=_e),le<0&&(le=Re),ne.search=me.substring(le,Re).substring(0,1e3),me.substring(pe+3,le)),Re=_e.indexOf("/");return Re<0&&(Re=_e.length),ne.domain=_e.substring(0,Re).split(":")[0],ne.path=_e.substring(Re,_e.length).substring(0,1e3),ne},getResType:function(me,le){if(-1<["script","img","other"].indexOf(me))return me;if(-1<["video"].indexOf(me))return"media";if(-1<["document","iframe"].indexOf(me))return"doc";var le=le?this.getURL(le):null,pe=le&&le.path?le.path.lastIndexOf("."):-1,le=(0<pe?le.path.substr(pe+1):"").toLowerCase();if(le){if(-1<["eot","woff","woff2","ttf"].indexOf(le))return"font";if(le==="css")return"css";if(le==="js")return"script"}return-1<["fetch","xmlhttprequest","beacon"].indexOf(me)?"api":"others"},areInOrder:function(){for(var me=1;me<arguments.length;me+=1)if(arguments[me]<arguments[me-1])return!1;return!0},getFetchSnapshot:function(me,ne,pe){try{var le=(me&&typeof me[0]!="string"?me[0].url:me[0])||"",_e=(me&&typeof me[0]!="string"?me[0]:me[1])||{},Re=_e.method.toUpperCase()==="POST"?_e.body:this.getQuerys(le),xe={originApi:le,method:_e.method||"unknown",params:Re,response:ne||"",reqHeaders:this.parseFetchHeaders(_e.headers||null),resHeaders:this.parseFetchHeaders(pe)},Ae=JSON&&JSON.stringify(xe)||"{}"}catch{Ae="{}"}return Ae},getXhrSnapshot:function(me,ne,pe){if(!me||!ne||!pe)return{};var le,_e;try{var Re="";pe.responseType===""||pe.responseType==="text"?Re=pe.responseText:pe.responseType==="document"&&(Re=pe.responseXML),le={originApi:me,method:ne,params:this.getQuerys(me),response:Re,reqHeaders:{},resHeaders:this.parseXhrHeaders(typeof pe.getAllResponseHeaders=="function"&&pe.getAllResponseHeaders()||"")},_e=JSON&&JSON.stringify(le)||"{}"}catch{_e="{}"}return _e},isRobot:function(){var me=["nuhk","googlebot/","googlebot-image","yammybot","openbot","slurp","msnbot","ask jeeves/teoma","ia_archiver","baiduspider","bingbot/","adsbot"];if(navigator&&typeof navigator.userAgent=="string")try{for(var ne=navigator.userAgent.toLowerCase(),pe=0;pe<me.length;pe++){var le=me[pe];if(0<=ne.lastIndexOf(le))return!0}}catch{this.warn("[arms] useragent parse error")}return!1},isFunction:function(me){return typeof me=="function"},isPlainObject:function(me){return Object.prototype.toString.call(me)==="[object Object]"},isString:function(me){return Object.prototype.toString.call(me)==="[object String]"},isArray:function(me){return Object.prototype.toString.call(me)==="[object Array]"},joinRegExp:function(me){for(var ne,pe=[],le=0,_e=me.length;le<_e;le++)ne=me[le],this.isString(ne)?pe.push(ne.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):ne&&ne.source&&pe.push(ne.source);return new RegExp(pe.join("|"),"i")},reWriteMethod:function(me,ne,pe){var le;me!==null&&(le=me[ne],me[ne]=pe(le))},checkSDKError:function(me,ne){return!(!me&&!ne||!new RegExp(this.selfErrKey,"i").test(me)&&!this.ignoreByRule(ne,[/retcode.alicdn.com\/retcode\/bl.js/,/g.alicdn.com\/retcode\/cloud-sdk\/bl.js/,/laz-g-cdn.alicdn.com\/retcode\/cloud-sdk\/bl.js/,/local.taobao.com:8880\/build\/bl/]))},sdkError:function(me){return{msg:me,message:this.selfErrKey}},dealParam:function(me,ne,pe){var le={};try{le=this.isPlainObject(me)?this.ext({key:me.key||"default",val:me.val||me.value||pe},me,{begin:Date.now()}):{key:me||"default",val:ne||pe,begin:Date.now()}}catch(_e){this.warn("[retcode] baseLog error: "+_e)}return le}},d=ze),d}var U,M,R,K,G={exports:{}},X={exports:{}};function z(){var He,qe,ze,me,ne,pe;return R||(R=1,He=W(),M||(M=1,pe=W(),U=function(le,_e,Re){typeof le=="object"&&(le=pe.serialize(le)),window&&window.navigator&&typeof window.navigator.sendBeacon=="function"?window.navigator.sendBeacon(_e+le+(Re?"&post_res=":""),Re||"&post_res="):pe.warn("[arms] navigator.sendBeacon not surported")}),qe=U,ze="aokcdqn3ly@e629dabd48a9933",me=function(le,_e){var Re,xe,Ae;if(_e.t!=="error"||!(Re=le.requestQueue[0])||Re.t!=="error"||_e.msg!==Re.msg)return _e.t==="behavior"?0<(xe=le.requestQueue&&le.requestQueue.length)&&le.requestQueue[xe-1].t==="behavior"?(Ae=_e.behavior||[],le.requestQueue[xe-1].behavior.concat(Ae)):le.requestQueue.push(_e):le.requestQueue.unshift(_e),le.onReady(function(){le.requestTimmer=He.delay(function(){le.clear()},le.requestQueue[0]&&le.requestQueue[0].t==="error"?3e3:-1)}),!0;_e.times=Re.times+1,le.requestQueue[0]=_e},(ne=function(le){return this.ver="1.8.36-beta.12",this._conf=He.ext({},ne.dftCon),this.sampleCache={},this.requestQueue=[],this.selfQueue=[],this.sdkFlag=!0,this.hash=He.seq(),this.resetPageview(),this.setConfig(le),this.rip=He.getRandIP(),this.record=999,this["EagleEye-TraceID"]=this.getTraceId()["EagleEye-TraceID"],this._common={},this}).dftCon={sample:1,pvSample:1,tag:"",imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",region:null,ignore:{ignoreUrls:[],ignoreApis:[],ignoreErrors:[/^Script error\.?$/],ignoreResErrors:[],ignoreResources:[/\/(bl|wl)(.debug)?.js$/]},release:void 0,environment:"prod",beforeReport:null,parseTraceId:null},ne.prototype={constructor:ne,onReady:function(le){return le()},getPage:function(){var le=this._conf.page;return He.safetyCall(le,[],le+"")},setPage:function(){},setConfig:function(le){le&&typeof le=="object"&&(He.verifyConfig(le),le=this.setImgUrl(le),this._conf=He.ext({},this._conf,le))},setImgUrl:function(le){var _e=le.region,Re=le.imgUrl;return _e?(_e=He.regionMap[_e],le.imgUrl=_e||He.defaultImgUrl):Re&&(le.imgUrl=Re),le},checkImgUrl:function(){return!0},sendRequest:function(){},sendBeacon:function(le,_e,Re){qe(le,_e||this.getConfig("imgUrl"),Re)},postData:function(){},commonInfo:function(){return{}},setCommonInfo:function(le){le&&typeof le=="object"&&(this._common=He.ext({},this._common,le))},resetPageview:function(){this.pageview=He.uu(),this.sBegin=Date.now()},getUsername:function(){if(!this.username){var le=this._conf,le=le&&le.setUsername;if(typeof le=="function")try{var _e=le();typeof _e=="string"&&(_e=_e.substr(0,40),this.username=_e)}catch(Re){He.warn("[arms] setUsername fail",Re)}}return this.username},getTraceId:function(){var Re=this.rip,le=Date.now(),_e=He.getSortNum(this.record),Re=Re+le+_e+He.getRandNum(this._conf.pid);return this["EagleEye-TraceID"]=Re,this.record=_e,{"EagleEye-TraceID":Re}},getUberTraceId:function(le){var xe=this.rip,Ae=Date.now(),_e=He.getSortNum(this.record),Re=He.getRandNum(this._conf.pid),xe=xe+Ae+_e+He.getNum(2)+Re,Ae=xe.substring(0,16);return le=le?"1":"0",xe[0]==="0"&&(xe[0]="1"),xe[16]==="0"&&(xe[16]="1"),{"uber-trace-id":xe+":"+Ae+":0:"+le,traceId:xe}},getB3TraceId:function(le){var xe=this.rip,Ae=Date.now(),_e=He.getSortNum(this.record),Re=He.getRandNum(this._conf.pid),xe=xe+Ae+_e+He.getNum(2)+Re,Ae=xe.substring(0,16);return le=le?"1":"0",xe[0]==="0"&&(xe[0]="1"),xe[16]==="0"&&(xe[16]="1"),{b3:xe+"-"+Ae+"-"+le+"-0","X-B3-TraceId":xe,"X-B3-ParentSpanId":"0","X-B3-SpanId":Ae,"X-B3-Sampled":le}},getPageviewId:function(){return{"EagleEye-SessionID":this.pageview}},getConfig:function(le){return le?this._conf[le]:He.ext({},this._conf)},sampling:function(le){return le===1||(typeof this.sampleCache[le]=="boolean"||(this.sampleCache[le]=He.pick(le)),this.sampleCache[le])},clear:function(le){var _e;clearTimeout(this.requestTimmer),this.requestTimmer=null;for(var Re,xe=this._conf&&typeof this._conf.sendRequest=="function";_e=this.requestQueue.pop();)_e.t==="res"?this.postData(_e,"res"):_e.t==="error"?this.postData(_e,"err"):_e.t==="api"?this.postData(_e,"apiSnapshot"):_e.t==="behavior"?this.postData(_e,"behavior"):_e.t==="health"&&!xe&&window&&window.navigator&&typeof window.navigator.sendBeacon=="function"?this.sendBeacon(_e):_e.t==="resource"&&!xe&&window&&window.navigator&&typeof window.navigator.sendBeacon=="function"?(Re=JSON.stringify({resource:_e.resource}),delete _e.resource,this.sendBeacon(_e,null,Re)):_e.t==="resource"?this.postData(_e,"resource"):this.sendRequest(_e);return le&&this.clearSelf(),this},clearSelf:function(){var le;for(clearTimeout(this.Timmer),this.Timmer=null;le=this.selfQueue.pop();)this.postData(le,"err");return this},_lg:function(le,_e,Re,xe){var Ae=this,Ve=Ae._conf,We=Ae.getPage(),Qe=Ve.ignore||{},je=Qe.ignoreErrors,Fe=Qe.ignoreResErrors,Ze=Qe.ignoreUrls,Qe=Qe.ignoreApis;if(Ae._isRobot||He.ignoreByRule(We,Ze)||He.ignoreByRule(He.decode(We),Ze)||le==="error"&&(He.ignoreByRule(_e.msg,je)||He.ignoreByRule(He.decode(_e.msg),je))||le==="resourceError"&&(He.ignoreByRule(_e.src,Fe)||He.ignoreByRule(He.decode(_e.src),Fe))||le==="api"&&(He.ignoreByRule(_e.api,Qe)||He.ignoreByRule(He.decode(_e.api),Qe))||!Ae.checkImgUrl(Ve.imgUrl)||!_e||Ve.disabled||!Ve.pid||xe===0)return Ae;if(Ze=_e.dl,delete _e.dl,_e=He.ext({t:le,times:1,page:We,tag:Ve.tag||"",release:Ve.release||"",environment:Ve.environment,begin:Date.now(),c1:Ve.c1,c2:Ve.c2,c3:Ve.c3},_e,Ae.commonInfo(),Ae._common,{pid:Ve.pid,_v:Ae.ver,pv_id:Ae.pageview,username:Ae.getUsername(),sampling:Re||1,dl:Ze,z:He.seq()}),He.T(Ve.beforeReport)==="Function")try{if(!(_e=Ve.beforeReport(_e)))return Ae}catch{return Ae}return xe!==1&&Re&&!Ae.sampling(Re)?Ae:me(Ae,_e)},_self:function(le,_e,Re){var xe=this,Ae=xe._conf;if(le!=="error"||!xe.checkImgUrl(Ae.imgUrl)||!_e||Ae.disabled||!Ae.pid||Re&&!xe.sampling(Re))return xe;if(_e=He.ext({t:le,times:1,page:He.selfErrPage,tag:Ae.pid,begin:Date.now()},_e,{pid:ze,_v:xe.ver,sampling:Re||1,z:He.seq()}),le=xe.selfQueue[0],le){le.times++;try{le.err&&_e.err&&le.err.msg_raw&&_e.err.msg_raw&&le.err.msg_raw.split("&").indexOf(_e.err.msg_raw)<0&&le.err.msg_raw.length<1e3&&(le.err.msg_raw+="&"+_e.err.msg_raw)}catch{}}else xe.selfQueue.unshift(_e),xe.onReady(function(){xe.sdkFlag&&(xe.sdkFlag=!1,xe.Timmer=He.delay(function(){xe.clearSelf()},1e4))})},custom:function(le,_e){var Re,xe;return le&&typeof le=="object"&&(Re=!1,xe={begin:Date.now()},He.each(le,function(Ae,Ve){return(Re=Ve&&Ve.length<=20)||He.warn("[retcode] invalid key: "+Ve),xe["x-"+Ve]=Ae,Re}),Re)?this._lg("custom",xe,_e||1):this}},X.exports=ne),X.exports}var te,ee={exports:{}},Y,ie,ae,de={exports:{}};function ce(){var He;return ae||(ae=1,He=W(),ie=function(qe,ze){function me(Ae,Ve,We){var je;Ae!==null&&(je=Ae[Ve],Ae[Ve]=We(je))}function ne(Ae,Ve){return function(We){if(We&&We!==xe){var je;xe=We;try{je=We.target}catch{je="<unknown>"}je.length!==0&&(We={type:"ui.".concat(Ae),data:{message:(Fe=>{if(!Fe||Fe.nodeType!==1)return"";for(var Ze=Fe||null,Qe=[],nt=0,Se=0,be="";Ze&&nt++<5&&!((be=(Pe=>{var Be,Ge,ot,ft,lt=[];if(!Pe||typeof Pe.tagName!="string")return"";if(lt.push(Pe.tagName.toLowerCase()),typeof Pe.id=="string"&&lt.push("#".concat(Pe.id)),typeof(Be=Pe.className)=="string")for(Ge=Be.split(/\s+/),st=0;st<Ge.length;st++)lt.push(".".concat(Ge[st]));for(var ht=["type","name","title","alt","data-arms-attr"],st=0;st<ht.length;st++)typeof(ft=Pe.getAttribute(ot=ht[st]))=="string"&&lt.push("[".concat(ot,'="').concat(ft,'"]'));return lt.join("")})(Ze))==="html"||1<nt&&80<=Se+3*Qe.length+be.length);)Qe.push(be),Se+=be.length,Ze=Ze.parentNode;return Qe.reverse().join(" > ")})(je)},timestamp:Date.now()},Ae==="click"?le&&le.addBehavior(We):Ae==="keypress"&&(Re||le&&le.addBehavior(We),clearTimeout(Re),Re=setTimeout(function(){Re=void 0},100)))}}}var pe=[],le=null,_e=ze&&ze.location&&ze.location.href,Re=void 0,xe=null;He.ext(qe.prototype,{addBehavior:function(Ae){if(this.getConfig("behavior")&&Ae&&typeof Ae=="object"){var Ve={},We=Ae.data||{};if(Ae.type)Ve=We;else{if(typeof We.name!="string"||typeof We.message!="string")return;Ve.name=We.name.substr(0,20),Ve.message=We.message.substr(0,200)}return Ve.message&&(Ve.message=He.encode(Ve.message)),We={type:Ae.type||"custom",data:Ve||{},timestamp:Ae.timestamp||Date.now(),page:Ae.page||ze&&ze.location&&ze.location.pathname},pe.push(We),pe=pe.slice(-100)}},getBehavior:function(){return pe||[]},setBehavior:function(Ae){return pe=Ae||pe},reportBehavior:function(Ae){var Ve=this;Ve.getConfig("behavior")&&(Ve.sendBhTimer&&(clearTimeout(Ve.sendBhTimer),Ve.sendBhTimer=void 0),Ve.sendBhTimer=setTimeout(function(){pe&&0<pe.length&&(Ve.behavior(pe),pe=[],Ve.sendBhTimer=void 0,Ae)&&typeof Ae=="function"&&Ae()},0))},initBehavior:function(){if(!this.hasInitBehavior&&!le){try{document&&document.referrer&&document.location&&(be=document.referrer,Pe=document.location.href,be!=="")&&(_e=Pe,le)&&le.addBehavior({type:"navigation",data:{from:be,to:Pe}}),ze&&ze.document&&ze.document.addEventListener&&(ze.document.addEventListener("click",ne("click"),!1),ze.document.addEventListener("keypress",ne("keypress"),!1)),nt=(nt=ze&&ze.chrome)&&nt.app&&nt.app.runtime,Se="history"in ze&&!!ze.history.pushState&&!!ze.history.replaceState,!nt&&Se&&(Ze=function(Be,Ge){le&&le.addBehavior({type:"navigation",data:{from:Be,to:Ge}}),_e=Ge},Qe=ze.onpopstate,ze.onpopstate=function(){for(var Be=arguments.length,Ge=new Array(Be),ot=0;ot<Be;ot++)Ge[ot]=arguments[ot];var ft=ze.location.href;if(Ze(_e,ft),Qe)return Qe.apply(this,Ge)},me(ze.history,"pushState",nt=function(Be){return function(){for(var Ge=arguments.length,ot=new Array(Ge),ft=0;ft<Ge;ft++)ot[ft]=arguments[ft];var lt=2<ot.length?ot[2]:void 0;return lt&&Ze(_e,String(lt)),Be.apply(this,ot)}}),me(ze.history,"replaceState",nt));var Ae=this.getConfig("enableConsole");if(Ae){var Ve=Ae;if(ze&&ze.console){var We=["debug","info","warn","log","error","assert"];He.isArray(Ve)&&(We=Ve);for(var je=0;je<We.length;je++){var Fe=We[je];Fe&&He.isString(Fe)&&ze.console[Fe]&&typeof ze.console[Fe]=="function"&&me(ze.console,Fe,function(Be){var Ge=Fe;return function(){for(var ot=arguments.length,ft=new Array(ot),lt=0;lt<ot;lt++)ft[lt]=arguments[lt];if(le&&le.addBehavior({type:"console",data:{level:Ge,message:ft}}),Ge==="error")for(var ht=0;ht<ft.length;ht++){var st=ft[ht];st&&st.message&&st.stack&&le&&le.errorHandler(new ErrorEvent("error",{error:st,message:st.message}))}Be&&Function.prototype.apply.call(Be,ze.console,ft)}})}}}}catch(Be){He.warn("[arms] error in initBehavior",Be)}(le=this).hasInitBehavior=!0}var Ze,Qe,nt,Se,be,Pe;return this}})}),ie}var ge,he,se,Z,oe,re,Te,Ce,ke,ye,J,fe,Ee,Ie,Me,Oe,we,ue={};function ve(){return ge||(ge=1,ue.TIMING_KEYS=["startTime","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","","domInteractive","","domContentLoadedEventEnd","","loadEventStart","","msFirstPaint","secureConnectionStart","redirectStart","redirectEnd"]),ue}function Le(){return Te||(Te=1,re=function(He,qe,ze){function me(be,Pe,Be,Ge,ot){if(Pe===void 0){var ft;if(!Se[be]){lt=new RegExp(be+"=([^;]+)");try{ft=lt.exec(ze.cookie)}catch(ht){return xe.warn("[retcode] can not get cookie:",ht),null}ft&&(Se[be]=ft[1])}return Se[be]}var lt=be+"="+Pe;lt+="; path=/",Be&&(lt+="; max-age="+Be);try{return ze.cookie=lt,!!ze.cookie}catch(ht){return xe.warn("[retcode] can not set cookie: ",ht),!1}}function ne(be){return(be=be._conf.uid||me("_nk_")||me("_bl_uid"))||(be=xe.uu(),me("_bl_uid",be,15552e3))?be:null}var pe,le,_e,Re,xe=W(),Ae=(se||(se=1,_e=W(),Re=ve().TIMING_KEYS,he=function(){var be,Pe,Be,Ge=_e.win||{},ot=Ge.performance;return ot&&typeof ot=="object"&&typeof ot.getEntriesByType=="function"?(be={},Pe=ot.timing||{},Be=ot.getEntriesByType("resource")||[],be.begin=Pe[Re[1]]||Date.now(),typeof Ge.PerformanceNavigationTiming=="function"&&(Ge=ot.getEntriesByType("navigation")[0])&&(Pe=Ge),_e.each({dom:[10,8],load:[14,1]},function(st,lt){var ht=Pe[Re[st[1]]],st=Pe[Re[st[0]]];0<ht&&0<st&&0<=(st=Math.round(st-ht))&&st<6e5&&(be[lt]=st)}),be.res=JSON.stringify(Be),be):null}),he),Ve=(oe||(oe=1,pe=W(),le=ve().TIMING_KEYS,Z=function(){var be,Pe,Be,Ge,ot,ft=pe.win||{},lt=ft.performance;return lt&&typeof lt=="object"?(be={},Pe=lt.timing||{},Be=Date.now(),Ge=1,typeof ft.PerformanceNavigationTiming=="function"&&(ot=lt.getEntriesByType("navigation")[0])&&(Pe=ot,Ge=2),pe.each({dns:[3,2],tcp:[5,4],ssl:[5,17],ttfb:[7,6],trans:[8,7],dom:[10,8],res:[14,12],firstbyte:[7,2],fpt:[8,1],tti:[10,1],ready:[12,1],load:[14,1]},function(Tt,st){var mt=Pe[le[Tt[1]]],Tt=Pe[le[Tt[0]]];(Ge===2||0<mt&&0<Tt)&&0<=(Tt=Math.round(Tt-mt))&&Tt<6e5&&(be[st]=Tt)}),ot=ft.navigator.connection,ft=lt.navigation||{},be.ct=ot?ot.effectiveType||ot.type:"",(lt=999<(lt=ot&&(ot.downlink||ot.downlinkMax||ot.bandwidth)||null)?999:lt)&&(be.bandwidth=lt),be.navtype=ft.type===1?"Reload":"Other",Ge===1&&0<Pe[le[16]]&&0<Pe[le[1]]&&0<=(ot=Pe[le[16]]-Pe[le[1]])&&ot<36e5&&(be.fpt=ot),Ge===1&&0<Pe[le[1]]?be.begin=Pe[le[1]]:be.begin=Ge===2&&0<be.load?Be-be.load:Be,be):null}),Z),We=null,je=ze.documentElement,Fe=qe.innerWidth||je.clientWidth||ze.body.clientWidth,Ze=qe.innerHeight||je.clientHeight||ze.body.clientHeight,Qe=qe.navigator.connection,nt={sr:screen.width+"x"+screen.height,vp:Fe+"x"+Ze,ct:Qe?Qe.effectiveType||Qe.type:""},Se={};return xe.ext(He.prototype,{activeErrHandler:function(be){return We&&!be||(We=this),this},errorHandler:function(be){if(be){var Pe,Be=be.type;Be==="error"?!(Pe=be.target||be.srcElement)||!Pe.tagName||be.message||be.filename||be.lineno||be.colno?this.error(be.error||{message:be.message},be):this.resourceErrorHandler(be):Be==="unhandledrejection"&&xe.T(be.reason,"Error")&&xe.checkAutoError(be.reason)&&this.error(be.reason);try{this.getConfig("behavior")&&this.reportBehavior&&this.reportBehavior()}catch{}}return this},resourceErrorHandler:function(be){var Pe=this,Be=be.target||be.srcElement;try{var Ge=Pe.getSrc(Be),ot=typeof Be.tagName=="string"?Be.tagName.toLowerCase():"",ft=Pe.getXPath(Be,5),lt=xe.getURL(Ge),ht={src:Ge&&Ge.substring(0,1e3),node_name:ot,xpath:ft,res_type:xe.getResType(ot,Ge),res_name:lt.path,domain:lt.domain};return Pe._conf.enableResource&&Pe.fixResourceStatus&&be.timeStamp&&Pe.fixResourceStatus({src:Ge,node_name:ot,res_type:xe.getResType(ot,Ge),timeStamp:be.timeStamp,domain:lt.domain}),Pe._lg("resourceError",ht),Pe}catch(st){return xe.warn("[ARMS] resourceErrorHandler error :",st),Pe}},getSrc:function(be){var Pe,Be,Ge=be.src||be.href;try{Ge||(Pe=(typeof be.tagName=="string"?be.tagName.toLowerCase():"")==="object",Be=be.getAttribute("classid")&&be.getAttribute("classid").toLowerCase()==="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"||be.getAttribute("type")==="application/x-shockwave-flash",Ge=(Ge=Pe&&Be?be.getAttribute("data")||be.getAttribute("codebase"):Ge)||be.outerHTML||be.innerHTML)}catch{Ge=""}return Ge},getXPath:function(be,Pe){var Ge=be.id?"#"+be.id:"",Be=typeof be.className=="string"?"."+be.className.split(" ").join("."):"",Ge=(typeof be.tagName=="string"?be.tagName.toLowerCase():"")+Ge+Be;return be.parentNode&&be.parentNode.tagName&&Pe-1!=0?this.getXPath(be.parentNode,Pe-1)+" > "+Ge:Ge},sendPerformance:function(be){var Pe=this;Pe.onReady(function(){var Be=Ve();Be&&Be.load&&0<Be.load&&(Be.page=Pe.getPage(!0),(Be=be?xe.ext(Be,be):Be).autoSend=!0,Pe.performance(Be))})},sendResources:function(be){var Pe=this;Pe.onReady(function(){var Be=Ae();Be&&Be.load&&0<Be.load&&(Be.load&&Be.load<=2e3||Be.load&&Be.load<=8e3&&.05<Math.random()||(Be.page=Pe.getPage(!0),Be.dl=location.href,be&&(Be=xe.ext(Be,be)),Pe._lg("res",Be,Pe.getConfig("sample"))))})},sendPV:function(){var be=this;be.onReady(function(){Be=ne(be),Pe=qe.devicePixelRatio||1;var Pe,Be={uid:Be,dt:ze.title,dl:location.href,dr:ze.referrer,dpr:Pe.toFixed(2),de:(ze.characterSet||ze.defaultCharset||"").toLowerCase(),ul:je.lang,begin:Date.now()};Be.uid&&be._lg("pv",Be,be.getConfig("pvSample"))})},commonInfo:function(){return nt.uid=ne(this),nt.sid=(be=>{if(be.session)return be.session;var Pe;try{if(typeof window=="object"&&typeof sessionStorage=="object"&&typeof sessionStorage.getItem=="function")return typeof(Pe=sessionStorage.getItem("_bl_sid"))=="string"?be.session=Pe:(Pe=xe.uu(),be.session=Pe,typeof sessionStorage.setItem=="function"&&sessionStorage.setItem("_bl_sid",Pe)),Pe}catch(Be){xe.warn("[ARMS] getSid error :",Be)}return be.session=Pe=xe.uu(),Pe})(this),nt},handleUnload:function(be){var Pe=Date.now();if(Pe-this._lastUnload<200)return this;this._lastUnload=Pe,this.sendHealth(be),this.speedCache&&(this._lg("speed",this.speedCache),this.speedCache=null,clearTimeout(this.speedTimmer)),this._conf&&this._conf.enableResource&&this.resourceComboReport(),this.clear(!0)},bindHashChange:function(be){var Pe=this;if(!be^Pe.hashChangeHandler)return Pe;be?(Pe.hackHistoryState(),Pe.hashChangeHandler=function(Be){var Ge=Pe._conf.parseHash(location.hash);Ge&&Pe.setPage(Ge,Be!==!1)},Pe.stateChangeHandler=function(Be){Be=Pe._conf.parseHash(Be.detail),Be&&Pe.setPage(Be)},xe.on(qe,"hashchange",Pe.hashChangeHandler),xe.on(qe,"historystatechange",Pe.stateChangeHandler),Pe.hashChangeHandler(!1)):(xe.off(qe,"hashchange",Pe.hashChangeHandler),xe.off(qe,"historystatechange",Pe.stateChangeHandler),Pe.hashChangeHandler=null,Pe.stateChangeHandler=null)},initHandler:function(){var be,Pe=this;return Pe.hasInitHandler||(be=Pe._conf,xe.on(qe,"beforeunload",function(){Pe.handleUnload(0)}),Pe.bindHashChange(be.enableSPA),Pe.activeErrHandler(!1),Pe.hasInitHandler=!0),Pe}}),xe.on(qe,"error",function(be){We&&We.errorHandler(be)},!1,!0).on(qe,"unhandledrejection",function(be){We&&We.errorHandler(be)}),He}),re}function Ne(){var He,qe;return ke||(ke=1,He=W(),qe=500,Ce=function(ze,me,ne){var pe=me.innerHeight||0,le=[],_e=null,Re=0;He.ext(ze.prototype,{initFmpObserver:function(xe){var Ae=this;if(!Ae._conf||!Ae._conf.useFmp)return null;if(!me.MutationObserver)return He.warn("[retcode] first meaningful paint can not be retrieved"),Ae.sendPerformance(),null;He.on(me,"beforeunload",function(){Ae.endObserving(0,!0)});var Ve=me.MutationObserver;return(_e=new Ve(function(){var We,je,Fe;We=Ae._startTime,We=Date.now()-We,(Fe=ne.querySelector("body"))?(je=0,je+=function Ze(Qe,nt,Se){var be=0,Pe=Qe.tagName;if(Pe!=="SCRIPT"&&Pe!=="STYLE"&&Pe!=="META"&&Pe!=="HEAD"){if(0<(Pe=Qe.children?Qe.children.length:0))for(var Be=Qe.children,Ge=Pe-1;0<=Ge;Ge--)be+=Ze(Be[Ge],nt+1,0<be);if(be<=0&&!Se&&!(Qe.getBoundingClientRect&&Qe.getBoundingClientRect().top<pe))return 0;be+=1+.5*nt}return be}(Fe,1,!1),le.push({score:je,t:We})):le.push({score:0,t:We})})).observe(document,{childList:!0,subtree:!0}),Re=1,Ae.onReady(function(){Ae.endObserving(xe)}),_e},endObserving:function(xe,Ae){var Ve=this;if(_e&&Re)if(Ve.fmpTimmer&&(clearTimeout(Ve.fmpTimmer),Ve.fmpTimmer=null),Ae||!((Ze,Qe)=>(Ze=Date.now()-Ze,!(Qe<Ze||Ze-(le&&le.length&&le[le.length-1].t||0)>2*qe)))(Ve._startTime,xe)){_e.disconnect(),Re=0,le=function Ze(Qe){for(var nt=1;nt<Qe.length;nt++)if(Qe[nt].score<Qe[nt-1].score)return Qe.splice(nt,1),Ze(Qe);return Qe}(le);for(var We,je=null,Fe=1;Fe<le.length;Fe++)le[Fe].t>=le[Fe-1].t&&(We=le[Fe].score-le[Fe-1].score,!je||je.rate<=We)&&(je={t:le[Fe].t,rate:We});je&&0<je.t&&je.t<36e5?Ve.sendPerformance({fmp:je.t}):Ve.sendPerformance()}else Ve.fmpTimmer=He.delay(function(){Ve.endObserving(xe)},qe)}})}),Ce}function Ue(){return J||(J=1,ye=function(He,qe){function ze(Ae,Ve,We,je,Fe,Ze,Qe,nt,Se,be,Pe,Be,Ge){Fe=me.J(Fe)||null,(Ve=me.safetyCall(Ve,[Fe,je],null))&&(Fe=Ve.code||Ze,je=!("success"in Ve)||Ve.success,Ae.api(We,je,Qe,Fe,Ve.msg,nt,Se,be,je?{}:Pe,pe,Be,Ge))}var me=W(),ne=null,pe=me.getCurDomain(),le="fetch",_e="__oFetch_",Re="__oXMLHttpRequest_",xe="XMLHttpRequest";return me.ext(He.prototype,{removeHook:function(Ae,Ve){return ne&&(Ve||this===ne)&&(qe[_e]&&(qe[le]=qe[_e],delete qe[_e]),qe[Re]&&(qe[xe]=qe[Re],delete qe[Re]),ne=null),this},addHook:function(Ae){return!Ae&&ne||(ne||(typeof qe[le]=="function"&&(Fe=qe[le],qe[_e]=Fe,qe[le]=function(Ze,Qe){var nt=arguments.length===1?[Ze]:Array.apply(null,arguments),Se=ne;if(!Se||!Se.api||Qe&&(Qe.method==="HEAD"||Qe.mode==="no-cors"))return Fe.apply(qe,nt);Qe=Qe||{};var be=Date.now(),Pe=Se._conf,Be=me.duration(),Ge=ot=(Ze&&typeof Ze!="string"?Ze.url:Ze)||"",ot=me.cutUrlSearch(ot),lt=(Pe.ignore||{}).ignoreApis,ft=Pe.parseTraceId;if(!me.checkAPI(ot,!0)||me.ignoreByRule(ot,lt))return Fe.apply(qe,nt);ot=me.filterByRule(ot,Ge,Pe.ignoreApiPath||Pe.apiHelper);var lt=Pe.enableLinkTrace,ht="",st="",mt=Se.getConfig("pid"),Tt=null,Rt=Se.getConfig("sample"),At=Se.getConfig("linkType"),kt=1;if(Rt&&!Se.sampling(Rt)&&(kt=0),lt){Rt="";try{Rt=location.origin||location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch{Rt=""}var dt,lt=me.checkSameOrigin(Ge,Rt);if(Se.getConfig("enableApiCors")||lt)if(Ze&&typeof Ze!="string")try{if(nt[0].headers&&typeof nt[0].headers.get=="function"&&typeof nt[0].headers.append=="function")switch(At){case"arms":var Et=nt[0].headers.get("EagleEye-TraceID"),Pt=nt[0].headers.get("EagleEye-SessionID"),Lt=nt[0].headers.get("EagleEye-pAppName");Et?ht=Et:(ht=Se.getTraceId()["EagleEye-TraceID"],nt[0].headers.append("EagleEye-TraceID",ht)),Pt?st=Pt:(st=Se.getPageviewId()["EagleEye-SessionID"],nt[0].headers.append("EagleEye-SessionID",st)),Lt||nt[0].headers.append("EagleEye-pAppName",mt);break;case"b3":var St,Ot=nt[0].headers.get("X-B3-TraceId"),ht=Ot||(St=Se.getB3TraceId(kt),nt[0].headers.append("X-B3-TraceId",St["X-B3-TraceId"]),nt[0].headers.append("X-B3-ParentSpanId",St["X-B3-ParentSpanId"]),nt[0].headers.append("X-B3-SpanId",St["X-B3-SpanId"]),nt[0].headers.append("X-B3-Sampled",St["X-B3-Sampled"]),nt[0].headers.append("X-Request-ID",me.guid()),St["X-B3-TraceId"]),st=Se.pageview;break;default:var Dt=nt[0].headers.get("uber-trace-id");ht=Dt?Dt.split(":")[0]:(Dt=Se.getUberTraceId(kt),nt[0].headers.append("uber-trace-id",Dt["uber-trace-id"]),Dt.traceId),st=Se.pageview}}catch(Ct){me.warn(`[retcode] fetch failed to set header, exception is :
`+Ct)}else switch(Qe.headers=Qe.headers||{},At){case"arms":Qe.headers["EagleEye-TraceID"]?ht=Qe.headers["EagleEye-TraceID"]:(ht=Se.getTraceId()["EagleEye-TraceID"],Qe.headers["EagleEye-TraceID"]=ht),Qe.headers["EagleEye-SessionID"]?st=Qe.headers["EagleEye-SessionID"]:(st=Se.getPageviewId()["EagleEye-SessionID"],Qe.headers["EagleEye-SessionID"]=st),Qe.headers["EagleEye-pAppName"]||(Qe.headers["EagleEye-pAppName"]=mt);break;case"b3":ht=Qe.headers["X-B3-TraceId"]||(dt=Se.getB3TraceId(kt),Qe.headers["X-B3-TraceId"]=dt["X-B3-TraceId"],Qe.headers["X-B3-ParentSpanId"]=dt["X-B3-ParentSpanId"],Qe.headers["X-B3-SpanId"]=dt["X-B3-SpanId"],Qe.headers["X-B3-Sampled"]=dt["X-B3-Sampled"],Qe.headers["X-Request-ID"]=me.guid(),dt["X-B3-TraceId"]),st=Se.getPageviewId()["EagleEye-SessionID"];break;default:ht=Qe.headers["uber-trace-id"]?Qe.headers["uber-trace-id"].split(":")[0]:(dt=Se.getUberTraceId(kt),Qe.headers["uber-trace-id"]=dt["uber-trace-id"],dt.traceId),st=Se.getPageviewId()["EagleEye-SessionID"]}}return Fe.apply(qe,nt).then(function(It){if(!Se||!Se.api)return It;try{if(It&&typeof It.clone=="function"){var Ct=It.clone(),Nt=Ct.headers;if(Nt&&typeof Nt.get=="function"){var Ft,Ut=Nt.get("content-type");if(Ut&&!/(text)|(json)/.test(Ut))return It;ht||typeof(Ft=me.parseFetchHeaders(Nt))=="object"&&Ft["eagleeye-traceid"]&&(ht=Ft["eagleeye-traceid"],Tt="response")}var jt=Be();Ct.text().then(function(Mt){!ht&&me.isFunction(ft)&&(Ht=ft(Ct,Mt))&&me.isString(Ht)&&(ht=Ht);var Ht=me.getFetchSnapshot(nt,Mt,Nt);Ct.ok?ze(Se,Pe.parseResponse,ot,Ge,Mt,Ct.status||200,jt,be,ht,st,Ht,Tt,kt):(Se.api(ot,!1,jt,Ct.status||404,Ct.statusText,be,ht,st,Ht,pe,Tt,kt),Pe.enableResource&&ne.fixResourceStatus&&ne.fixResourceStatus({src:Ct.url,res_type:"api"}))})}return It}catch(Mt){return me.warn("[ARMS] fetch response error :",Mt),It}}).catch(function(It){var Ct;throw Se&&Se.api&&(Ct=Be(),Se.api(ot,!1,Ct,It.name||"Error",It.message,be,ht,st,{},pe),Pe.enableResource)&&ne.fixResourceStatus&&ne.fixResourceStatus({src:Ge,res_type:"api"}),It})},qe[le].toString=me.createFakeToString(le)),typeof qe[xe]=="function"&&(We=qe[xe],qe[Re]=We,(je=function(Ze){var Qe,nt,Se,be,Pe,Be,Ge,ot,ft,lt,ht,st,mt,Tt,Rt,At,kt,dt=new We(Ze),Et=ne;return Et&&Et.api&&dt.addEventListener&&(Pe=dt.send,Be=dt.open,Ge=dt.setRequestHeader,ot=Et._conf,ft=(ot.ignore||{}).ignoreApis,lt=ot.parseTraceId,ht=Et.getConfig("enableLinkTrace"),Tt=mt=st="",Rt=null,Ze=Et.getConfig("sample"),At=Et.getConfig("linkType"),kt=1,Ze&&!Et.sampling(Ze)&&(kt=0),dt.open=function(Pt,Lt){if(Ve=Pt,Pt=arguments.length===1?[Pt]:Array.apply(null,arguments),Be.apply(dt,Pt),be=Lt||"",Se=me.cutUrlSearch(be),Pt=!me.checkAPI(Se,!0)||me.ignoreByRule(Se,ft),Se=Se?me.filterByRule(Se,be,ot.ignoreApiPath||ot.apiHelper):"",!Pt&&ht){Lt="";try{Lt=location.origin||location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch{Lt=""}if(Pt=me.checkSameOrigin(be,Lt),(Et.getConfig("enableApiCors")||Pt)&&Ge&&typeof Ge=="function")switch(At){case"arms":st=Et.getTraceId()["EagleEye-TraceID"],Ge.apply(dt,["EagleEye-TraceID",st]),mt=Et.getPageviewId()["EagleEye-SessionID"],Ge.apply(dt,["EagleEye-SessionID",mt]),Tt=Et.getConfig("pid"),Ge.apply(dt,["EagleEye-pAppName",Tt]);break;case"b3":var St=Et.getB3TraceId(kt);Ge.apply(dt,["X-B3-TraceId",St["X-B3-TraceId"]]),Ge.apply(dt,["X-B3-ParentSpanId",St["X-B3-ParentSpanId"]]),Ge.apply(dt,["X-B3-SpanId",St["X-B3-SpanId"]]),Ge.apply(dt,["X-B3-Sampled",St["X-B3-Sampled"]]),Ge.apply(dt,["X-Request-ID",me.guid()]),st=St["X-B3-TraceId"],mt=Et.getPageviewId()["EagleEye-SessionID"];break;default:St=Et.getUberTraceId(kt),Ge.apply(dt,["uber-trace-id",St["uber-trace-id"]]),st=St.traceId,mt=Et.getPageviewId()["EagleEye-SessionID"]}}},dt.send=function(){Qe=Date.now(),nt=me.duration();var Pt=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);Pe.apply(dt,Pt)},me.on(dt,"readystatechange",function(){if(Se&&dt.readyState===4){var Pt=nt(),Lt=me.getXhrSnapshot(be,Ve,dt);if(st||typeof(St=me.parseXhrHeaders(typeof dt.getAllResponseHeaders=="function"&&dt.getAllResponseHeaders()||""))=="object"&&St["eagleeye-traceid"]&&(st=St["eagleeye-traceid"],Rt="response"),!st&&me.isFunction(lt)&&(St=lt(dt))&&me.isString(St)&&(st=St),200<=dt.status&&dt.status<=299){var St=dt.status||200;if(typeof dt.getResponseHeader=="function"){var Ot=dt.getResponseHeader("Content-Type");if(Ot&&!/(text)|(json)/.test(Ot))return}dt.responseType&&dt.responseType!=="text"?Et.api(Se,!0,Pt,St,"",Qe,st,mt,{},pe,Rt,kt):ze(Et,ot.parseResponse,Se,be,dt.responseText,St,Pt,Qe,st,mt,Lt,Rt,kt)}else Et.api(Se,!1,Pt,dt.status||"FAILED",dt.statusText,Qe,st,mt,Lt,pe,Rt,kt),ot.enableResource&&ne.fixResourceStatus&&ne.fixResourceStatus({src:dt.responseURL||be,res_type:"api"})}})),dt}).prototype=We.prototype,me.each(Object.keys(We),function(Ze){je[Ze]=We[Ze]}),qe[xe]=je,qe[xe].toString=me.createFakeToString(xe))),ne=this),this;var Ve,We,je,Fe},initHook:function(){return this.hasInitHook||(this.getConfig("disableHook")||this.addHook(),this.hasInitHook=!0),this}}),He}),ye}function $e(){return Ee||(Ee=1,fe=function(He,qe){function ze(_e,Re){var xe;qe.CustomEvent?xe=new CustomEvent(_e,{detail:Re}):((xe=le.createEvent("HTMLEvents")).initEvent(_e,!1,!0),xe.detail=Re),qe.dispatchEvent(xe)}function me(_e){var Re=pe[_e];typeof Re=="function"&&(pe[_e]=function(je,Ae,Ve){var je=arguments.length===1?[je]:Array.apply(null,arguments),We=location.href,je=Re.apply(pe,je);if(Ve&&typeof Ve=="string"&&Ve!==We)try{var Fe=We.split("#"),Ze=Ve.split("#"),Qe=ne.cutUrlSearch(Fe[0]),nt=ne.cutUrlSearch(Ze[0]),Se=Fe[1]&&Fe[1].replace(/^\/?(.*)/,"$1"),be=Ze[1]&&Ze[1].replace(/^\/?(.*)/,"$1");Se!==be?ze("historystatechange",be):Qe!==nt&&ze("historystatechange",nt)}catch(Pe){ne.warn("[retcode] error in "+_e+": "+Pe)}return je},pe[_e].toString=ne.createFakeToString(_e))}var ne=W(),pe=qe.history||{},le=qe.document;ne.ext(He.prototype,{hackHistoryState:function(){return this.hasHackedHistoryState||(me("pushState"),me("replaceState"),this.hasHackedHistoryState=!0),this}})}),fe}function rt(){var He,qe;return Me||(Me=1,He=W(),qe=ve().TIMING_KEYS,Ie=function(ze,me){var ne="_resource-"+Date.now(),pe="_resource_error-"+Date.now();He.ext(ze.prototype,{initResource:function(){var le,_e=this,Re=me.performance,xe=me.PerformanceObserver;return _e[pe]||(_e[pe]=new WeakMap),Re&&xe&&typeof Re=="object"&&typeof Re.getEntriesByType=="function"?(le=Re.getEntriesByType("resource")||[],setTimeout(function(){_e.setResource(le)},10),new xe(function(Ae){setTimeout(function(){_e.setResource(Ae.getEntries())},10)}).observe({entryTypes:["resource"]}),this.onReady(function(){setTimeout(_e.resourceComboReport.bind(_e),5e3)}),_e):null},setResource:function(le){var _e=this._conf,Re=this[pe];if(He.isArray(le)&&le.length){this[ne]||(this[ne]={});for(var xe=this[ne],Ae=0,Ve=le.length;Ae<Ve;Ae+=1){var We,je=le[Ae];He.checkAPI(je.name,!1)&&(je=((Fe,Ze,Qe)=>{if(Fe instanceof me.PerformanceResourceTiming&&Fe.initiatorType){var nt,Se,be,Pe,Be,Ge,ot,ft,lt,ht=He.getResType(Fe.initiatorType,Fe.name),st=Ze.resourceTypes||[],mt=(Ze.ignore||{}).ignoreResources;if(ht&&st.includes(ht)&&!He.ignoreByRule(Fe.name,mt)&&!He.ignoreByRule(He.decode(Fe.name),mt))return st=Fe[qe[0]],mt=Fe[qe[1]],nt=Fe[qe[2]],Se=Fe[qe[3]],be=Fe[qe[4]],Pe=Fe[qe[5]],Be=Fe[qe[6]],Ge=Fe[qe[7]],ot=Fe[qe[8]],ft=Fe[qe[18]],lt=Fe[qe[19]],(Qe.has(Fe)||He.areInOrder(st,mt,nt,Se,be,Pe,Be,Ge,ot)&&!(Ge<st))&&He.areInOrder(st,ft=ft<st?st:ft,lt=lt<st?mt:lt,mt)?{domain:He.getURL(Fe.name).domain,res_type:ht,src_type:He.getSrcType(Fe.name,Ze.cdnHostList),success:1,size:Math.round(Fe.decodedBodySize),duration:Math.round(Fe.duration),timeStamp:Fe.responseEnd,timing:Fe}:void 0}})(je,_e,Re))&&((We=je.res_type+"-"+je.domain)in xe||(xe[We]=[]),xe[We].push(je))}return this}},fixResourceStatus:function(le){var _e,Re,xe=me.performance;return xe&&typeof xe.getEntriesByName=="function"?(_e=this[pe],le.src&&He.checkAPI(le.src,!1)&&(Re=le.timeStamp||xe.now(),xe=xe.getEntriesByName(le.src,"resource"),He.each(xe,function(Ae){_e.has(Ae)||Re-Ae.responseEnd<100&&_e.set(Ae,{success:0})})),this):null},resourceComboReport:function(){var le,_e,Re=this[ne]||{},xe=this._conf.resourceSlow||2e3,Ae=this[pe],Ve=(this[ne]={},Object.keys(Re));Ve.length!==0&&(le=[],He.each(Ve,function(je){var je=Re[je],Fe={domain:"",res_type:"",src_type:"",size:0,duration:0,count:0,err_count:0,err_duration:0,slow_count:0,slow_duration:0,timings:[]};He.each(je,function(Ze){var Qe=Ze.timing||{},nt=Ae.get(Ze.timing),nt=nt?nt.success:1,Se=Ze.duration>xe?1:0;Fe.domain=Ze.domain,Fe.res_type=Ze.res_type,Fe.src_type=Ze.src_type,Fe.count+=1,Fe.duration+=Ze.duration,Fe.size+=Ze.size,nt||(Fe.err_count+=1,Fe.err_duration+=Ze.duration),Se&&(Fe.slow_count+=1,Fe.slow_duration+=Ze.duration);try{var be=JSON.parse(JSON.stringify(Qe));be.success=nt,be.resourceSlow=xe,be.isSlow=Se,Fe.timings.push(be)}catch{}}),Fe.count&&(Fe.size=Math.round(Fe.size/Fe.count),Fe.duration=Math.round(Fe.duration/Fe.count)),Fe.slow_count&&(Fe.slow_duration=Math.round(Fe.slow_duration/Fe.slow_count)),Fe.err_count&&(Fe.err_duration=Math.round(Fe.err_duration/Fe.err_count)),20<Fe.timings.length&&(Fe.timings.sort(function(Ze,Qe){return Qe.duration-Ze.duration}),Fe.timings.length=20),Fe.timings=encodeURIComponent(JSON.stringify(Fe.timings)),le.push(Fe)}),Ve={_combo:1,resource:JSON.stringify(le)},_e=me.navigator.connection,Ve.ct=_e?_e.effectiveType||_e.type:"",(_e=999<(_e=_e&&(_e.downlink||_e.downlinkMax||_e.bandwidth)||null)?999:_e)&&(Ve.bandwidth=_e),this._lg("resource",Ve,this.getConfig("sample")))}})}),Ie}function Je(){var He,qe,ze,me,ne,pe,le,_e,Re,xe,Ae,Ve,We,je,Fe,Ze,Qe,nt;return Oe||(Oe=1,He=W(),K||(K=1,je=W(),Fe=z(),Ze=["api","success","time","code","msg","trace","traceId","begin","pv_id","sid","seq","domain","flag","apiSnapshot","tag","c1","c2","c3"],Qe=function(Se){var be=(Se.key||"default").split("::");return 1<be.length?je.ext(Se,{group:be[0],key:be[1]}):je.ext(Se,{group:"default_group",key:be[0]})},(nt=function(Se){var be;Fe.call(this,Se);try{be=typeof performance=="object"?performance.timing.fetchStart:Date.now()}catch{be=Date.now()}return this._startTime=be,this}).prototype=je.createObject(Fe.prototype),je.ext(Fe.dftCon,{startTime:null}),je.ext(nt.prototype,{constructor:nt,_super:Fe,sum:function(Se,be,Pe){try{var Be=je.dealParam(Se,be,1);return this._lg("sum",Qe(Be),Pe)}catch(Ge){je.warn("[retcode] can not get parseStatData: "+Ge)}},avg:function(Se,be,Pe){try{var Be=je.dealParam(Se,be,0);return this._lg("avg",Qe(Be),Pe)}catch(Ge){je.warn("[retcode] can not get parseStatData: "+Ge)}},percent:function(Se,be,Pe,Be){try{return this._lg("percent",Qe({key:Se,subkey:be,val:Pe||0,begin:Date.now()}),Be)}catch(Ge){je.warn("[retcode] can not get parseStatData: "+Ge)}},msg:function(Se,be){if(Se&&!(180<Se.length))return this.custom({msg:Se},be)},error:function(Se,be){if(!Se)return je.warn("[retcode] invalid param e: "+Se),this;arguments.length===1?(typeof Se=="string"&&(Se={message:Se},be={}),typeof Se=="object"&&(be=Se=Se.error||Se)):(typeof Se=="string"&&(Se={message:Se}),typeof be!="object"&&(be={}));var Pe,Be=Se.name||"CustomError",Ge=Se.message||"",ot=Se.stack||"",ft=(be=be||{},typeof location=="object"&&typeof location.href=="string"&&location.href.substring(0,500)||"");if(je.checkSDKError(Ge,be.filename))return Pe=Se.msg||Se.message,je.ignoreByRule(Pe,Tt=/^Script error\.?$/)||je.ignoreByRule(je.decode(Pe),Tt)?this:(Pe={msg:je.selfErrKey,err:{msg_raw:je.encode(Se.msg||Se.message)}},this._self("error",Pe,1));for(var lt={begin:Date.now(),cate:Be,msg:Ge&&Ge.substring(0,1e3),stack:ot&&ot.substring(0,1e3),file:je.removeUrlSearch(be.filename||""),line:be.lineno||"",col:be.colno||"",err:{msg_raw:je.encode(Ge),stack_raw:je.encode(ot)},dl:ft},ht=["tag","c1","c2","c3"],st=0;st<ht.length;st++){var mt=ht[st];be[mt]&&(lt[mt]=be[mt])}var Tt=(this.getConfig("ignore")||{}).ignoreErrors;return je.ignoreByRule(lt.msg,Tt)||je.ignoreByRule(je.decode(lt.msg),Tt)?this:(this.beforeSend&&this.beforeSend("error",lt),this._lg("error",lt,1))},behavior:function(Se){if(Se)return Se=typeof Se=="object"&&Se.behavior?Se:{behavior:Se},this.beforeSend&&this.beforeSend("behavior",Se),this._lg("behavior",Se,1)},api:function(Se,be,Pe,Be,Ge,ot,ft,lt,ht,st,mt,Tt,Rt,At,kt,dt){return Se?(Se=typeof Se=="string"?{api:Se,success:be,time:Pe,code:Be,msg:Ge,begin:ot,traceId:ft,pv_id:lt,apiSnapshot:ht,domain:st,flag:Tt,tag:Rt,c1:At,c2:kt,c3:dt}:je.sub(Se,Ze),je.checkAPI(Se.api,!0)?(Se.code=Se.code||"",be=Se.msg||"",be=typeof be=="string"?be.substring(0,1e3):be,Se.msg=be,Se.success=Se.success?1:0,Se.time=+Se.time,Se.begin=Se.begin,Se.traceId=Se.traceId||"",Se.pv_id=Se.pv_id||"",Se.domain=Se.domain||"",Se.flag=Se.flag,Se.dl=typeof location=="object"&&typeof location.href=="string"&&location.href.substring(0,500)||"",Se.apiSnapshot&&(typeof Se.apiSnapshot=="object"&&(Se.apiSnapshot=JSON.stringify(Se.apiSnapshot)),typeof Se.apiSnapshot!="string"&&delete Se.apiSnapshot,2e3<Se.apiSnapshot.length)&&(Se.apiSnapshot=Se.apiSnapshot.substring(0,2e3)),mt&&(Se.traceOrigin=mt),!Se.api||isNaN(Se.time)?(je.warn("[retcode] invalid time or api"),this):(Pe=(this.getConfig("ignore")||{}).ignoreApis,je.ignoreByRule(Se.api,Pe)||je.ignoreByRule(je.decode(Se.api),Pe)||Se.time<0?this:(this.beforeSend&&this.beforeSend("api",Se),this._lg("api",Se,Se.success&&this.getConfig("sample"),Se.flag)))):this):(je.warn("[retcode] api is null"),this)},speed:function(Se,be,Pe){var Be=this,Ge=this.getConfig("startTime")||this._startTime;return/^s(\d|1[0])$/.test(Se)?(be=typeof be!="number"?Date.now()-Ge:Ge<=be?be-Ge:be,Be.speedCache=Be.speedCache||{},Be.speedCache[Se]=be,Be.speedCache.begin=Ge,clearTimeout(Be.speedTimmer),Be.speedTimmer=setTimeout(function(){Pe||(Be.speedCache.page=Be.getPage(!0)),Be._lg("speed",Be.speedCache),Be.speedCache=null},5e3)):je.warn("[retcode] invalid point: "+Se),Be},performance:function(Se){if(Se&&typeof Se=="object"&&!this.hasSendPerf){var be,Pe={},Be={},Ge=this.getConfig("autoSendPerf");if(Se.autoSend&&Ge)return Be=je.ext(this.perfData||{},Se),this.hasSendPerf=!0,this._lg("perf",Be,this.getConfig("sample"));if(Se.autoSend&&!Ge)return delete Se.autoSend,this.perfData?(Be=je.ext(this.perfData||{},Se),this.hasSendPerf=!0,this._lg("perf",Be,this.getConfig("sample"))):void(this.perfData=Se);for(be in Se)!/^t([1-9]|1[0])$/.test(be)&&be!=="ctti"&&be!=="cfpt"||(Pe[be]=Se[be]);if(Se.autoSend===!0||!Ge&&this.perfData)return Se.autoSend!==!0&&Ge===!1&&this.perfData?(Pe=je.ext(this.perfData||{},Pe),this.hasSendPerf=!0,this._lg("perf",Pe,this.getConfig("sample"))):void 0;this.perfData=je.ext(this.perfData||{},Pe)}},resource:function(Se,be){if(!Se||!je.isPlainObject(Se))return je.warn("[arms] invalid param data: "+Se),this;var Pe,Be=Object.keys(Se),Ge=["begin","dom","load","res","dl"],ot=!1;for(Pe in Ge)if(Be.indexOf(Ge[Pe])<0){ot=!0;break}return ot?(je.warn("[arms] lack param data: "+Se),this):(Se={begin:Se.begin||Date.now(),dom:Se.dom||"",load:Se.load||"",res:je.isArray(Se.res)?JSON.stringify(Se.res):JSON.stringify([]),dl:Se.dl||""},this._lg("res",Se,be))},event:function(Se,be){if(typeof Se=="object"&&Se&&Se.key){var Pe,Be={},Ge=["key","success","time","c1","c2","c3"];for(Pe in Se)-1<Ge.indexOf(Pe)&&(Be[Pe]=Se[Pe]);Be.success=Se.success===!1?0:1,this._lg("event",Be,be)}}}),nt._super=Fe,(nt._root=Fe).Reporter=nt,G.exports=nt),qe=G.exports,te||(te=1,Ae=W(),Ve=typeof window=="object"?window:{},We=typeof(We=Ve.__oFetch_||Ve.fetch)=="function"?We:void 0,ee.exports=function(Se,Ge){var Pe,Be=-1,Ge=(typeof Se=="object"&&(Be=Se.z,Se=Ae.serialize(Se)),Ge+Se);if(We)return We(Ge,{method:"HEAD",mode:"no-cors"}).catch(Ae.noop);Ve.document&&Ve.document.createElement&&((Se=Ve[Pe="__request_hold_"+Be]=new Image).onload=Se.onerror=function(){Ve[Pe]=void 0},Se.src=Ge)}),ze=ee.exports,Y||(Y=1,Re=W(),nt=typeof window=="object"?window:{},xe=typeof(xe=nt.__oXMLHttpRequest_||nt.XMLHttpRequest)=="function"?xe:void 0,de.exports=function(Se,be){try{var Pe=new xe;Pe.open("POST",be,!0),Pe.setRequestHeader("Content-Type","text/plain"),Pe.send(JSON.stringify(Se))}catch(Be){Re.warn(`[retcode] Failed to log, exception is :
`+Be)}}),me=de.exports,ne=He.win,pe=ne.document,le=/^(error|api|speed|sum|avg|percent|custom|msg|setPage|setConfig|behavior|performance)$/,(_e=function(Se){var be=this;return qe.call(be,Se),be._initialPage=Se.page&&He.safetyCall(Se.page,[],Se.page+"")||null,be._isRobot=He.isRobot(),be._health={errcount:0,apisucc:0,apifail:0},!(be.beforeSend=function(Pe,Be){Pe==="error"?be._health.errcount++:Pe==="api"&&be._health[Be.success?"apisucc":"apifail"]++})!==Se.enableInstanceAutoSend&&(be.initHandler(),be.initHook(),be.initFmpObserver(1e4),be._conf&&be._conf.behavior&&typeof be.initBehavior=="function"&&be.initBehavior(),be._conf)&&be._conf.enableResource&&typeof be.initResource=="function"&&be.initResource(),Object.defineProperty&&ne.addEventListener&&Object.defineProperty(be,"pipe",{set:be.sendPipe}),be}).prototype=He.createObject(qe.prototype),He.ext(qe._root.dftCon,{uid:null,setUsername:null,ignoreUrlPath:null,ignoreApiPath:null,urlHelper:[{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},/\/$/],resourceHelper:[],apiHelper:{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},ignoreUrlCase:!0,imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",cdnHostList:[],resourceTypes:["css","script","img","font"],resourceSlow:2e3,disableHook:!1,autoSendPv:!0,autoSendPerf:!0,enableSPA:!1,enableLinkTrace:!1,linkType:"arms",enableApiCors:!1,sendResource:!0,behavior:!0,enableConsole:!1,parseHash:function(Se){return(Se?He.cutUrlSearch(Se.replace(/^#\/?/,"")):"")||"[index]"},parseResponse:function(Se){var be;return Se&&typeof Se=="object"?(be=Se.code,typeof(Se=Se.msg||Se.message||Se.subMsg||Se.errorMsg||Se.ret||Se.errorResponse||"")=="object"&&(be=be||Se.code,Se=Se.msg||Se.message||Se.info||Se.ret||JSON.stringify(Se)),{msg:Se,code:be,success:!0}):{}}}),He.ext(_e.prototype,{constructor:_e,_super:qe,onReady:function(Se){var be=this;if(be.hasReady)return Se();pe.readyState==="complete"?(be.hasReady=!0,Se()):He.on(ne,"load",function(){be.hasReady=!0,Se()},!0)},getPage:function(Se){var be=this._conf,Pe=be.page,Be=location,Ge=Be.host+Be.pathname;return Pe&&!Se?He.safetyCall(Pe,[],Pe+""):this._initialPage||He.filterByRule(be.ignoreUrlCase?Ge.toLowerCase():Ge,Be.href,be.ignoreUrlPath||be.urlHelper)},setPage:function(Se,be){var Pe=this,Be=Pe.prevPage;if(be!==!1){if(!Se||Se===Be)return Pe;Pe.prevPage=Se,clearTimeout(Pe.sendPVTimmer),Pe.handleUnload(1),Pe.resetPageview(),Pe.sendPVTimmer=setTimeout(function(){Pe.sendPV()},10)}else Pe.prevPage=Se;return Pe._conf.page=Se,Pe},setConfig:function(Se,be){var Pe;Se&&typeof Se=="object"&&(He.verifyConfig(Se),Se=this.setImgUrl(Se),Pe=this._conf,this._conf=He.ext({},Pe,Se),be||((be="disableHook")in Se&&Pe[be]!==Se[be]&&(Se[be]?this.removeHook():this.addHook()),(be="enableSPA")in Se&&Pe[be]!==Se[be]&&this.bindHashChange(Se[be])))},sendRequest:function(Se){ze(Se,this.getConfig("imgUrl"))},postData:function(Se,Be){var Pe={},Be=(Pe[Be]=Se[Be],delete Se[Be],"");typeof Se=="object"&&(Be=He.serialize(Se)),me(Pe,this.getConfig("imgUrl")+Be+"&post_res=")},sendPipe:function(Se){var be,Pe=this;if(!Se||!Se.length)return Pe;try{return He.T(Se[0])==="Array"?He.each(Se,function(Be){return Pe.sendPipe(Be)}):He.T(Se)==="Array"&&(be=Se.shift(),le.test(be))?void Pe[be].apply(Pe,Se):Pe}catch(Be){return He.warn("[retcode] error in sendPipe",Be),Pe}},sendHealth:function(){var Se=He.ext({},this._health),be=(Se.healthy=0<Se.errcount?0:1,Se.begin=Date.now(),Se.begin-this.sBegin);Se.stay=be,this._lg("health",Se,1),this._health={errcount:0,apisucc:0,apifail:0}},createInstance:function(Se){Se=He.ext({pid:this._conf.pid},Se);var be=this.__proto__.constructor(Se);return Se.page&&be.sendPV(),be}}),ce()(_e,ne),Le()(_e,ne,pe),Ne()(_e,ne,pe),Ue()(_e,ne),$e()(_e,ne),rt()(_e,ne),_e._super=qe,_e._root=qe._root,qe.Browser=_e,f.exports=_e),f.exports}var et={getArmsLogger:function(){return we||(we=1,qe=window,ze=qe.BrowserLogger=Je(),me=W().key,ne="__hasInitBlSdk",ze.singleton=function(_e,Re){return qe[ne]?qe[me]:He(_e,Re)},ze.createExtraInstance=function(Re){Re&&typeof Re=="object"&&Re.enableInstanceAutoSend!==!0&&(Re.enableInstanceAutoSend=!1);var Re=new ze(Re),xe=Re._conf;return xe.enableInstanceAutoSend&&(xe.autoSendPv!==!1&&Re.sendPV(),xe&&xe.useFmp||Re.sendPerformance(),xe)&&xe.sendResource&&Re.sendResources(),Re},typeof window=="object"&&window.navigator&&qe[me]&&(ze.bl=qe[ne]?qe[me]:(pe={},le=[],me in qe&&(pe=qe[me].config||{},le=qe[me].pipe||[]),He(pe,le))),F.exports=ze),F.exports;function He(_e,Re){return _e=qe[me]=new ze(_e),_e.sendPipe(Re),Re=_e._conf,Re.autoSendPv!==!1&&_e.sendPV(),Re&&Re.useFmp||_e.sendPerformance(),Re&&Re.sendResource&&_e.sendResources(),qe[ne]=!0,_e}var qe,ze,me,ne,pe,le}};let De="https://arms-retcode.aliyuncs.com/r.png?",Xe="https://arms-retcode-sg.aliyuncs.com/r.png?",Ke="https://retcode-us-west-1.arms.aliyuncs.com/r.png?",Ye="e1iftji1w7@7ec1cef2cc88733",it="e1iftji1w7@10a06d1ec260adc",ut="e1iftji1w7@10a06d1ec260adc",at={cn:{reportUrl:De,pid:Ye},"cn-hangzhou":{reportUrl:De,pid:Ye},sg:{reportUrl:Xe,pid:it},"ap-southeast-1":{reportUrl:Xe,pid:it},usw:{reportUrl:Ke,pid:ut},"us-west-1":{reportUrl:Ke,pid:ut}},ct=He=>He!==null&&typeof He=="object",_t=He=>Object.prototype.toString.call(He).slice(8,-1),bt=He=>!!Object.isExtensible(He)&&_t(He)==="Object";function vt(He,qe){if(typeof He=="string"&&(qe=He.indexOf(qe),!(qe<0)))return(He=He.indexOf(`
`))<0||qe<He}function gt(He,qe,ze){{if(typeof He=="function")return _e=qe+1,Re=ze,xe={MediaboxWrapperFunctionApply(Ae,Ve,We){let je;try{je=Reflect.apply(Ae,Ve,We)}catch(Fe){throw Re(Fe),Fe}return gt(je,_e,Re)},MediaboxWrapperFunctionGet(Ae,Ve){var We=Object.getOwnPropertyDescriptor(Ae,Ve);return!We||We.writable||We.configurable?gt(Ae[Ve],_e,Re):Ae[Ve]},MediaboxWrapperClassConstructor(Ae,Ve){let We;try{We=new Ae(...Ve)}catch(je){throw Re(je),je}return gt(We,_e,Re)}},new Proxy(He,{apply:xe.MediaboxWrapperFunctionApply,get:xe.MediaboxWrapperFunctionGet,construct:xe.MediaboxWrapperClassConstructor});if(He instanceof Promise)return He.then(Ae=>gt(Ae,qe+1,ze)).catch(Ae=>(ze(Ae),Promise.reject(Ae)));if(Array.isArray(He))He.forEach((Ae,Ve)=>{He[Ve]=gt(Ae,qe+1,ze)});else if(ct(He)&&bt(He)){xe=He;var me=qe+1,ne=ze,pe;if(Reflect.get(xe,"__v_skip")===!0)return xe;let Ae=[],Ve=typeof Object.getOwnPropertyDescriptors=="function"?Object.getOwnPropertyDescriptors((le=Object.getPrototypeOf(xe))!=null?le:{}):{};for(pe of Object.keys(Ve))Ve[pe].get&&Ae.push(pe);var le={MediaboxWrapperObjectGetter(We,je){if(typeof je=="string"&&-1<Ae.indexOf(je)){let Ze;try{Ze=We[je]}catch(Qe){throw ne(Qe),Qe}return gt(Ze,me,ne)}var Fe;return!(10<me)&&(!(Fe=Reflect.getOwnPropertyDescriptor(We,je))||Fe.writable||Fe.configurable)?gt(We[je],me,ne):We[je]},MediaboxWrapperObjectSetter(We,je,Fe){return We[je]=gt(Fe,me,ne),!0}};return Object.defineProperty(xe,"__v_skip",{configurable:!0,enumerable:!1,writable:!1,value:!0}),new Proxy(xe,{get:le.MediaboxWrapperObjectGetter,set:le.MediaboxWrapperObjectSetter})}return He}var _e,Re,xe}function wt(He){return typeof He=="string"&&(-1<He.indexOf("g.alicdn.com/apsara-media-")||-1<He.indexOf("g.alicdn.com/thor-server")||-1<He.indexOf("MediaboxWrapper"))}class xt extends Error{constructor(qe){super(qe),this.name="MQTError"}}let pt=1;class yt{constructor(qe){var ze,me;j(this,"armsLogger"),j(this,"isReady",!1),j(this,"isDestroyed",!1),j(this,"options"),j(this,"queue",[]),j(this,"marker"),j(this,"helper",{MediaboxWrapperQueue(ne){return new xt(ne)},MediaboxWrapperInitiative(ne){return new xt(ne)}}),this.options=(me=h({},qe),qe={region:qe.deferRegionSet?void 0:(ze=qe.region)!=null?ze:"cn",env:(ze=qe.env)!=null?ze:"prod"},u(me,s(qe))),this.marker=`-${pt++}-`,this.initArmsLogger()}static get version(){return"0.26.0"}initArmsLogger(qe){var{region:ze,env:me,disabled:ne}=this.options;if(!ne&&!this.armsLogger){if(qe&&!ze)throw new Error("region is required");if(ze){if(!at[ze])throw new Error(`region ${ze} is not supported`);ne=et.getArmsLogger(),this.armsLogger=ne.createExtraInstance({enableInstanceAutoSend:!0,pid:at[ze].pid,tag:this.options.businessName,release:this.options.businessName+"_"+this.options.version,imgUrl:at[ze].reportUrl,behavior:!0,sample:1,disableHook:!0,environment:me,beforeReport:pe=>{var le;if(!(this.isDestroyed||vt(pe.stack,this.marker)||pe.t!=="pv"&&pe.t!=="error"&&pe.t!=="health")){if(pe.c1=(le=this.options.cid)!=null?le:window.location.host,pe.c2=yt.version,this.options.customData&&(pe.c3=new URLSearchParams(this.options.customData).toString()),pe.t!=="error")return pe;if(typeof(le=pe.file)=="string"&&(-1<le.indexOf("g.alicdn.com/apsara-media-")||-1<le.indexOf("g.alicdn.com/thor-server"))||wt(pe.stack)){let _e=pe;return this.options.beforeSend&&(_e=this.options.beforeSend(pe)),this.isReady?_e:(_e&&this.queue.push(_e),!1)}}return!1}})}}}wrap(qe){return this.options.disabled||typeof Proxy>"u"?qe:gt(qe,0,ze=>{var me,ne;ze instanceof Error&&typeof ze.stack=="string"&&wt(ze.stack)&&((me=this.armsLogger)!=null&&me.error(ze),ze.stack=(me=ze.stack,ze=this.marker,typeof me!="string"?ze:vt(me,ze)?me:(ne=me.indexOf(`
`))<0?""+me+ze:""+me.slice(0,ne)+ze+me.slice(ne)))})}updateOptions(qe){this.options=h(h({},this.options),qe)}setReady(){this.initArmsLogger(!0),this.isReady=!0,this.queue.length&&this.queue.forEach(qe=>{var ze;(ze=this.armsLogger)!=null&&ze.error(this.helper.MediaboxWrapperQueue(qe.msg),{filename:qe.file,lineno:qe.line,colno:qe.col})})}report(qe,ze){var me;(me=this.armsLogger)!=null&&me.error(this.helper.MediaboxWrapperInitiative(qe),ze)}destroy(){this.isDestroyed=!0}}O.MediaboxQualityTracer=yt,O.default=yt},{}],2:[function(t,e,O){var d=t("@aliyun-sls/web-types");function o(ne,pe,le){Object.defineProperty(ne,pe,{writable:!0,enumerable:!0,configurable:!0,value:le})}function a(ne,pe,le){try{return ne.apply(pe,le)}catch{}}function u(){}var s=Object.defineProperty,r=Object.defineProperties,n=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,j=(ne,pe,le)=>pe in ne?s(ne,pe,{enumerable:!0,configurable:!0,writable:!0,value:le}):ne[pe]=le;function F(ne){return typeof ne=="number"}function f(ne,pe){return+ne.toFixed(pe)}function W(ne){return ne?(parseInt(ne,10)^16*Math.random()>>parseInt(ne,10)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,W)}function U(ne=20){for(var pe,le,_e=new Array(ne),Re=Date.now().toString(36).split("");0<ne--;)le=(pe=36*Math.random()|0).toString(36),_e[ne]=pe%3?le:le.toUpperCase();for(var xe=0;xe<8;xe++)_e.splice(3*xe+2,0,Re[xe]);return _e.join("")}function M(ne,pe){return(...le)=>{try{return ne(...le)}catch(_e){console.error(pe,_e)}}}function R(ne){return ne.host.startsWith("http://")||ne.host.startsWith("https://")?ne.host+"/logstores/"+ne.logstore+(ne.stsPlugin?"":"/track?APIVersion=0.6.0"):"https://"+ne.project+"."+ne.host+"/logstores/"+ne.logstore+(ne.stsPlugin?"":"/track?APIVersion=0.6.0")}let K=/^(?:([^:\/?#]+):\/\/)?((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?)?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n)*))?/i;function G(ne,pe,...le){return!(pe==null||!Array.isArray(pe))&&pe.some(_e=>{if(typeof _e=="function")try{return _e(ne,...le)}catch(Re){return console.error("user function callback threw an error:",Re),!1}return typeof _e=="string"?ne.includes(_e):Object.prototype.toString.call(_e)==="[object RegExp]"&&_e.test(ne)})}function X(ne){var pe=Date.now()-performance.now();return pe>ie()?Math.round(pe+ne):ee(ne)}function z(){return Date.now()}function te(){return performance.now()}function ee(ne){return Math.round(ie()+ne)}let Y;function ie(){return Y=Y===void 0?performance.timing.navigationStart:Y}let ae="?";function de(ne,pe){let le;pe=pe===void 0?0:+pe;try{if(le=(_e=>{var Re=ge(_e,"stacktrace");if(Re){var xe=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Ae=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,Ve=Re.split(`
`),We=[];let je;for(let Fe=0;Fe<Ve.length;Fe+=2){let Ze;xe.exec(Ve[Fe])?(je=xe.exec(Ve[Fe]),Ze={args:[],column:void 0,func:je[3],line:+je[1],url:je[2]}):Ae.exec(Ve[Fe])&&(je=Ae.exec(Ve[Fe]),Ze={args:je[5]?je[5].split(","):[],column:+je[2],func:je[3]||je[4],line:+je[1],url:je[6]}),Ze&&(!Ze.func&&Ze.line&&(Ze.func=ae),Ze.context=[Ve[Fe+1]],We.push(Ze))}if(We.length)return{stack:We,message:ge(_e,"message"),name:ge(_e,"name")}}})(ne))return le}catch{}try{if(le=(_e=>{var Re=ge(_e,"stack");if(Re){var xe=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ae=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Ve=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;let nt;var We=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,je=/\((\S*)(?::(\d+))(?::(\d+))\)/,Fe=Re.split(`
`),Ze=[];let Se,be,Pe;for(let Be=0,Ge=Fe.length;Be<Ge;Be+=1){if(xe.exec(Fe[Be])){var Qe=(be=xe.exec(Fe[Be]))[2]&&be[2].indexOf("native")===0;nt=be[2]&&be[2].indexOf("eval")===0,Se=je.exec(be[2]),nt&&Se&&(be[2]=Se[1],be[3]=Se[2],be[4]=Se[3]),Pe={args:Qe?[be[2]]:[],column:be[4]?+be[4]:void 0,func:be[1]||ae,line:be[3]?+be[3]:void 0,url:Qe?void 0:be[2]}}else if(Ve.exec(Fe[Be]))be=Ve.exec(Fe[Be]),Pe={args:[],column:be[4]?+be[4]:void 0,func:be[1]||ae,line:+be[3],url:be[2]};else{if(!Ae.exec(Fe[Be]))continue;be=Ae.exec(Fe[Be]),nt=be[3]&&-1<be[3].indexOf(" > eval"),Se=We.exec(be[3]),nt&&Se?(be[3]=Se[1],be[4]=Se[2],be[5]=void 0):Be!==0||be[5]||_e.columnNumber===void 0||(Ze[0].column=_e.columnNumber+1),Pe={args:be[2]?be[2].split(","):[],column:be[5]?+be[5]:void 0,func:be[1]||ae,line:be[4]?+be[4]:void 0,url:be[3]}}!Pe.func&&Pe.line&&(Pe.func=ae),Ze.push(Pe)}if(Ze.length)return{stack:Ze,message:ge(_e,"message"),name:ge(_e,"name")}}})(ne))return le}catch{}try{if(le=(_e=>{var Re=ge(_e,"message");if(Re){var xe=Re.split(`
`);if(!(xe.length<4)){var Ae,Ve,We=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,je=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,Fe=/^\s*Line (\d+) of function script\s*$/i,Ze=[],Qe=window&&window.document&&window.document.getElementsByTagName("script"),nt=[];let Se;for(Ae in Qe)((be,Pe)=>Object.prototype.hasOwnProperty.call(be,Pe))(Qe,Ae)&&!Qe[Ae].src&&nt.push(Qe[Ae]);for(let be=2;be<xe.length;be+=2){let Pe;We.exec(xe[be])?(Se=We.exec(xe[be]),Pe={args:[],column:void 0,func:Se[3],line:+Se[1],url:Se[2]}):je.exec(xe[be])?(Se=je.exec(xe[be]),Pe={args:[],column:void 0,func:Se[4],line:+Se[1],url:Se[3]}):Fe.exec(xe[be])&&(Se=Fe.exec(xe[be]),Ve=window.location.href.replace(/#.*$/,""),Pe={url:Ve,args:[],column:void 0,func:"",line:+Se[1]}),Pe&&(Pe.func||(Pe.func=ae),Pe.context=[xe[be+1]],Ze.push(Pe))}if(Ze.length)return{stack:Ze,message:xe[0],name:ge(_e,"name")}}}})(ne))return le}catch{}try{if(le=ce(ne,1+pe))return le}catch{}return{message:ge(ne,"message"),name:ge(ne,"name"),stack:[]}}function ce(ne,pe){var le,_e,Re=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,xe=[],Ae={};let Ve=!1;for(let We=ce.caller;We&&!Ve;We=We.caller)We!==de&&(_e={args:[],column:void 0,func:ae,line:void 0,url:void 0},le=Re.exec(We.toString()),We.name?_e.func=We.name:le&&(_e.func=le[1]),_e.func===void 0&&(_e.func=le?le.input.substring(0,le.input.indexOf("{")):void 0),Ae[We.toString()]?Ve=!0:Ae[We.toString()]=!0,xe.push(_e));return pe&&xe.splice(0,pe),pe={stack:xe,message:ge(ne,"message"),name:ge(ne,"name")},((We,je,Fe)=>{if((je={url:je,line:Fe?+Fe:void 0}).url&&je.line){if(We.incomplete=!1,Fe=We.stack,0<Fe.length&&Fe[0].url===je.url){if(Fe[0].line===je.line)return;if(!Fe[0].line&&Fe[0].func===je.func)return Fe[0].line=je.line,Fe[0].context=je.context}Fe.unshift(je),We.partial=!0}else We.incomplete=!0})(pe,ge(ne,"sourceURL")||ge(ne,"fileName"),ge(ne,"line")||ge(ne,"lineNumber")),pe}function ge(ne,pe){return typeof ne=="object"&&ne&&pe in ne&&typeof(ne=ne[pe])=="string"?ne:void 0}function he(ne,pe,le){function _e(){return xe.apply(this,arguments)}let Re=ne[pe],xe=le(Re);return ne[pe]=_e,{stop:()=>{ne[pe]===_e?ne[pe]=Re:xe=Re}}}function se(ne,pe,{before:le,after:_e}){return he(ne,pe,Re=>function(){var xe=arguments;let Ae;return le&&a(le,this,xe),typeof Re=="function"&&(Ae=Re.apply(this,xe)),_e&&a(_e,this,xe),Ae})}let Z=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function oe(ne){return`${ne.name||"Error"}: `+ne.message}function re(ne){return ne.filter(pe=>pe.url==null||!pe.url.includes("sls-rum.js"))}function Te(ne){let pe=oe(ne);return ne.stack.forEach(le=>{var _e=le.func==="?"?"<anonymous>":le.func,Re=le.args&&0<le.args.length?`(${le.args.join(", ")})`:"",xe=le.line?":"+le.line:"",Ae=le.line&&le.column?":"+le.column:"";pe+=`
  at ${_e}${Re} @ `+le.url+xe+Ae}),encodeURIComponent(pe)}let Ce=8,ke=16,ye="traceparent",J="uber-trace-id",fe="X-B3-TraceId",Ee="X-B3-SpanId",Ie=Array(32);function Me(ne){for(let pe=0;pe<2*ne;pe++)Ie[pe]=Math.floor(16*Math.random())+48,58<=Ie[pe]&&(Ie[pe]+=39);return String.fromCharCode.apply(null,Ie.slice(0,2*ne))}function Oe(){return Me(ke)}function we(){return Me(Ce)}function ue(ne,pe){return ne+`-${pe}-1`}function ve(ne,pe){return`00-${ne}-${pe}-01`}function Le(ne,pe){return ne+`:${pe}:0:1`}let Ne={b3:{name:"b3",getter:ue},traceparent:{name:ye,getter:ve},uber:{name:J,getter:Le}};function Ue(ne,pe,le){ne!=null&&Object.keys(ne).map(_e=>{le==null||le==""?pe[_e]=ne[_e]:pe[le+"."+_e]=ne[_e]})}var $e=Object.defineProperty,rt=Object.defineProperties,Je=Object.getOwnPropertyDescriptors,et=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,Ke=(ne,pe,le)=>pe in ne?$e(ne,pe,{enumerable:!0,configurable:!0,writable:!0,value:le}):ne[pe]=le,Ye=(ne,pe)=>{for(var le in pe=pe||{})De.call(pe,le)&&Ke(ne,le,pe[le]);if(et)for(var le of et(pe))Xe.call(pe,le)&&Ke(ne,le,pe[le]);return ne};function it(){return{name:d.InternalPlugin.BASE_TRANSFORM,run:function(){this.subscribe("*",(_e,pe)=>{var le,{otBase:_e,extra:Re}=_e,xe=(_e.service=this.options.service,_e.attribute=(le=Ye(Ye({},(le=this.options.attribute)!=null?le:{}),_e.attribute),xe={sid:this.session.getSessionId(),pid:this.session.getPageId(),uid:this.options.uid},rt(le,Je(xe))),this.options.nickname&&(_e.attribute.nickname=this.options.nickname),Ue(this.options.custom,_e.attribute,"custom"),_e.resource=Ye(Ye({},(le=this.options.resource)!=null?le:{}),_e.resource),Ue({"uem.sdk.version":"0.3.8",workspace:this.options.workspace,"deployment.environment":this.options.env},_e.resource),this.options.namespace&&(_e.resource["service.namespace"]=this.options.namespace),this.options.version&&(_e.resource["service.version"]=this.options.version),{otBase:_e,extra:Re});d.InternalPlugin.BASE_TRANSFORM,pe(xe)},d.InternalPluginPriority[d.InternalPlugin.BASE_TRANSFORM])}}}class ut{constructor(pe){this.subscribeMap={},this.allNotifiers=[],this.allNotifiers=pe}subscribeOne(pe,le,_e,Re){var xe=(xe=this.subscribeMap[le])!=null?xe:[];(this.subscribeMap[le]=xe).push({name:pe,priority:Re,callback:_e}),xe.sort((Ae,Ve)=>Ae.priority-Ve.priority)}notify(pe,le){pe=(pe=this.subscribeMap[pe])!=null?pe:[],function _e(Re,xe,Ae){if(!(xe<0)){let Ve=je=>{_e(Re,xe-1,je)},We=Re[xe];M(()=>{We.callback.call(void 0,Ae,Ve)},"plugin notify run error")()}}(pe,pe.length-1,le)}subscribe(pe,le,_e,Re){if(le==="*")for(let Ae=0;Ae<this.allNotifiers.length;Ae++){var xe=this.allNotifiers[Ae];pe!==xe&&this.subscribeOne(pe,xe,_e,Re)}else this.subscribeOne(pe,le,_e,Re)}getSubscribeMap(){return this.subscribeMap}}var at=Object.defineProperty,ct=Object.defineProperties,_t=Object.getOwnPropertyDescriptors,bt=Object.getOwnPropertySymbols,vt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,wt=(ne,pe,le)=>pe in ne?at(ne,pe,{enumerable:!0,configurable:!0,writable:!0,value:le}):ne[pe]=le;let xt=["uid","nickname","env","service","version","custom","namespace"];class pt{constructor(pe){var le;this.isInit=!1,this.pendingPlugins=[],this.pluginMap={},this.session=(()=>{let _e=Oe(),Re=we();return{getSessionId:()=>_e,getPageId:()=>Re,refreshPageId:()=>{Re=we()}}})(),this.options=pe,this.use({name:d.InternalPlugin.LOG_SEND,run:function(){}}),this.use(it()),this.options.env=(le=pe.env)!=null?le:"prod",this.options.version=(le=pe.version)!=null?le:"-"}initPlugin(pe){if(pe==null||typeof pe!="object")console.error("plugin is not a object");else if(pe.name==null||pe.name==="")console.error("plugin name is required.");else if(this.pluginMap[pe.name])console.error(`plugin name: ${pe.name} is conflict`);else if(typeof pe.run!="function")console.error("plugin.run is not a function");else{le=((Re,xe)=>{for(var Ae in xe=xe||{})vt.call(xe,Ae)&&wt(Re,Ae,xe[Ae]);if(bt)for(var Ae of bt(xe))gt.call(xe,Ae)&&wt(Re,Ae,xe[Ae]);return Re})({},this.context);let _e=ct(le,_t({subscribe:(Re,xe,Ae)=>{this.sub.subscribe(pe.name,Re,xe,Ae)},notify:Re=>{this.sub.notify(pe.name,Re)}}));var le;M(()=>pe.run.call(_e),`plugin ${pe.name} init failed`)()}}addLog(pe){this.isInit?(Ue(pe,pe={t:d.WebEventType.LOG},d.WebEventType.LOG),pe={start:1e3*z(),attribute:pe,resource:{}},this.sub.notify(d.InternalPlugin.LOG_SEND,{otBase:pe,extra:{}})):console.error("log should call after start")}setOptions(pe){this.isInit?xt.forEach(le=>{pe[le]!==this.options[le]&&pe[le]!=null&&pe[le]!=""&&(this.options[le]=pe[le],le==="uid")&&typeof this.setLocalStorage=="function"&&this.setLocalStorage(d.SLS_TRACE_UID_KEY,pe[le])}):console.error("setOptions should call after start")}start(){if(!this.isInit){this.isInit=!0;let _e=this.options.uid;_e!=null&&_e!==""||(_e=typeof this.getLocalStorage=="function"?this.getLocalStorage(d.SLS_TRACE_UID_KEY):_e)!=null&&_e!==""||(_e=U()),this.options.uid=_e,typeof this.setLocalStorage=="function"&&this.setLocalStorage(d.SLS_TRACE_UID_KEY,_e);var pe,le=this.pendingPlugins.map(Re=>Re?.name).filter(Re=>Re!=null);this.sub=new ut(le),this.context={options:this.options,session:this.session};for(pe of this.pendingPlugins)this.initPlugin(pe)}}use(pe){this.isInit?console.error(`plugin: ${pe?.name} use should run before start`):this.pendingPlugins.push(pe)}}var yt=Object.defineProperty,He=Object.getOwnPropertySymbols,qe=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,me=(ne,pe,le)=>pe in ne?yt(ne,pe,{enumerable:!0,configurable:!0,writable:!0,value:le}):ne[pe]=le;O.ONE_DAY=864e5,O.ONE_HOUR=36e5,O.ONE_KILO_BYTE=1024,O.ONE_MINUTE=6e4,O.ONE_SECOND=1e3,O.ONE_YEAR=31536e6,O.Observable=class{constructor(ne){this.onFirstSubscribe=ne,this.observers=[]}subscribe(ne){return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(ne),{unsubscribe:()=>{this.observers=this.observers.filter(pe=>ne!==pe),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}}}notify(ne){this.observers.forEach(pe=>pe(ne))}},O.SDK_VERSION="0.3.8",O.SLSClient=pt,O.Subscribe=class{constructor(){this.dep=new Map}subscribe(ne,pe){var le=this.dep.get(ne);le?this.dep.set(ne,le.concat(pe)):this.dep.set(ne,[pe])}notify(ne,pe){var le=this.dep.get(ne);ne&&le&&le.forEach(_e=>{try{_e(pe)}catch(Re){console.error(Re)}})}},O.assembleOTAttribute=Ue,O.buildHttpInfo=function(ne,pe,le,_e){return ne={url:ne,method:pe,status_code:le},_e==null?ne:(pe=((Re,xe)=>{for(var Ae in xe=xe||{})c.call(xe,Ae)&&j(Re,Ae,xe[Ae]);if(l)for(var Ae of l(xe))h.call(xe,Ae)&&j(Re,Ae,xe[Ae]);return Re})({},ne),le={host:_e.host,scheme:_e.protocol},r(pe,n(le)))},O.callMonitored=a,O.catchUserErrors=M,O.clocksNow=function(){return{relative:te(),timeStamp:z()}},O.clocksOrigin=function(){return{relative:0,timeStamp:ie()}},O.computeStackTrace=de,O.createHandlingStack=function(){let ne=new Error,pe;return a(()=>{var le=de(ne);le!=null&&le.stack&&(le.stack=re(le.stack)),pe=Te(le)}),pe},O.currentDrift=function(){return Math.round(Date.now()-(ie()+performance.now()))},O.debugLog=u,O.defineGlobal=function(ne,pe,le,_e){_e?_e(()=>{o(ne,pe,le)}):o(ne,pe,le)},O.defineGlobalValue=o,O.elapsed=function(ne,pe){return pe-ne},O.formatErrorMessage=oe,O.formatUnknownError=function(ne,pe,le,_e=!0){return ne&&(ne.message!==void 0||pe instanceof Error)?(ne!=null&&ne.stack&&_e&&(ne.stack=re(ne.stack)),pe=(le=ne?.stack)==null?void 0:le[0],{message:encodeURIComponent(ne.message||"Empty message"),stacktrace:Te(ne),type:ne.name,col:pe?pe.column:void 0,line:pe?pe.line:void 0,file:encodeURIComponent(pe&&pe.url?pe.url:""),id:W()}):{message:le+" "+JSON.stringify(pe),stacktrace:"",type:ne&&ne.name,id:W()}},O.genUid=U,O.generateSpanId=we,O.generateTraceId=Oe,O.generateUUID=W,O.getB3Header=ue,O.getConsoleLogStatus=function(){return!1},O.getCorrectedTimeStamp=X,O.getInternalUrl=R,O.getJaegerTraceHeaderr=Le,O.getRelativeTime=function(ne){return ne-ie()},O.getTimeStamp=ee,O.getW3CTraceHeader=ve,O.includes=function(ne,pe){return ne.indexOf(pe)!==-1},O.instrumentMethod=he,O.instrumentMethodAndCallOriginal=se,O.isError=function(ne){return Object.prototype.toString.call(ne)==="[object Error]"},O.isInternalUrl=function(ne,pe){return ne.includes("/track?APIVersion=0.6.0")||ne===R(pe)},O.isNumber=F,O.isString=function(ne){return Object.prototype.toString.call(ne)==="[object String]"},O.isURL=function(ne){return typeof ne=="string"&&K.test(ne)},O.looksLikeRelativeTime=function(ne){return ne<31536e6},O.makeWebPublicApi=function(ne,pe){let le,_e={current:void 0},Re=[],xe={};return((Ae,Ve)=>{for(var We in Ve=Ve||{})qe.call(Ve,We)&&me(Ae,We,Ve[We]);if(He)for(var We of He(Ve))ze.call(Ve,We)&&me(Ae,We,Ve[We]);return Ae})({init:Ae=>{if(_e.current==null){_e.current=ne(Ae);let Ve=_e.current;Re.forEach(We=>{Ve.use(We)}),Ve.start()}},use:Ae=>{Re.push(Ae)},addLog:Ae=>{var Ve=_e.current;Ve&&Ve.addLog(Ae)},onReady(Ae){Ae()},setOptions:Ae=>{var Ve=_e.current;Ve&&Ve.setOptions(Ae)}},xe=typeof pe=="function"?(le=pe(_e))!=null?le:{}:xe)},O.matchCondition=G,O.matchSample=function(ne){return ne!==0&&Math.random()<=ne},O.matchWithDefault=function(ne,pe){return ne==null?pe:!!ne},O.monitor=function(ne){return function(){return a(ne,this,arguments)}},O.noop=function(){},O.parseUri=function(ne){var pe,le;return(ne=(_e=>{try{return decodeURIComponent(_e)}catch{return unescape(_e)}})(ne||"").match(K))==null?null:(le=(pe=(ne[3]||"").split(":")).length?(ne[2]||"").replace(/(.*\@)/,""):ne[2],{uri:ne[0],protocol:ne[1],host:le,hostname:ne[4],port:ne[5],auth:ne[3],user:pe[0],password:pe[1],path:ne[6],search:ne[7],hash:ne[8]})},O.patchHeaderOnRequest=function(ne,pe,le,_e,Re,xe="headers"){var Ae=le??{};Ae[xe]=(le=Ae[xe])!=null?le:{},Ae[xe].constructor.name==="Headers"?(Ae[xe].append("b3",ue(ne,pe)),Ae[xe].append(ye,ve(ne,pe)),Ae[xe].append(J,Le(ne,pe)),Re&&Ae[xe].append(fe,ne),Re&&Ae[xe].append(Ee,pe)):(Ae[xe].b3=ue(ne,pe),Ae[xe][ye]=ve(ne,pe),Ae[xe][J]=Le(ne,pe),Re&&(Ae[xe][fe]=ne),Re&&(Ae[xe][Ee]=pe));try{if(_e)if(_e instanceof Function){var Ve=M(_e,"run customTraceHeaders func error.")(ne,pe);if(Ve)for(var[We,je]of Object.entries(Ve))Ae[xe].constructor.name==="Headers"?Ae[xe].append(We,je):Ae[xe][We]=je}else for(var[Fe,Ze]of Object.entries(_e))Ne[Ze]&&(Ae[xe].constructor.name==="Headers"?Ae[xe].append(Fe,Ne[Ze].getter(ne,pe)):Ae[xe][Fe]=Ne[Ze].getter(ne,pe))}catch(Qe){console.error("Failed utilizing customTraceHeaders.",Qe)}return Ae},O.patchHeaderOnXhr=function(ne,pe,le,_e,Re){ne.setRequestHeader("b3",ue(pe,le)),ne.setRequestHeader(ye,ve(pe,le)),ne.setRequestHeader(J,Le(pe,le)),Re&&ne.setRequestHeader(fe,pe),Re&&ne.setRequestHeader(Ee,le);try{if(_e)if(_e instanceof Function){var xe=M(_e,"run customTraceHeaders func error.")(pe,le);if(xe)for(var[Ae,Ve]of Object.entries(xe))ne.setRequestHeader(Ae,Ve)}else for(var[We,je]of Object.entries(_e))Ne[je]&&ne.setRequestHeader(We,Ne[je].getter(pe,le))}catch(Fe){console.error("Failed utilizing customTraceHeaders.",Fe)}},O.relativeNow=te,O.relativeToClocks=function(ne){return{relative:ne,timeStamp:X(ne)}},O.resetNavigationStart=function(){Y=void 0},O.round=f,O.shouldTrace=function(ne,pe){return pe==null||G(ne,pe)},O.shouldTrackBody=function(ne,pe,le){return ne!==!1&&(ne===!0||ne==="error"&&!le||typeof ne=="function"&&M(ne,"call shouldTrackBody failed")(pe))},O.startUnhandledErrorCollection=function(ne){let pe=(le=ne,se(window,"onerror",{before(xe,Ae,Ve,We,je){let Fe;if(je)Fe=de(je),le(Fe,je);else{je={url:Ae,column:We,line:Ve};let Ze,Qe=xe;({}).toString.call(xe)==="[object String]"&&(Ae=Z.exec(Qe))&&(Ze=Ae[1],Qe=Ae[2]),Fe={name:Ze,message:typeof Qe=="string"?Qe:void 0,stack:[je]},le(Fe,xe)}}})).stop;var le,_e;let Re=(_e=ne,se(window,"onunhandledrejection",{before(Ae){var Ae=Ae.reason||"Empty reason",Ve=de(Ae);_e(Ve,Ae)}})).stop;return{stop:()=>{pe(),Re()}}},O.throttle=function(ne,pe){let le=!0;return function(..._e){le&&(ne.apply(this,_e),le=!1,setTimeout(()=>{le=!0},pe))}},O.timeStampNow=z,O.toServerDuration=function(ne){return F(ne)?f(1e6*ne,0):ne},O.toStackTraceString=Te},{"@aliyun-sls/web-types":5}],3:[function(t,e,O){class d{constructor(a){this.total=0,this.count=0,this.peddings=[],this.total=a}append(a){this.peddings.push(a),this.run()}run(){var a;!this.peddings.length||this.count>=this.total||(a=this.peddings.shift())&&(this.count++,a().finally(()=>{this.count--,this.run()}))}}e.exports=class{constructor(o){var a;this.timer=null,this.time=10,this.count=10,this.arr=[],this.time=(a=o.time)!=null?a:10,this.count=(a=o.count)!=null?a:10,this.ccController=new d((a=o.maxReqCount)!=null?a:10),o.host.startsWith("http://")||o.host.startsWith("https://")?this.url=o.host+"/logstores/"+o.logstore+"/track":this.url="https://"+o.project+"."+o.host+"/logstores/"+o.logstore+"/track",(this.opt=o).installUnloadHook&&typeof o.installUnloadHook=="function"&&o.installUnloadHook(()=>{this.sendImmediateInner()})}assemblePayload(o){return o={__logs__:o},this.opt.tags&&(o.__tags__=this.opt.tags),this.opt.topic&&(o.__topic__=this.opt.topic),this.opt.source&&(o.__source__=this.opt.source),JSON.stringify(o)}platformSend(){if(this.opt.sendPayload&&typeof this.opt.sendPayload=="function"){let o=this.assemblePayload(this.arr);this.ccController.append(()=>this.opt.sendPayload(this.url,o))}}transString(o){var a,u={};for(a in o)typeof o[a]=="object"?u[a]=JSON.stringify(o[a]):u[a]=String(o[a]);return u}sendImmediateInner(){this.arr&&0<this.arr.length&&(this.platformSend(),this.timer!=null&&(clearTimeout(this.timer),this.timer=null),this.arr=[])}sendInner(){if(this.timer)this.arr.length>=this.count&&(clearTimeout(this.timer),this.timer=null,this.sendImmediateInner());else{let o=this;this.arr.length>=this.count||this.time<=0?this.sendImmediateInner():this.timer=setTimeout(function(){o.sendImmediateInner()},1e3*this.time)}}send(o){o=this.transString(o),this.arr.push(o),this.sendInner()}sendImmediate(o){o=this.transString(o),this.arr.push(o),this.sendImmediateInner()}sendBatchLogs(o){o=o.map(a=>this.transString(a)),this.arr.push(...o),this.sendInner()}sendBatchLogsImmediate(o){o=o.map(a=>this.transString(a)),this.arr.push(...o),this.sendImmediateInner()}overwriteTransString(o){this.transString=o.transString}getOpt(){return this.opt}}},{}],4:[function(o,e,O){var d=o("@aliyun-sls/web-base"),o=o("@aliyun-sls/web-track-base"),a=(n,l,c)=>new Promise((h,j)=>{var F=U=>{try{W(c.next(U))}catch(M){j(M)}},f=U=>{try{W(c.throw(U))}catch(M){j(M)}},W=U=>U.done?h(U.value):Promise.resolve(U.value).then(F,f);W((c=c.apply(n,l)).next())});function u(n,l){var c=new window.XMLHttpRequest;c.open("POST",n+"?APIVersion=0.6.0",!0),c.send(l)}function s(n,l){try{32768<=l.length?u(n,l):(c=n,h=l,navigator&&navigator.sendBeacon&&navigator.sendBeacon(c+"?APIVersion=0.6.0",h)||u(n,l))}catch(j){window&&window.console&&typeof window.console.error=="function"&&(console.error(`Failed to log to ali log service because of this exception:
`+j),console.error("Failed log data:",n))}var c,h}class r extends o{constructor(l){super(Object.assign({},l,{installUnloadHook:c=>{window.addEventListener("beforeunload",()=>{c()})},sendPayload:(c,h)=>a(this,null,function*(){s(c,h)})}))}useStsPlugin(l){this.getOpt().sendPayload=(c,h)=>a(this,null,function*(){yield function(j,F,f){return a(this,null,function*(){return new Promise(W=>a(this,null,function*(){try{j=j.slice(0,-6);var U,{data:M,header:R}=yield f.process(j,F);let K=new window.XMLHttpRequest;for(U in K.open("POST",j,!0),R)K.setRequestHeader(U,R[U]);K.onreadystatechange=()=>{K.readyState===4&&(K.status!==200&&window&&window.console&&typeof window.console.error=="function"&&(console.error(`Failed to log to ali log service because of this exception:
`+K.status),console.error("Failed logdata:",j)),W())},K.send(M)}catch(K){window&&window.console&&typeof window.console.error=="function"&&(console.error(`Failed to log to ali log service because of this exception:
`+K),console.error("Failed log data:",j))}}))})}(c,h,l)}),this.overwriteTransString(l)}}d.defineGlobal(window,"SLS_Tracker",r),e.exports=r},{"@aliyun-sls/web-base":2,"@aliyun-sls/web-track-base":3}],5:[function(t,e,O){var d=(s=>(s.ERROR="error",s.LOG="log",s.LOCATION="pv",s.API="api",s.RESOURCE="res",s.RESOURCE_ERROR="res_err",s.PERF="perf",s.CONSOLE_LOG="console",s.DOM_CLICK="dom_click",s))({}),o=(s=>(s.LOG_SEND="LOG_SEND",s.BROWSER_SEND="BROWSER_SEND",s.BASE_TRANSFORM="BASE_TRANSFORM",s.BROWSER_BASE_TRANSFORM="BROWSER_BASE_TRANSFORM",s.BROWSER_FETCH="BROWSER_FETCH",s.BROWSER_XHR="BROWSER_XHR",s.BROWSER_DOM="BROWSER_DOM",s.BROWSER_LOCATION="BROWSER_LOCATION",s.BROWSER_RUNTIME_ERROR="BROWSER_RUNTIME_ERROR",s.BROWSER_CUSTOM_ERROR="BROWSER_CUSTOM_ERROR",s.BROWSER_RESOURCE_ERROR="BROWSER_RESOURCE_ERROR",s.BROWSER_CONSOLE="BROWSER_CONSOLE",s.BROWSER_PERF="BROWSER_PERF",s.BROWSER_RESOURSE="BROWSER_RESOURSE",s.MINI_SEND="MINI_SEND",s.MINI_REQUEST="MINI_REQUEST",s.MINI_BASE_TRANSFORM="MINI_BASE_TRANSFORM",s.MINI_ROUTE="MINI_ROUTE",s))({}),a={BROWSER_SEND:-1,MINI_SEND:-2,BASE_TRANSFORM:100,BROWSER_BASE_TRANSFORM:200,MINI_BASE_TRANSFORM:201,BROWSER_PERF:301,BROWSER_FETCH:400,BROWSER_XHR:401,MINI_REQUEST:402,BROWSER_RUNTIME_ERROR:500},u=(s=>(s.OK="OK",s.ERROR="ERROR",s.UNSET="UNSET",s))({});O.InternalPlugin=o,O.InternalPluginPriority=a,O.OTStatusCode=u,O.SLS_CLIENT_NAME="SLS_CLIENT",O.SLS_TRACE_UID_KEY="sls-trace-uid",O.WebEventType=d},{}],6:[function(t,e,O){},{}],7:[function(t,e,O){(function(d){(function(){var o,a;o=this,a=function(){var u,s=Math;if(typeof window<"u"&&window.crypto&&(u=window.crypto),typeof self<"u"&&self.crypto&&(u=self.crypto),!(u=!(u=!(u=typeof globalThis<"u"&&globalThis.crypto?globalThis.crypto:u)&&typeof window<"u"&&window.msCrypto?window.msCrypto:u)&&d!==void 0&&d.crypto?d.crypto:u)&&typeof t=="function")try{u=t("crypto")}catch{}var r=Object.create||function(K){return n.prototype=K,K=new n,n.prototype=null,K};function n(){}var l={},c=l.lib={},h=c.Base={extend:function(K){var G=r(this);return K&&G.mixIn(K),G.hasOwnProperty("init")&&this.init!==G.init||(G.init=function(){G.$super.init.apply(this,arguments)}),(G.init.prototype=G).$super=this,G},create:function(){var K=this.extend();return K.init.apply(K,arguments),K},init:function(){},mixIn:function(K){for(var G in K)K.hasOwnProperty(G)&&(this[G]=K[G]);K.hasOwnProperty("toString")&&(this.toString=K.toString)},clone:function(){return this.init.prototype.extend(this)}},j=c.WordArray=h.extend({init:function(K,G){K=this.words=K||[],this.sigBytes=G??4*K.length},toString:function(K){return(K||f).stringify(this)},concat:function(K){var G=this.words,X=K.words,z=this.sigBytes,te=K.sigBytes;if(this.clamp(),z%4)for(var ee=0;ee<te;ee++){var Y=X[ee>>>2]>>>24-ee%4*8&255;G[z+ee>>>2]|=Y<<24-(z+ee)%4*8}else for(var ie=0;ie<te;ie+=4)G[z+ie>>>2]=X[ie>>>2];return this.sigBytes+=te,this},clamp:function(){var K=this.words,G=this.sigBytes;K[G>>>2]&=4294967295<<32-G%4*8,K.length=s.ceil(G/4)},clone:function(){var K=h.clone.call(this);return K.words=this.words.slice(0),K},random:function(K){for(var G=[],X=0;X<K;X+=4)G.push((()=>{if(u){if(typeof u.getRandomValues=="function")try{return u.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof u.randomBytes=="function")try{return u.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")})());return new j.init(G,K)}}),F=l.enc={},f=F.Hex={stringify:function(K){for(var G=K.words,X=K.sigBytes,z=[],te=0;te<X;te++){var ee=G[te>>>2]>>>24-te%4*8&255;z.push((ee>>>4).toString(16)),z.push((15&ee).toString(16))}return z.join("")},parse:function(K){for(var G=K.length,X=[],z=0;z<G;z+=2)X[z>>>3]|=parseInt(K.substr(z,2),16)<<24-z%8*4;return new j.init(X,G/2)}},W=F.Latin1={stringify:function(K){for(var G=K.words,X=K.sigBytes,z=[],te=0;te<X;te++){var ee=G[te>>>2]>>>24-te%4*8&255;z.push(String.fromCharCode(ee))}return z.join("")},parse:function(K){for(var G=K.length,X=[],z=0;z<G;z++)X[z>>>2]|=(255&K.charCodeAt(z))<<24-z%4*8;return new j.init(X,G)}},U=F.Utf8={stringify:function(K){try{return decodeURIComponent(escape(W.stringify(K)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(K){return W.parse(unescape(encodeURIComponent(K)))}},M=c.BufferedBlockAlgorithm=h.extend({reset:function(){this._data=new j.init,this._nDataBytes=0},_append:function(K){typeof K=="string"&&(K=U.parse(K)),this._data.concat(K),this._nDataBytes+=K.sigBytes},_process:function(ae){var G,X=this._data,z=X.words,te=X.sigBytes,ee=this.blockSize,Y=te/(4*ee),ie=(Y=ae?s.ceil(Y):s.max((0|Y)-this._minBufferSize,0))*ee,ae=s.min(4*ie,te);if(ie){for(var de=0;de<ie;de+=ee)this._doProcessBlock(z,de);G=z.splice(0,ie),X.sigBytes-=ae}return new j.init(G,ae)},clone:function(){var K=h.clone.call(this);return K._data=this._data.clone(),K},_minBufferSize:0}),R=(c.Hasher=M.extend({cfg:h.extend(),init:function(K){this.cfg=this.cfg.extend(K),this.reset()},reset:function(){M.reset.call(this),this._doReset()},update:function(K){return this._append(K),this._process(),this},finalize:function(K){return K&&this._append(K),this._doFinalize()},blockSize:16,_createHelper:function(K){return function(G,X){return new K.init(X).finalize(G)}},_createHmacHelper:function(K){return function(G,X){return new R.HMAC.init(K,X).finalize(G)}}}),l.algo={});return l},typeof O=="object"?e.exports=O=a():o.CryptoJS=a()}).call(this)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{crypto:6}],8:[function(t,e,O){var d,o;d=this,o=function(a){var u;return u=a.lib.WordArray,a.enc.Base64={stringify:function(s){for(var r=s.words,n=s.sigBytes,l=this._map,c=(s.clamp(),[]),h=0;h<n;h+=3)for(var j=(r[h>>>2]>>>24-h%4*8&255)<<16|(r[h+1>>>2]>>>24-(h+1)%4*8&255)<<8|r[h+2>>>2]>>>24-(h+2)%4*8&255,F=0;F<4&&h+.75*F<n;F++)c.push(l.charAt(j>>>6*(3-F)&63));var f=l.charAt(64);if(f)for(;c.length%4;)c.push(f);return c.join("")},parse:function(s){var r=s.length,n=this._map;if(!(l=this._reverseMap))for(var l=this._reverseMap=[],c=0;c<n.length;c++)l[n.charCodeAt(c)]=c;for(var h,j,F=n.charAt(64),f=(F&&(F=s.indexOf(F))!==-1&&(r=F),s),W=r,U=l,M=[],R=0,K=0;K<W;K++)K%4&&(h=U[f.charCodeAt(K-1)]<<K%4*2,j=U[f.charCodeAt(K)]>>>6-K%4*2,M[R>>>2]|=(h|j)<<24-R%4*8,R++);return u.create(M,R)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},a.enc.Base64},typeof O=="object"?e.exports=O=o(t("crypto-js/core")):o(d.CryptoJS)},{"crypto-js/core":7}],9:[function(t,e,O){var d,o;d=this,o=function(a){return a.enc.Utf8},typeof O=="object"?e.exports=O=o(t("crypto-js/core")):o(d.CryptoJS)},{"crypto-js/core":7}],10:[function(t,e,O){var d,o;d=this,o=function(a){return a.HmacSHA1},typeof O=="object"?e.exports=O=o(t("crypto-js/core"),t("crypto-js/sha1"),t("crypto-js/hmac")):o(d.CryptoJS)},{"crypto-js/core":7,"crypto-js/hmac":11,"crypto-js/sha1":12}],11:[function(t,e,O){var d,o;d=this,o=function(a){var u,s;u=a.lib.Base,s=a.enc.Utf8,a.algo.HMAC=u.extend({init:function(r,n){r=this._hasher=new r.init,typeof n=="string"&&(n=s.parse(n));for(var l=r.blockSize,c=4*l,r=((n=n.sigBytes>c?r.finalize(n):n).clamp(),this._oKey=n.clone()),n=this._iKey=n.clone(),h=r.words,j=n.words,F=0;F<l;F++)h[F]^=1549556828,j[F]^=909522486;r.sigBytes=n.sigBytes=c,this.reset()},reset:function(){var r=this._hasher;r.reset(),r.update(this._iKey)},update:function(r){return this._hasher.update(r),this},finalize:function(l){var n=this._hasher,l=n.finalize(l);return n.reset(),n.finalize(this._oKey.clone().concat(l))}})},typeof O=="object"?e.exports=O=o(t("crypto-js/core")):o(d.CryptoJS)},{"crypto-js/core":7}],12:[function(t,e,O){var d,o;d=this,o=function(a){var u,s,r,n,l;return s=(u=a).lib,r=s.WordArray,n=s.Hasher,l=[],s=u.algo.SHA1=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,h){for(var j=this._hash.words,F=j[0],f=j[1],W=j[2],U=j[3],M=j[4],R=0;R<80;R++){l[R]=R<16?0|c[h+R]:(K=l[R-3]^l[R-8]^l[R-14]^l[R-16])<<1|K>>>31;var K=(F<<5|F>>>27)+M+l[R];K+=R<20?1518500249+(f&W|~f&U):R<40?1859775393+(f^W^U):R<60?(f&W|f&U|W&U)-1894007588:(f^W^U)-899497514,M=U,U=W,W=f<<30|f>>>2,f=F,F=K}j[0]=j[0]+F|0,j[1]=j[1]+f|0,j[2]=j[2]+W|0,j[3]=j[3]+U|0,j[4]=j[4]+M|0},_doFinalize:function(){var c=this._data,h=c.words,j=8*this._nDataBytes,F=8*c.sigBytes;return h[F>>>5]|=128<<24-F%32,h[14+(64+F>>>9<<4)]=Math.floor(j/4294967296),h[15+(64+F>>>9<<4)]=j,c.sigBytes=4*h.length,this._process(),this._hash},clone:function(){var c=n.clone.call(this);return c._hash=this._hash.clone(),c}}),u.SHA1=n._createHelper(s),u.HmacSHA1=n._createHmacHelper(s),a.SHA1},typeof O=="object"?e.exports=O=o(t("crypto-js/core")):o(d.CryptoJS)},{"crypto-js/core":7}],13:[function(t,e,O){(function(d,o){(function(){var a,u;a=this,u=function(){function s(we){return typeof we=="function"}var r=Array.isArray||function(we){return Object.prototype.toString.call(we)==="[object Array]"},n=0,l=void 0,c=void 0,h=function(we,ue){M[n]=we,M[n+1]=ue,(n+=2)===2&&(c?c(R):Y())},j=typeof window<"u"?window:void 0,F=j||{},F=F.MutationObserver||F.WebKitMutationObserver,f=typeof self>"u"&&d!==void 0&&{}.toString.call(d)==="[object process]",W=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function U(){var we=setTimeout;return function(){return we(R,1)}}var M=new Array(1e3);function R(){for(var we=0;we<n;we+=2)(0,M[we])(M[we+1]),M[we]=void 0,M[we+1]=void 0;n=0}function K(){try{var we=Function("return this")().require("vertx");return(l=we.runOnLoop||we.runOnContext)!==void 0?function(){l(R)}:U()}catch{return U()}}var G,X,z,Y=void 0;function te(we,ue){var ve,Le=this,Ne=new this.constructor(ae),Ue=(Ne[ie]===void 0&&fe(Ne),Le._state);return Ue?(ve=arguments[Ue-1],h(function(){return ye(Ue,Ne,ve,Le._result)})):Ce(Le,Ne,we,ue),Ne}function ee(we){var ue;return we&&typeof we=="object"&&we.constructor===this?we:(Z(ue=new this(ae),we),ue)}var Y=f?function(){return d.nextTick(R)}:F?(X=0,f=new F(R),z=document.createTextNode(""),f.observe(z,{characterData:!0}),function(){z.data=X=++X%2}):W?((G=new MessageChannel).port1.onmessage=R,function(){return G.port2.postMessage(0)}):(j===void 0&&typeof t=="function"?K:U)(),ie=Math.random().toString(36).substring(2);function ae(){}var de=void 0,ce=1,ge=2;function he(we,ue,ve){h(function(Le){var Ne=!1,Ue=(($e,rt,Je,et)=>{try{$e.call(rt,Je,et)}catch(De){return De}})(ve,ue,function($e){Ne||(Ne=!0,(ue!==$e?Z:re)(Le,$e))},function($e){Ne||(Ne=!0,Te(Le,$e))},Le._label);!Ne&&Ue&&(Ne=!0,Te(Le,Ue))},we)}function se(we,ue,ve){var Le,Ne;ue.constructor===we.constructor&&ve===te&&ue.constructor.resolve===ee?(Le=we,(Ne=ue)._state===ce?re(Le,Ne._result):Ne._state===ge?Te(Le,Ne._result):Ce(Ne,void 0,function(Ue){return Z(Le,Ue)},function(Ue){return Te(Le,Ue)})):ve!==void 0&&s(ve)?he(we,ue,ve):re(we,ue)}function Z(we,ue){if(we===ue)Te(we,new TypeError("You cannot resolve a promise with itself"));else if(ve=typeof ue,ue===null||ve!="object"&&ve!="function")re(we,ue);else{ve=void 0;try{ve=ue.then}catch(Le){return void Te(we,Le)}se(we,ue,ve)}var ve}function oe(we){we._onerror&&we._onerror(we._result),ke(we)}function re(we,ue){we._state===de&&(we._result=ue,we._state=ce,we._subscribers.length!==0)&&h(ke,we)}function Te(we,ue){we._state===de&&(we._state=ge,we._result=ue,h(oe,we))}function Ce(we,ue,ve,Le){var Ne=we._subscribers,Ue=Ne.length;we._onerror=null,Ne[Ue]=ue,Ne[Ue+ce]=ve,Ne[Ue+ge]=Le,Ue===0&&we._state&&h(ke,we)}function ke(we){var ue=we._subscribers,ve=we._state;if(ue.length!==0){for(var Le,Ne=void 0,Ue=we._result,$e=0;$e<ue.length;$e+=3)Le=ue[$e],Ne=ue[$e+ve],Le?ye(ve,Le,Ne,Ue):Ne(Ue);we._subscribers.length=0}}function ye(we,ue,ve,Le){var Ne=s(ve),Ue=void 0,$e=void 0,rt=!0;if(Ne){try{Ue=ve(Le)}catch(Je){rt=!1,$e=Je}if(ue===Ue)return void Te(ue,new TypeError("A promises callback cannot return that same promise."))}else Ue=Le;ue._state===de&&(Ne&&rt?Z(ue,Ue):rt===!1?Te(ue,$e):we===ce?re(ue,Ue):we===ge&&Te(ue,Ue))}var J=0;function fe(we){we[ie]=J++,we._state=void 0,we._result=void 0,we._subscribers=[]}Ie.prototype._enumerate=function(we){for(var ue=0;this._state===de&&ue<we.length;ue++)this._eachEntry(we[ue],ue)},Ie.prototype._eachEntry=function(we,ue){var ve=this._instanceConstructor,Le=ve.resolve;if(Le===ee){var Ne,Ue=void 0,$e=void 0,rt=!1;try{Ue=we.then}catch(Je){rt=!0,$e=Je}Ue===te&&we._state!==de?this._settledAt(we._state,ue,we._result):typeof Ue!="function"?(this._remaining--,this._result[ue]=we):ve===Me?(Ne=new ve(ae),rt?Te(Ne,$e):se(Ne,we,Ue),this._willSettleAt(Ne,ue)):this._willSettleAt(new ve(function(Je){return Je(we)}),ue)}else this._willSettleAt(Le(we),ue)},Ie.prototype._settledAt=function(we,ue,ve){var Le=this.promise;Le._state===de&&(this._remaining--,we===ge?Te(Le,ve):this._result[ue]=ve),this._remaining===0&&re(Le,this._result)},Ie.prototype._willSettleAt=function(we,ue){var ve=this;Ce(we,void 0,function(Le){return ve._settledAt(ce,ue,Le)},function(Le){return ve._settledAt(ge,ue,Le)})};var Ee=Ie;function Ie(we,ue){this._instanceConstructor=we,this.promise=new we(ae),this.promise[ie]||fe(this.promise),r(ue)?(this.length=ue.length,this._remaining=ue.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(ue),this._remaining!==0)||re(this.promise,this._result)):Te(this.promise,new Error("Array Methods must be provided an Array"))}Oe.prototype.catch=function(we){return this.then(null,we)},Oe.prototype.finally=function(we){var ue=this.constructor;return s(we)?this.then(function(ve){return ue.resolve(we()).then(function(){return ve})},function(ve){return ue.resolve(we()).then(function(){throw ve})}):this.then(we,we)};var Me=Oe;function Oe(we){if(this[ie]=J++,this._result=this._state=void 0,this._subscribers=[],ae!==we){if(typeof we!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof Oe))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var ue=this;try{we(function(ve){Z(ue,ve)},function(ve){Te(ue,ve)})}catch(ve){Te(ue,ve)}}}return Me.prototype.then=te,Me.all=function(we){return new Ee(this,we).promise},Me.race=function(we){var ue=this;return r(we)?new ue(function(ve,Le){for(var Ne=we.length,Ue=0;Ue<Ne;Ue++)ue.resolve(we[Ue]).then(ve,Le)}):new ue(function(ve,Le){return Le(new TypeError("You must pass an array to race."))})},Me.resolve=ee,Me.reject=function(we){var ue=new this(ae);return Te(ue,we),ue},Me._setScheduler=function(we){c=we},Me._setAsap=function(we){h=we},Me._asap=h,Me.polyfill=function(){var we=void 0;if(o!==void 0)we=o;else if(typeof self<"u")we=self;else try{we=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ue=we.Promise;if(ue){var ve=null;try{ve=Object.prototype.toString.call(ue.resolve())}catch{}if(ve==="[object Promise]"&&!ue.cast)return}we.Promise=Me},Me.Promise=Me},typeof O=="object"&&e!==void 0?e.exports=u():a.ES6Promise=u()}).call(this)}).call(this,t("_process"),typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:14}],14:[function(t,a,O){var d,o,a=a.exports={};function u(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}try{d=typeof setTimeout=="function"?setTimeout:u}catch{d=u}try{o=typeof clearTimeout=="function"?clearTimeout:s}catch{o=s}function r(U){if(d===setTimeout)return setTimeout(U,0);if((d===u||!d)&&setTimeout)return(d=setTimeout)(U,0);try{return d(U,0)}catch{try{return d.call(null,U,0)}catch{return d.call(this,U,0)}}}var n,l=[],c=!1,h=-1;function j(){c&&n&&(c=!1,n.length?l=n.concat(l):h=-1,l.length)&&F()}function F(){if(!c){for(var U=r(j),M=(c=!0,l.length);M;){for(n=l,l=[];++h<M;)n&&n[h].run();h=-1,M=l.length}n=null,c=!1,function(R){if(o===clearTimeout)return clearTimeout(R);if((o===s||!o)&&clearTimeout)return(o=clearTimeout)(R);try{o(R)}catch{try{return o.call(null,R)}catch{return o.call(this,R)}}}(U)}}function f(U,M){this.fun=U,this.array=M}function W(){}a.nextTick=function(U){var M=new Array(arguments.length-1);if(1<arguments.length)for(var R=1;R<arguments.length;R++)M[R-1]=arguments[R];l.push(new f(U,M)),l.length!==1||c||r(F)},f.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=W,a.addListener=W,a.once=W,a.off=W,a.removeListener=W,a.removeAllListeners=W,a.emit=W,a.prependListener=W,a.prependOnceListener=W,a.listeners=function(U){return[]},a.binding=function(U){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(U){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],15:[function(t,e,O){e.exports={name:"aliyun-aliplayer",version:"2.32.0",description:" Web ",main:"./build/aliplayer-min",style:"./build/skins/default/aliplayer-min.css",files:["build"],repository:{type:"git",url:""},keywords:["aliyun","aliplayer"],scripts:{start:"npx grunt live","start:hls":"npx grunt live --hls=true","start:flv":"npx grunt live --flv=true",build:"npx grunt build",release:"commit-and-tag-version",prepublishOnly:"npm run build","test:unit":"karma start","test:unit:watch":"karma start --no-single-run","test:e2e:install":"npx playwright install","test:e2e:test-all":"npx playwright test","ci:e2e-test":"npm run ci:e2e-test-install && npm run ci:e2e-test-run","ci:e2e-test-install":"PLAYWRIGHT_DOWNLOAD_HOST=https://anpm.alibaba-inc.com/mirrors/playwright playwright install chrome","ci:e2e-test-run":"playwright test --project 'Google Chrome'","ci:e2e-test-show":"playwright show-report .ci/e2e"},devDependencies:{"@ali/mediabox-quality-tracer":"^0.26.0","@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@playwright/test":"^1.53.0","@types/chai":"^5.0.1","@types/mocha":"^10.0.10","@types/node":"^24.0.0","babel-loader":"^9.2.1","babel-plugin-es6-promise":"^1.1.1","babel-plugin-istanbul":"^7.0.0",babelify:"^10.0.0",chai:"^5.1.2","commit-and-tag-version":"^11.2.1","es6-promise":"^4.2.8",grunt:"^1.0.4","grunt-autoprefixer":"^3.0.4","grunt-babel":"^8.0.0","grunt-browserify":"^5.3.0","grunt-contrib-clean":"^2.0.0","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-cssmin":"^3.0.0","grunt-contrib-less":"^2.0.0","grunt-contrib-uglify":"^4.0.1","grunt-contrib-watch":"^1.1.0","grunt-run":"^0.8.1","grunt-text-replace":"^0.4.0",karma:"^6.4.4","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-webpack":"^5.0.1",mocha:"^11.0.1","node-args":"^2.1.8",sinon:"^19.0.2","sinon-chai":"^4.0.0",webpack:"^5.97.1"},dependencies:{"@aliyun-sls/web-track-browser":"^0.3.9","crypto-js":"^4.1.1"},optionalDependencies:{puppeteer:"^23.11.1"}}},{}],16:[function(r,e,O){var d=r("../ui/component"),o=(r("../lib/util"),r("../lib/dom")),a=r("../lib/event"),u=(r("../lib/ua"),r("../lang/index")),s=r("../player/base/event/eventtype"),r=d.extend({init:function(n,l){d.call(this,n,l),this.className=l.className||"prism-auto-stream-selector",this.addClass(this.className)},createEl:function(){var n=d.prototype.createEl.call(this,"div");return n.innerHTML="<div><p class='tip-text'></p></div><div class='operators'><a class='prism-button prism-button-ok' type='button'>"+u.get("OK_Text")+"</a><a class='prism-button prism-button-cancel'  target='_blank'>"+u.get("Cancel_Text")+"</a></div>",n},bindEvent:function(){var n=this,l=(n._player.on(s.Private.AutoStreamShow,function(c){var h,j=document.querySelector("#"+n.getId()+" .tip-text");n._player._getLowerQualityLevel&&(h=n._player._getLowerQualityLevel())&&(n._switchUrl=h,j.innerText=u.get("Auto_Stream_Tip_Text").replace("$$",h.item.desc),o.css(n.el(),"display","block"))}),n._player.on(s.Private.AutoStreamHide,function(c){document.querySelector("#"+n.getId()+" .tip-text"),o.css(n.el(),"display","none")}),document.querySelector("#"+n.getId()+" .prism-button-ok")),l=(a.on(l,"click",function(){n._player._changeStream&&n._switchUrl&&(n._player._changeStream(n._switchUrl.index,u.get("Quality_Change_Text")),n._player.trigger(s.Private.SettingListHide)),o.css(n.el(),"display","none")}),document.querySelector("#"+n.getId()+" .prism-button-cancel"));a.on(l,"click",function(){o.css(n.el(),"display","none"),n._player.trigger(s.Private.SettingListHide)})}});e.exports=r},{"../lang/index":28,"../lib/dom":37,"../lib/event":38,"../lib/ua":53,"../lib/util":55,"../player/base/event/eventtype":77,"../ui/component":143}],17:[function(h,e,O){var d=h("../ui/component"),o=h("../lib/dom"),a=h("../lib/event"),u=h("../lib/ua"),s=h("../lib/function"),r=(h("../lang/index"),h("../lib/util")),n=h("../config"),l=h("../lib/playerutil"),c=h("../player/base/event/eventtype"),h=d.extend({init:function(j,F){d.call(this,j,F),this.className=F.className||"prism-liveshift-progress",this.addClass(this.className),this._liveshiftService=j._liveshiftService},createEl:function(){var j=d.prototype.createEl.call(this);return j.innerHTML='<div class="prism-enable-liveshift"><div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-liveshift-seperator"></div></div><div class="prism-disable-liveshift"></div>',j},bindEvent:function(){function j(U){F._progressDown=U}var F=this,f=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this.id()+" .prism-progress-time"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),this.seperatorNode=document.querySelector("#"+this.id()+" .prism-liveshift-seperator"),this.progressNode=document.querySelector("#"+this.id()+" .prism-enable-liveshift"),document.querySelector("#"+this.id()+" .prism-progress-cursor img")),W="//"+n.domain+n.path+n.h5Version+"/skins/default/img/dragcursor.png";this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,this._player._options.skinsDomain?W=this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":n.domain?-1<n.domain.indexOf("localhost")&&(W="//"+n.domain+"/build/skins/default/img/dragcursor.png"):W=this._player&&this._player._options&&this._player._options.sdkDomain?this._player._options.sdkDomain+n.path+n.h5Version+"/skins/default/img/dragcursor.png":(n.path||"").substring(1)+n.h5Version+"/skins/default/img/dragcursor.png",f.src=W,a.on(this.cursorNode,"mousedown",function(U){F._onMouseDown(U)}),a.on(this.cursorNode,"touchstart",function(U){F._onMouseDown(U)}),a.on(this.progressNode,"mousemove",function(U){F._progressMove(U)}),a.on(this.progressNode,"touchmove",function(U){F._progressMove(U)}),a.on(this.progressNode,"mousedown",function(U){j(!0)}),a.on(this.progressNode,"touchstart",function(U){j(!0)}),a.on(this.progressNode,"mouseup",function(U){j(!1)}),a.on(this.progressNode,"touchend",function(U){j(!1)}),a.on(this._el,"click",function(U){F._onMouseClick(U)}),this._player.on(c.Private.HideProgress,function(U){F._hideProgress(U)}),this._player.on(c.Private.CancelHideProgress,function(U){F._cancelHideProgress(U)}),this._player.on(c.Private.ShowBar,function(){F._updateLayout()}),a.on(this.progressNode,c.Private.MouseOver,function(U){F._onMouseOver(U)}),a.on(this.progressNode,c.Private.MouseOut,function(U){F._onMouseOut(U)}),this.bindTimeupdate=s.bind(this,this._onTimeupdate),this._player.on(c.Player.TimeUpdate,this.bindTimeupdate),l.isLiveShift(this._player._options)&&F._liveshiftService.start(6e4,function(U){U={mediaId:F._player._options.vid||"",error_code:U.Code,error_msg:U.Message},F._player.logError(U),F._player.trigger(c.Player.Error,U)}),this._player.on(c.Private.LiveShiftQueryCompleted,function(){F._updateSeperator(),F._updateLayout()}),this._player.on(c.Private.LiveShiftSwitchToLive,function(){F._updateCursorPosition()}),this._player.on(c.Player.Pause,function(){F._liveshiftService.stop()}),u.IS_IPAD?this.interval=setInterval(function(){F._onProgress()},500):this._player.on(c.Video.Progress,function(){F._onProgress()})},_updateSeperator:function(){this._liveshiftService.currentTimeDisplay&&(this.seperatorNode.innerText=this._liveshiftService.currentTimeDisplay)},_updateLayout:function(){var j=this.seperatorNode.offsetWidth,F=this.el().offsetWidth,f=F-j;j!=0&&f!=0&&(o.css(this.progressNode,"width",100*(f-10)/F+"%"),o.css(this.seperatorNode,"right",-1*(j+10)+"px"))},_progressMove:function(j){var F=this._getSeconds(j),f=this._liveshiftService.availableLiveShiftTime,F=(this.timeNode.innerText="-"+r.formatTime(f-F),f?F/f:0),f=1-this.timeNode.clientWidth/this.el().clientWidth,W=(f<F&&(F=f),this.timeNode&&(o.css(this.timeNode,"display","block"),o.css(this.timeNode,"left",100*F+"%")),this);!u.IS_PC&&W._progressDown&&(W.progressSeekTimer&&clearTimeout(W.progressSeekTimer),W.progressSeekTimer=setTimeout(function(){W._progressDown||W._onMouseClick(j)},200))},_hideProgress:function(j){a.off(this.cursorNode,"mousedown"),a.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(j){var F=this;a.on(this.cursorNode,"mousedown",function(f){F._onMouseDown(f)}),a.on(this.cursorNode,"touchstart",function(f){F._onMouseDown(f)})},_canSeekable:function(j){var F=!0;return F=typeof this._player.canSeekable=="function"?this._player.canSeekable(j):F},_onMouseOver:function(j){this._updateCursorPosition(this._getCurrentTime()),o.css(this.timeNode,"display","block")},_onMouseOut:function(j){o.css(this.timeNode,"display","none")},_getSeconds:function(M){if(M.touches&&M.touches[0]){for(var F,f=this.el().offsetLeft,W=this.el();W.offsetParent;){var W=W.offsetParent,U=o.getTranslateX(W);f+=W.offsetLeft+U}W.tagName&&W.tagName.toLowerCase()==="body"&&(f+=document.getElementsByTagName("html")[0].offsetLeft),(F=(M.touches?M.touches[0]:M).pageX-f)<0&&(F=0)}else F=M.offsetX,M.target!==this.cursorNode&&M.target.offsetParent!==this.cursorNode||(F+=this.cursorNode.offsetLeft),M.target!==this._el&&(M.target.offsetParent,this._el);var M=this.progressNode.offsetWidth,R=this._liveshiftService.availableLiveShiftTime;return sec=(sec=(sec=R?F/M*R:0)<0?0:sec)>R?R:sec},_onMouseClick:function(f){var F=this,f=this._getSeconds(f),U=this._liveshiftService.availableLiveShiftTime,W=U-f,M=this._player._options,U=(W<=M.liveShiftMinOffset&&(f=U-(W=M.liveShiftMinOffset)),this._player.trigger(c.Private.SeekStart,{fromTime:this._getCurrentTime()}),this._liveshiftService.getSourceUrl(W)),M=l.isHls(F._player._options.source);F._player._loadByUrlInner(U,f,!0),F._player.trigger(c.Private.Play_Btn_Hide),F._liveshiftService.seekTime=f,F._player.trigger(c.Private.EndStart,{toTime:f}),F._updateProgressBar(this.playedNode,f),F._updateCursorPosition(f),setTimeout(function(){F._progressDown||F._onMouseOut()},500),M&&setTimeout(function(){F._player.play()})},_onMouseDown:function(j){var F=this;j.preventDefault(),this._player.trigger(c.Private.SeekStart,{fromTime:this._getCurrentTime()}),a.on(this.controlNode,"mousemove",function(f){F._onMouseMove(f)}),a.on(this.controlNode,"touchmove",function(f){F._onMouseMove(f)}),a.on(this.controlNode,"mouseup",function(f){F._onMouseUp(f)}),a.on(this.controlNode,"touchend",function(f){F._onMouseUp(f)})},_onMouseUp:function(j){j.preventDefault(),a.off(this.controlNode,"mousemove"),a.off(this.controlNode,"touchmove"),a.off(this._player.tag,"mouseup"),a.off(this._player.tag,"touchend"),a.off(this.controlNode,"mouseup"),a.off(this.controlNode,"touchend"),this._onMouseClick(j)},_onMouseMove:function(j){j.preventDefault()},_onTimeupdate:function(j){this._player._seeking||(u.IS_ANDROID&&u.IS_UC&&(this._hasResetFlagUC&&this._player.getCurrentTime()&&(this._hasResetFlagUC=!1,this._basePtsUC=this._player.getCurrentTime()),this._player.getCurrentTime()||(this._hasResetFlagUC=!0,this._basePtsUC=0)),this._updateProgressBar(this.playedNode,this._getCurrentTime()),this._updateCursorPosition(this._getCurrentTime()),this._player.trigger(c.Private.UpdateProgressBar,{time:this._getCurrentTime()}))},_getCurrentTime:function(){var j=this._liveshiftService.seekTime,j=(j==-1&&(j=0),this._player.getCurrentTime()+j);return u.IS_ANDROID&&u.IS_UC&&(j-=this._basePtsUC||0),j},_onProgress:function(j){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(j,F){var f,W;this._player._switchSourcing!=1&&(W=0,this._liveshiftService.seekTime==-1?W=1:1<(W=(f=this._liveshiftService.availableLiveShiftTime)?F/f:0)&&(this._liveshiftService.seekTime=-(W=1)),this.liveShiftStartDisplay,j)&&o.css(j,"width",100*W+"%")},_updateCursorPosition:function(j){var F,f,W,U;this._player.el()&&this._player._switchSourcing!=1&&(W=0,U=1,F=this._player.el().clientWidth,this._liveshiftService.seekTime==-1?W=1:1<(W=(f=this._liveshiftService.availableLiveShiftTime)?j/f:0)&&(this._liveshiftService.seekTime=-1),F!=0&&(U=1-(j=10/F),W-=j),W=W<0?0:W,this.cursorNode)&&(U<W?(o.css(this.cursorNode,"right","0px"),o.css(this.cursorNode,"left","auto")):(o.css(this.cursorNode,"right","auto"),o.css(this.cursorNode,"left",100*W+"%")))}});e.exports=h},{"../config":19,"../lang/index":28,"../lib/dom":37,"../lib/event":38,"../lib/function":40,"../lib/playerutil":50,"../lib/ua":53,"../lib/util":55,"../player/base/event/eventtype":77,"../ui/component":143}],18:[function(u,e,O){var d=u("../ui/component"),o=u("../lib/util"),a=u("../player/base/event/eventtype"),u=d.extend({init:function(s,r){d.call(this,s,r),this.className=r.className||"prism-live-time-display",this.addClass(this.className),this._liveshiftService=s._liveshiftService},createEl:function(){var s=d.prototype.createEl.call(this,"div");return s.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="end-time">00:00</span><span class="live-text">Live: </span><span class="live-time"></span>',s},bindEvent:function(){var s=this;this._player.on(a.Video.TimeUpdate,function(){var r,n=s._liveshiftService,l=document.querySelector("#"+s.id()+" .current-time");n.liveShiftStartDisplay&&n.availableLiveShiftTime>n.seekTime&&n.seekTime!=-1?(r=s._liveshiftService.getBaseTime(),r=o.formatTime(r+s._player.getCurrentTime()),l.innerText=r):n.currentTimeDisplay&&(l.innerText=n.currentTimeDisplay)}),this._player.on(a.Private.LiveShiftQueryCompleted,function(){s.updateTime()})},updateTime:function(){document.querySelector("#"+this.id()+" .end-time").innerText=this._liveshiftService.liveTimeRange.endDisplay,document.querySelector("#"+this.id()+" .live-time").innerText=this._liveshiftService.currentTimeDisplay}});e.exports=u},{"../lib/util":55,"../player/base/event/eventtype":77,"../ui/component":143}],19:[function(t,e,O){t=t("../package.json"),e.exports={domain:"g.alicdn.com",path:"/apsara-media-box/imp-web-player/",flashVersion:"2.8.2",h5Version:t.version.split("-")[0],rtsVersion:"2.9.1",cityBrain:!0,logDuration:3,logCount:100,logReportTo:"https://videocloud.cn-hangzhou.log.aliyuncs.com/logstores/newplayer/track",dumpLogReportTo:"https://web-video.cn-hangzhou.log.aliyuncs.com/logstores/player-dump/track"}},{"../package.json":15}],20:[function(t,e,O){(function(d){(function(){var o,a,u,s,r,n,c=t("../node_modules/@ali/mediabox-quality-tracer/dist/index.cjs").MediaboxQualityTracer,l=(t("./lib/patch-ssr").isSSR||(a=function(h){var j=window&&window.location.host||"";if(!(-1<j.indexOf("localhost")||/(?:\d{1,3}\.){3}\d{1,3}/.test(j))){if(h&&h.msg&&(["","playauth property is required"].some(function(F){return-1<h.msg.indexOf(F)})||/code:(\d+);msg:(.+)/.test(h.msg)))return void console.log("ignore error report");if(!(h.stack&&-1<h.stack.indexOf("alivc-im.iife.js")||h.file&&-1<h.file.indexOf("imp-interaction")))return h}console.log("ignore error report")},t("./lang/index").load(),u=t("./player/adaptiveplayer"),s=t("./lib/reloadInstanceUtil"),l=t("./lib/componentutil"),r=t("./config"),(n=function(h,j){o&&(o.updateOptions({cid:h.license&&h.license.key,region:h.env==="SEA"?"ap-southeast-1":"cn-hangzhou",beforeSend:a}),o.setReady());var F=u.create(h,j);return o&&o.updateOptions({beforeSend:function(f){if(f=a(f))return f.c3="likely_ri="+(F._monitor&&F._monitor.sessionId),f}}),s.storeUserEvents(F),F}).getVersion=function(){return r.h5Version},l.register(n),n.players={},n.reloadInstance=s.reloadInstance,typeof Uint8Array>"u")||Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),(o=new c({businessName:"imp-web-player",version:r.h5Version||"unknown",deferRegionSet:!0,env:d!=="dev"?"prod":"local",disabled:!0})).wrap(n)),c=window.Aliplayer=l;c.tracer=o,e.exports=c}).call(this)}).call(this,"prod")},{"../node_modules/@ali/mediabox-quality-tracer/dist/index.cjs":1,"./config":19,"./lang/index":28,"./lib/componentutil":32,"./lib/patch-ssr":49,"./lib/reloadInstanceUtil":51,"./player/adaptiveplayer":74}],21:[function(t,e,O){var d=t("../player/base/event/eventtype"),o=t("../lib/constants"),a=t("../lang/index");e.exports=(()=>{function u(r){var n=this;r===void 0&&(r={}),this.interval=3e3,this.player=null,this.timer=null,this.playerInitDone=!1,this.player=r.player,this.player.on(d.Player.Init,function(){n.playerInitDone=!0})}var s=u.prototype;return s.start=function(){var r=this;this.stop(),this.player&&this.player._options&&!this.player._options.preventRecord||(this.timer=setInterval(function(){r.playerInitDone&&r.check()},this.interval))},s.stop=function(){this.clearTimer()},s.check=function(){var r=!1,n=this.detectPrototype()||this.detectNativeFn();return(n||this.detectDeperateVideo())&&(console.log("isMediaSourceModified",n),this.clearTimer(),this.displayError(),this.setupErrorStyle(),this.destroyVideo(),localStorage.setItem("_intercept_mediastream_",""),r=!0),r},s.dispose=function(){this.stop(),this.player=null,this.playerInitDone=!1},s.clearTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},s.displayError=function(){var r=this.player,n={mediaId:r._options&&r._options.vid?r._options.vid:"",error_code:o.ErrorCode.RecordNotAllowed,error_msg:a.get("Record_Not_Allowed")};r.logError(n),r.trigger(d.Player.Error,n)},s.setupErrorStyle=function(){this.hideRetry();var r=document.querySelector(".prism-ErrorMessage");r&&(r.style.opacity="1",r.style.visibility="visible")},s.hideRetry=function(){var r=document.querySelector("#"+this.player.id()+" .prism-button-retry");r&&(r.style.display="none")},s.destroyVideo=function(){this.player._drm&&this.player.destroy();var r=this.player.tag;r&&r.parentNode&&r.parentNode.removeChild(r)},s.detectPrototype=function(){var r=window,n=r.MediaSource;return n&&r.EventTarget&&n.__proto__.__proto__===r.EventTarget},s.detectNativeFn=function(){var r=window.MediaSource;return r&&!this.isNativeFn(r.prototype.addSourceBuffer)},s.isNativeFn=function(r){var n=RegExp("^".concat(Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),"$")),l=typeof r;return r!==null&&(l=="object"||l=="function")&&n.test(r)},s.detectDeperateVideo=function(){var r=this.player.tag;if(r)return(r.getAttribute("id")||"").indexOf("360")!==-1},u})()},{"../lang/index":28,"../lib/constants":33,"../player/base/event/eventtype":77}],22:[function(a,e,O){var d=a("../lib/oo"),o=a("../lang/index"),a=d.extend({init:function(s,r){this._player=s,this._options=s.options()}}),u=(a.prototype.handle=function(s){var r,n;this._options.autoPlayDelay&&(r=(r=this._options.autoPlayDelayDisplayText)||o.get("AutoPlayDelayDisplayText").replace("$$",this._options.autoPlayDelay),this._player.trigger("info_show",r),this._player.trigger("h5_loading_hide"),this._player.trigger("play_btn_hide"),(n=this)._timeHandler=setTimeout(function(){n._player.trigger("info_hide"),n._options.autoPlayDelay=0,s&&s()},1e3*this._options.autoPlayDelay),this._player.on("play",function(){u(n)}),this._player.on("pause",function(){u(n)}))},a.prototype.dispose=function(){u(this),this._player=null},function(s){s._timeHandler&&(clearTimeout(s._timeHandler),s._timeHandler=null)});e.exports=a},{"../lang/index":28,"../lib/oo":48}],23:[function(s,e,O){var d=s("../lib/event"),o=s("../lib/data"),a=s("../player/base/event/eventtype"),u=o.guid(),s={};function r(c){var h,j,F=this._options.keyFastForwardStep,f=this._options.isLive;switch(c&&c.keyCode){case 39:f||(c.preventDefault(),h=this.getDuration(),j=this.getCurrentTime()+F,this.seek(j=h<j?h:j),n.call(this,j),l.call(this,j));break;case 37:f||(c.preventDefault(),j=this.getCurrentTime()-F,this.seek(j=j<0?0:j),n.call(this,j),l.call(this,j));break;case 38:c.preventDefault(),this.getVolume()<1&&0<=this.getVolume()&&this.setVolume(Number((this.getVolume()+.1).toFixed(1)));break;case 40:c.preventDefault(),0<this.getVolume()&&this.getVolume()<=1&&this.setVolume(Number((this.getVolume()-.1).toFixed(1)));break;case 32:if(f)return;c.preventDefault(),this.tag.paused?this.play(!0):this.pause(!0)}}function n(c){this.trigger(a.Private.UpdateProgress,{targetTime:c})}function l(c){this.trigger(a.Private.UpdateCursorPosition,{targetTime:c})}s.init=function(){var c;this._options.keyShortCuts&&((c=r.bind(this)).guid=u,d.on(window.document,"keydown",c))},s.dispose=function(){var c;this._options.keyShortCuts&&((c=r.bind(this)).guid=u,d.off(window.document,"keydown",c))},e.exports=s},{"../lib/data":35,"../lib/event":38,"../player/base/event/eventtype":77}],24:[function(s,e,O){var d=typeof Promise>"u"?s("es6-promise").Promise:Promise,o=s("../lib/constants").LicenseResultCode,a=s("../lib/io"),u=((s={})[o.ResourceIncorrect]="license resource init error",s[o.LicenseKeyInvalid]="invalid license key",s[o.DomainInvalid]="invalid domain",s[o.CertInvalid]="invalid cert content",s[o.NotFound]="license not found",s[o.Expired]="license expired",s),s=(()=>{function r(){}return r.getLicense=function(n,l,c){var h=this;return this.isWasmSupported()?l?n?this.instance?d.resolve(this.instance):new d(function(j,F){h.resolvers.push(j),h.rejecters.push(F),h.resolvers.length===1&&a.loadJS("https://g.alicdn.com/apsara-media-components/amcom-web-license/0.5.1/index.js",function(){window.loadLicenseSource().then(function(f){var W=new f({business_id:2,domain_identity:n,license_key:l,region:c});return W.update().then(function(){h.instance=W,h.resolvers.forEach(function(U){U(W)})}).catch(function(U){h.rejecters.forEach(function(M){M(o.CertInvalid+"#"+(U||"").trim().split(":")[0])})})}).catch(function(){h.rejecters.forEach(function(f){f(o.ResourceIncorrect)})}).finally(function(){h.resolvers=[],h.rejecters=[]})},function(){h.rejecters.forEach(function(f){f(o.ResourceIncorrect)})})}):d.reject(o.DomainInvalid):d.reject(o.LicenseKeyInvalid):d.reject(o.WasmNotSupported)},r.isWasmSupported=function(){return typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function"},r.logError=function(n){u[n]&&console.error(u[n])},r})();s.instance=void 0,s.resolvers=[],s.rejecters=[],e.exports=s},{"../lib/constants":33,"../lib/io":45,"es6-promise":13}],25:[function(j,e,O){function d(){return(d=Object.assign?Object.assign.bind():function(f){for(var W=1;W<arguments.length;W++){var U,M=arguments[W];for(U in M)!{}.hasOwnProperty.call(M,U)||(f[U]=M[U])}return f}).apply(null,arguments)}function o(f,W){for(var U=0;U<W.length;U++){var M=W[U];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(f,(R=>typeof(R=((K,G)=>{if(typeof K!="object"||!K)return K;var X=K[Symbol.toPrimitive];if(X===void 0)return(G==="string"?String:Number)(K);if(typeof(X=X.call(K,G))!="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")})(R,"string"))=="symbol"?R:R+"")(M.key),M)}}var a=j("../lib/event"),u="box",s="content",r="top-left",n="top-right",l="bottom-left",c="bottom-right",h="percentage",j=(()=>{function f(M){this._container=void 0,this._video=void 0,this._logoList=[],this._resizeDone=!0,this._observer=void 0,this._observer=new F,this._handleVideoResize=this._handleVideoResize.bind(this),this._handleWindowResize=this._handleWindowResize.bind(this),this._setLogo(M.logo),this._setElements(M.container,M.video)}var W,U=f.prototype;return U.dispose=function(){this._observer.dispose(),this._observer=void 0,a.off(this._video,"resize",this._handleVideoResize),a.off(document,"fullscreenchange",this._handleWindowResize),this._logoList.forEach(function(M){M.logo&&M.logo.remove()}),this._logoList=[],this._container=void 0,this._video=void 0,this._resizeDone=!0},U._setElements=function(M,R){this._container=M,this._video=R,this.loadedMeta?this._logoList.forEach(this._setupLogo.bind(this)):a.on(R,"resize",this._handleVideoResize),this._observer.observe(this._container,this._handleWindowResize),a.on(document,"fullscreenchange",this._handleWindowResize)},U._handleVideoResize=function(){!this._video.videoWidth||this._logoList.some(function(M){return M.logo})||this._logoList.forEach(this._setupLogo.bind(this))},U._handleWindowResize=function(){var M=this;this._container&&this._resizeDone&&this.loadedMeta&&(this._resizeDone=!1,window.requestAnimationFrame(function(){M._resizeDone=!0,M._logoList.forEach(M._placeLogo.bind(M))}))},U._setLogo=function(M){this._logoList=M.map(this._defauleValue)},U._setupLogo=function(M){var R=this,K=this._createLogo(M);(M.logo=K).onload=function(){R._placeLogo(M)}},U._createLogo=function(M){var R=document.createElement("img");return R.setAttribute("class","prism-logo"),R.src=M.src,R},U._placeLogo=function(M){var R=M.logo,K=this._calcSize(M),G=(K.width&&R.setAttribute("width",K.width+"px"),K.height&&R.setAttribute("height",K.height+"px"),this._calcMatrix(M));R.style.position="absolute",Object.keys(G).forEach(function(X){R.style[X]=G[X]+"px"}),this._container.appendChild(M.logo)},U._calcSize=function(M){return this._getPixel(M)},U._calcMatrix=function(M){var R=this._getPosition(M),K=this._getPixel(M,{width:M.offsetX,height:M.offsetY});return Object.keys(R).forEach(function(G){switch(G){case"top":R[G]+=K.height;break;case"bottom":R[G]-=K.height;break;case"left":R[G]+=K.width;break;case"right":R[G]-=K.width}}),R},U._getPosition=function(K){var R=K.origin,K=K.position,G=0,X=0;switch(R===s&&(G=Math.abs(this.videoSize.height-this.contentSize.height)/2,X=Math.abs(this.videoSize.width-this.contentSize.width)/2),K){case r:return{top:0+G,left:0+X};case n:return{top:0+G,right:0+X};case l:return{bottom:0+G,left:0+X};case c:return{bottom:0+G,right:0+X};default:return{top:0,left:0}}},U._formalize=function(M,R){var K=1,K=M.width/M.height>R.width/R.height?R.width/M.width:R.height/M.height;return{width:M.width*K,height:M.height*K}},U._getPixel=function(M,G){var G=G===void 0?{}:G,K=G.width,G=G.height,X=M.unit,z=M.origin;return isNaN(K)&&(K=M.width),isNaN(G)&&(G=M.height),X===h?{width:(M=z===u?this.videoSize:this.contentSize).width*K/100,height:M.height*G/100}:{width:K,height:G}},U._defauleValue=function(M){return d({},M,{position:M.position||r,offsetX:M.offsetX||0,offsetY:M.offsetY||0,origin:M.origin||u,unit:M.unit||h})},U=f,(W=[{key:"videoSize",get:function(){return this._video?{width:this._video.offsetWidth,height:this._video.offsetHeight}:{}}},{key:"contentSize",get:function(){var M;return this._video?(M={width:this._video.videoWidth,height:this._video.videoHeight},{width:(M=this._formalize(M,this.videoSize)).width,height:M.height}):{}}},{key:"loadedMeta",get:function(){return!!this._video.videoWidth}}])&&o(U.prototype,W),Object.defineProperty(U,"prototype",{writable:!1}),U})(),F=(e.exports=j,(()=>{function f(){this._frame=void 0}var W=f.prototype;return W.observe=function(U,M){var R=document.createElement("iframe");return R.style.cssText="position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;visibility:hidden;pointer-events:none;",R.onload=function(){R.contentWindow.onresize=function(){M(U)}},U.appendChild(R),this._frame=R},W.dispose=function(){this._frame&&(this._frame.contentWindow.onresize=null,this._frame.remove(),this._frame=void 0)},f})())},{"../lib/event":38}],26:[function(t,e,O){var d=t("../lib/event"),o=t("../player/base/event/eventtype");e.exports=(()=>{function a(){this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0,this.resize=this._resize.bind(this)}var u=a.prototype;return u.autoResize=function(s,r,n){n===void 0&&(n="height"),typeof s!="number"?console.warn("Parameter [ratio] should be a number, like 16/9"):(this.target=n,this.ratio=s,this.player=r,d.on(window,"resize",this.resize),this.resize())},u._resize=function(){var s,r,n;(s=this.player.fullscreenService)!=null&&s.isFullScreen||(s=(s=this.player)==null?void 0:s.el())&&(this.target==="height"?(n=(r=s.offsetWidth)/this.ratio,s.style.height=n+"px"):(r=(n=s.offsetHeight)*this.ratio,s.style.width=r+"px"),(s=this.player)!=null)&&s.trigger(o.Player.AutoResize,{width:r,height:n})},u.dispose=function(){d.off(window,"resize",this.resize),this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0},a})()},{"../lib/event":38,"../player/base/event/eventtype":77}],27:[function(t,e,O){e.exports={OD:"OD",FD:"360p",LD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Speed:"Speed",Speed_05X_Text:"0.5X",Speed_1X_Text:"Normal",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Speed_Long_Press:"2x speed",Refresh_Text:"Refresh",Cancel:"Cancel",Mute:"Mute",Click_To_Unmute:"Click to unmute",Snapshot:"Snapshot",Detection_Text:"Diagnose",Play_DateTime:"Time",Default:"Default",Quality_Change_Fail_Switch_Text:"Cannot play, switch to ",Quality_Change_Text:"Switching to ",Quality_Change_Result:"Switched to ",Quality_The_Url:"The url",AutoPlayDelayDisplayText:"Play in $$ seconds",Error_Load_Abort_Text:"Data abort erro",Error_Network_Text:"Loading failed due to network error",Error_Decode_Text:"Decode error",Error_No_Decoder_Text:"Unsupported codec",Error_Server_Network_NotSupport_Text:"Network error or the format of video is unsupported",Error_Offline_Text:"The network is unreachable, please click Refresh",Error_Play_Text:"Error occured while playing",Error_Retry_Text:" Please close or refresh",Error_AuthKey_Text:"(HttpCode-403)Authentication expired or the domain is not in white list",Error_H5_Not_Support_Text:"The format/codec of video is not supported",Error_Not_Support_M3U8_Text:"The format of m3u8 is not supported by this explorer",Error_Not_Support_MP4_Text:"The format of mp4is not supported by this explorer",Error_Not_Support_encrypt_Text:"To play the encrypted video,please set encryptType to 1",Error_Encrypt_Fetch_Failed_Text:"Failed to fetch the encrypted video",Error_Vod_URL_Is_Empty_Text:"The url is empty",Error_Vod_Fetch_Urls_Text:"Error occured when fetch urls from vod serviceplease close or refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Error_Playauth_Decode_Text:"PlayAuth parse failed",Error_Vid_Not_Same_Text:"Cannot renew url due to vid changed",Error_Playauth_Expired_Text:"Playauth expired, please close or refresh",Error_MTS_Fetch_Urls_Text:"Error occurred while requesting mst server",Error_Load_M3U8_Failed_Text:"(HttpCode-0)The m3u8 file loaded failed,possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Error_Load_M3U8_Timeout_Text:"Timeout error occoredwhen them3u8 file loaded",Error_Liveshift_M3U8_Not_Found_Text:"No more liveshift video avaliable",Error_M3U8_Decode_Text:"The m3u8 file decoded failed",Error_TX_Decode_Text:"Video decoded failed",Error_Manifest_Decode_Text:"Failed to parse manifest",Error_Waiting_Timeout_Text:"Buffering timeout,please close or refresh",Error_Invalidate_Source:"Video shoud be mp4mp3m3u8mpd or flv",Error_Empty_Source:"Video URL shouldn't be empty",Error_Vid_Empty_Source:"vid's video URL hasn't been fetched",Error_Mediaauth_Empty_Source:"mediaAuth's video URL hasn't been fetched",Error_Fetch_NotStream:"The vid has no stream to play",Error_Fetch_Media_Not_Found:"Data is not found",Error_Not_Found:"(HttpCode-404)Url is not found",Error_Drm_License_Request_Failed:"DRM license request failed",Error_Drm_Not_Supported:"DRM in not supported",Error_Drm_Load:"DRM load error",Error_Drm_No_Sts:"STS(accessKeyId/accessKeySecret/securityToken) is required for DRM playback",Error_Drm_Params_Missing:"Parameters for drm.widevine/fairplay, etc. are missing",Error_Region_Block_Text:"(HttpCode-403)This video is not available in your region",Error_SW_Conflict:"Service Worker conflict. Please try disabling browser extensions, restarting the browser, and closing other tabs.",Error_SW_Register_Failed:"Service Worker registration failed.",Error_SW_ScriptURL_Empty:"Please provide the swScriptURL parameter.",Error_SW_ScriptURL_Https:"The swScriptURL parameter must use an absolute address with https:// protocol.",Error_SW_ScriptURL_Scope:"The swScriptURL (subpath: @scope1@) and the current webpage (subpath: @scope2@) must be under the same subpath.",Error_SW_Version_Not_Match:"The version number of swScriptURL (@swVersion@) must match the player version (@playerVersion@).",Error_SW_ScriptURL_ILlegal:"Please provide a valid swScriptURL(@detail@).",Error_SW_Https_required:"Https is required when playing Vod's encription video",Tip_Err_Common:"please contact us for support, the error detail is:<br />",Tip_Err_Common_Short:"the error detail is:<br />",Tip_Drm_Request_Err:"The request failed with an error, please check the browser console to check whether it is caused by DNS, HTTPS certificates, or network problems. <br/> If the above tests are fine,",Tip_Drm_Secure_Context:"DRM can only be accessed under https, localhost, 127.0.0.1 web pages, and manifest and media segments must also use https.",Tip_Drm_Key_System_Unavailable:"1. This browser does not support Widevine or the current Widevine configuration<br/>2. The request that pops up in the browser was rejected by the user<br/>3. Please open the browser settings, look for the [Protected Content] setting and allow",Tip_Drm_File_Not_Allowed:"Do not use the file:// to open the file directly, you need to use a https:// to access the file",Tip_Drm_Playlist_Hierarchy:"HLS playlist level error, the main list needs to be master playlist",Tip_Drm_Info_Missing:"Please make sure the parameters of drm.widevine/fairplay you provided are valid",Tip_Drm_Unsupported:"Your browser does not currently support Widevine. If you are using Chrome, you can visit the URL chrome://components/ to locate the 'Widevine Content Decryption Module' and click on 'Update'. If this module is not present, the browser will be unable to play DRM-protected videos.",Tip_Err_Decode:"The decoding error refers to the current audio/video frame is not compatible with the browser, you can try the following methods: <br />1.chrome/edge browser open the chrome://flags, search for Hardware-accelerated video decode, select disabled<br />2.If the decoding error persists, please transcode the video to fix the problem frame",Tip_Err_Rts_Http_Failed:"The error indicates that the RTS streaming request encountered an HTTP error, which is usually related to HTTPS certificate, DNS resolution, or network connectivity issues. Due to browser restrictions on JavaScript, the player cannot obtain detailed error information. If you need further information, you can follow these steps:<br>Right-click on a blank area of the browser and select 'Inspect'.<br>2.In the newly opened interface, select 'Console'.<br>3.Check for any red error messages:<br>If you see 'SSL', it means that you have not correctly configured the HTTPS certificate for the streaming domain.<br>If you see 'NOT RESOLVED', it means that the DNS resolution for your domain has failed.<br>You can also use the <a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'>ApsaraVideo Live Diagnostic Tool</a> for self-diagnosis.",Tip_Err_Not_found:"For live streams, this might be due to the broadcast not starting yet, having ended, or being disrupted. For on-demand videos, it could indicate the video is unavailable.",Tip_Err_Blocked:"If you have a network proxy enabled, please try disabling it and then retrying.",Tip_Err_Splayer:"For best practices regarding playback of H.265/H.266 encoded videos, please refer to",Tip_Err_Splayer_Doc:" this document.",Tip_SW_Register:"1.Please access the webpage using HTTPS<br>2.Please ensure that the provided swScriptURL is a complete address starting with https:// and is accessible.",Tip_License_Required:"Starting 2024-12-01, the new version of the player must be configured with a license to use. The license for the basic functions of the player can be applied for free and is valid for 1 year. Please apply in advance to avoid any disruption in usage ",Tip_License_Params:"After completing the application, please refer to this document to pass the license information into the SDK ",Tip_License_Check:"Please ensure that the provided license key/domain parameters match exactly with what were obtained from the VOD/LIVE console.",Tip_License_Domain:"The current website domain does not match with your licensed domain",Tip_License_Feature:"The feature is not authorized by your license:",Tip_License_Reason:"The playback failed because your license verification was unsuccessful. Specific reason:",Live_End:"Live has finished",Play_Before_Fullscreen:"Please play before fullscreen",Can_Not_Seekable:"Can not seek to this position",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Request_Block_Text:"This request is blocked, the video Url should be over https",Open_Html_By_File:"Html page should be on the server",Maybe_Cors_Error:"(HttpCode-0)there is a network error, possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Speed_Switch_To:"Speed switch to ",Curent_Volume:"Current volume:",Volume_Mute:"set to mute",Volume_UnMute:"set to unmute",ShiftLiveTime_Error:"Live start time should not be greater than over time",Error_Not_Support_Format_On_Mobile:"flvrmtp can't be supported on mobileplease use m3u8",Error_Not_Support_Mse_Flv:"Flv is not supported by this browser.",Error_Not_Support_Mse_Dash:"Dash is not supported by this browser.",Error_Not_Support_RTMP:"RTMP is not supported by this browser.",SessionId_Ticket_Invalid:"please assign value for sessionId and ticket properties",Http_Error:" An HTTP network request failed with an error, but not from the server.",Http_Timeout:"A network request timed out",DRM_License_Expired:"DRM license is expired, please refresh",Not_Support_DRM:"Browser doesn't support DRM",CC_Switch_To:"Subtitle switch to ",AudioTrack_Switch_To:"Audio tracks switch to ",Subtitle:"Subtitle/CC",AudioTrack:"Audio Track",Quality:"Quality",Auto:"Auto",Quality_Switch_To:"Quality switching to ",Fullscreen:"Full Screen",Setting:"Settings",Volume:"Volume",Play:"Play",Pause:"Pause",CloseSubtitle:"Close CC",OpenSubtitle:"Open CC",ExistFullScreen:"Exit Full Screen",Muted:"Muted",Retry:"Retry",SwitchToLive:"Return to live",iOSNotSupportVodEncription:"Versions of iOS below 17.1 doesn't support Vod's private encription video",iOSVodEncriptionBlacklist:"Please use Safari/Chrome browser to play Vod's private encription video",UseChromeForVodEncription:"This browser desn't suport Vod's encription video, please use latest Chrome/Edge",Record_Not_Allowed:"Recording or playing in seperated window is not allowed, please disable related plugins or switch browser.",License_Empty:"License params are required",License_Not_Found:"Unregistered license",License_Expired:"Expired license",License_License_Key_Invalid:"Invalid license key",License_Domain_Invalid:"Unexpected domain",License_Feature_Unauthorized:"Unauthorized feature",Rts_Err_Http_Signal_Error:"(RTS)http signal error",Rts_Err_Play_Failed:"(RTS)play faild error",Rts_Err_No_Data_For:"s received no data",Rts_Err_Browser_Not_Support:"(RTS)browser not support",Rts_Err_Not_Support_Webrtc:"(RTS)not support webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)browser version too low",Rts_Err_Not_Support_H264:"(RTS)not support h264",Rts_Err_Create_Offer_Error:"(RTS)create offer error",Rts_Err_Play_Url_Error:"(RTS)play url error",Rts_Err_Subscribe_Nonthing:"(RTS)subscribe nonthing",Rts_Err_Http_Request_Failed:"(RTS)HTTP request failed",Rts_Err_Http_Answer_Failed:"(RTS)answer failed",Rts_Err_PeerConnection_Unknown:"(RTS)Unknown PeerConnection",Splayer_Err_Env_Check:"(SP)This browser can't play this media",Splayer_Err_Coroutine:"(SP)Coroutine error",Splayer_Err_Decoder:"(SP)Decode error",Splayer_Err_Buffering:"(SP)Buffering error",Splayer_Err_Parser_Not_Found:"(SP)Media container is not supported"}},{}],28:[function(t,e,O){function d(h,j,F){var f=c(h),U="",W=l(),U=W=="en-us"?t("./en-us"):W=="zh-cn"?t("./zh-cn"):j[W];F&&(U=Object.assign({},U,F[W])),a.set(f,JSON.stringify(U)),n(h,U),F&&t("../lib/constants").updateByLanguage()}var o=t("../config"),a=t("../lib/storage"),u=(t("../lib/io"),"aliplayer_lang_data"),s="aliplayer_lang",r=function(){var h;return window[s]!==void 0&&window[s]||(h=(h=(navigator.language||navigator.browserLanguage).toLowerCase())&&-1<h.indexOf("zh")?"zh-cn":"en-us",window[s]=h),window[s]},n=function(h,j){h=c(h),window[h]=j},l=function(){return r()},c=function(h){var j=l();return u+"_"+(h=h||"h5")+"_"+o.h5Version.replace(/\./g,"_")+"_"+j};e.exports.setCurrentLanguage=function(h,j,F,f){var W=window[s];(h=h!==void 0&&h?h:r())=="en-us"||h=="zh-cn"||F&&F[h]||(console.warn("There is no language resource for "+h+", please specify the language resource by languageTexts property"),h="zh-cn"),window[s]=h,d(j,F,f),h!=W&&t("../lib/constants").updateByLanguage()},e.exports.getCurrentLanguage=r,e.exports.getLanguageData=function(h,j){return h=c(h),window[h]},e.exports.load=d,e.exports.get=function(h,j,F){if(j=c(j=j||"h5"),j=window[j],j){var f=j[h];if(F)for(var W in F)f=f.replace(new RegExp("@"+W+"@","g"),F[W]);return f}}},{"../config":19,"../lib/constants":33,"../lib/io":45,"../lib/storage":52,"./en-us":27,"./zh-cn":29}],29:[function(t,e,O){e.exports={OD:"",FD:"",LD:"",SD:"",HD:"","2K":"2K","4K":"4K",FHD:"",XLD:"",SQ:"",HQ:"",Speed:"",Speed_05X_Text:"0.5X",Speed_1X_Text:"",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Speed_Long_Press:"",Quality_Change_Fail_Switch_Text:"",Quality_Change_Text:" ",Quality_Change_Result:" ",Quality_The_Url:"",Refresh_Text:"",Detection_Text:"",Cancel:"",Mute:"",Click_To_Unmute:"",Snapshot:"",Play_DateTime:"",Default:"",AutoPlayDelayDisplayText:"$$",Error_Load_Abort_Text:"",Error_Network_Text:"",Error_Decode_Text:"",Error_No_Decoder_Text:"",Error_Server_Network_NotSupport_Text:"",Error_Offline_Text:"",Error_Play_Text:"",Error_Retry_Text:"",Error_AuthKey_Text:"HttpCode-403",Error_H5_Not_Support_Text:"",Error_Not_Support_M3U8_Text:"m3u8",Error_Not_Support_MP4_Text:"mp4",Error_Not_Support_encrypt_Text:"encryptType1",Error_Encrypt_Fetch_Failed_Text:"",Error_Vod_URL_Is_Empty_Text:"",Error_Vod_Fetch_Urls_Text:"",Fetch_Playauth_Error:"",Error_Playauth_Decode_Text:"playauth",Error_Vid_Not_Same_Text:"vid",Error_Playauth_Expired_Text:"",Error_MTS_Fetch_Urls_Text:"MTS",Error_Load_M3U8_Failed_Text:"HttpCode-0m3u8,httpsDNS",Error_Load_M3U8_Timeout_Text:"m3u8",Error_Liveshift_M3U8_Not_Found_Text:"",Error_M3U8_Decode_Text:"m3u8",Error_TX_Decode_Text:"",Error_Manifest_Decode_Text:"Manifest",Error_Waiting_Timeout_Text:"",Error_Invalidate_Source:"mp4mp3m3u8mpdflv",Error_Empty_Source:"",Error_Vid_Empty_Source:"vid",Error_Mediaauth_Empty_Source:"mediaAuth",Error_Fetch_NotStream:"vid",Error_Fetch_Media_Not_Found:"",Error_Not_Found:"HttpCode-404",Error_Drm_License_Request_Failed:"DRM License ",Error_Drm_Not_Supported:" DRM ",Error_Drm_Load:"DRM ",Error_Drm_No_Sts:"DRM STS(accessKeyId/accessKeySecret/securityToken)",Error_Drm_Params_Missing:"drm.widevine/fairplay",Error_Region_Block_Text:"HttpCode-403",Error_SW_Conflict:"ServiceWorker",Error_SW_Register_Failed:"Service Worker",Error_SW_ScriptURL_Empty:" swScriptURL ",Error_SW_ScriptURL_Https:"swScriptURL https:// ",Error_SW_ScriptURL_Scope:"swScriptURL(:@scope1@)(:@scope2@)",Error_SW_Version_Not_Match:"swScriptURL(@swVersion@)(@playerVersion@)",Error_SW_ScriptURL_ILlegal:"swScriptURL(@detail@)",Error_SW_Https_required:" https ",Tip_Err_Common:":<br />",Tip_Err_Common_Short:":<br />",Tip_Drm_Request_Err:"https<br />",Tip_Drm_Secure_Context:"DRMhttpslocalhost127.0.0.1manifesthttps",Tip_Drm_Key_System_Unavailable:"1.WidevineWidevine<br />2.<br />3.",Tip_Drm_File_Not_Allowed:"file://https://",Tip_Drm_Playlist_Hierarchy:"HLS master playlist",Tip_Drm_Info_Missing:"drm.widevine/fairplay",Tip_Drm_Unsupported:" Widevine Chrome chrome://components/ Widevine Content Decryption Module DRM ",Tip_Err_Decode:"/<br />1.chrome/edge chrome://flags Hardware-accelerated video decode disabled<br />2.<br />3.firefoxabout:supportAAC",Tip_Err_Rts_Http_Failed:"RTShttphttpsDNSJS<br>1.2.3.<br>SSLhttps<br>NOT RESOLVEDDNS<br><a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'></a>",Tip_Err_Not_found:"//",Tip_Err_Blocked:"",Tip_Err_Splayer:" H.265/H.266 ",Tip_Err_Splayer_Doc:"",Tip_SW_Register:"1.https<br>2.swScriptURLhttps://",Tip_License_Required:"2024121LicenseLicense 1 ",Tip_License_Params:"LicenseSDK",Tip_License_Check:" license key/domain /",Tip_License_Domain:" license ",Tip_License_Feature:"license",Tip_License_Reason:" License ",Live_End:"",Play_Before_Fullscreen:"",Can_Not_Seekable:"seek",Cancel_Text:"",OK_Text:"",Auto_Stream_Tip_Text:"$$",Request_Block_Text:"httphttps",Open_Html_By_File:"html",Maybe_Cors_Error:"HttpCode-0httpsDNS",Speed_Switch_To:" ",Curent_Volume:"",Volume_Mute:"",Volume_UnMute:"",ShiftLiveTime_Error:"",Error_Not_Support_Format_On_Mobile:"flvrmtpm3u8",Error_Not_Support_Mse_Flv:" flv ",Error_Not_Support_Mse_Dash:" dash ",Error_Not_Support_RTMP:" rtmp ",SessionId_Ticket_Invalid:"DRMsessionIdticket",Http_Error:"Http",Http_Timeout:"http",DRM_License_Expired:"DRM license",Not_Support_DRM:"DRM",CC_Switch_To:" ",AudioTrack_Switch_To:" ",Subtitle:"",AudioTrack:"",Quality:"",Auto:"",Quality_Switch_To:" ",Fullscreen:"",Setting:"",Volume:"",Play:"",Pause:"",CloseSubtitle:"",OpenSubtitle:"",ExistFullScreen:"",Muted:"",Retry:"",SwitchToLive:"",iOSNotSupportVodEncription:"iOS17.1",iOSVodEncriptionBlacklist:"Safari/Chrome",UseChromeForVodEncription:"Chrome/Edge",Record_Not_Allowed:"",License_Empty:"License",License_Not_Found:"License",License_Expired:"License",License_License_Key_Invalid:"LicenseKey",License_Domain_Invalid:"",License_Feature_Unauthorized:"",Rts_Err_Http_Signal_Error:"(RTS)",Rts_Err_Play_Failed:"(RTS)",Rts_Err_No_Data_For:"",Rts_Err_Browser_Not_Support:"(RTS)",Rts_Err_Not_Support_Webrtc:"(RTS)webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)",Rts_Err_Not_Support_H264:"(RTS)H264",Rts_Err_Create_Offer_Error:"(RTS)create offer",Rts_Err_Play_Url_Error:"(RTS)url",Rts_Err_Subscribe_Nonthing:"(RTS)",Rts_Err_Http_Request_Failed:"(RTS)HTTP",Rts_Err_Http_Answer_Failed:"(RTS)answer",Rts_Err_PeerConnection_Unknown:"(RTS)PeerConnection",Splayer_Err_Env_Check:"(SP)",Splayer_Err_Coroutine:"(SP)Coroutine ",Splayer_Err_Decode:"(SP)",Splayer_Err_Buffering:"(SP)",Splayer_Err_Parser_Not_Found:"(SP)"}},{}],30:[function(t,e,O){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";if(window.Uint8Array)for(var o=new Uint8Array(256),a=0;a<d.length;a++)o[d.charCodeAt(a)]=a;var u=function(s){for(var r="",n=0;n<s.length;n+=16e3){var l=s.subarray(n,n+16e3);r+=String.fromCharCode.apply(null,l)}return r};e.exports={decode:function(s){for(var r,n,l,c,F=.75*s.length,h=s.length,j=0,F=(s[s.length-1]==="="&&(F--,s[s.length-2]==="=")&&F--,new ArrayBuffer(F)),f=new Uint8Array(F),W=0;W<h;W+=4)r=o[s.charCodeAt(W)],n=o[s.charCodeAt(W+1)],l=o[s.charCodeAt(W+2)],c=o[s.charCodeAt(W+3)],f[j++]=r<<2|n>>4,f[j++]=(15&n)<<4|l>>2,f[j++]=(3&l)<<6|63&c;return F},encode:function(s){for(var r=new Uint8Array(s),n=r.length,l="",c=0;c<n;c+=3)l=(l=(l=(l+=d[r[c]>>2])+d[(3&r[c])<<4|r[c+1]>>4])+d[(15&r[c+1])<<2|r[c+2]>>6])+d[63&r[c+2]];return n%3==2?l=l.substring(0,l.length-1)+"=":n%3==1&&(l=l.substring(0,l.length-2)+"=="),l},unpackPlayReady:function(s){if(s=((j,F,f)=>{if(!j)return"";f||j.byteLength%2==0||console.log("Data has an incorrect length, must be even."),f=j instanceof ArrayBuffer?j:((f=new Uint8Array(j.byteLength)).set(new Uint8Array(j)),f.buffer);for(var W=Math.floor(j.byteLength/2),U=new Uint16Array(W),M=new DataView(f),R=0;R<W;R++)U[R]=M.getUint16(2*R,F);return u(U)})(s,!0,!0),s.indexOf("PlayReadyKeyMessage")!=-1){for(var s=new DOMParser().parseFromString(s,"application/xml"),r=s.getElementsByTagName("HttpHeader"),n={},l=0;l<r.length;++l){var c=r[l].querySelector("name"),h=r[l].querySelector("value");n[c.textContent]=h.textContent}return{header:n,changange:s.querySelector("Challenge").textContent}}console.log("PlayReady request is already unwrapped.")}}},{}],31:[function(t,e,O){function d(){d=function(){return c};var l,c={},h=Object.prototype,j=h.hasOwnProperty,te=typeof Symbol=="function"?Symbol:{},F=te.iterator||"@@iterator",f=te.asyncIterator||"@@asyncIterator",W=te.toStringTag||"@@toStringTag";function U(se,Z,oe,re){Object.defineProperty(se,Z,{value:oe,enumerable:!re,configurable:!re,writable:!re})}try{U({},"")}catch{U=function(Z,oe,re){return Z[oe]=re}}function M(se,J,oe,re){var Te,Ce,ke,ye,J=J&&J.prototype instanceof G?J:G,J=Object.create(J.prototype);return U(J,"_invoke",(Te=se,Ce=oe,ke=new ge(re||[]),ye=1,function(fe,Ee){if(ye===3)throw Error("Generator is already running");if(ye===4){if(fe==="throw")throw Ee;return{value:l,done:!0}}for(ke.method=fe,ke.arg=Ee;;){var Ie=ke.delegate;if(Ie&&(Ie=function Me(Oe,we){var ue=we.method,ve=Oe.i[ue];return ve===l?(we.delegate=null,ue==="throw"&&Oe.i.return&&(we.method="return",we.arg=l,Me(Oe,we),we.method==="throw")||ue!=="return"&&(we.method="throw",we.arg=new TypeError("The iterator does not provide a '"+ue+"' method")),K):(ue=R(ve,Oe.i,we.arg),ue.type==="throw"?(we.method="throw",we.arg=ue.arg,we.delegate=null,K):(ve=ue.arg,ve?ve.done?(we[Oe.r]=ve.value,we.next=Oe.n,we.method!=="return"&&(we.method="next",we.arg=l),we.delegate=null,K):ve:(we.method="throw",we.arg=new TypeError("iterator result is not an object"),we.delegate=null,K)))}(Ie,ke),Ie)){if(Ie===K)continue;return Ie}if(ke.method==="next")ke.sent=ke._sent=ke.arg;else if(ke.method==="throw"){if(ye===1)throw ye=4,ke.arg;ke.dispatchException(ke.arg)}else ke.method==="return"&&ke.abrupt("return",ke.arg);if(ye=3,Ie=R(Te,Ce,ke),Ie.type==="normal"){if(ye=ke.done?4:2,Ie.arg===K)continue;return{value:Ie.arg,done:ke.done}}Ie.type==="throw"&&(ye=4,ke.method="throw",ke.arg=Ie.arg)}}),!0),J}function R(se,Z,oe){try{return{type:"normal",arg:se.call(Z,oe)}}catch(re){return{type:"throw",arg:re}}}c.wrap=M;var K={};function G(){}function X(){}function z(){}var te={},ee=(U(te,F,function(){return this}),Object.getPrototypeOf),ee=ee&&ee(ee(he([]))),Y=(ee&&ee!==h&&j.call(ee,F)&&(te=ee),z.prototype=G.prototype=Object.create(te));function ie(se){["next","throw","return"].forEach(function(Z){U(se,Z,function(oe){return this._invoke(Z,oe)})})}function ae(se,Z){var oe;U(this,"_invoke",function(re,Te){function Ce(){return new Z(function(ke,ye){(function J(we,Ee,Ie,Me){var Oe,we=R(se[we],se,Ee);if(we.type!=="throw")return(Ee=(Oe=we.arg).value)&&typeof Ee=="object"&&j.call(Ee,"__await")?Z.resolve(Ee.__await).then(function(ue){J("next",ue,Ie,Me)},function(ue){J("throw",ue,Ie,Me)}):Z.resolve(Ee).then(function(ue){Oe.value=ue,Ie(Oe)},function(ue){return J("throw",ue,Ie,Me)});Me(we.arg)})(re,Te,ke,ye)})}return oe=oe?oe.then(Ce,Ce):Ce()},!0)}function de(se){this.tryEntries.push(se)}function ce(se){var Z=se[4]||{};Z.type="normal",Z.arg=l,se[4]=Z}function ge(se){this.tryEntries=[[-1]],se.forEach(de,this),this.reset(!0)}function he(se){if(se!=null){var Z,oe=se[F];if(oe)return oe.call(se);if(typeof se.next=="function")return se;if(!isNaN(se.length))return Z=-1,(oe=function re(){for(;++Z<se.length;)if(j.call(se,Z))return re.value=se[Z],re.done=!1,re;return re.value=l,re.done=!0,re}).next=oe}throw new TypeError(typeof se+" is not iterable")}return U(Y,"constructor",X.prototype=z),U(z,"constructor",X),U(z,W,X.displayName="GeneratorFunction"),c.isGeneratorFunction=function(se){return se=typeof se=="function"&&se.constructor,!!se&&(se===X||(se.displayName||se.name)==="GeneratorFunction")},c.mark=function(se){return Object.setPrototypeOf?Object.setPrototypeOf(se,z):(se.__proto__=z,U(se,W,"GeneratorFunction")),se.prototype=Object.create(Y),se},c.awrap=function(se){return{__await:se}},ie(ae.prototype),U(ae.prototype,f,function(){return this}),c.AsyncIterator=ae,c.async=function(se,Z,oe,re,Te){Te===void 0&&(Te=Promise);var Ce=new ae(M(se,Z,oe,re),Te);return c.isGeneratorFunction(Z)?Ce:Ce.next().then(function(ke){return ke.done?ke.value:Ce.next()})},ie(Y),U(Y,W,"Generator"),U(Y,F,function(){return this}),U(Y,"toString",function(){return"[object Generator]"}),c.keys=function(se){var Z,oe=Object(se),re=[];for(Z in oe)re.unshift(Z);return function Te(){for(;re.length;)if((Z=re.pop())in oe)return Te.value=Z,Te.done=!1,Te;return Te.done=!0,Te}},c.values=he,ge.prototype={constructor:ge,reset:function(se){if(this.prev=this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(ce),!se)for(var Z in this)Z.charAt(0)==="t"&&j.call(this,Z)&&!isNaN(+Z.slice(1))&&(this[Z]=l)},stop:function(){this.done=!0;var se=this.tryEntries[0][4];if(se.type==="throw")throw se.arg;return this.rval},dispatchException:function(se){if(this.done)throw se;var Z=this;function oe(fe){Ce.type="throw",Ce.arg=se,Z.next=fe}for(var re=Z.tryEntries.length-1;0<=re;--re){var Te=this.tryEntries[re],Ce=Te[4],ke=this.prev,ye=Te[1],J=Te[2];if(Te[0]===-1)return oe("end"),!1;if(!ye&&!J)throw Error("try statement without catch or finally");if(Te[0]!=null&&Te[0]<=ke){if(ke<ye)return this.method="next",this.arg=l,oe(ye),!0;if(ke<J)return oe(J),!1}}},abrupt:function(se,Z){for(var oe=this.tryEntries.length-1;0<=oe;--oe){var re=this.tryEntries[oe];if(-1<re[0]&&re[0]<=this.prev&&this.prev<re[2]){var Te=re;break}}var Ce=(Te=Te&&(se==="break"||se==="continue")&&Te[0]<=Z&&Z<=Te[2]?null:Te)?Te[4]:{};return Ce.type=se,Ce.arg=Z,Te?(this.method="next",this.next=Te[2],K):this.complete(Ce)},complete:function(se,Z){if(se.type==="throw")throw se.arg;return se.type==="break"||se.type==="continue"?this.next=se.arg:se.type==="return"?(this.rval=this.arg=se.arg,this.method="return",this.next="end"):se.type==="normal"&&Z&&(this.next=Z),K},finish:function(se){for(var Z=this.tryEntries.length-1;0<=Z;--Z){var oe=this.tryEntries[Z];if(oe[2]===se)return this.complete(oe[4],oe[3]),ce(oe),K}},catch:function(se){for(var Z=this.tryEntries.length-1;0<=Z;--Z){var oe,re,Te=this.tryEntries[Z];if(Te[0]===se)return(oe=Te[4]).type==="throw"&&(re=oe.arg,ce(Te)),re}throw Error("illegal catch attempt")},delegateYield:function(se,Z,oe){return this.delegate={i:he(se),r:Z,n:oe},this.method==="next"&&(this.arg=l),K}},c}function o(l,c,h,j,F,f,W){try{var U=l[f](W),M=U.value}catch(R){return h(R)}U.done?c(M):Promise.resolve(M).then(j,F)}var a=typeof Promise>"u"?t("es6-promise").Promise:Promise,u=t("./io"),s=t("../config");function r(){}function n(){var l;return l=d().mark(function c(h,j,F,f){var W,U;return d().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(j===void 0&&(j={}),F===void 0&&(F=r),f===void 0&&(f=r),window.VideoxMuxer){M.next=14;break}M.prev=4,M.next=7;var R=j;return new a(function(K,G){var X="videox-muxer.min.js",z="https://"+s.domain+s.path+s.h5Version+"/splayer/"+X;R.assetPrefix&&(z=R.assetPrefix+"/splayer/"+X),u.loadJS(z,function(){K()},function(){G()})});case 7:M.next=14;break;case 9:return M.prev=9,M.t0=M.catch(4),console.error("load videox-demuxer failed"),f("load videox-demuxer failed"),M.abrupt("return");case 14:W=window.VideoxMuxer.Demuxer,(U=new W({progressive:!0})).on("loadedmetadata",function(K){K===void 0&&(K={}),U.suspend(),U.destroy(),U=null,F(K)}),U.on("error",function(K){f(K),U.suspend(),U.destroy(),U=null}),U.load(h);case 19:case"end":return M.stop()}},c,null,[[4,9]])}),(n=function(){var c=this,h=arguments;return new Promise(function(j,F){var f=l.apply(c,h);function W(M){o(f,j,F,W,U,"next",M)}function U(M){o(f,j,F,W,U,"throw",M)}W(void 0)})}).apply(this,arguments)}e.exports=function(l,c,h,j){return n.apply(this,arguments)}},{"../config":19,"./io":45,"es6-promise":13}],32:[function(t,e,O){var d=t("./oo"),o=t("../player/base/event/eventtype");e.exports.stopPropagation=function(a){window.event?window.event.cancelBubble=!0:a.stopPropagation()},e.exports.register=function(a){a.util={stopPropagation:e.exports.stopPropagation},a.Component=d.extend,a.EventType=o.Player}},{"../player/base/event/eventtype":77,"./oo":48}],33:[function(t,e,O){function d(){e.exports.VideoErrorCodeText={1:o.get("Error_Load_Abort_Text"),2:o.get("Error_Network_Text"),3:o.get("Error_Decode_Text"),4:o.get("Error_Server_Network_NotSupport_Text")},e.exports.VideoLevels={0:o.get("OD"),640:o.get("FD"),960:o.get("LD"),1280:o.get("SD"),1920:o.get("HD"),2580:o.get("2K"),3840:o.get("4K")},e.exports.QualityLevels={OD:o.get("OD"),LD:o.get("LD"),FD:o.get("FD"),SD:o.get("SD"),HD:o.get("HD"),"2K":o.get("2K"),"4K":o.get("4K"),XLD:o.get("XLD"),FHD:o.get("FHD"),SQ:o.get("SQ"),HQ:o.get("HQ")},e.exports.SpeedLevels=[{key:.5,text:o.get("Speed_05X_Text")},{key:1,text:o.get("Speed_1X_Text")},{key:1.25,text:o.get("Speed_125X_Text")},{key:1.5,text:o.get("Speed_15X_Text")},{key:2,text:o.get("Speed_2X_Text")}]}var o=t("../lang/index");e.exports.LOAD_START="loadstart",e.exports.LOADED_METADATA="loadedmetadata",e.exports.LOADED_DATA="loadeddata",e.exports.PROGRESS="progress",e.exports.CAN_PLAY="canplay",e.exports.CAN_PLYA_THROUGH="canplaythrough",e.exports.PLAY="play",e.exports.PAUSE="pause",e.exports.ENDED="ended",e.exports.PLAYING="playing",e.exports.WAITING="waiting",e.exports.ERROR="error",e.exports.SUSPEND="suspend",e.exports.STALLED="stalled",e.exports.DASH_QUALITY_PROTOCOL="quality_index://",e.exports.AuthKeyExpiredEvent="authkeyexpired",e.exports.USER_EVENT_NAME="__user_events__",e.exports.PLAYER_SCOPE="__aliplayerMessage__",e.exports.SW_MSG_EVT={SETUP:"setup",SETUP_ACK:"setupAck",DISPOSE:"dispose",ENC_SEGMENT:"encSegment",DEC_SEGMENT:"decSegment",ABORT_SEGMENT:"abortSegment"},e.exports.DM_MSG_EVT={SETUP:"setup",DEMUX:"demux",RESULT:"result",FLUSH:"flush",DISPOSE:"dispose",DISPOSED:"disposed",ERROR:"error"},e.exports.PLAYER_SDK_CODE_LEGACY=9201,e.exports.PLAYER_SDK_CODE=9203,e.exports.FEATURE_ID_H265=30001,e.exports.FEATURE_ID_H266=30002,e.exports.LicenseResultCode={Success:0,NotFound:1,Expired:2,CertInvalid:3,WasmNotSupported:4,ResourceIncorrect:5,LicenseKeyInvalid:6,DomainInvalid:7},e.exports.LicenseErrorKey={Empty:"License_Empty",NotFound:"License_Not_Found",Expired:"License_Expired",CertInvalid:"License_Cert_Invalid",LicenseKeyInvalid:"License_License_Key_Invalid",DomainInvalid:"License_Domain_Invalid",Unauthorized:"License_Feature_Unauthorized"},e.exports.DRMKeySystem={4:"com.microsoft.playready",5:"com.widevine.alpha"},e.exports.EncryptionType={Private:1,Standard:2,ChinaDRM:3,PlayReady:4,Widevine:5},e.exports.VodEncryptionType={AliyunVoDEncryption:1,HLSEncryption:2,Widevine:5,"Widevine-FairPlay":5},e.exports.DRMType={Widevine:"Widevine",PlayReady:"PlayReady"},e.exports.ErrorCode={InvalidParameter:4001,AuthKeyExpired:4002,InvalidSourceURL:4003,NotFoundSourceURL:4004,StartLoadData:4005,LoadedMetadata:4006,PlayingError:4007,LoadingTimeout:4008,RequestDataError:4009,EncrptyVideoNotSupport:4010,FormatNotSupport:4011,PlayauthDecode:4012,PlayDataDecode:4013,NetworkUnavaiable:4014,UserAbort:4015,NetworkError:4016,URLsIsEmpty:4017,DrmLicenseRequestFailed:4018,RecordNotAllowed:4019,MediaNotFound:4020,DrmNotSupported:4021,DrmLoadError:4022,RegionBlock:4023,ModuleLoadError:4034,LicenseError:4035,CrossDomain:4027,OtherError:4400,ServerAPIError:4500,FlashNotInstalled:4600,RtsSignalError:4100,RtsPlayFailedError:4200,RtsNotSupportWebRtc:4110,RtsBrowserNotSupport:4111,RtsBrowserVersionTooLow:4112,RtsNotSupportH264:4113,RtsCreateOfferError:4114,RtsAutoPLayFaild:4115,RtsPlayUrlError:4116,RtsSubscribeNonthing:4117,RtsHtmlElementError:4118,RtsHtmlElementNotMatch:4119,RtsBrowserNotSupportRtc:4120,RtsHttpRequestFaild:4121,RtsHttpAnswerFaild:4122,RtsPeerConnectionUnknown:4123,SplayerEnvCheckError:4300,SplayerCoroutineError:4301,SplayerDecodeError:4302,SplayerBufferingError:4303,SplayerParserNotFound:4304},e.exports.AuthKeyExpired=7200,e.exports.AuthKeyRefreshExpired=7e3,e.exports.AuthInfoExpired=100,e.exports.VideoErrorCode={1:4015,2:4016,3:4013,4:4400},e.exports.RegionBlockMessages=["black location","denied by region block"],e.exports.IconType={FontClass:"fontclass",Symbol:"symbol",Sprite:"Sprite"},e.exports.SelectedStreamLevel="selectedStreamLevel",e.exports.SelectedCC="selectedCC",e.exports.HWDetectHvc1="HWDetectHvc1",e.exports.HWDetectHvc1Hls="HWDetectHvc1Hls",e.exports.HWDetectHev1="HWDetectHev1",e.exports.HWDetectHev1Hls="HWDetectHev1Hls",e.exports.WidthMapToLevel={0:"OD",640:"FD",960:"LD",1280:"SD",1920:"HD",2580:"2K",3840:"4K"},d(),e.exports.updateByLanguage=d},{"../lang/index":28}],34:[function(t,e,O){e.exports.get=function(d){for(var o=d+"",a=document.cookie.split(";"),u=0;u<a.length;u++){var s=a[u].trim();if(s.indexOf(o)==0)return unescape(s.substring(o.length+1,s.length))}return""},e.exports.set=function(d,o,s){var u=new Date,s=(u.setTime(u.getTime()+24*s*60*60*1e3),"expires="+u.toGMTString());document.cookie=d+"="+escape(o)+"; "+s}},{}],35:[function(t,e,O){var d=t("./object");e.exports.cache={},e.exports.guid=function(o,a){var u,s,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[];if(a=a||r.length,o)for(u=0;u<o;u++)n[u]=r[0|Math.random()*a];else for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",u=0;u<36;u++)n[u]||(s=0|16*Math.random(),n[u]=r[u==19?3&s|8:s]);return n.join("")},e.exports.expando="vdata"+new Date().getTime(),e.exports.getData=function(o){var a=o[e.exports.expando];return a||(a=o[e.exports.expando]=e.exports.guid(),e.exports.cache[a]={}),e.exports.cache[a]},e.exports.hasData=function(o){var a="";return!(!(a=o?o[e.exports.expando]:a)||d.isEmpty(e.exports.cache[a]))},e.exports.removeData=function(o){var a="";if(a=o?o[e.exports.expando]:a){delete e.exports.cache[a];try{delete o[e.exports.expando]}catch{o.removeAttribute?o.removeAttribute(e.exports.expando):o[e.exports.expando]=null}}}},{"./object":47}],36:[function(t,e,O){var d,o=typeof Promise>"u"?t("es6-promise").Promise:Promise;t=typeof self<"u"?self:this,d=function(){return u=[function(r,n,l){(function(c){n.b=function(F){for(var f=(F=F===void 0?{}:F).includes,F=F.excludes,F=F===void 0?[]:F,W=!1,U=!1,M=0,R=f===void 0?[]:f;M<R.length;M++)if(R[M]===!0){W=!0;break}for(var K=0,G=F;K<G.length;K++)if(G[K]===!0){U=!0;break}return W&&!U},n.c=function(F,f,W){return F=j.a[F],F!==void 0&&Object(h.compare)(F,f,W)},n.a=function(){return typeof self<"u"?self:typeof window<"u"?window:c!==void 0?c:this};var h=l(11),j=(l.n(h),l(4))}).call(n,l(10))},function(r,h,j){j.d(h,"c",function(){return F}),j.d(h,"d",function(){return f}),j.d(h,"b",function(){return W}),j.d(h,"f",function(){return U}),j.d(h,"a",function(){return M}),j.d(h,"e",function(){return R});var c,h=j(3),j=j(0),j=Object(j.a)(),F="InstallTrigger"in(j?.window||{})||/firefox/i.test(h.b),f=/trident/i.test(h.b)||/msie/i.test(h.b),W=/edge/i.test(h.b),U=/webkit/i.test(h.b)&&!W,M=((c=j?.window)==null?void 0:c.chrome)!==void 0||/chrome/i.test(h.b),R=(((j=(c=j?.window)==null?void 0:c.safari)==null?void 0:j.pushNotification)||!1).toString()==="[object SafariRemoteNotification]"||/safari/i.test(h.b)&&!M},function(r,n,l){l.d(n,"b",function(){return j}),l.d(n,"c",function(){return F}),l.d(n,"a",function(){return f});var c=l(1);function h(W){if(console){if(!c.d&&!c.b)return console[W];if(W==="log"||W==="clear")return function(){for(var U=[],M=0;M<arguments.length;M++)U[M]=arguments[M];console[W].apply(console,U)}}return function(){}}var j=h("log"),F=h("table"),f=h("clear")},function(r,c,l){c.a=function(){for(var F,f=[],W=0;W<arguments.length;W++)f[W]=arguments[W];return h!=null&&h.document?(F=h.document).createElement.apply(F,f):{}},l.d(c,"b",function(){return j});var c=l(0),h=Object(c.a)(),j=((l=h?.navigator)==null?void 0:l.userAgent)||"xxxxx"},function(r,n,l){l.d(n,"a",function(){return c});for(var c={},h=0,j=(l(3).b||"").match(/\w+\/(\d|\.)+(\s|$)/gi)||[];h<j.length;h++){var F=j[h].split("/"),f=F[0];c[f]=F[1]}},function(r,c,l){l.d(c,"b",function(){return h}),l.d(c,"d",function(){return j}),l.d(c,"c",function(){return F}),l.d(c,"a",function(){return f}),l.d(c,"e",function(){return W});var c=l(3),h=/ipad/i.test(c.b),j=/macintosh/i.test(c.b),F=/iphone/i.test(c.b),f=/android/i.test(c.b),W=/windows/i.test(c.b)},function(r,n,l){Object.defineProperty(n,"__esModule",{value:!0}),n.addListener=function(K){R.addListener(K)},n.removeListener=function(K){R.removeListener(K)},n.isLaunch=function(){return R.isLaunch()},n.launch=function(){R.launch()},n.stop=function(){R.stop()},n.setDetectDelay=function(K){R.setDetectDelay(K)};var c=l(7),h=l(8),j=(l.d(n,"DevtoolsDetector",function(){return c.a}),l.d(n,"checkers",function(){return h}),l(0)),F=(l.d(n,"match",function(){return j.b}),l.d(n,"specificVersionMatch",function(){return j.c}),l(1)),f=(l.d(n,"isFirefox",function(){return F.c}),l.d(n,"isIE",function(){return F.d}),l.d(n,"isEdge",function(){return F.b}),l.d(n,"isWebkit",function(){return F.f}),l.d(n,"isChrome",function(){return F.a}),l.d(n,"isSafari",function(){return F.e}),l(2)),W=(l.d(n,"log",function(){return f.b}),l.d(n,"table",function(){return f.c}),l.d(n,"clear",function(){return f.a}),l(17)),U=(l.d(n,"isMobile",function(){return W.a}),l(4)),M=(l.d(n,"versionMap",function(){return U.a}),l(5)),R=(l.d(n,"isIpad",function(){return M.b}),l.d(n,"isMac",function(){return M.d}),l.d(n,"isIphone",function(){return M.c}),l.d(n,"isAndroid",function(){return M.a}),l.d(n,"isWindows",function(){return M.e}),new c.a({checkers:[h.elementIdChecker,h.regToStringChecker,h.functionToStringChecker,h.depRegToStringChecker,h.dateToStringChecker,h.debuggerChecker]}));n.default=R},function(r,n,l){l.d(n,"a",function(){return j});var c=this&&this.__awaiter||function(f,W,U,M){return new(U=U||o)(function(R,K){function G(te){try{z(M.next(te))}catch(ee){K(ee)}}function X(te){try{z(M.throw(te))}catch(ee){K(ee)}}function z(te){var ee;te.done?R(te.value):((ee=te.value)instanceof U?ee:new U(function(Y){Y(ee)})).then(G,X)}z((M=M.apply(f,W||[])).next())})},h=this&&this.__generator||function(f,W){var U,M,R,K={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]},G={next:X(0),throw:X(1),return:X(2)};return typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function X(z){return function(te){var ee=[z,te];if(U)throw new TypeError("Generator is already executing.");for(;K;)try{if(U=1,M&&(R=2&ee[0]?M.return:ee[0]?M.throw||((R=M.return)&&R.call(M),0):M.next)&&!(R=R.call(M,ee[1])).done)return R;switch(M=0,(ee=R?[2&ee[0],R.value]:ee)[0]){case 0:case 1:R=ee;break;case 4:return K.label++,{value:ee[1],done:!1};case 5:K.label++,M=ee[1],ee=[0];continue;case 7:ee=K.ops.pop(),K.trys.pop();continue;default:if(!(R=0<(R=K.trys).length&&R[R.length-1])&&(ee[0]===6||ee[0]===2)){K=0;continue}if(ee[0]===3&&(!R||ee[1]>R[0]&&ee[1]<R[3]))K.label=ee[1];else if(ee[0]===6&&K.label<R[1])K.label=R[1],R=ee;else{if(!(R&&K.label<R[2])){R[2]&&K.ops.pop(),K.trys.pop();continue}K.label=R[2],K.ops.push(ee)}}ee=W.call(f,K)}catch(Y){ee=[6,Y],M=0}finally{U=R=0}if(5&ee[0])throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}}},j=(F.prototype.launch=function(){this._detectLoopDelay<=0&&this.setDetectDelay(500),this._detectLoopStopped&&(this._detectLoopStopped=!1,this._detectLoop())},F.prototype.stop=function(){this._detectLoopStopped||(this._detectLoopStopped=!0,clearTimeout(this._timer))},F.prototype.isLaunch=function(){return!this._detectLoopStopped},F.prototype.setDetectDelay=function(f){this._detectLoopDelay=f},F.prototype.addListener=function(f){this._listeners.push(f)},F.prototype.removeListener=function(f){this._listeners=this._listeners.filter(function(W){return W!==f})},F.prototype._broadcast=function(f){for(var W=0,U=this._listeners;W<U.length;W++){var M=U[W];try{M(f.isOpen,f)}catch{}}},F.prototype._detectLoop=function(){return c(this,void 0,void 0,function(){var f,W,U,M,R,K=this;return h(this,function(G){switch(G.label){case 0:f=!1,W="",U=0,M=this._checkers,G.label=1;case 1:return U<M.length?[4,(R=M[U]).isEnable()]:[3,6];case 2:return G.sent()?(W=R.name,[4,R.isOpen()]):[3,4];case 3:f=G.sent(),G.label=4;case 4:if(f)return[3,6];G.label=5;case 5:return U++,[3,1];case 6:return f!=this._isOpen&&(this._isOpen=f,this._broadcast({isOpen:f,checkerName:W})),0<this._detectLoopDelay?this._timer=setTimeout(function(){return K._detectLoop()},this._detectLoopDelay):this.stop(),[2]}})})},F);function F(f){f=f.checkers,this._listeners=[],this._isOpen=!1,this._detectLoopStopped=!0,this._detectLoopDelay=500,this._checkers=f.slice()}},function(r,n,l){Object.defineProperty(n,"__esModule",{value:!0});var c=l(9),h=(l.d(n,"depRegToStringChecker",function(){return c.a}),l(12)),j=(l.d(n,"elementIdChecker",function(){return h.a}),l(13)),F=(l.d(n,"functionToStringChecker",function(){return j.a}),l(14)),f=(l.d(n,"regToStringChecker",function(){return F.a}),l(15)),W=(l.d(n,"debuggerChecker",function(){return f.a}),l(16));l.d(n,"dateToStringChecker",function(){return W.a})},function(r,n,l){l.d(n,"a",function(){return M});var c=l(1),h=l(2),j=l(0),F=this&&this.__awaiter||function(R,K,G,X){return new(G=G||o)(function(z,te){function ee(ae){try{ie(X.next(ae))}catch(de){te(de)}}function Y(ae){try{ie(X.throw(ae))}catch(de){te(de)}}function ie(ae){var de;ae.done?z(ae.value):((de=ae.value)instanceof G?de:new G(function(ce){ce(de)})).then(ee,Y)}ie((X=X.apply(R,K||[])).next())})},f=this&&this.__generator||function(R,K){var G,X,z,te={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]},ee={next:Y(0),throw:Y(1),return:Y(2)};return typeof Symbol=="function"&&(ee[Symbol.iterator]=function(){return this}),ee;function Y(ie){return function(ae){var de=[ie,ae];if(G)throw new TypeError("Generator is already executing.");for(;te;)try{if(G=1,X&&(z=2&de[0]?X.return:de[0]?X.throw||((z=X.return)&&z.call(X),0):X.next)&&!(z=z.call(X,de[1])).done)return z;switch(X=0,(de=z?[2&de[0],z.value]:de)[0]){case 0:case 1:z=de;break;case 4:return te.label++,{value:de[1],done:!1};case 5:te.label++,X=de[1],de=[0];continue;case 7:de=te.ops.pop(),te.trys.pop();continue;default:if(!(z=0<(z=te.trys).length&&z[z.length-1])&&(de[0]===6||de[0]===2)){te=0;continue}if(de[0]===3&&(!z||de[1]>z[0]&&de[1]<z[3]))te.label=de[1];else if(de[0]===6&&te.label<z[1])te.label=z[1],z=de;else{if(!(z&&te.label<z[2])){z[2]&&te.ops.pop(),te.trys.pop();continue}te.label=z[2],te.ops.push(de)}}de=K.call(R,te)}catch(ce){de=[6,ce],X=0}finally{G=z=0}if(5&de[0])throw de[1];return{value:de[0]?de[1]:void 0,done:!0}}}},W=/ /,U=!1,M=(W.toString=function(){return U=!0,M.name},{name:"dep-reg-to-string",isOpen:function(){return F(this,void 0,void 0,function(){return f(this,function(R){return U=!1,Object(h.c)({dep:W}),Object(h.a)(),[2,U]})})},isEnable:function(){return F(this,void 0,void 0,function(){return f(this,function(R){return[2,Object(j.b)({includes:[!0],excludes:[c.c,c.d]})]})})}})},function(r,n){var l=function(){return this}();try{l=l||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(l=window)}r.exports=l},function(r,n,l){var c;(n=typeof(c=function(){var h=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function j(R){var K=R.replace(/^v/,"").replace(/\+.*$/,""),G=function(z,te){return z.indexOf(te)===-1?z.length:z.indexOf(te)}(K,"-"),X=K.substring(0,G).split(".");return X.push(K.substring(G+1)),X}function F(R){return isNaN(Number(R))?R:Number(R)}function f(R){if(typeof R!="string")throw new TypeError("Invalid argument expected string");if(!h.test(R))throw new Error("Invalid argument not valid semver ('"+R+"' received)")}function W(R,K){[R,K].forEach(f);for(var G=j(R),X=j(K),z=0;z<Math.max(G.length-1,X.length-1);z++){var te=parseInt(G[z]||0,10),ee=parseInt(X[z]||0,10);if(te>ee)return 1;if(ee>te)return-1}var Y=G[G.length-1],ie=X[X.length-1];if(Y&&ie){var ae=Y.split(".").map(F),de=ie.split(".").map(F);for(z=0;z<Math.max(ae.length,de.length);z++){if(ae[z]===void 0||typeof de[z]=="string"&&typeof ae[z]=="number")return-1;if(de[z]===void 0||typeof ae[z]=="string"&&typeof de[z]=="number"||ae[z]>de[z])return 1;if(de[z]>ae[z])return-1}}else if(Y||ie)return Y?-1:1;return 0}var U=[">",">=","=","<","<="],M={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return W.validate=function(R){return typeof R=="string"&&h.test(R)},W.compare=function(R,K,G){(function(z){if(typeof z!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof z);if(U.indexOf(z)===-1)throw new TypeError("Invalid operator, expected one of "+U.join("|"))})(G);var X=W(R,K);return M[G].indexOf(X)>-1},W})=="function"?c.apply(n,[]):c)!==void 0&&(r.exports=n)},function(r,F,l){l.d(F,"a",function(){return R});var c=l(1),h=l(2),j=l(0),F=l(3),f=this&&this.__awaiter||function(K,G,X,z){return new(X=X||o)(function(te,ee){function Y(de){try{ae(z.next(de))}catch(ce){ee(ce)}}function ie(de){try{ae(z.throw(de))}catch(ce){ee(ce)}}function ae(de){var ce;de.done?te(de.value):((ce=de.value)instanceof X?ce:new X(function(ge){ge(ce)})).then(Y,ie)}ae((z=z.apply(K,G||[])).next())})},W=this&&this.__generator||function(K,G){var X,z,te,ee={label:0,sent:function(){if(1&te[0])throw te[1];return te[1]},trys:[],ops:[]},Y={next:ie(0),throw:ie(1),return:ie(2)};return typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function ie(ae){return function(de){var ce=[ae,de];if(X)throw new TypeError("Generator is already executing.");for(;ee;)try{if(X=1,z&&(te=2&ce[0]?z.return:ce[0]?z.throw||((te=z.return)&&te.call(z),0):z.next)&&!(te=te.call(z,ce[1])).done)return te;switch(z=0,(ce=te?[2&ce[0],te.value]:ce)[0]){case 0:case 1:te=ce;break;case 4:return ee.label++,{value:ce[1],done:!1};case 5:ee.label++,z=ce[1],ce=[0];continue;case 7:ce=ee.ops.pop(),ee.trys.pop();continue;default:if(!(te=0<(te=ee.trys).length&&te[te.length-1])&&(ce[0]===6||ce[0]===2)){ee=0;continue}if(ce[0]===3&&(!te||ce[1]>te[0]&&ce[1]<te[3]))ee.label=ce[1];else if(ce[0]===6&&ee.label<te[1])ee.label=te[1],te=ce;else{if(!(te&&ee.label<te[2])){te[2]&&ee.ops.pop(),ee.trys.pop();continue}ee.label=te[2],ee.ops.push(ce)}}ce=G.call(K,ee)}catch(ge){ce=[6,ge],z=0}finally{X=te=0}if(5&ce[0])throw ce[1];return{value:ce[0]?ce[1]:void 0,done:!0}}}},U=Object(F.a)("div"),M=!1,R=(Object.defineProperty(U,"id",{get:function(){return M=!0,R.name},configurable:!0}),{name:"element-id",isOpen:function(){return f(this,void 0,void 0,function(){return W(this,function(K){return M=!1,Object(h.b)(U),Object(h.a)(),[2,M]})})},isEnable:function(){return f(this,void 0,void 0,function(){return W(this,function(K){return[2,Object(j.b)({includes:[!0],excludes:[c.d,c.b,c.c]})]})})}})},function(r,n,l){l.d(n,"a",function(){return R});var c=l(1),h=l(2),j=l(5),F=l(0),f=this&&this.__awaiter||function(K,G,X,z){return new(X=X||o)(function(te,ee){function Y(de){try{ae(z.next(de))}catch(ce){ee(ce)}}function ie(de){try{ae(z.throw(de))}catch(ce){ee(ce)}}function ae(de){var ce;de.done?te(de.value):((ce=de.value)instanceof X?ce:new X(function(ge){ge(ce)})).then(Y,ie)}ae((z=z.apply(K,G||[])).next())})},W=this&&this.__generator||function(K,G){var X,z,te,ee={label:0,sent:function(){if(1&te[0])throw te[1];return te[1]},trys:[],ops:[]},Y={next:ie(0),throw:ie(1),return:ie(2)};return typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function ie(ae){return function(de){var ce=[ae,de];if(X)throw new TypeError("Generator is already executing.");for(;ee;)try{if(X=1,z&&(te=2&ce[0]?z.return:ce[0]?z.throw||((te=z.return)&&te.call(z),0):z.next)&&!(te=te.call(z,ce[1])).done)return te;switch(z=0,(ce=te?[2&ce[0],te.value]:ce)[0]){case 0:case 1:te=ce;break;case 4:return ee.label++,{value:ce[1],done:!1};case 5:ee.label++,z=ce[1],ce=[0];continue;case 7:ce=ee.ops.pop(),ee.trys.pop();continue;default:if(!(te=0<(te=ee.trys).length&&te[te.length-1])&&(ce[0]===6||ce[0]===2)){ee=0;continue}if(ce[0]===3&&(!te||ce[1]>te[0]&&ce[1]<te[3]))ee.label=ce[1];else if(ce[0]===6&&ee.label<te[1])ee.label=te[1],te=ce;else{if(!(te&&ee.label<te[2])){te[2]&&ee.ops.pop(),ee.trys.pop();continue}ee.label=te[2],ee.ops.push(ce)}}ce=G.call(K,ee)}catch(ge){ce=[6,ge],z=0}finally{X=te=0}if(5&ce[0])throw ce[1];return{value:ce[0]?ce[1]:void 0,done:!0}}}};function U(){}var M=0,R=(U.toString=function(){return M++,""},{name:"function-to-string",isOpen:function(){return f(this,void 0,void 0,function(){return W(this,function(K){return M=0,Object(h.b)(U),Object(h.a)(),[2,M===2]})})},isEnable:function(){return f(this,void 0,void 0,function(){return W(this,function(K){return[2,Object(F.b)({includes:[!0],excludes:[c.c,(j.b||j.c)&&c.a]})]})})}})},function(r,n,l){l.d(n,"a",function(){return M});var c=l(2),h=l(1),j=l(0),F=this&&this.__awaiter||function(R,K,G,X){return new(G=G||o)(function(z,te){function ee(ae){try{ie(X.next(ae))}catch(de){te(de)}}function Y(ae){try{ie(X.throw(ae))}catch(de){te(de)}}function ie(ae){var de;ae.done?z(ae.value):((de=ae.value)instanceof G?de:new G(function(ce){ce(de)})).then(ee,Y)}ie((X=X.apply(R,K||[])).next())})},f=this&&this.__generator||function(R,K){var G,X,z,te={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]},ee={next:Y(0),throw:Y(1),return:Y(2)};return typeof Symbol=="function"&&(ee[Symbol.iterator]=function(){return this}),ee;function Y(ie){return function(ae){var de=[ie,ae];if(G)throw new TypeError("Generator is already executing.");for(;te;)try{if(G=1,X&&(z=2&de[0]?X.return:de[0]?X.throw||((z=X.return)&&z.call(X),0):X.next)&&!(z=z.call(X,de[1])).done)return z;switch(X=0,(de=z?[2&de[0],z.value]:de)[0]){case 0:case 1:z=de;break;case 4:return te.label++,{value:de[1],done:!1};case 5:te.label++,X=de[1],de=[0];continue;case 7:de=te.ops.pop(),te.trys.pop();continue;default:if(!(z=0<(z=te.trys).length&&z[z.length-1])&&(de[0]===6||de[0]===2)){te=0;continue}if(de[0]===3&&(!z||de[1]>z[0]&&de[1]<z[3]))te.label=de[1];else if(de[0]===6&&te.label<z[1])te.label=z[1],z=de;else{if(!(z&&te.label<z[2])){z[2]&&te.ops.pop(),te.trys.pop();continue}te.label=z[2],te.ops.push(de)}}de=K.call(R,te)}catch(ce){de=[6,ce],X=0}finally{G=z=0}if(5&de[0])throw de[1];return{value:de[0]?de[1]:void 0,done:!0}}}},W=/ /,U=!1,M=(W.toString=function(){return U=!0,M.name},{name:"reg-to-string",isOpen:function(){return F(this,void 0,void 0,function(){return f(this,function(R){return U=!1,Object(c.b)(W),Object(c.a)(),[2,U]})})},isEnable:function(){return F(this,void 0,void 0,function(){return f(this,function(R){return[2,Object(j.b)({includes:[!0],excludes:[h.f]})]})})}})},function(r,n,l){l.d(n,"a",function(){return F});var c=this&&this.__awaiter||function(f,W,U,M){return new(U=U||o)(function(R,K){function G(te){try{z(M.next(te))}catch(ee){K(ee)}}function X(te){try{z(M.throw(te))}catch(ee){K(ee)}}function z(te){var ee;te.done?R(te.value):((ee=te.value)instanceof U?ee:new U(function(Y){Y(ee)})).then(G,X)}z((M=M.apply(f,W||[])).next())})},h=this&&this.__generator||function(f,W){var U,M,R,K={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]},G={next:X(0),throw:X(1),return:X(2)};return typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function X(z){return function(te){var ee=[z,te];if(U)throw new TypeError("Generator is already executing.");for(;K;)try{if(U=1,M&&(R=2&ee[0]?M.return:ee[0]?M.throw||((R=M.return)&&R.call(M),0):M.next)&&!(R=R.call(M,ee[1])).done)return R;switch(M=0,(ee=R?[2&ee[0],R.value]:ee)[0]){case 0:case 1:R=ee;break;case 4:return K.label++,{value:ee[1],done:!1};case 5:K.label++,M=ee[1],ee=[0];continue;case 7:ee=K.ops.pop(),K.trys.pop();continue;default:if(!(R=0<(R=K.trys).length&&R[R.length-1])&&(ee[0]===6||ee[0]===2)){K=0;continue}if(ee[0]===3&&(!R||ee[1]>R[0]&&ee[1]<R[3]))K.label=ee[1];else if(ee[0]===6&&K.label<R[1])K.label=R[1],R=ee;else{if(!(R&&K.label<R[2])){R[2]&&K.ops.pop(),K.trys.pop();continue}K.label=R[2],K.ops.push(ee)}}ee=W.call(f,K)}catch(Y){ee=[6,Y],M=0}finally{U=R=0}if(5&ee[0])throw ee[1];return{value:ee[0]?ee[1]:void 0,done:!0}}}};function j(){return(performance||Date).now()}var F={name:"debugger-checker",isOpen:function(){return c(this,void 0,void 0,function(){var f;return h(this,function(W){return f=j(),(function(){}).constructor("debugger")(),[2,100<j()-f]})})},isEnable:function(){return c(this,void 0,void 0,function(){return h(this,function(f){return[2,!0]})})}}},function(r,n,l){l.d(n,"a",function(){return M});var c=l(1),h=l(2),j=l(0),F=this&&this.__awaiter||function(R,K,G,X){return new(G=G||o)(function(z,te){function ee(ae){try{ie(X.next(ae))}catch(de){te(de)}}function Y(ae){try{ie(X.throw(ae))}catch(de){te(de)}}function ie(ae){var de;ae.done?z(ae.value):((de=ae.value)instanceof G?de:new G(function(ce){ce(de)})).then(ee,Y)}ie((X=X.apply(R,K||[])).next())})},f=this&&this.__generator||function(R,K){var G,X,z,te={label:0,sent:function(){if(1&z[0])throw z[1];return z[1]},trys:[],ops:[]},ee={next:Y(0),throw:Y(1),return:Y(2)};return typeof Symbol=="function"&&(ee[Symbol.iterator]=function(){return this}),ee;function Y(ie){return function(ae){var de=[ie,ae];if(G)throw new TypeError("Generator is already executing.");for(;te;)try{if(G=1,X&&(z=2&de[0]?X.return:de[0]?X.throw||((z=X.return)&&z.call(X),0):X.next)&&!(z=z.call(X,de[1])).done)return z;switch(X=0,(de=z?[2&de[0],z.value]:de)[0]){case 0:case 1:z=de;break;case 4:return te.label++,{value:de[1],done:!1};case 5:te.label++,X=de[1],de=[0];continue;case 7:de=te.ops.pop(),te.trys.pop();continue;default:if(!(z=0<(z=te.trys).length&&z[z.length-1])&&(de[0]===6||de[0]===2)){te=0;continue}if(de[0]===3&&(!z||de[1]>z[0]&&de[1]<z[3]))te.label=de[1];else if(de[0]===6&&te.label<z[1])te.label=z[1],z=de;else{if(!(z&&te.label<z[2])){z[2]&&te.ops.pop(),te.trys.pop();continue}te.label=z[2],te.ops.push(de)}}de=K.call(R,te)}catch(ce){de=[6,ce],X=0}finally{G=z=0}if(5&de[0])throw de[1];return{value:de[0]?de[1]:void 0,done:!0}}}},W=new Date,U=0,M=(W.toString=function(){return U++,""},{name:"date-to-string",isOpen:function(){return F(this,void 0,void 0,function(){return f(this,function(R){return U=0,Object(h.b)(W),Object(h.a)(),[2,U===2]})})},isEnable:function(){return F(this,void 0,void 0,function(){return f(this,function(R){return[2,Object(j.b)({includes:[c.a],excludes:[]})]})})}})},function(r,c,l){l.d(c,"a",function(){return h});var c=l(3),h=/mobile/i.test(c.b)}],s={},a.m=u,a.c=s,a.d=function(r,n,l){a.o(r,n)||Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:l})},a.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return a.d(n,"a",n),n},a.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},a.p="",a(a.s=6);function a(r){var n;return(s[r]||(n=s[r]={i:r,l:!1,exports:{}},u[r].call(n.exports,n,n.exports,a),n.l=!0,n)).exports}var u,s},typeof O=="object"&&typeof e=="object"?e.exports=d():typeof O=="object"?O.devtoolsDetector=d():t.devtoolsDetector=d()},{"es6-promise":13}],37:[function(t,e,O){var d=t("./object");e.exports.el=function(o){return document.getElementById(o)},e.exports.createEl=function(o,a){var u;return o=o||"div",a=a||{},u=document.createElement(o),d.each(a,function(s,r){s.indexOf("aria-")!==-1||s=="role"?u.setAttribute(s,r):u[s]=r}),u},e.exports.addClass=function(o,a){o&&(" "+o.className+" ").indexOf(" "+a+" ")==-1&&(o.className=o.className===""?a:o.className+" "+a)},e.exports.removeClass=function(o,a){var u,s;if(o.className.indexOf(a)!=-1){for(s=(u=o.className.split(" ")).length-1;0<=s;s--)u[s]===a&&u.splice(s,1);o.className=u.join(" ")}},e.exports.hasClass=function(o,a){return o.className.indexOf(a)!=-1},e.exports.getClasses=function(o){return o.className?o.className.split(" "):[]},e.exports.getElementAttributes=function(o){var a,u,s={};if(o&&o.attributes&&0<o.attributes.length)for(var r,n=(r=o.attributes).length-1;0<=n;n--)a=r[n].name,u=r[n].value,typeof o[a]!="boolean"&&",autoplay,controls,loop,muted,default,".indexOf(","+a+",")===-1||(u=u!==null),s[a]=u;return s},e.exports.insertFirst=function(o,a){a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o)},e.exports.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},e.exports.unblockTextSelection=function(){document.onselectstart=function(){return!0}},e.exports.css=function(o,a,u){return!(!o||!o.style)&&(a&&u?(o.style[a]=u,!0):u||typeof a!="string"?!u&&typeof a=="object"&&(d.each(a,function(s,r){o.style[s]=r}),!0):o.style[a])},e.exports.getTransformName=function(o){for(var a=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],u=a[0],s=0,r=a.length;s<r;s++)if(o.style[a[s]]!==void 0){u=a[s];break}return u},e.exports.getTransformEventName=function(o,a){for(var u=["","Webkit","Moz","ms","O"],s=a.toLowerCase(),r=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],n=0,l=r.length;n<l;n++)if(o.style[r[n]]!==void 0){n!=0&&(s=u[n]+a);break}return s},e.exports.addCssByStyle=function(s){var a=document,u=a.createElement("style"),s=(u.setAttribute("type","text/css"),u.styleSheet?u.styleSheet.cssText=s:(s=a.createTextNode(s),u.appendChild(s)),a.getElementsByTagName("head"));(s.length?s[0]:a.documentElement).appendChild(u)},e.exports.getTranslateX=function(o){var a=0;if(o)try{var u=window.getComputedStyle(o),s=e.exports.getTransformName(o),a=new(window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)(u[s]).m41}catch(r){console.log(r)}return a},e.exports.getPointerPosition=function(r,a){var u={},l=e.exports.findPosition(r),s=r.offsetWidth,r=r.offsetHeight,n=l.top,l=l.left,c=a.pageY,h=a.pageX;return a.changedTouches&&(h=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY),u.y=Math.max(0,Math.min(1,(n-c+r)/r)),u.x=Math.max(0,Math.min(1,(h-l)/s)),u},e.exports.findPosition=function(o){var a,u,s,r;return(a=o.getBoundingClientRect&&o.parentNode?o.getBoundingClientRect():a)?(o=document.documentElement,r=document.body,s=o.clientLeft||r.clientLeft||0,u=window.pageXOffset||r.scrollLeft,u=a.left+u-s,s=o.clientTop||r.clientTop||0,o=window.pageYOffset||r.scrollTop,r=a.top+o-s,{left:Math.round(u),top:Math.round(r)}):{left:0,top:0}}},{"./object":47}],38:[function(t,e,O){var d=t("./object"),o=t("./data"),a=t("./ua"),u=t("./fastclick");function s(r,n,l,c){d.each(l,function(h){r(n,h,c)})}e.exports.on=function(r,n,l){if(r){if(d.isArray(n))return s(e.exports.on,r,n,l);a.IS_MOBILE&&n=="click"&&u.attach(r);var c=o.getData(r);c.handlers||(c.handlers={}),c.handlers[n]||(c.handlers[n]=[]),l.guid||(l.guid=o.guid()),c.handlers[n].push(l),c.dispatcher||(c.disabled=!1,c.dispatcher=function(h){if(!c.disabled){h=e.exports.fixEvent(h);var j=c.handlers[h.type];if(j)for(var F=j.slice(0),f=0,W=F.length;f<W&&!h.isImmediatePropagationStopped();f++)F[f].call(r,h)}}),c.handlers[n].length==1&&(r.addEventListener?r.addEventListener(n,c.dispatcher,!1):r.attachEvent&&r.attachEvent("on"+n,c.dispatcher))}},e.exports.off=function(r,n,l){if(r&&o.hasData(r)){var c=o.getData(r);if(c.handlers){if(d.isArray(n))return s(e.exports.off,r,n,l);var h=function(W){c.handlers[W]=[],e.exports.cleanUpEvents(r,W)};if(n){var j=c.handlers[n];if(j)if(l){if(l.guid)for(var F=0;F<j.length;F++)j[F].guid===l.guid&&j.splice(F--,1);e.exports.cleanUpEvents(r,n)}else h(n)}else for(var f in c.handlers)h(f)}}},e.exports.cleanUpEvents=function(r,n){var l=o.getData(r);l.handlers[n].length===0&&(delete l.handlers[n],r.removeEventListener?r.removeEventListener(n,l.dispatcher,!1):r.detachEvent&&r.detachEvent("on"+n,l.dispatcher)),d.isEmpty(l.handlers)&&(delete l.handlers,delete l.dispatcher,delete l.disabled),d.isEmpty(l)&&o.removeData(r)},e.exports.fixEvent=function(r){function n(){return!0}function l(){return!1}if(!r||!r.isPropagationStopped){var c,h,j,F=r||window.event;for(c in r={},F)c==="layerX"||c==="layerY"||c==="keyboardEvent.keyLocation"||c=="returnValue"&&F.preventDefault||(r[c]=F[c]);r.target||(r.target=r.srcElement||document),r.relatedTarget=r.fromElement===r.target?r.toElement:r.fromElement,r.preventDefault=function(){F.preventDefault&&F.preventDefault(),r.returnValue=!1,r.isDefaultPrevented=n,r.defaultPrevented=!0},r.isDefaultPrevented=l,r.defaultPrevented=!1,r.stopPropagation=function(){F.stopPropagation&&F.stopPropagation(),r.cancelBubble=!0,r.isPropagationStopped=n},r.isPropagationStopped=l,r.stopImmediatePropagation=function(){F.stopImmediatePropagation&&F.stopImmediatePropagation(),r.isImmediatePropagationStopped=n,r.stopPropagation()},r.isImmediatePropagationStopped=l,r.clientX!=null&&(h=document.documentElement,j=document.body,r.pageX=r.clientX+(h&&h.scrollLeft||j&&j.scrollLeft||0)-(h&&h.clientLeft||j&&j.clientLeft||0),r.pageY=r.clientY+(h&&h.scrollTop||j&&j.scrollTop||0)-(h&&h.clientTop||j&&j.clientTop||0)),r.which=r.charCode||r.keyCode,r.button!=null&&(r.button=1&r.button?0:4&r.button?1:2&r.button?2:0)}return r},e.exports.trigger=function(r,n){var l,c,h;if(r)return l=o.hasData(r)?o.getData(r):{},c=r.parentNode||r.ownerDocument,typeof n=="string"&&(h=null,!r.paramData&&r.paramData!=0||(h=r.paramData,r.paramData=null,r.removeAttribute(h)),n={type:n,target:r,paramData:h}),n=e.exports.fixEvent(n),l.dispatcher&&l.dispatcher.call(r,n),c&&!n.isPropagationStopped()&&n.bubbles!==!1?e.exports.trigger(c,n):c||n.defaultPrevented||(h=o.getData(n.target),n.target[n.type]&&(h.disabled=!0,typeof n.target[n.type]=="function"&&n.target[n.type](),h.disabled=!1)),!n.defaultPrevented},e.exports.one=function(r,n,l){if(r){if(d.isArray(n))return s(e.exports.one,r,n,l);var c=function(){e.exports.off(r,n,c),l.apply(this,arguments)};c.guid=l.guid=l.guid||o.guid(),e.exports.on(r,n,c)}}},{"./data":35,"./fastclick":39,"./object":47,"./ua":53}],39:[function(t,e,O){function d(l,c){var h;if(c=c||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=c.touchBoundary||10,this.layer=l,this.tapDelay=c.tapDelay||200,this.tapTimeout=c.tapTimeout||700,!d.notNeeded(l)){for(var j=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],F=0,f=j.length;F<f;F++)this[j[F]]=((W,U)=>function(){return W.apply(U,arguments)})(this[j[F]],this);a&&(l.addEventListener("mouseover",this.onMouse,!0),l.addEventListener("mousedown",this.onMouse,!0),l.addEventListener("mouseup",this.onMouse,!0)),l.addEventListener("click",this.onClick,!0),l.addEventListener("touchstart",this.onTouchStart,!1),l.addEventListener("touchmove",this.onTouchMove,!1),l.addEventListener("touchend",this.onTouchEnd,!1),l.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(l.removeEventListener=function(W,U,M){var R=Node.prototype.removeEventListener;W==="click"?R.call(l,W,U.hijacked||U,M):R.call(l,W,U,M)},l.addEventListener=function(W,U,M){var R=Node.prototype.addEventListener;W==="click"?R.call(l,W,U.hijacked||(U.hijacked=function(K){K.propagationStopped||U(K)}),M):R.call(l,W,U,M)}),typeof l.onclick=="function"&&(h=l.onclick,l.addEventListener("click",function(W){h(W)},!1),l.onclick=null)}}var o=0<=navigator.userAgent.indexOf("Windows Phone"),a=0<navigator.userAgent.indexOf("Android")&&!o,u=/iP(ad|hone|od)/.test(navigator.userAgent)&&!o,s=u&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=u&&/OS [6-7]_\d/.test(navigator.userAgent),n=0<navigator.userAgent.indexOf("BB10");d.prototype.needsClick=function(l){switch(l.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(l.disabled)return!0;break;case"input":if(u&&l.type==="file"||l.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(l.className)},d.prototype.needsFocus=function(l){switch(l.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!a;case"input":switch(l.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!l.disabled&&!l.readOnly;default:return/\bneedsfocus\b/.test(l.className)}},d.prototype.sendClick=function(l,c){var h;document.activeElement&&document.activeElement!==l&&document.activeElement.blur(),c=c.changedTouches[0],(h=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(l),!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),h.forwardedTouchEvent=!0,l.dispatchEvent(h)},d.prototype.determineEventType=function(l){return a&&l.tagName.toLowerCase()==="select"?"mousedown":"click"},d.prototype.focus=function(l){var c;u&&l.setSelectionRange&&l.type.indexOf("date")!==0&&l.type!=="time"&&l.type!=="month"&&l.type!=="email"?(c=l.value.length,l.setSelectionRange(c,c)):l.focus()},d.prototype.updateScrollParent=function(l){var c,h=l.fastClickScrollParent;if(!h||!h.contains(l)){c=l;do if(c.scrollHeight>c.offsetHeight){h=c,l.fastClickScrollParent=c;break}while(c=c.parentElement)}h&&(h.fastClickLastScrollTop=h.scrollTop)},d.prototype.getTargetElementFromEventTarget=function(l){return l.nodeType===Node.TEXT_NODE?l.parentNode:l},d.prototype.onTouchStart=function(l){var c,h,j;if(!(1<l.targetTouches.length)){if(c=this.getTargetElementFromEventTarget(l.target),h=l.targetTouches[0],u){if((j=window.getSelection()).rangeCount&&!j.isCollapsed)return!0;if(!s){if(h.identifier&&h.identifier===this.lastTouchIdentifier)return l.preventDefault(),!1;this.lastTouchIdentifier=h.identifier,this.updateScrollParent(c)}}this.trackingClick=!0,this.trackingClickStart=l.timeStamp,this.targetElement=c,this.touchStartX=h.pageX,this.touchStartY=h.pageY,l.timeStamp-this.lastClickTime<this.tapDelay&&l.preventDefault()}return!0},d.prototype.touchHasMoved=function(c){var c=c.changedTouches[0],h=this.touchBoundary;return Math.abs(c.pageX-this.touchStartX)>h||Math.abs(c.pageY-this.touchStartY)>h},d.prototype.onTouchMove=function(l){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(l.target)||this.touchHasMoved(l))&&(this.trackingClick=!1,this.targetElement=null),!0},d.prototype.findControl=function(l){return l.control!==void 0?l.control:l.htmlFor?document.getElementById(l.htmlFor):l.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},d.prototype.onTouchEnd=function(l){var c,h,j,F=this.targetElement;if(!this.trackingClick)return!0;if(l.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(l.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=l.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(j=l.changedTouches[0],(F=document.elementFromPoint(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)||F).fastClickScrollParent=this.targetElement.fastClickScrollParent),(j=F.tagName.toLowerCase())==="label"){if(h=this.findControl(F)){if(this.focus(F),a)return!1;F=h}}else if(this.needsFocus(F))return 100<l.timeStamp-c||u&&window.top!==window&&j==="input"?this.targetElement=null:(this.focus(F),this.sendClick(F,l),u&&j==="select"||(this.targetElement=null,l.preventDefault())),!1;return!(!u||s||!(h=F.fastClickScrollParent)||h.fastClickLastScrollTop===h.scrollTop)||(this.needsClick(F)||(l.preventDefault(),this.sendClick(F,l)),!1)},d.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},d.prototype.onMouse=function(l){return!this.targetElement||!(!l.forwardedTouchEvent&&l.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)&&(l.stopImmediatePropagation?l.stopImmediatePropagation():l.propagationStopped=!0,l.stopPropagation(),l.preventDefault(),1))},d.prototype.onClick=function(l){return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):l.target.type==="submit"&&l.detail===0||((l=this.onMouse(l))||(this.targetElement=null),l)},d.prototype.destroy=function(){var l=this.layer;a&&(l.removeEventListener("mouseover",this.onMouse,!0),l.removeEventListener("mousedown",this.onMouse,!0),l.removeEventListener("mouseup",this.onMouse,!0)),l.removeEventListener("click",this.onClick,!0),l.removeEventListener("touchstart",this.onTouchStart,!1),l.removeEventListener("touchmove",this.onTouchMove,!1),l.removeEventListener("touchend",this.onTouchEnd,!1),l.removeEventListener("touchcancel",this.onTouchCancel,!1)},d.notNeeded=function(l){var c,h;return window.ontouchstart===void 0||(h=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1])&&(!a||(c=document.querySelector("meta[name=viewport]"))&&(c.content.indexOf("user-scalable=no")!==-1||31<h&&document.documentElement.scrollWidth<=window.outerWidth))||n&&10<=(h=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=h[2]&&(c=document.querySelector("meta[name=viewport]"))&&(c.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)?!0:l.style.msTouchAction==="none"||l.style.touchAction==="manipulation"||!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(c=document.querySelector("meta[name=viewport]"))&&(c.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth))||l.style.touchAction==="none"||l.style.touchAction==="manipulation"},d.attach=function(l,c){return new d(l,c)},e.exports=d},{}],40:[function(t,e,O){var d=t("./data");e.exports.bind=function(o,a,u){a.guid||(a.guid=d.guid());function s(){return a.apply(o,arguments)}return s.guid=u?u+"_"+a.guid:a.guid,s}},{"./data":35}],41:[function(t,e,O){function d(){d=function(){return n};var r,n={},l=Object.prototype,c=l.hasOwnProperty,X=typeof Symbol=="function"?Symbol:{},h=X.iterator||"@@iterator",j=X.asyncIterator||"@@asyncIterator",F=X.toStringTag||"@@toStringTag";function f(ge,he,se,Z){Object.defineProperty(ge,he,{value:se,enumerable:!Z,configurable:!Z,writable:!Z})}try{f({},"")}catch{f=function(he,se,Z){return he[se]=Z}}function W(ge,ke,se,Z){var oe,re,Te,Ce,ke=ke&&ke.prototype instanceof R?ke:R,ke=Object.create(ke.prototype);return f(ke,"_invoke",(oe=ge,re=se,Te=new de(Z||[]),Ce=1,function(ye,J){if(Ce===3)throw Error("Generator is already running");if(Ce===4){if(ye==="throw")throw J;return{value:r,done:!0}}for(Te.method=ye,Te.arg=J;;){var fe=Te.delegate;if(fe&&(fe=function Ee(Ie,Me){var Oe=Me.method,we=Ie.i[Oe];return we===r?(Me.delegate=null,Oe==="throw"&&Ie.i.return&&(Me.method="return",Me.arg=r,Ee(Ie,Me),Me.method==="throw")||Oe!=="return"&&(Me.method="throw",Me.arg=new TypeError("The iterator does not provide a '"+Oe+"' method")),M):(Oe=U(we,Ie.i,Me.arg),Oe.type==="throw"?(Me.method="throw",Me.arg=Oe.arg,Me.delegate=null,M):(we=Oe.arg,we?we.done?(Me[Ie.r]=we.value,Me.next=Ie.n,Me.method!=="return"&&(Me.method="next",Me.arg=r),Me.delegate=null,M):we:(Me.method="throw",Me.arg=new TypeError("iterator result is not an object"),Me.delegate=null,M)))}(fe,Te),fe)){if(fe===M)continue;return fe}if(Te.method==="next")Te.sent=Te._sent=Te.arg;else if(Te.method==="throw"){if(Ce===1)throw Ce=4,Te.arg;Te.dispatchException(Te.arg)}else Te.method==="return"&&Te.abrupt("return",Te.arg);if(Ce=3,fe=U(oe,re,Te),fe.type==="normal"){if(Ce=Te.done?4:2,fe.arg===M)continue;return{value:fe.arg,done:Te.done}}fe.type==="throw"&&(Ce=4,Te.method="throw",Te.arg=fe.arg)}}),!0),ke}function U(ge,he,se){try{return{type:"normal",arg:ge.call(he,se)}}catch(Z){return{type:"throw",arg:Z}}}n.wrap=W;var M={};function R(){}function K(){}function G(){}var X={},z=(f(X,h,function(){return this}),Object.getPrototypeOf),z=z&&z(z(ce([]))),te=(z&&z!==l&&c.call(z,h)&&(X=z),G.prototype=R.prototype=Object.create(X));function ee(ge){["next","throw","return"].forEach(function(he){f(ge,he,function(se){return this._invoke(he,se)})})}function Y(ge,he){var se;f(this,"_invoke",function(Z,oe){function re(){return new he(function(Te,Ce){(function ke(Me,J,fe,Ee){var Ie,Me=U(ge[Me],ge,J);if(Me.type!=="throw")return(J=(Ie=Me.arg).value)&&typeof J=="object"&&c.call(J,"__await")?he.resolve(J.__await).then(function(Oe){ke("next",Oe,fe,Ee)},function(Oe){ke("throw",Oe,fe,Ee)}):he.resolve(J).then(function(Oe){Ie.value=Oe,fe(Ie)},function(Oe){return ke("throw",Oe,fe,Ee)});Ee(Me.arg)})(Z,oe,Te,Ce)})}return se=se?se.then(re,re):re()},!0)}function ie(ge){this.tryEntries.push(ge)}function ae(ge){var he=ge[4]||{};he.type="normal",he.arg=r,ge[4]=he}function de(ge){this.tryEntries=[[-1]],ge.forEach(ie,this),this.reset(!0)}function ce(ge){if(ge!=null){var he,se=ge[h];if(se)return se.call(ge);if(typeof ge.next=="function")return ge;if(!isNaN(ge.length))return he=-1,(se=function Z(){for(;++he<ge.length;)if(c.call(ge,he))return Z.value=ge[he],Z.done=!1,Z;return Z.value=r,Z.done=!0,Z}).next=se}throw new TypeError(typeof ge+" is not iterable")}return f(te,"constructor",K.prototype=G),f(G,"constructor",K),f(G,F,K.displayName="GeneratorFunction"),n.isGeneratorFunction=function(ge){return ge=typeof ge=="function"&&ge.constructor,!!ge&&(ge===K||(ge.displayName||ge.name)==="GeneratorFunction")},n.mark=function(ge){return Object.setPrototypeOf?Object.setPrototypeOf(ge,G):(ge.__proto__=G,f(ge,F,"GeneratorFunction")),ge.prototype=Object.create(te),ge},n.awrap=function(ge){return{__await:ge}},ee(Y.prototype),f(Y.prototype,j,function(){return this}),n.AsyncIterator=Y,n.async=function(ge,he,se,Z,oe){oe===void 0&&(oe=Promise);var re=new Y(W(ge,he,se,Z),oe);return n.isGeneratorFunction(he)?re:re.next().then(function(Te){return Te.done?Te.value:re.next()})},ee(te),f(te,F,"Generator"),f(te,h,function(){return this}),f(te,"toString",function(){return"[object Generator]"}),n.keys=function(ge){var he,se=Object(ge),Z=[];for(he in se)Z.unshift(he);return function oe(){for(;Z.length;)if((he=Z.pop())in se)return oe.value=he,oe.done=!1,oe;return oe.done=!0,oe}},n.values=ce,de.prototype={constructor:de,reset:function(ge){if(this.prev=this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(ae),!ge)for(var he in this)he.charAt(0)==="t"&&c.call(this,he)&&!isNaN(+he.slice(1))&&(this[he]=r)},stop:function(){this.done=!0;var ge=this.tryEntries[0][4];if(ge.type==="throw")throw ge.arg;return this.rval},dispatchException:function(ge){if(this.done)throw ge;var he=this;function se(ye){re.type="throw",re.arg=ge,he.next=ye}for(var Z=he.tryEntries.length-1;0<=Z;--Z){var oe=this.tryEntries[Z],re=oe[4],Te=this.prev,Ce=oe[1],ke=oe[2];if(oe[0]===-1)return se("end"),!1;if(!Ce&&!ke)throw Error("try statement without catch or finally");if(oe[0]!=null&&oe[0]<=Te){if(Te<Ce)return this.method="next",this.arg=r,se(Ce),!0;if(Te<ke)return se(ke),!1}}},abrupt:function(ge,he){for(var se=this.tryEntries.length-1;0<=se;--se){var Z=this.tryEntries[se];if(-1<Z[0]&&Z[0]<=this.prev&&this.prev<Z[2]){var oe=Z;break}}var re=(oe=oe&&(ge==="break"||ge==="continue")&&oe[0]<=he&&he<=oe[2]?null:oe)?oe[4]:{};return re.type=ge,re.arg=he,oe?(this.method="next",this.next=oe[2],M):this.complete(re)},complete:function(ge,he){if(ge.type==="throw")throw ge.arg;return ge.type==="break"||ge.type==="continue"?this.next=ge.arg:ge.type==="return"?(this.rval=this.arg=ge.arg,this.method="return",this.next="end"):ge.type==="normal"&&he&&(this.next=he),M},finish:function(ge){for(var he=this.tryEntries.length-1;0<=he;--he){var se=this.tryEntries[he];if(se[2]===ge)return this.complete(se[4],se[3]),ae(se),M}},catch:function(ge){for(var he=this.tryEntries.length-1;0<=he;--he){var se,Z,oe=this.tryEntries[he];if(oe[0]===ge)return(se=oe[4]).type==="throw"&&(Z=se.arg,ae(oe)),Z}throw Error("illegal catch attempt")},delegateYield:function(ge,he,se){return this.delegate={i:ce(ge),r:he,n:se},this.method==="next"&&(this.arg=r),M}},n}function o(r,n,l,c,h,j,F){try{var f=r[j](F),W=f.value}catch(U){return l(U)}f.done?n(W):Promise.resolve(W).then(c,h)}function a(r){return function(){var n=this,l=arguments;return new Promise(function(c,h){var j=r.apply(n,l);function F(W){o(j,c,h,F,f,"next",W)}function f(W){o(j,c,h,F,f,"throw",W)}F(void 0)})}}var u,s=typeof Promise>"u"?t("es6-promise").Promise:Promise;t=self,u=function(){return(l={d:function(K,G){for(var X in G)l.o(G,X)&&!l.o(K,X)&&Object.defineProperty(K,X,{enumerable:!0,get:G[X]})},o:function(K,G){return Object.prototype.hasOwnProperty.call(K,G)}}).d(c={},{default:function(){return R}}),h=navigator.userAgent,j=/qqbrowser/i.test(h.toLowerCase()),F=/Edge/i.test(h),F=/Chrome/i.test(h)&&!F&&!j,f=/Safari/i.test(h)&&!F,j=h.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),F=j&&j[1],W=F&&Number(F.split(".")[0]),U=(()=>{var K=a(d().mark(function G(X){var z;return d().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,fetch(X);case 2:return z=te.sent,te.next=5,z.blob();case 5:return z=te.sent,te.abrupt("return",URL.createObjectURL(z));case 7:case"end":return te.stop()}},G)}));return function(G){return K.apply(this,arguments)}})(),M={includeSystemHijack:!0,showVideo:!1,format:"mp4",codecTags:["hev1","hvc1"],timeout:2e3},R=function(K){return K===void 0&&(K={}),new s((()=>{var G=a(d().mark(function X(z){var te,ee,Y,ie,ae,de,ce,ge,he,se,Z,oe,re;return d().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(ie=Object.assign({},M,K),te=ie.includeSystemHijack,ee=ie.showVideo,ce=ie.codecTags,Y=ie.format,ie=ie.timeout,ae=performance.now(),de=-1<ce.indexOf("hvc1"),ce=-1<ce.indexOf("hev1"),he=ge=!1,!(f&&W&&11<=W)){Te.next=14;break}if(se=r("hvc1",Y),Te.t0=te,Te.t0){Te.next=9;break}return Te.next=8,U(se);case 8:se=Te.sent;case 9:return Te.next=11,n(se,ee,"hvc1",ie);case 11:ge=Te.sent,Te.next=34;break;case 14:if(!de){Te.next=24;break}if(Z=r("hvc1",Y),Te.t1=te,Te.t1){Te.next=21;break}return Te.next=20,U(Z);case 20:Z=Te.sent;case 21:return Te.next=23,n(Z,ee,"hvc1",ie);case 23:ge=Te.sent;case 24:if(!ce){Te.next=34;break}if(oe=r("hev1",Y),Te.t2=te,Te.t2){Te.next=31;break}return Te.next=30,U(oe);case 30:oe=Te.sent;case 31:return Te.next=33,n(oe,ee,"hev1",ie);case 33:he=Te.sent;case 34:re=performance.now(),z({isHvc1Supported:ge,isHev1Supported:he,time:Math.ceil(re-ae)});case 36:case"end":return Te.stop()}},X)}));return function(X){return G.apply(this,arguments)}})())},c.default;function r(K,G){var X=(G=G===void 0?"mp4":G)==="hls",z="";switch(K=K===void 0?"":K){case"hvc1":z=X?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hvc1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hvc1.mp4";break;case"hev1":z=X?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hev1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hev1.mp4";break;default:z=""}return z}function n(K,G,X,z){G===void 0&&(G=!1),X===void 0&&(X="");var te=performance.now(),ee=z;return new s(function(Y){ie=K,(ae=G?100:0)===void 0&&(ae=100),(de=document.createElement("video")).setAttribute("width",""+ae),de.setAttribute("height",""+ae),de.setAttribute("muted","muted"),de.setAttribute("crossorigin","anonymous"),de.setAttribute("preload","preload"),de.setAttribute("autoplay","autoplay"),de.setAttribute("webkit-playsinline","webkit-playsinline"),de.setAttribute("playsinline","playsinline"),de.setAttribute("x-webkit-airplay","x-webkit-airplay"),de.setAttribute("playsinline","playsinline"),de.src=ie;var ie,ae,de,ce=de,ge=setInterval(function(){var he,se,Z,oe,re;(performance.now()-te>ee||ce.videoWidth!==0)&&(clearInterval(ge),he=ce.videoWidth!==0,G?(ce.setAttribute("controls","controls"),se=ce,(Z=X)===void 0&&(Z=""),oe=document.createElement("dv"),(re=document.createElement("h3")).innerText=Z,oe.appendChild(se),oe.appendChild(re),document.body.appendChild(oe)):(ce.pause(),ce=null),Y(he))})})}var l,c,h,j,F,f,W,U,M,R},typeof O=="object"&&typeof e=="object"?e.exports=u():typeof O=="object"?O.hevcDetector=u():t.hevcDetector=u()},{"es6-promise":13}],42:[function(t,e,O){function d(u){for(var s in u=typeof u=="string"?this.parseAttrList(u):u)u.hasOwnProperty(s)&&(this[s]=u[s])}var o=/^(\d+)x(\d+)$/,a=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;d.prototype={decimalInteger:function(u){return u=parseInt(this[u],10),u>Number.MAX_SAFE_INTEGER?1/0:u},hexadecimalInteger:function(u){if(this[u]){for(var s=(1&(s=(this[u]||"0x").slice(2)).length?"0":"")+s,r=new Uint8Array(s.length/2),n=0;n<s.length/2;n++)r[n]=parseInt(s.slice(2*n,2*n+2),16);return r}return null},hexadecimalIntegerAsNumber:function(u){return u=parseInt(this[u],16),u>Number.MAX_SAFE_INTEGER?1/0:u},decimalFloatingPoint:function(u){return parseFloat(this[u])},enumeratedString:function(u){return this[u]},decimalResolution:function(u){if(u=o.exec(this[u]),u!==null)return{width:parseInt(u[1],10),height:parseInt(u[2],10)}},parseAttrList:function(u){var s,r={};for(a.lastIndex=0;(s=a.exec(u))!==null;){var n=s[2];n.indexOf('"')===0&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),r[s[1]]=n}return r}},e.exports=d},{}],43:[function(t,e,O){function d(){this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}function o(){this.loaders={}}var a=t("../constants"),u=t("../playerutil"),s=t("./attrlist"),r=t("../io"),n=t("./urltoolkit"),l=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,c=/#EXT-X-MEDIA:(.*)/g,h=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),j=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(PART-INF):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,F="RegionBlock",f=function(){this.method=null,this.key=null,this.iv=null,this._uri=null};d.prototype.getUrl=function(){return!this._url&&this.relurl&&(this._url=n.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},d.prototype.Seturl=function(W){this._url=W},d.prototype.getProgramDateTime=function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime},d.prototype.GetbyteRange=function(){var W,U,M;return this._byteRange||(W=this._byteRange=[],this.rawByteRange&&((U=this.rawByteRange.split("@",2)).length===1?(M=this.lastByteRangeEndOffset,W[0]=M||0):W[0]=parseInt(U[1]),W[1]=parseInt(U[0])+W[0])),this._byteRange},d.prototype.getByteRangeStartOffset=function(){return this.byteRange[0]},d.prototype.getByteRangeEndOffset=function(){return this.byteRange[1]},d.prototype.getDecryptdata=function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},o.prototype=((t={parseMasterPlaylist:function(W,U){var M=[];for(l.lastIndex=0;(G=l.exec(W))!=null;){var R={},K=R.attrs=new s(G[1]),G=(R.url=this.resolve(G[2],U),K.decimalResolution("RESOLUTION"));if(G&&(R.width=G.width,R.height=G.height),R.bitrate=K.decimalInteger("AVERAGE-BANDWIDTH")||K.decimalInteger("BANDWIDTH"),R.name=K.NAME,X=K.CODECS)for(var X=X.split(/[ ,]+/),z=0;z<X.length;z++){var te=X[z];te.indexOf("avc1")!==-1?R.videoCodec=this.avc1toavcoti(te):te.indexOf("hvc1")!==-1?R.videoCodec=te:R.audioCodec=te}M.push(R)}return M},parseMasterPlaylistMedia:function(W,U,M,R){var K=[],G=0;for(c.lastIndex=0;(z=c.exec(W))!=null;){var X={},z=new s(z[1]);z.TYPE===M&&(X.groupId=z["GROUP-ID"],X.name=z.NAME,X.type=M,X.default=z.DEFAULT==="YES",X.autoselect=z.AUTOSELECT==="YES",X.forced=z.FORCED==="YES",z.URI&&(X.url=this.resolve(z.URI,U)),X.lang=z.LANGUAGE,X.name||(X.name=X.lang),R&&(X.audioCodec=R),X.id=G++,K.push(X))}return K},avc1toavcoti:function(W){var U=W.split("."),M=2<U.length?(M=U.shift()+".",(M+=parseInt(U.shift()).toString(16))+("000"+parseInt(U.shift()).toString(16)).substr(-4)):W;return M},load:function(W,U,M){var R=this;r.get(W,function(K){var G,X,z,te=R.parseMasterPlaylist(K,W);te.length&&(G=R.parseMasterPlaylistMedia(K,W,"AUDIO",te[0].audioCodec),X=R.parseMasterPlaylistMedia(K,W,"SUBTITLES"),G.length)&&(z=!1,G.forEach(function(ee){ee.url||(z=!0)}),z===!1)&&te[0].audioCodec&&!te[0].attrs.AUDIO&&(console.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),G.unshift({type:"main",name:"main"})),U({levels:te,audioTracks:G,subtitles:X,url:W,string:K})},function(K,G,X){M&&((X=u.parseHttpHeaders(X)["x-tengine-error"])&&-1<a.RegionBlockMessages.indexOf(X)&&(K=F),M(K,G))})},loadMediaPlaylist:function(W,U,M){var R=this,K=(W=W||{}).string,G=W.url;K?(W=R.parseLevelPlaylist(K,G),U(W)):r.get(G,function(X){X=R.parseLevelPlaylist(X,G),U(X)},function(X){M&&M(X)})},resolve:function(W,U){return n.buildAbsoluteURL(U,W,{alwaysNormalize:!0})}}).parseMasterPlaylist=function(W,U){var M=[];for(l.lastIndex=0;(G=l.exec(W))!=null;){var R={},K=R.attrs=new s(G[1]),G=(R.url=this.resolve(G[2],U),K.decimalResolution("RESOLUTION"));if(G&&(R.width=G.width,R.height=G.height),R.bitrate=K.decimalInteger("AVERAGE-BANDWIDTH")||K.decimalInteger("BANDWIDTH"),R.name=K.NAME,X=K.CODECS)for(var X=X.split(/[ ,]+/),z=0;z<X.length;z++){var te=X[z];te.indexOf("avc1")!==-1?R.videoCodec=this.avc1toavcoti(te):te.indexOf("hvc1")!==-1?R.videoCodec=te:R.audioCodec=te}M.push(R)}return M},t.parseMasterPlaylistMedia=function(W,U,M,R){var K=[],G=0;for(c.lastIndex=0;(z=c.exec(W))!=null;){var X={},z=new s(z[1]);z.TYPE===M&&(X.groupId=z["GROUP-ID"],X.name=z.NAME,X.type=M,X.default=z.DEFAULT==="YES",X.autoselect=z.AUTOSELECT==="YES",X.forced=z.FORCED==="YES",z.URI&&(X.url=this.resolve(z.URI,U)),X.lang=z.LANGUAGE,X.name||(X.name=X.lang),R&&(X.audioCodec=R),X.id=G++,K.push(X))}return K},t.avc1toavcoti=function(W){var U=W.split("."),M=2<U.length?(M=U.shift()+".",(M+=parseInt(U.shift()).toString(16))+("000"+parseInt(U.shift()).toString(16)).substr(-4)):W;return M},t.parseLevelPlaylist=function(W,U,M,R){var K,G,X=0,z=0,te={type:null,version:null,url:U,fragments:[],live:!0,startSN:0},ee=new f,Y=0,ie=null,ae=new d;for(h.lastIndex=0;(K=h.exec(W))!==null;){var de=K[1];if(de){ae.duration=parseFloat(de);var ce=(" "+K[2]).slice(1);ae.title=ce||null,ae.tagList.push(ce?["INF",de,ce]:["INF",de])}else if(K[3])isNaN(ae.duration)||(ce=X++,ae.type=R,ae.start=z,ae.levelkey=ee,ae.sn=ce,ae.level=M,ae.cc=Y,ae.baseurl=U,ae.relurl=(" "+K[3]).slice(1),te.fragments.push(ae),z+=(ie=ae).duration,ae=new d);else if(K[4])ae.rawByteRange=(" "+K[4]).slice(1),ie&&(de=ie.byteRangeEndOffset)&&(ae.lastByteRangeEndOffset=de);else if(K[5])ae.rawProgramDateTime=(" "+K[5]).slice(1),ae.tagList.push(["PROGRAM-DATE-TIME",ae.rawProgramDateTime]),te.programDateTime===void 0&&(te.programDateTime=new Date(new Date(Date.parse(K[5]))-1e3*z));else{for(K=K[0].match(j),G=1;G<K.length&&K[G]===void 0;G++);var ge=(" "+K[G+1]).slice(1),he=(" "+K[G+2]).slice(1);switch(K[G]){case"#":ae.tagList.push(he?[ge,he]:[ge]);break;case"PLAYLIST-TYPE":te.type=ge.toUpperCase();break;case"MEDIA-SEQUENCE":X=te.startSN=parseInt(ge);break;case"TARGETDURATION":te.targetduration=parseFloat(ge);break;case"VERSION":te.version=parseInt(ge);break;case"EXTM3U":break;case"ENDLIST":te.live=!1;break;case"DIS":Y++,ae.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":Y=parseInt(ge);break;case"KEY":var oe=new s(ge),se=oe.enumeratedString("METHOD"),Z=oe.URI,oe=oe.hexadecimalInteger("IV");se&&(ee=new f,Z)&&0<=["AES-128","SAMPLE-AES"].indexOf(se)&&(ee.method=se,ee.baseuri=U,ee.reluri=Z,ee.key=null,ee.iv=oe);break;case"START":se=new s(ge).decimalFloatingPoint("TIME-OFFSET"),isNaN(se)||(te.startTimeOffset=se);break;case"MAP":Z=new s(ge),ae.relurl=Z.URI,ae.rawByteRange=Z.BYTERANGE,ae.baseurl=U,ae.level=M,ae.type=R,ae.sn="initSegment",te.initSegment=ae,ae=new d;break;case"PART-INF":oe=new s(ge),te.partTarget=oe.decimalFloatingPoint("PART-TARGET");break;default:console.log("line parsed but not handled: "+K)}}}return(ae=ie)&&!ae.relurl&&(te.fragments.pop(),z-=ae.duration),te.totalduration=z,te.averagetargetduration=z/te.fragments.length,te.endSN=X-1,te},t),o.ERROR_REGION_BLOCK=F,e.exports=o},{"../constants":33,"../io":45,"../playerutil":50,"./attrlist":42,"./urltoolkit":44}],44:[function(t,e,O){var d=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,o=/^([^\/;?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,u=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(j,n,l){if(l=l||{},j=j.trim(),!(n=n.trim())){if(!l.alwaysNormalize)return j;var c=s.parseURL(j);if(c)return c.path=s.normalizePath(c.path),s.buildURLFromParts(c);throw new Error("Error trying to parse base URL.")}if(c=s.parseURL(n),!c)throw new Error("Error trying to parse relative URL.");if(c.scheme)return l.alwaysNormalize?(c.path=s.normalizePath(c.path),s.buildURLFromParts(c)):n;if(n=s.parseURL(j),!n)throw new Error("Error trying to parse base URL.");!n.netLoc&&n.path&&n.path[0]!=="/"&&(j=o.exec(n.path),n.netLoc=j[1],n.path=j[2]),n.netLoc&&!n.path&&(n.path="/");var h,j={scheme:n.scheme,netLoc:c.netLoc,path:null,params:c.params,query:c.query,fragment:c.fragment};return c.netLoc||(j.netLoc=n.netLoc,c.path[0]!=="/"&&(c.path?(h=(h=n.path).substring(0,h.lastIndexOf("/")+1)+c.path,j.path=s.normalizePath(h)):(j.path=n.path,c.params||(j.params=n.params,c.query)||(j.query=n.query)))),j.path===null&&(j.path=l.alwaysNormalize?s.normalizePath(c.path):c.path),s.buildURLFromParts(j)},parseURL:function(r){return r=d.exec(r),r?{scheme:r[1]||"",netLoc:r[2]||"",path:r[3]||"",params:r[4]||"",query:r[5]||"",fragment:r[6]||""}:null},normalizePath:function(r){for(r=r.split("").reverse().join("").replace(a,"");r.length!==(r=r.replace(u,"")).length;);return r.split("").reverse().join("")},buildURLFromParts:function(r){return r.scheme+r.netLoc+r.path+r.params+r.query+r.fragment}};e.exports=s},{}],45:[function(t,e,O){var d=t("./url");e.exports.get=function(o,a,u,s,r,n){e.exports.ajax.call(this,"GET",o,{},a,u,s,r,void 0,n)},e.exports.post=function(o,a,u,s,r,n){var l={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"};e.exports.ajax("POST",o,a,u,s,r,n,l)},e.exports.postWithHeader=function(o,a,u,s,r){e.exports.ajax("POST",o,a,s,r,!0,!1,u)},e.exports.ajax=function(o,a,u,s,r,n,l,c,h){var j,F,f;r=r||function(){},typeof XMLHttpRequest>"u"&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch{}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch{}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch{}throw new Error("This browser does not support XMLHttpRequest.")}),F=new XMLHttpRequest,h&&(F.timeout=h),h=d.parseUrl(a),f=window.location,h.protocol+h.host===f.protocol+f.host||!window.XDomainRequest||"withCredentials"in F?(j=h.protocol=="file:"||f.protocol=="file:",F.onreadystatechange=function(){F.readyState===4&&(F.status===200||j&&F.status===0?s(F.responseText):r(F.responseText,F.status,F))}):((F=new window.XDomainRequest).onload=function(){s(F.responseText)},F.onerror=r,F.onprogress=function(){},F.ontimeout=r);try{if(n===void 0&&(n=!0),F.open(o,a,n),l&&(F.withCredentials=!0),c)for(var W in c)c.hasOwnProperty(W)&&F.setRequestHeader(W,c[W])}catch(U){return void r(U)}try{F.send(u)}catch(U){r(U)}},e.exports.jsonp=function(o,a,u){var s="jsonp_callback_"+Math.round(1e5*Math.random()),r=document.createElement("script");o&&(r.src=o+(0<=o.indexOf("?")?"&":"?")+"callback="+s+"&cb="+s,r.onerror=function(){delete window[s],document.body.removeChild(r),u()},r.onload=function(){setTimeout(function(){window[s]&&(delete window[s],document.body.removeChild(r))},0)},window[s]=function(n){delete window[s],document.body.removeChild(r),a(n)},document.body.appendChild(r))},e.exports.loadJS=function(o,a,u){var s=document.getElementsByTagName("HEAD").item(0),r=document.createElement("script");r.setAttribute("crossorigin","anonymous"),o&&o.toLowerCase().indexOf("https://")<0&&o.toLowerCase().indexOf("http://")<0&&(o=document.URL.replace(/(\/[^\/]*?)$/i,"")+o),r.type="text/javascript",r.src=o,r.onload=function(){a&&a()},r.onerror=function(){u&&u()},s.appendChild(r)}},{"./url":54}],46:[function(t,e,O){var d=t("./dom");e.exports.render=function(o,r){var u=r.align||(r.className?"":"tl"),s=r.x||0,r=r.y||0,n=s.indexOf&&0<s.indexOf("%")?"":"px",l=r.indexOf&&0<r.indexOf("%")?"":"px";u==="tl"?d.css(o,{float:"left","margin-left":s+n,"margin-top":r+l}):u==="tr"?d.css(o,{float:"right","margin-right":s+n,"margin-top":r+l}):u==="tlabs"?d.css(o,{position:"absolute",left:s+n,top:r+l}):u==="trabs"?d.css(o,{position:"absolute",right:s+n,top:r+l}):u==="blabs"?d.css(o,{position:"absolute",left:s+n,bottom:r+l}):u==="brabs"?d.css(o,{position:"absolute",right:s+n,bottom:r+l}):u==="cc"&&d.addClass(o,"loading-center")}},{"./dom":37}],47:[function(t,e,O){var d=Object.prototype.hasOwnProperty;e.exports.create=Object.create||function(o){function a(){}return a.prototype=o,new a},e.exports.isArray=function(o){return Object.prototype.toString.call(arg)==="[object Array]"},e.exports.isEmpty=function(o){for(var a in o)if(o[a]!==null)return!1;return!0},e.exports.each=function(o,a,u){if(e.exports.isArray(o))for(var s=0,r=o.length;s<r&&a.call(u||this,o[s],s)!==!1;++s);else for(var n in o)if(d.call(o,n)&&a.call(u||this,n,o[n])===!1)break;return o},e.exports.merge=function(o,a){if(a)for(var u in a)d.call(a,u)&&(o[u]=a[u]);return o},e.exports.deepMerge=function(o,a){var u,s,r;for(u in o=e.exports.copy(o),a)d.call(a,u)&&(s=o[u],r=a[u],e.exports.isPlain(s)&&e.exports.isPlain(r)?o[u]=e.exports.deepMerge(s,r):o[u]=a[u]);return o},e.exports.copy=function(o){return e.exports.merge({},o)},e.exports.isPlain=function(o){return!!o&&typeof o=="object"&&o.toString()==="[object Object]"&&o.constructor===Object},e.exports.isArray=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"},e.exports.unescape=function(o){return o.replace(/&([^;]+);/g,function(a,u){return{amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x60":"`"}[u.toLowerCase()]||a})}},{}],48:[function(t,e,O){var d,o=t("./object");(d=function(){}).extend=function(a){var u,s,r=(a=a||{}).init||this.prototype.init||function(){};for(s in(((u=function(){r.apply(this,arguments)}).prototype=o.create(this.prototype)).constructor=u).extend=d.extend,u.create=d.create,a)a.hasOwnProperty(s)&&(u.prototype[s]=a[s]);return u},d.create=function(){var a=o.create(this.prototype);return this.apply(a,arguments),a},e.exports=d},{"./object":47}],49:[function(t,e,O){var d=!new Function("try {return this===window;}catch(e){ return false;}")();e.exports.isSSR=d},{}],50:[function(t,e,O){var d=t("./object"),o=t("../config"),a=t("./dom"),u=t("./cookie"),s=t("./constants"),r=t("../lang/index"),n=t("./ua"),l=t("./io"),c=t("../player/base/plugin/defaultemptycomponent"),h=t("./hardware-decoding-detector"),j={preload:!0,autoplay:!0,autoplayPolicy:{fallbackToMute:!1,showUnmuteBtn:!0},useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,logBatched:!0,logReportTo:void 0,heartHeatInterval:30,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,mute:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,disableVodHalfRetry:!1,disableLiveHalfRetry:!1,keyShortCuts:!1,keyFastForwardStep:10,isVBR:!1,vodRetry:3,format:"",definition:"",defaultDefinition:"",loadDataTimeout:20,waitingTimeout:60,waitingBufferedTime:3,delayLoadingShow:1,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"",x5_fullscreen:!1,x5_orientation:"landscape|portrait",x5LandscapeAsFullScreen:!0,license:{},autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,enableMSEForAndroid:!0,encryptType:0,language:"zh-cn",languageTexts:{},extLanguageTexts:{},mediaType:"video",outputType:"",playConfig:{},reAuthInfo:{},components:[],liveTimeShiftUrl:"",liveShiftSource:"",liveShiftTime:"",liveShiftMinOffset:30,videoHeight:"100%",videoWidth:"100%",enableWorker:!0,authTimeout:"",enableMockFullscreen:!1,region:"cn-shanghai",debug:!1,progressMarkers:[],ratio:void 0,snapshotWatermark:{left:"500",top:"100",text:"",font:"16px ",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!1,flvOption:{},hlsOption:{stopLoadAsPaused:!1},drmOption:{},hlsLoadingTimeOut:2e4,useHlsPlugOnMobile:!0,useFlvPlugOnMobile:!0,lowLatencyMode:!1,useHls2:!0,useDrm2:void 0,skipRtsSupportCheck:!1,rtsLoadDataTimeout:6e3,rtsOption:{},rtsFallback:!1,rtsFallbackSource:void 0,rtsFallbackType:void 0,rtsVersion:"",rtsSdkUrl:"",nudgeMaxRetry:5,tracks:[],recreatePlayer:function(){},diagnosisButtonVisible:!0,enableH265:!1,forceH265:!1,enableH266:!1,forceH266:!1,h265Threads:!0,h265Simd:!0,preventRecord:!1,traceId:"",mediaAuth:void 0,textTracks:void 0,_native:!0,hlsUriToken:"",thumbnailUrl:"",refreshAccessInfo:function(){},drmSessionTimeout:5e3,skinRes:"//"+o.domain+"/de/prismplayer-flash/"+o.flashVersion+"/atlas/defaultSkin",splayerUrl:null,splayerWasmDomain:null,logo:[],disablePip:!1,assetPrefix:null,clickPause:n.IS_PC,clickPauseDelay:200,statisticsReportInterval:5e3,skinLayoutIgnore:[],disableSeek:!1,dashjsUrl:null,dashOption:{},disableDumpBuffer:!1,useSW:!1,swScriptURL:void 0,env:"",autoSize:"",watchStartTime:void 0,watchEndTime:void 0,start:void 0,end:void 0,dbClickFullscreen:n.IS_PC,dbClickFullscreenDelay:200,enableHlsH265:!1,bitrateDisplayHandler:void 0,longPressFastForward:!n.IS_PC,dbClickSkip:!n.IS_PC,customData:void 0},F=(e.exports.getDefaultH5Layout=function(){return[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:50},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]}]},e.exports.getDefaultAudioLayout=function(){return[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"volume",align:"tr",x:5,y:10}]}]},e.exports.getDefaultFlashLayout=function(){return[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}]},e.exports.canPlayType=function(f){var W=document.createElement("video");return W.canPlayType?W.canPlayType(f):""},e.exports.canPlayHls=function(){return e.exports.canPlayType("application/x-mpegURL")!=""},e.exports.isUsedHlsPluginOnMobile=function(f){return!!(n.IS_MOBILE&&(n.IS_CHROME||n.IS_FIREFOX||n.IS_X5||n.IS_EDGE_NEW)&&e.exports.isSupportHls())},e.exports.isSafariUsedHlsPlugin=function(f){return!!(n.os.pc&&n.browser.safari&&f)},e.exports.validateSource=function(f){return!0},e.exports.supportH5Video=function(){return document.createElement("video").canPlayType!==void 0},e.exports.createWrapper=function(f){var W=f.id,W=typeof W=="string"?(W.indexOf("#")===0&&(W=W.slice(1)),a.el(W)):W;if(W&&W.nodeName)return e.exports.adjustContainerLayout(W,f),W;throw new TypeError("")},e.exports.adjustContainerLayout=function(f,W){W.width&&!f.style.width&&(f.style.width=W.width),W.height&&!f.style.height&&(f.style.height=W.height)},e.exports.isSupportHls=function(){var f=window.MediaSource=window.MediaSource||window.WebKitMediaSource,W=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,f=f&&typeof f.isTypeSupported=="function"&&f.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),W=(n.IS_ANDROID&&n.is_X5&&(f=!0),!W||W.prototype&&typeof W.prototype.appendBuffer=="function"&&typeof W.prototype.remove=="function");return f&&W},e.exports.isSupportMMS=function(){return!!window.ManagedMediaSource},e.exports.isSupportFlv=function(){return e.exports.isSupportHls()},e.exports.isSupportMSE=function(){return e.exports.isSupportHls()||e.exports.isSupportMMS()},e.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported},e.exports.isSupportedDrm=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&e.exports.isSupportMSE()},e.exports.isAudio=function(f,W){if(W)return e.exports.isMp3Format(W);W=!1;try{W=f&&new URL("http:"+f).pathname.split(".").pop().toLowerCase()==="mp3"}catch{return f&&0<f.toLowerCase().indexOf(".mp3")}return W},e.exports.isLiveShift=function(f){return f.isLive&&f.liveStartTime&&f.liveOverTime},e.exports.isHls=function(f,W){if(W)return e.exports.isHlsFormat(W);W=!1;try{W=f&&new URL("http:"+f).pathname.split(".").pop().toLowerCase()==="m3u8"}catch{return f&&0<f.toLowerCase().indexOf(".m3u8")}return W},e.exports.isDash=function(f,W){if(W)return e.exports.isDashFormat(W);W=!1;try{W=f&&new URL("http:"+f).pathname.split(".").pop().toLowerCase()==="mpd"}catch{return f&&0<f.toLowerCase().indexOf(".mpd")}return W},e.exports.isFlv=function(f,W){if(W)return e.exports.isFlvFormat(W);W=!1;try{W=f&&new URL("http:"+f).pathname.split(".").pop().toLowerCase()==="flv"}catch{return f&&0<f.toLowerCase().indexOf(".flv")}return W},e.exports.isRTMP=function(f){return f&&-1<f.toLowerCase().indexOf("rtmp:")},e.exports.isRts=function(f){return f&&-1<f.toLowerCase().indexOf("artc:")},e.exports.isMp4=function(f,W){if(W)return e.exports.isMp4Format(W);W=!1;try{W=f&&new URL("http:"+f).pathname.split(".").pop().toLowerCase()==="mp4"}catch{return f&&-1<f.toLowerCase().indexOf(".mp4")}return W},e.exports.isSupportedFormat=function(f){if(!f)return!1;try{var W=f.toLowerCase();return~["mp3","mp4","mpd","hls","m3u8","flv"].indexOf(W)}catch{return!1}},e.exports.isMp3Format=function(f){if(!f)return!1;try{var W=f.toLowerCase();return~["mp3"].indexOf(W)}catch{return!1}},e.exports.isMp4Format=function(f){if(!f)return!1;try{var W=f.toLowerCase();return~["mp4"].indexOf(W)}catch{return!1}},e.exports.isFlvFormat=function(f){if(!f)return!1;try{var W=f.toLowerCase();return~["flv"].indexOf(W)}catch{return!1}},e.exports.isHlsFormat=function(f){if(!f)return!1;try{var W=f.toLowerCase();return~["hls","m3u8"].indexOf(W)}catch{return!1}},e.exports.isDashFormat=function(f){if(!f)return!1;try{var W=f.toLowerCase();return~["mpd"].indexOf(W)}catch{return!1}},e.exports.getFormat=function(U){var W={artc:"rts",m3u8:"hls"},U=(U=/\.(mp4)|\.(mp3)|\.(m3u8)|\.(flv)|(artc):/.exec(U))==null?void 0:U[0];return U=U&&U.replace(/\.|:|artc|m3u8/gi,function(M){return W[M]||""})},e.exports.checkSecuritSupport=function(){return e.exports.isSupportMSE()?n.IS_IOS&&(n.IS_UC||n.IS_QUARK||n.IS_BAIDU)?r.get("iOSVodEncriptionBlacklist"):"":"serviceWorker"in navigator?void 0:location.protocol==="http:"?r.get("Error_SW_Https_required"):r.get("UseChromeForVodEncription")+"(SW not found)"},e.exports.nativeSupportH265=function(){return n.IS_IOS||n.IS_MAC_SAFARI},e.exports.findSelectedStreamLevel=function(f,W){var U=W;if(U||(U=u.get(s.SelectedStreamLevel))){for(var M=0;M<f.length;M++)if(f[M].definition==U)return M}else u.set(s.SelectedStreamLevel,f[0].definition,365);return 0},e.exports.getHistoryDetectResult=function(f,W){if(f)return W=W==="hls",f==="hvc1"?W?u.get(s.HWDetectHvc1Hls):u.get(s.HWDetectHvc1):f==="hev1"?W?u.get(s.HWDetectHev1Hls):u.get(s.HWDetectHev1):void 0},e.exports.setHistoryDetectResult=function(f,R,U){var M="unknownCodec",R=R==="hls";f==="hvc1"?M=R?s.HWDetectHvc1Hls:s.HWDetectHvc1:f==="hev1"&&(M=R?s.HWDetectHev1Hls:s.HWDetectHev1),u.set(M,U)},e.exports.handleOption=function(f,W){e.exports.isRts(f.source)&&(f.isLive=!0);var U,M=d.merge(d.copy(j),f),R=(f.autoplayPolicy&&(M.autoplayPolicy=d.merge(j.autoplayPolicy,f.autoplayPolicy)),[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]),K=!1;if(f.useFlashPrism||e.exports.isRTMP(f.source)?(K=!0,R=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}]):(U=e.exports.isLiveShift(M))?(R.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),R.push({name:"playButton",align:"tl",x:15,y:12}),R.push({name:"liveDisplay",align:"tl",x:15,y:6})):R.push({name:"liveDisplay",align:"tlabs",x:15,y:6}),f.isLive){if(f.skinLayout===void 0)M.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:e.exports.isRts(f.source)?[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"volume",align:"tr",x:5,y:10},{name:"liveDisplay",align:"tlabs",x:15,y:6}]:R}];else if(f.skinLayout!=0){for(var G=f.skinLayout.length,X=[],z=-1,te=0;te<G;te++)if(M.skinLayout[te].name=="controlBar"){for(var z=te,ee=M.skinLayout[te].children.length,Y=0;Y<ee;Y++){var ie,ae=M.skinLayout[te].children[Y].name;ae!="liveDisplay"&&ae!="liveIco"&&ae!="fullScreenButton"&&ae!="volume"&&ae!="snapshot"&&ae!="setting"&&ae!="subtitle"&&(!U||ae!="progress"&&ae!="playButton"&&ae!="timeDisplay")||(ie=M.skinLayout[te].children[Y],ae=="progress"?ie.name="liveShiftProgress":ae=="timeDisplay"?ie.name="liveShiftTimeDisplay":K&&ae=="liveDisplay"&&(ie.name="liveIco"),X.push(ie))}break}z!=-1&&(M.skinLayout[z].children=X)}}return(f.components===void 0||!f.components||d.isArray(f.components)&&f.components.length==0)&&f.components!="false"&&(M.components=[c]),M},e.exports.ignoreSkinLayouts=function(f,W){var U;if(W!=null&&W.length&&f!=null&&f.length)return U=f,W.forEach(function(M){var R,K,G;-1<M.indexOf(".")?(G=M.split("."),R=G[0],K=G[1],(G=U.find(function(X){return X.name===R}))&&(G.children=G.children.filter(function(X){return X.name!==K}))):U=U.filter(function(X){return X.name!==M})}),U},e.exports.getLiveHostByRegion=function(f){var W="live.aliyuncs.com";return f&&-1<["ap-southeast-1","eu-central-1"].indexOf(f)?"live."+f+".aliyuncs.com":W},e.exports.isVideoTag=function(f){return f&&typeof f.nodeName=="string"&&f.nodeName.toLowerCase()==="video"},e.exports.unqiueTextTracks=function(f){var W=[],W=(f=f===void 0?[]:f).reduce(function(M,R){var K;return M.some(function(G){return G.srclang===R.srclang})?M:((K=R).label=R.label||R.srclang,[].concat(M,[K]))},[]),U={};return W.forEach(function(M,R){U[M.label]?U[M.label].push(R):U[M.label]=[R]}),Object.keys(U).forEach(function(M){M=U[M]||[],1<M.length&&M.forEach(function(R){W[R].label=W[R].label+"("+W[R].srclang+")"})}),W},e.exports.isHvc1Codec=function(f){return-1<(f=f===void 0?"":f).indexOf("hvc1")},e.exports.isHev1Codec=function(f){return-1<(f=f===void 0?"":f).indexOf("hev1")},e.exports.isVvccCodec=function(f){return-1<(f=f===void 0?"":f).indexOf("vvcC")},e.exports.isVvc1Codec=function(f){return-1<(f=f===void 0?"":f).indexOf("vvc1")},e.exports.isVvi1Codec=function(f){return-1<(f=f===void 0?"":f).indexOf("vvi1")},e.exports.isH265Codec=function(f){return e.exports.isHvc1Codec(f=f===void 0?"":f)||e.exports.isHev1Codec(f)},e.exports.isH266Codec=function(f){return e.exports.isVvccCodec(f=f===void 0?"":f)||e.exports.isVvc1Codec(f)||e.exports.isVvi1Codec(f)},e.exports.isH264Codec=function(f){return-1<(f=f===void 0?"":f).indexOf("avc1")},e.exports.getVideoTrack=function(f){var W;return(f=f===void 0?[]:f).forEach(function(U){Number(U.type)===1&&(W=U)}),W},n.IS_ANDROID&&(n.dingTalk()||n.IS_UC||n.is_X5||n.IS_HUAWEI||n.IS_XIAOMI||n.IS_OPPO||n.IS_VIVO||n.IS_MEIZU||n.IS_SAMSUNG||n.IS_WEBVIEW)||n.os&&n.os.name==="windows"&&n.IS_UC);e.exports.shouldUseBasePlayer=function(G,W){var U,M,R,K=G.codecTag,G=G.url,X="unsupported";return!K||(R=e.exports.isHvc1Codec(K),U=e.exports.isMp4(G),G=e.exports.isHls(G),U&&e.exports.nativeSupportH265()&&R)||U&&(()=>{if(!(!F&&(n.IS_CHROME||n.IS_EDGE_NEW)))return!1;var z=0;try{z=n.USER_AGENT.match(/Chrome\/(\d+)/i)[1]}catch{z=0}return!(parseInt(z)<104||!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4;codecs="hvc1.1.6.L120.90"'))})()?W(!0):F?(R=e.exports.getHistoryDetectResult(K,M=G?"hls":"mp4"))==="supported"?W(!0):R===X?W(!1):void h({codecTags:[K],format:M,timeout:2e3}).then(function(z){if(z=z.isHev1Supported||z.isHvc1Supported,e.exports.setHistoryDetectResult(K,M,z?"supported":X),z)return W(!0);W(!1)}).catch(function(z){console.log("hevcDetector ERROR",z),W(!1)}):W(!1)},e.exports.parseHttpHeaders=function(f){if(f){var W={};try{f instanceof Response?f.headers.forEach(function(U,M){W[M]=U}):f.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(function(R){var R=R.split(": "),M=R.shift(),R=R.join(": ");W[M]=R})}catch{}return W}},e.exports.detectRegionBlock=function(f,W){l.get(f,function(){W(!1)},function(U,M,R){R=e.exports.parseHttpHeaders(R)["x-tengine-error"],M===403&&R&&-1<s.RegionBlockMessages.indexOf(R)?W(!0):W(!1)})},e.exports.enableDbClickSkip=function(f){return f.dbClickSkip&&!f.dbClickFullscreen},e.exports.drawSnapshotText=function(f,W){W=W.snapshotWatermark,W&&W.text&&(f.font=W.font,W.fillColor&&(f.fillStyle=W.fillColor,f.fillText(W.text,W.left,W.top)),W.strokeColor&&(f.strokeStyle=W.strokeColor,f.strokeText(W.text,W.left,W.top)),f.stroke())},e.exports.hasValue=function(f){return f!=null&&f!==""}},{"../config":19,"../lang/index":28,"../player/base/plugin/defaultemptycomponent":103,"./constants":33,"./cookie":34,"./dom":37,"./hardware-decoding-detector":41,"./io":45,"./object":47,"./ua":53}],51:[function(t,e,O){var d=t("./object"),o=t("../player/adaptiveplayer"),a=t("./constants").USER_EVENT_NAME;e.exports.reloadInstance=function(h,s,r){var n=r,l=(n.dispose(),h.readyCallback),c=h._readyCallbackCalled,h=o.create(h,function(j){s(j),c||l(j)});e.exports.restoreUserEvents(r,h),e.exports.removeAllProps(n),(n.__proto__=h)[a]=n[a]},e.exports.storeUserEvents=function(u){var s=u,r=s.__proto__.on,n={};s.on=function(l,c){typeof c=="function"&&(n[l]?n[l].push(c):n[l]=[c],this._el)&&(c.binded=!0,r.call(s,l,c))},s[a]=n},e.exports.restoreUserEvents=function(u,s){var r=u[a];r&&d.each(r,function(n){r[n].forEach(function(l){s.on(n,l)})})},e.exports.removeAllProps=function(u,s){for(var r in s=[].concat(s=s||[],[a]),u)u.hasOwnProperty(r)&&s.indexOf(r)===-1&&delete u[r]}},{"../player/adaptiveplayer":74,"./constants":33,"./object":47}],52:[function(t,e,O){e.exports.set=function(d,o){try{window.localStorage&&localStorage.setItem(d,o)}catch{window[d+"_localStorage"]=o}},e.exports.get=function(d){try{if(window.localStorage)return localStorage.getItem(d)}catch{return window[d+"_localStorage"]}return""}},{}],53:[function(t,e,O){var d,o,a;if(e.exports.USER_AGENT=navigator.userAgent,e.exports.IS_IPHONE=/iPhone/i.test(e.exports.USER_AGENT),e.exports.IS_IPAD=/iPad/i.test(e.exports.USER_AGENT),e.exports.IS_IPOD=/iPod/i.test(e.exports.USER_AGENT),e.exports.IS_MAC=/mac/i.test(e.exports.USER_AGENT),e.exports.IS_EDGE=/Edge/i.test(e.exports.USER_AGENT),e.exports.IS_EDGE_NEW=/Edg/i.test(e.exports.USER_AGENT)&&!e.exports.IS_EDGE,e.exports.IS_IE11=/Trident\/7.0/i.test(e.exports.USER_AGENT),e.exports.IS_X5=/qqbrowser/i.test(e.exports.USER_AGENT.toLowerCase()),e.exports.IS_CHROME=/Chrome/i.test(e.exports.USER_AGENT)&&!e.exports.IS_EDGE&&!e.exports.IS_EDGE_NEW&&!e.exports.IS_X5,e.exports.IS_SAFARI=/Safari/i.test(e.exports.USER_AGENT)&&!e.exports.IS_CHROME&&!e.exports.IS_EDGE_NEW,e.exports.IS_FIREFOX=/Firefox/i.test(e.exports.USER_AGENT),e.exports.IS_UC=/ucweb|UCBrowser|UBrowser/i.test(e.exports.USER_AGENT),e.exports.IS_QUARK=/Quark/i.test(e.exports.USER_AGENT),e.exports.IS_HUAWEI=/HuaweiBrowser/i.test(e.exports.USER_AGENT),e.exports.IS_XIAOMI=/MiuiBrowser/i.test(e.exports.USER_AGENT),e.exports.IS_OPPO=/HeyTapBrowser/i.test(e.exports.USER_AGENT),e.exports.IS_VIVO=/VivoBrowser/i.test(e.exports.USER_AGENT),e.exports.IS_MEIZU=/MZBrowser/i.test(e.exports.USER_AGENT),e.exports.IS_SAMSUNG=/samsungbrowser/i.test(e.exports.USER_AGENT),e.exports.IS_BAIDU=/baiduboxapp/i.test(e.exports.USER_AGENT),document.all)try{var u=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");e.exports.HAS_FLASH=!!u}catch{e.exports.HAS_FLASH=!1}else navigator.plugins&&0<navigator.plugins.length?(u=navigator.plugins["Shockwave Flash"],e.exports.HAS_FLASH=!!u):e.exports.HAS_FLASH=!1;e.exports.IS_MAC_SAFARI=e.exports.IS_MAC&&e.exports.IS_SAFARI&&!e.exports.IS_CHROME&&!e.exports.HAS_FLASH,e.exports.IS_IOS=e.exports.IS_IPHONE||e.exports.IS_IPAD||e.exports.IS_IPOD,e.exports.IOS_VERSION=(()=>{var s=e.exports.USER_AGENT.match(/OS (\d+)_/i);if(s&&s[1])return s[1]})(),e.exports.IOS_FULL_VERSION=(()=>{var s=e.exports.USER_AGENT.match(/OS (\d+)_(\d+)_?/i);if(s&&s[1]&&s[2])return s[1]+"."+s[2]})(),e.exports.IS_HARMONY=/OpenHarmony/i.test(e.exports.USER_AGENT),e.exports.IS_ANDROID=/Android/i.test(e.exports.USER_AGENT)||e.exports.IS_HARMONY,e.exports.ANDROID_VERSION=(u=e.exports.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(o=u[1]&&parseFloat(u[1]),d=u[2]&&parseFloat(u[2]),o&&d?parseFloat(u[1]+"."+u[2]):o||null):null,e.exports.IS_OLD_ANDROID=e.exports.IS_ANDROID&&/webkit/i.test(e.exports.USER_AGENT)&&e.exports.ANDROID_VERSION<2.3,e.exports.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),e.exports.IS_MOBILE=e.exports.IS_IOS||e.exports.IS_ANDROID,e.exports.IS_H5=e.exports.IS_MOBILE||!e.exports.HAS_FLASH,e.exports.IS_PC=!e.exports.IS_MOBILE,e.exports.is_X5=/micromessenger/i.test(e.exports.USER_AGENT)||/qqbrowser/i.test(e.exports.USER_AGENT),e.exports.IS_ANDROID_FIREFOX=e.exports.IS_ANDROID&&e.exports.IS_FIREFOX,e.exports.CHROME_VERSION=e.exports.IS_CHROME&&e.exports.USER_AGENT.match(/Chrome\/(\d+)/i)[1],e.exports.getHost=function(s){var r,n,l="";return s===void 0||s==null||s==""?"":(r=s.indexOf("//"),n=s,l=n=-1<r?s.substring(r+2):n,(s=(l=(s=n.split("/"))&&0<s.length?s[0]:l).split(":"))&&0<s.length?s[0]:l)},e.exports.dingTalk=function(){var s=e.exports.USER_AGENT.toLowerCase();return/dingtalk/i.test(s)},e.exports.IS_DINGTALK=e.exports.dingTalk(),e.exports.wechat=function(){var s=e.exports.USER_AGENT.toLowerCase();return/micromessenger/i.test(s)},e.exports.inIFrame=function(){return self!=top},e.exports.getReferer=function(){var s=document.referrer;if(e.exports.inIFrame())try{s=top.document.referrer}catch{s=document.referrer}return s},e.exports.getHref=function(){if(e.exports.inIFrame())try{top.location.href}catch{}return location.href},e.exports.check360=function(){return navigator.userAgent.indexOf("Safari")!=-1?(()=>{var s=navigator.userAgent.split(" ");if(s[s.length-1].indexOf("Safari")!=-1){for(var r in navigator.plugins)if(navigator.plugins[r].filename=="np-mswmp.dll")return!0}return!1})():(navigator.msPointerEnabled==null||navigator.msPointerEnabled)&&(navigator.msDoNotTrack==1||window.doNotTrack==1)&&(!!Number(window.screenX)&&window.screenLeft-window.screenX!=8||(navigator.userAgent.indexOf("MSIE 7.0")!=-1||navigator.userAgent.indexOf("MSIE 8.0")!=-1)&&console.count==null)},(function(s,M){var n=this.os={},l=this.browser={},c=s.match(/Web[kK]it[\/]{0,1}([\d.]+)/),h=s.match(/(Android);?[\s\/]+([\d.]+)?/),j=!!s.match(/\(Macintosh\; Intel /),F=s.match(/(iPad).*OS\s([\d_]+)/),f=s.match(/(iPod)(.*OS\s([\d_]+))?/),W=!F&&s.match(/(iPhone\sOS)\s([\d_]+)/),U=s.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),M=/Win\d{2}|Windows/.test(M),R=s.match(/Windows Phone ([\d.]+)/),K=U&&s.match(/TouchPad/),G=s.match(/Kindle\/([\d.]+)/),X=s.match(/Silk\/([\d._]+)/),z=s.match(/(BlackBerry).*Version\/([\d.]+)/),te=s.match(/(BB10).*Version\/([\d.]+)/),ee=s.match(/(RIM\sTablet\sOS)\s([\d.]+)/),Y=s.match(/PlayBook/),ie=s.match(/Chrome\/([\d.]+)/)||s.match(/CriOS\/([\d.]+)/),ae=s.match(/Firefox\/([\d.]+)/),de=s.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),ce=s.match(/MSIE\s([\d.]+)/)||s.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),ge=!ie&&s.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),he=ge||s.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(l.webkit=!!c)&&(l.version=c[1]),h&&(n.android=!0,n.version=h[2]),W&&!f&&(n.ios=n.iphone=!0,n.version=W[2].replace(/_/g,".")),F&&(n.ios=n.ipad=!0,n.version=F[2].replace(/_/g,".")),f&&(n.ios=n.ipod=!0,n.version=f[3]?f[3].replace(/_/g,"."):null),R&&(n.wp=!0,n.version=R[1]),U&&(n.webos=!0,n.version=U[2]),K&&(n.touchpad=!0),z&&(n.blackberry=!0,n.version=z[2]),te&&(n.bb10=!0,n.version=te[2]),ee&&(n.rimtabletos=!0,n.version=ee[2]),Y&&(l.playbook=!0),G&&(n.kindle=!0,n.version=G[1]),X&&(l.silk=!0,l.version=X[1]),!X&&n.android&&s.match(/Kindle Fire/)&&(l.silk=!0),ie&&(l.chrome=!0,l.version=ie[1]),ae&&(l.firefox=!0,l.version=ae[1]),de&&(n.firefoxos=!0,n.version=de[1]),ce&&(l.ie=!0,l.version=ce[1]),he&&(j||n.ios||M||h)&&(l.safari=!0,n.ios||n.android||(l.version=he[1])),n.ios&&(l.version=n.version),ge&&(l.webview=!0),j&&((c=s.match(/[\d]*_[\d]*_[\d]*/))&&0<c.length&&c[0]&&(n.version=c[0].replace(/_/g,".")),/MQBHD/.test(s))&&(l.version=((s.match(/.*OS\s([\d_]+)/)||[])[1]||"").replace(/_/g,".")),n.tablet=!!(F||Y||h&&!s.match(/Mobile/)||ae&&s.match(/Tablet/)||ce&&!s.match(/Phone/)&&s.match(/Touch/)),n.phone=!(n.tablet||n.ipod||!(h||W||U||z||te||ie&&s.match(/Android/)||ie&&s.match(/CriOS\/([\d.]+)/)||ae&&s.match(/Mobile/)||ce&&s.match(/Touch/))),n.pc=!n.tablet&&!n.phone,j?n.name="macOS":M?(n.name="windows",n.version=(()=>{var se=navigator.userAgent,Z="";return(-1<se.indexOf("Windows NT 5.0")||-1<se.indexOf("Windows 2000"))&&(Z="2000"),(-1<se.indexOf("Windows NT 5.1")||-1<se.indexOf("Windows XP"))&&(Z="XP"),(-1<se.indexOf("Windows NT 5.2")||-1<se.indexOf("Windows 2003"))&&(Z="2003"),(-1<se.indexOf("Windows NT 6.0")||-1<se.indexOf("Windows Vista"))&&(Z="Vista"),(-1<se.indexOf("Windows NT 6.1")||-1<se.indexOf("Windows 7"))&&(Z="7"),(-1<se.indexOf("Windows NT 6.2")||-1<se.indexOf("Windows 8"))&&(Z="8"),(-1<se.indexOf("Windows NT 6.3")||-1<se.indexOf("Windows 8.1"))&&(Z="8.1"),Z=-1<se.indexOf("Windows NT 10")||-1<se.indexOf("Windows 10")?"10":Z})()):n.name=(()=>{var se=navigator.userAgent,Z="other",oe=e.exports.os;return oe.ios?"iOS":oe.android?"android":-1<se.indexOf("OpenHarmony")?"ohos":-1<se.indexOf("Baiduspider")?"Baiduspider":-1<se.indexOf("PlayStation")?"PS4":(oe=navigator.platform=="Win32"||navigator.platform=="Windows"||-1<se.indexOf("Windows"),(se=navigator.platform=="Mac68K"||navigator.platform=="MacPPC"||navigator.platform=="Macintosh"||navigator.platform=="MacIntel")&&(Z="macOS"),navigator.platform!="X11"||oe||se||(Z="Unix"),-1<String(navigator.platform).indexOf("Linux")&&(Z="Linux"),oe?"windows":Z)})(),l.name=(f=navigator.userAgent.toLowerCase(),(R=e.exports.browser).firefox?"Firefox":R.ie?/edge/.test(f)?"Edge":"IE":e.exports.IS_EDGE_NEW?"EdgeChromium":/micromessenger/.test(f)?"":/qqbrowser/.test(f)?"QQ":e.exports.IS_UC?"UC":e.exports.IS_QUARK?"Quark":e.exports.IS_DINGTALK?"Dingtalk":e.exports.IS_HUAWEI?"HuaweiBrowser":e.exports.IS_XIAOMI?"MiBrowser":e.exports.IS_OPPO?"OppoBrowser":e.exports.IS_VIVO?"VivoBrowser":e.exports.IS_MEIZU?"MeizuBrowser":e.exports.IS_SAMSUNG?"SamsungBrowser":e.exports.IS_WEBVIEW||/MQBHD/.test(f)?"webview":R.chrome?"Chrome":R.safari?"Safari":/baiduspider/.test(f)?"Baiduspider":/opera/.test(f)?"Opera":/360se/.test(f)?"360":/bidubrowser/.test(f)?"":/metasr/.test(f)?"":/lbbrowser/.test(f)?"":/playstation/.test(f)?"PS4":void 0)}).call(e.exports,navigator.userAgent,navigator.platform),e.exports.IS_WEBVIEW=(d=e.exports.USER_AGENT,o=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(Version).*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig"),a=new RegExp("("+["VivoBrowser","MZBrowser","MiuiBrowser"].join("|")+")","ig"),!!d.match(o)&&!d.match(a))},{}],54:[function(t,e,O){var d=t("./dom");e.exports.getAbsoluteURL=function(o){return o=o.match(/^https?:\/\//)?o:d.createEl("div",{innerHTML:'<a href="'+o+'">x</a>'}).firstChild.href},e.exports.parseUrl=function(o){var a,u=["protocol","hostname","port","pathname","search","hash","host"],s=d.createEl("a",{href:o}),r=s.host===""&&s.protocol!=="file:";r&&((a=d.createEl("div")).innerHTML='<a href="'+o+'"></a>',s=a.firstChild,a.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(a));for(var n={},l=0;l<u.length;l++)n[u[l]]=s[u[l]];return n.segments=s.pathname.replace(/^\//,"").split("/"),r&&document.body.removeChild(a),n}},{"./dom":37}],55:[function(t,e,O){var d=t("./dom"),o=t("./ua"),a=t("./playerutil");e.exports.formatTime=function(r){r=Math.max(0,r||0);var s,r=Math.floor(r),n=Math.floor(r/3600);return r%=3600,s=Math.floor(r/60),r=r%60,!(n===1/0||isNaN(n)||s===1/0||isNaN(s)||r==1/0||isNaN(r))&&((n=10<=n?n:"0"+n)==="00"?"":n+":")+(10<=s?s:"0"+s)+":"+(10<=r?r:"0"+r)},e.exports.extractTime=function(u){var s;return u?((s=10<=(s=parseInt(u.getHours()))?s:"0"+s)==="00"?"":s+":")+(s=10<=(s=parseInt(u.getMinutes()))?s:"0"+s)+":"+(s=10<=(s=parseInt(u.getSeconds()))?s:"0"+s):""},e.exports.convertToTimestamp=function(u,s){var r="";return u&&(s?r=u.gettime():(r=Date.parse(u),r/=1e3)),r},e.exports.convertToDate=function(u,s){var r="";return u&&(r=new Date).setTime(1e3*u),r},e.exports.parseTime=function(u){var s,r,n;return u?(n=r=s=0,(u=u.split(":")).length===3?(s=u[0],r=u[1],n=u[2]):u.length===2?(r=u[0],n=u[1]):u.length===1&&(n=u[0]),3600*(s=parseInt(s,10))+60*(r=parseInt(r,10))+(n=Math.ceil(parseFloat(n)))):"00:00:00"},e.exports.formatDate=function(u,s){var r,n={"M+":u.getMonth()+1,"d+":u.getDate(),"H+":u.getHours(),"m+":u.getMinutes(),"s+":u.getSeconds(),"q+":Math.floor((u.getMonth()+3)/3),S:u.getMilliseconds()};for(r in/(y+)/.test(s)&&(s=s.replace(RegExp.$1,(u.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(s)&&(s=s.replace(RegExp.$1,RegExp.$1.length==1?n[r]:("00"+n[r]).substr((""+n[r]).length)));return s},e.exports.sleep=function(u){},e.exports.htmlEncodeAll=function(u){return u==null?"":u.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},e.exports.toBinary=function(u){if(!window.atob)return"";for(var s=atob(u),r=s.length,n=new Uint8Array(r),l=0;l<r;l++)n[l]=s.charCodeAt(l);return n},e.exports.readyBinary=function(u){for(var s=new Uint8Array(u),r=s.length,n="",l=0;l<r;l++)n+=s[l];return n},e.exports.delayHide=function(u,s){u&&(s===void 0&&(s=1e3),u.delayHanlder&&clearTimeout(u.delayHanlder),u.delayHanlder=setTimeout(function(){d.css(u,"display","none")},s))},e.exports.openInFile=function(){return window.location.protocol.toLowerCase().indexOf("file")!=-1},e.exports.contentProtocolMixed=function(u,s,r){return!!((o.os.pc&&(a.isHls(u,r)&&!o.browser.safari||a.isFlv(u,r))||s)&&window.location.protocol.toLowerCase()=="https:"&&u&&-1<u.toLowerCase().indexOf("http://"))},e.exports.queryString=function(u){var s,r,n;return(u=(u=decodeURIComponent(u)).split("?")).length===2&&(s=u[1].split("&"))?(r={},n=0,$(s).each(function(){var l=s[n].split("=");l.length===2&&(r[l[0]]=l[1].replace(/\+/g," ")),n++}),r):{}},e.exports.log=function(u){var s=window.location.href,s=e.exports.queryString(s);s&&s.debug==1&&console.log(u)},e.exports.arrayBufferToB64=function(u){for(var s="",r=new Uint8Array(u),n=r.byteLength,l=0;l<n;l++)s+=String.fromCharCode(r[l]);return window.btoa(s)},e.exports.b64ToArrayBuffer=function(u){for(var s=atob(u),r=new Uint8Array(s.length),n=0;n<s.length;n++)r[n]=s.charCodeAt(n);return r.buffer},e.exports.throttle=function(u,s){var r=null,n=0;return function(){for(var l=this,c=arguments.length,h=new Array(c),j=0;j<c;j++)h[j]=arguments[j];var F=Date.now(),f=s-(F-n);f<=0?(u.apply(this,h),n=F):(clearTimeout(r),r=setTimeout(function(){u.apply(l,h),n=Date.now()},f))}}},{"./dom":37,"./playerutil":50,"./ua":53}],56:[function(t,e,O){function d(a){for(var u=5381,s=a.length;s;)u=33*u^a.charCodeAt(--s);return(u>>>0).toString()}var o=t("./vttparse");e.exports={parse:function(n,u,s){var r,n=n.trim().replace(/\r\n|\n\r|\n|\r/g,`
`).split(`
`),l=[],c=new o;c.oncue=function(h){h.id=d(h.startTime)+d(h.endTime)+d(h.text),h.text=decodeURIComponent(escape(h.text)),h.isBig=!1;var j=h.text.split("#xywh=");j.length==2&&(j=j[1].split(","),h.x=j[0],h.y=j[1],h.w=j[2],h.h=j[3],h.isBig=!0),0<h.endTime&&l.push(h)},c.onparsingerror=function(h){r=h},c.onflush=function(){r&&s?(s(r),console.log(r)):u(l)},n.forEach(function(h){c.parse(h+`
`)}),c.flush()}}},{"./vttparse":58}],57:[function(t,e,O){function d(r){return typeof r=="string"&&!!s[r.toLowerCase()]&&r.toLowerCase()}function o(r){for(var n=1;n<arguments.length;n++){var l,c=arguments[n];for(l in c)r[l]=c[l]}return r}function a(r,n,l){var c=this,h=(()=>{if(typeof navigator<"u")return/MSIE\s8\.0/.test(navigator.userAgent)})(),j={},F=(h?c=document.createElement("custom"):j.enumerable=!0,c.hasBeenReset=!1,""),f=!1,W=r,U=n,M=l,R=null,K="",G=!0,X="auto",z="start",te=50,ee="middle",Y=50,ie="middle";if(Object.defineProperty(c,"id",o({},j,{get:function(){return F},set:function(ae){F=""+ae}})),Object.defineProperty(c,"pauseOnExit",o({},j,{get:function(){return f},set:function(ae){f=!!ae}})),Object.defineProperty(c,"startTime",o({},j,{get:function(){return W},set:function(ae){if(typeof ae!="number")throw new TypeError("Start time must be set to a number.");W=ae,this.hasBeenReset=!0}})),Object.defineProperty(c,"endTime",o({},j,{get:function(){return U},set:function(ae){if(typeof ae!="number")throw new TypeError("End time must be set to a number.");U=ae,this.hasBeenReset=!0}})),Object.defineProperty(c,"text",o({},j,{get:function(){return M},set:function(ae){M=""+ae,this.hasBeenReset=!0}})),Object.defineProperty(c,"region",o({},j,{get:function(){return R},set:function(ae){R=ae,this.hasBeenReset=!0}})),Object.defineProperty(c,"vertical",o({},j,{get:function(){return K},set:function(ae){if(ae=typeof(ae=ae)=="string"&&!!u[ae.toLowerCase()]&&ae.toLowerCase(),ae===!1)throw new SyntaxError("An invalid or illegal string was specified.");K=ae,this.hasBeenReset=!0}})),Object.defineProperty(c,"snapToLines",o({},j,{get:function(){return G},set:function(ae){G=!!ae,this.hasBeenReset=!0}})),Object.defineProperty(c,"line",o({},j,{get:function(){return X},set:function(ae){if(typeof ae!="number"&&ae!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");X=ae,this.hasBeenReset=!0}})),Object.defineProperty(c,"lineAlign",o({},j,{get:function(){return z},set:function(ae){if(ae=d(ae),!ae)throw new SyntaxError("An invalid or illegal string was specified.");z=ae,this.hasBeenReset=!0}})),Object.defineProperty(c,"position",o({},j,{get:function(){return te},set:function(ae){if(ae<0||100<ae)throw new Error("Position must be between 0 and 100.");te=ae,this.hasBeenReset=!0}})),Object.defineProperty(c,"positionAlign",o({},j,{get:function(){return ee},set:function(ae){if(ae=d(ae),!ae)throw new SyntaxError("An invalid or illegal string was specified.");ee=ae,this.hasBeenReset=!0}})),Object.defineProperty(c,"size",o({},j,{get:function(){return Y},set:function(ae){if(ae<0||100<ae)throw new Error("Size must be between 0 and 100.");Y=ae,this.hasBeenReset=!0}})),Object.defineProperty(c,"align",o({},j,{get:function(){return ie},set:function(ae){if(ae=d(ae),!ae)throw new SyntaxError("An invalid or illegal string was specified.");ie=ae,this.hasBeenReset=!0}})),c.displayState=void 0,h)return c}var u,s;e.exports=typeof window<"u"&&window.VTTCue?window.VTTCue:(u={"":!0,lr:!0,rl:!0},s={start:!0,middle:!0,end:!0,left:!0,right:!0},a.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},a)},{}],58:[function(t,e,O){function d(){return{decode:function(c){if(!c)return"";if(typeof c!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(c))}}}var o=t("./vttcue");function a(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new d,this.regionList=[]}function u(){this.values=Object.create(null)}function s(c,h,j,F){var f,W,U=F?c.split(F):[c];for(f in U)typeof U[f]=="string"&&(W=U[f].split(j)).length===2&&h(W[0],W[1])}u.prototype={set:function(c,h){this.get(c)||h===""||(this.values[c]=h)},get:function(c,h,j){return j?this.has(c)?this.values[c]:h[j]:this.has(c)?this.values[c]:h},has:function(c){return c in this.values},alt:function(c,h,j){for(var F=0;F<j.length;++F)if(h===j[F]){this.set(c,h);break}},integer:function(c,h){/^-?\d+$/.test(h)&&this.set(c,parseInt(h,10))},percent:function(c,h){return!!(h.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(h=parseFloat(h))&&h<=100)&&(this.set(c,h),!0)}};var r=new o(0,0,0),n=r.align==="middle"?"middle":"center";function l(c,h,j){var F,f,W=c;function U(){var R,K=(K=(K=c).match(/^(\d+):(\d{2})(:\d{2})?(\.\d{3})?/))?(R=(R=K[4])&&R.replace(".",""),K[3]?G(K[1],K[2],K[3].replace(":",""),R):59<K[1]?G(K[1],K[2],0,R):G(0,K[1],K[2],R)):null;function G(X,z,te,ee){return 3600*(0|X)+60*(0|z)+(0|te)+(0|ee)/1e3}if(K===null)throw new Error("Malformed timestamp: "+W);return c=c.replace(/^[^\sa-zA-Z-]+/,""),K}function M(){c=c.replace(/^\s+/,"")}if(M(),h.startTime=U(),M(),c.substr(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+W);c=c.substr(3),M(),h.endTime=U(),M(),F=c,h=h,f=new u,s(F,function(R,K){switch(R){case"region":for(var G=j.length-1;0<=G;G--)if(j[G].id===K){f.set(R,j[G].region);break}break;case"vertical":f.alt(R,K,["rl","lr"]);break;case"line":var X=K.split(","),z=X[0];f.integer(R,z),f.percent(R,z)&&f.set("snapToLines",!1),f.alt(R,z,["auto"]),X.length===2&&f.alt("lineAlign",X[1],["start",n,"end"]);break;case"position":X=K.split(","),f.percent(R,X[0]),X.length===2&&f.alt("positionAlign",X[1],["start",n,"end","line-left","line-right","auto"]);break;case"size":f.percent(R,K);break;case"align":f.alt(R,K,["start",n,"end","left","right"])}},/:/,/\s/),h.region=f.get("region",null),h.vertical=f.get("vertical",""),(F=f.get("line","auto"))==="auto"&&r.line===-1&&(F=-1),h.line=F,h.lineAlign=f.get("lineAlign","start"),h.snapToLines=f.get("snapToLines",!0),h.size=f.get("size",100),h.align=f.get("align",n),(F=f.get("position","auto"))==="auto"&&r.position===50&&(F=h.align==="start"||h.align==="left"?0:h.align==="end"||h.align==="right"?100:50),h.position=F}a.prototype={parse:function(c){var h=this;function j(){for(var M=0,R=(R=h.buffer).replace(/<br(?: \/)?>/gi,`
`);M<R.length&&R[M]!=="\r"&&R[M]!==`
`;)++M;var K=R.substr(0,M);return R[M]==="\r"&&++M,R[M]===`
`&&++M,h.buffer=R.substr(M),K}c&&(h.buffer+=h.decoder.decode(c,{stream:!0}));try{if(h.state==="INITIAL"){if(!/\r\n|\n/.test(h.buffer))return this;var F,f=(F=j()).match(/^WEBVTT([ \t].*)?$/);if(!f||!f[0])throw new Error("Malformed WebVTT signature.");h.state="HEADER"}for(var W=!1;h.buffer;){if(!/\r\n|\n/.test(h.buffer))return this;switch(W?W=!1:F=j(),h.state){case"HEADER":/:/.test(F)?s(F,function(M,R){M==="Region"&&console.log("parse region",R)},/:/):F||(h.state="ID");continue;case"NOTE":F||(h.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(F)){h.state="NOTE";break}if(!F)continue;if(h.cue=new o(0,0,""),h.state="CUE",F.indexOf("-->")===-1){h.cue.id=F;continue}case"CUE":try{l(F,h.cue,h.regionList)}catch{h.cue=null,h.state="BADCUE";continue}h.state="CUETEXT";continue;case"CUETEXT":var U=F.indexOf("-->")!==-1;if(!F||U&&(W=!0)){h.oncue&&h.oncue(h.cue),h.cue=null,h.state="ID";continue}h.cue.text&&(h.cue.text+=`
`),h.cue.text+=F;continue;case"BADCUE":F||(h.state="ID");continue}}}catch{h.state==="CUETEXT"&&h.cue&&h.oncue&&h.oncue(h.cue),h.cue=null,h.state=h.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&this.state!=="HEADER"||(this.buffer+=`

`,this.parse()),this.state==="INITIAL")throw new Error("Malformed WebVTT signature.")}catch(c){throw c}return this.onflush&&this.onflush(),this}},e.exports=a},{"./vttcue":57}],59:[function(F,e,O){function d(){return(d=Object.assign?Object.assign.bind():function(W){for(var U=1;U<arguments.length;U++){var M,R=arguments[U];for(M in R)!{}.hasOwnProperty.call(R,M)||(W[M]=R[M])}return W}).apply(null,arguments)}function o(W,U){for(var M=0;M<U.length;M++){var R=U[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(W,(K=>typeof(K=((G,X)=>{if(typeof G!="object"||!G)return G;var z=G[Symbol.toPrimitive];if(z===void 0)return(X==="string"?String:Number)(G);if(typeof(z=z.call(G,X))!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")})(K,"string"))=="symbol"?K:K+"")(R.key),R)}}function a(W,U,M){return U&&o(W.prototype,U),Object.defineProperty(W,"prototype",{writable:!1}),W}var u=F("./vtt-parser"),s=F("./vtt-renderer"),r=F("./vtt-loader"),n=F("../../player/base/event/eventtype"),l=F("../../lib/ua"),c=F("../../lib/event"),h=F("../../ui/component/util"),j=s.CTR_BAR_HEIGHT,F=(()=>{function W(M){this.parser=null,this.activeRenderer=null,this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.tickTimer=null,this.prevPosition=null,this._enabled=!1,this._isShow=!1,this.sleeper=new f,this.player=(M=M||{}).player,this.loader=new r,this.parser=new u,this.createRendererInstance(),this.bindEvents()}var U=W.prototype;return U.bindEvents=function(){function M(te){te.paramData.splayer&&K.switchRenderer(s.VttBasicRenderer.RENDER_TYPE_CUSTOM)}var R,K=this,G=this,X=this.player,z=(X.on(n.Private.TextTrackFounded,function(te){if(te.paramData.from==="user")K.hasUserTracks=!0;else if(K.hasUserTracks)return;te=te.paramData.textTracks,te&&te.length&&(K.enabled=!0,K.trackConfigs=te.map(function(ee){return d({},ee,{label:ee.label||ee.srclang,language:ee.srclang})}),K.trackConfigs.forEach(function(ee){K.activeRenderer.addTrack(ee),X.getOptions().controlBarVisibility==="always"&&K.activeRenderer.forceUpdateCuesStyle({transform:"translateY("+("-"+j+"px")+")"},K.parser.cues)}))}),X.on(n.Private.UserTrackReset,function(){K.hasUserTracks=!1}),X.on(n.Player.H265PlayInfo,M),X.on(n.Player.H266PlayInfo,M),l.IS_IOS?(R=!1,X.on(n.Player.RequestFullScreen,function(){R=!0}),c.on(X.tag,"webkitendfullscreen",function(){R=!1}),c.on(X.tag.textTracks,"change",function(){var te;K.sleeper.isSleep||(K.sleeper.sleep(1e3),K.isCustomRenderer)||R&&(te=X.tag.textTracks,(te=Array.from(te).find(function(ee){return ee.mode==="showing"}))?K.activeTrackConfig&&K.activeTrackConfig.language===te.language||(K.switchTrack(te.language),X.trigger(n.Private.SelectorValueChange,{type:"cc",text:te.label})):X.trigger(n.Private.CCStateChanged,{value:"off",lang:""}))})):(X.on(n.Player.RequestFullScreen,this.adjustLayout.bind(this)),X.on(n.Player.CancelFullScreen,this.adjustLayout.bind(this)),z=h.debounce(function(){G.isCustomRenderer&&G.activeRenderer.resetCuesStyle(K.parser.cues)},100),c.on(window,"resize",z)),h.throttle(function(){G.isShow&&(G.activeRenderer.forceUpdateCuesStyle({transform:"translateY("+("-"+j+"px")+")"},G.parser.cues),G.isCustomRenderer)&&G.player.paused()&&(G.activeRenderer.hide(),G.activeRenderer.restore())},100)),z=(X.on(n.Private.ShowBar,z),h.throttle(function(){G.isShow&&(G.activeRenderer.forceUpdateCuesStyle({transform:"none"},G.parser.cues),G.isCustomRenderer)&&G.player.paused()&&(G.activeRenderer.hide(),G.activeRenderer.restore())},100));X.on(n.Private.HideBar,z),X.on(n.Private.VttHide,function(){K.hide()}),X.on(n.Private.VttSwitchTrack,function(te){K.switchTrack(te.paramData)}),X.on(n.Private.VttClearTracks,function(){K.reset()})},U.createRendererInstance=function(M){this.activeRenderer&&this.activeRenderer.dispose();var R=this.player.getOptions(),K={player:this.player};this.adaptPlatform(),M?M===s.VttBasicRenderer.RENDER_TYPE_NATIVE?this.activeRenderer=new s.NativeRenderer(K):(K.overlayId=this.getOverlayId(),this.activeRenderer=new s.CustomRenderer(K)):R.useNativeTextRenderer?this.activeRenderer=new s.NativeRenderer(K):(K.overlayId=this.getOverlayId(),this.activeRenderer=new s.CustomRenderer(K))},U.switchTrack=function(M){var R,K=this;this.trackConfigs&&this.trackConfigs.length&&(this.activeTrackConfig&&(this.parser.dispose(),this.parser=new u,this.activeRenderer.clearTrack(this.activeTrackConfig.language),this.activeRenderer.hide()),this.activeTrackConfig=M,R=this.trackConfigs.find(function(G){return G.language===M}))&&(R=R._loaded?"":(R||{}).src,this.loadVtt(R,function(){K.parseVtt(),K.activeRenderer.addCues(K.parser.cues,K.activeTrackConfig.language),K.show()}))},U.adaptPlatform=function(){var M=this.player.getOptions();l.IS_IOS&&(M.useNativeTextRenderer=!0)},U.loadVtt=function(M,R){var K=this;M?this.loader.loadFromUrl(M,function(G){K.activeTrackConfig._loaded=!0,K.vttText[K.activeTrackConfig.language]=G,R&&R()}):R&&R()},U.show=function(){this._isShow=!0,this.isCustomRenderer&&this.startTickTimeListener(),this.activeRenderer.show(this.activeTrackConfig.language);var M=this.player.el().getElementsByClassName("prism-controlbar")[0];M&&((M=M.style)==null?void 0:M.display)==="block"&&this.activeRenderer.forceUpdateCuesStyle({transform:"translateY("+("-"+j+"px")+")"},this.parser.cues)},U.hide=function(){this._isShow=!1,this.clearTicker(),this.activeRenderer.hide()},U.switchRenderer=function(M){var R=this,K=s.VttBasicRenderer.RENDER_TYPE_NATIVE,G=s.VttBasicRenderer.RENDER_TYPE_CUSTOM;(M===K&&this.activeRenderer.type!==K||M===G&&this.activeRenderer.type!==G)&&(this.createRendererInstance(M),this.trackConfigs.forEach(function(X){return R.activeRenderer.addTrack(X)}),this.activeRenderer.addCues(this.parser.cues,this.activeTrackConfig.language),this.show())},U.parseVtt=function(){this.parser.parse(this.vttText[this.activeTrackConfig.language])},U.adjustLayout=function(){var M=this;this.isShow&&this.isCustomRenderer&&(this.activeRenderer.hide(),setTimeout(function(){M.activeRenderer.restore()},300))},U.startTickTimeListener=function(){var M=this;this.clearTicker(),this.tick(function(){var R=M.player.getCurrentTime();isNaN(R)||M.activeRenderer.renderCues(M.findTargetCues(R))})},U.tick=function(M){var R=this;this.tickTimer=requestAnimationFrame(function(){try{M()}catch(K){console.log("e",K)}R.tick(M)})},U.clearTicker=function(){this.tickTimer&&(cancelAnimationFrame(this.tickTimer),this.tickTimer=null)},U.getOverlayId=function(){var M=(this.player.el().getElementsByClassName("prism-text-overlay")||[])[0];if(M)return M.id},U.findTargetCues=function(M){if(this.parser&&M!==this.prevPosition){this.prevPosition=M;for(var R=[],K=0;K<this.parser.cues.length;K++){var G=this.parser.cues[K];if(M>=G.startTime&&M<=G.endTime)R.push(G);else if(M<G.startTime)break}return R}},U.reset=function(){this.clearTicker(),this.parser&&this.parser.reset(),this.activeRenderer&&this.activeRenderer.reset()},U.dispose=function(){this.clearTicker(),this.parser&&(this.parser.dispose(),this.parser=null),this.activeRenderer&&(this.activeRenderer.dispose(),this.activeRenderer=null),this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.prevPosition=null,this._enabled=!1,this._isShow=!1},a(W,[{key:"isShow",get:function(){return this._isShow}},{key:"enabled",get:function(){return this._enabled},set:function(M){this._enabled=M}},{key:"isCustomRenderer",get:function(){if(this.activeRenderer)return this.activeRenderer.type===s.VttBasicRenderer.RENDER_TYPE_CUSTOM}},{key:"activeTrackConfig",get:function(){var M;return(M=this.trackConfigs)==null?void 0:M.find(function(R){return R._isActive})},set:function(M){this.trackConfigs.forEach(function(R){return R._isActive=R.language===M})}}])})(),f=(()=>{function W(){this.value=!1,this.timer=null}return W.prototype.sleep=function(U){var M=this;this.timer&&clearTimeout(this.timer),this.value=!0,this.timer=setTimeout(function(){M.value=!1},U)},a(W,[{key:"isSleep",get:function(){return this.value}}])})();e.exports=F},{"../../lib/event":38,"../../lib/ua":53,"../../player/base/event/eventtype":77,"../../ui/component/util":173,"./vtt-loader":61,"./vtt-parser":62,"./vtt-renderer":63}],60:[function(c,e,O){function d(){return(d=Object.assign?Object.assign.bind():function(j){for(var F=1;F<arguments.length;F++){var f,W=arguments[F];for(f in W)!{}.hasOwnProperty.call(W,f)||(j[f]=W[f])}return j}).apply(null,arguments)}function o(j,F){j.prototype=Object.create(F.prototype),a(j.prototype.constructor=j,F)}function a(j,F){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,W){return f.__proto__=W,f})(j,F)}function u(j,F){for(var f=0;f<F.length;f++){var W=F[f];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(j,(U=>typeof(U=((M,R)=>{if(typeof M!="object"||!M)return M;var K=M[Symbol.toPrimitive];if(K===void 0)return(R==="string"?String:Number)(M);if(typeof(K=K.call(M,R))!="object")return K;throw new TypeError("@@toPrimitive must return a primitive value.")})(U,"string"))=="symbol"?U:U+"")(W.key),W)}}function s(j,F,f){return F&&u(j.prototype,F),Object.defineProperty(j,"prototype",{writable:!1}),j}var r=c("../../lib/data"),n={DISABLED:"disabled",SHOWING:"showing",HIDDEN:"hidden"},l={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",METADATA:"metadata",CHAPTERS:"chapters"},c=(j=>{function F(U){var U=d({},U=U===void 0?{}:U,{kind:U.kind||l.SUBTITLES,language:U.language||U.srclang||""}),M=U.mode||n.DISABLED;return-1<[l.METADATA,l.CHAPTERS].indexOf(U.kind)&&(M=n.HIDDEN),U.mode=M,(M=j.call(this,U)||this)._cues=[],M._activeCues=[],M._settings={},M._nativeTrack=null,M._extData={},M._settings=U,M}o(F,j);var f=F.prototype;return f.setExtData=function(W){this._extData=d({},this._extData,W=W===void 0?{}:W)},f.addCue=function(W){this._cues.push(W),this.nativeTrack&&this.nativeTrack.addCue(W)},f.removeCue=function(W){this._cues=this._cues.filter(function(U){return U!==W}),this.nativeTrack&&this.nativeTrack.removeCue(W)},s(F,[{key:"default",get:function(){return this._settings.default}},{key:"mode",get:function(){return this._settings.mode},set:function(W){this._settings.mode=W,this.nativeTrack&&(this.nativeTrack.mode=W)}},{key:"language",get:function(){return this._settings.language},set:function(W){this._settings.language=W,this.nativeTrack&&(this.nativeTrack.language=W)}},{key:"cues",get:function(){return this._cues}},{key:"activeCues",get:function(){return this._activeCues}},{key:"nativeTrack",get:function(){return this._nativeTrack},set:function(W){this._nativeTrack=W}}])})(s(function(j){this._id=(j=j===void 0?{}:j).id||"prism-track-"+r.guid(),this._kind=j.kind||"",this._language=j.language||"",this._label=j.label||""},[{key:"label",get:function(){return this._label},set:function(j){this._label=j}},{key:"id",get:function(){return this._id}},{key:"kind",get:function(){return this._kind}},{key:"language",get:function(){return this._language}}])),h=(j=>{function F(){return j.call(this)||this}return o(F,j),F})((()=>{function j(){this._trackList=[]}return j.prototype.addTrack=function(F){var f=this.length;""+f in this||Object.defineProperty(this,f,{get:function(){return this._trackList[f]}}),this._trackList.indexOf(F)===-1&&this._trackList.push(F)},s(j,[{key:"length",get:function(){return this._trackList.length}},{key:"list",get:function(){return this._trackList}}])})());e.exports.TextTrack=c,e.exports.TextTrackList=h,e.exports.TRACK_MODE=n,e.exports.TRACK_KIND=l},{"../../lib/data":35}],61:[function(t,e,O){var d=t("../io");e.exports=(()=>{function o(){}return o.prototype.loadFromUrl=function(a,u){d.get(a,function(s){u(s)},function(s,r){console.log("ERR",s,r)})},o})()},{"../io":45}],62:[function(a,e,O){function d(u,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,(l=>typeof(l=((c,h)=>{if(typeof c!="object"||!c)return c;var j=c[Symbol.toPrimitive];if(j===void 0)return(h==="string"?String:Number)(c);if(typeof(j=j.call(c,h))!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")})(l,"string"))=="symbol"?l:l+"")(n.key),n)}}var o=a("./vttjs").WebVTT,a=(()=>{function u(){var n=this;this._cues=[],this._regions=[],this.parser=new o.Parser(window,o.StringDecoder()),this.parser.onregion=function(l){n._regions.push(l)},this.parser.oncue=function(l){n._cues.push(l)},this.parser.onflush=function(){},this.parser.onparsingerror=function(l){}}var s,r=u.prototype;return r.parse=function(n){this.parser.parse(n),this.parser.flush()},r.reset=function(){this.parser.flush(),this._cues=[],this._regions=[]},r.dispose=function(){this.parser.flush(),this.parser=null,this._cues=[],this._regions=[]},r=u,(s=[{key:"cues",get:function(){return this._cues}}])&&d(r.prototype,s),Object.defineProperty(r,"prototype",{writable:!1}),r})();e.exports=a},{"./vttjs":64}],63:[function(j,e,O){function d(f,W){for(var U=0;U<W.length;U++){var M=W[U];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(f,(R=>typeof(R=((K,G)=>{if(typeof K!="object"||!K)return K;var X=K[Symbol.toPrimitive];if(X===void 0)return(G==="string"?String:Number)(K);if(typeof(X=X.call(K,G))!="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")})(R,"string"))=="symbol"?R:R+"")(M.key),M)}}function o(){return(o=Object.assign?Object.assign.bind():function(f){for(var W=1;W<arguments.length;W++){var U,M=arguments[W];for(U in M)!{}.hasOwnProperty.call(M,U)||(f[U]=M[U])}return f}).apply(null,arguments)}function a(f,W){f.prototype=Object.create(W.prototype),u(f.prototype.constructor=f,W)}function u(f,W){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(U,M){return U.__proto__=M,U})(f,W)}j("../../player/base/event/eventtype");var F=j("./text-track"),s=j("./vttjs").WebVTT,r=j("../../lib/dom"),n=F.TextTrack,l=F.TextTrackList,c=F.TRACK_MODE,h=(F.TRACK_KIND,(()=>{function f(U){this.player=null,this.type=null,this.trackList=null,this.overrideStyle={},this.player=(U=U||{}).player,this.defineTextTrackGetter(),this.trackList=new l}var W=f.prototype;return W.log=function(){for(var U,M=arguments.length,R=new Array(M),K=0;K<M;K++)R[K]=arguments[K];(U=console).log.apply(U,["[LOG:"+this.type+"]"].concat(R))},W.defineTextTrackGetter=function(){var U=this;this.player.getTextTracks=function(){return U.trackList||[]}},W.show=function(U){U=this.findTrackByLanguage(U),U&&(U.mode=c.SHOWING)},W.findTrackByLanguage=function(U){return this.trackList.list.find(function(M){return M.language===U})},W.clearCurrentCues=function(U){if(U){var M=U.mode;if(M===c.DISABLED&&(U.mode=c.HIDDEN),U.cues)for(var R=U.cues.length;R--;)U.removeCue(U.cues[R]);M===c.DISABLED&&(U.mode=M)}},W.addTrack=function(){},W.addCues=function(){},W.restore=function(){},W.renderCues=function(){},W.updateCuesStyle=function(){},W.clearTrack=function(U){this.clearCurrentCues(this.findTrackByLanguage(U))},W.clearAllTracks=function(){var U=this;this.trackList&&this.trackList.length&&this.trackList.list.forEach(function(M){M.mode=c.DISABLED,U.clearCurrentCues(M)}),this.trackList=new l},W.reset=function(){this.hide(),this.clearAllTracks()},W.dispose=function(){this.hide(),this.clearAllTracks(),this.player&&this.player.getTextTracks&&(this.player.getTextTracks=null),this.player=null,this.type=null},f})()),j=(h.RENDER_TYPE_CUSTOM="CUSTOM",h.RENDER_TYPE_NATIVE="NATIVE",(f=>{function W(M){var R=f.call(this,M)||this;return R.overlayId=null,R.currentCues=null,M=M||{},R.type=h.RENDER_TYPE_CUSTOM,R.overlayId=M.overlayId,R}a(W,f);var U=W.prototype;return U.addTrack=function(M){var R=new n({kind:M.kind,label:M.label,language:M.language,default:M.default});R.mode=M.default?c.SHOWING:c.DISABLED,this.trackList.addTrack(R)},U.hide=function(){return s.processCues(window,[],document.getElementById(this.overlayId))},U.restore=function(){this.currentCues&&(this.currentCues.forEach(function(M){return M.displayState=null}),s.processCues(window,this.currentCues,this.overlayEl),this.updateCuesStyle(this.currentCues))},U.renderCues=function(M){M&&(this.currentCues=M,this.overlayEl||(this.overlayEl=document.getElementById(this.overlayId)),s.processCues(window,M,this.overlayEl),this.updateCuesStyle(M))},U.updateCuesStyle=function(M){var R=this;M.forEach(function(K){var G,X=K.displayState;X._styleSetDone||X&&(X.setAttribute("class","prism-cue"),R.overlayEl||(R.overlayEl=document.getElementById(R.overlayId)),K=R.overlayEl.offsetWidth,G=R.overlayEl.offsetHeight,(K=Math.min(K,G))&&(X.style.fontSize=.05*K+"px",X.style.height="auto",X.style.top="auto"),44<((z,te)=>(z=z.getBoundingClientRect(),te.getBoundingClientRect().bottom-z.bottom))(X,R.overlayEl)&&(R.overrideStyle.transform="none"),Object.keys(R.overrideStyle).forEach(function(z){R.tryUpdateStyle(X,z,R.overrideStyle[z])}),X._styleSetDone=!0)})},U.updateOverrideStyle=function(M){this.overrideStyle=o({},this.overrideStyle,M=M===void 0?{}:M)},U.forceUpdateCuesStyle=function(M,R){R===void 0&&(R=[]),this.updateOverrideStyle(M=M===void 0?{}:M),this.resetCuesStyle(R)},U.tryUpdateStyle=function(M,R,K){try{M.style[R]=K}catch{}},U.resetCuesStyle=function(M){M&&M.length&&M.forEach(function(R){R.displayState&&(R.displayState=null)})},U.dispose=function(){f.prototype.dispose.call(this),this.overlayId=null,this.currentCues=null},W})(h)),F=(f=>{function W(R){return(R=f.call(this,R=R===void 0?{}:R)||this).type=h.RENDER_TYPE_NATIVE,R}a(W,f);var U,M=W.prototype;return M.addTrack=function(R){var K=this.player.tag,G=Array.from(K.textTracks)||[],X=G.find(function(z){return z.language===R.language}),G=X?(this.log("sameLangTrack",X,G),this.clearCurrentCues(X),X.kind=R.kind,X.label=R.label,X):K.addTextTrack(R.kind,R.label,R.language),X=(G.mode=R.default?c.SHOWING:c.DISABLED,new n(R));X.nativeTrack=G,this.trackList.addTrack(X)},M.addCues=function(R,K){var G;R&&R.length&&(G=this.trackList.list.find(function(X){return X.language===K}))&&R.forEach(function(X){G.addCue(X)})},M.hide=function(){this.trackList.list.forEach(function(R){R.mode=R.mode===c.SHOWING?c.HIDDEN:R.mode})},M.invalidAllTracks=function(){},M.forceUpdateCuesStyle=function(R,K){r.addCssByStyle("video::-webkit-media-text-track-container{transform: "+R.transform+";}")},M.dispose=function(){f.prototype.dispose.call(this)},M=W,(U=[{key:"activeTrack",get:function(){return this.trackList.list.find(function(R){return R.mode===c.SHOWING})}}])&&d(M.prototype,U),Object.defineProperty(M,"prototype",{writable:!1}),M})(h);e.exports.VttBasicRenderer=h,e.exports.CustomRenderer=j,e.exports.NativeRenderer=F,e.exports.CTR_BAR_HEIGHT=44},{"../../lib/dom":37,"../../player/base/event/eventtype":77,"./text-track":60,"./vttjs":64}],64:[function(t,e,O){e.exports={WebVTT:t("./vtt.js").WebVTT}},{"./vtt.js":65}],65:[function(t,e,O){var d=this;function o(Y,ie){return ie===void 0&&(ie=1),"rgba("+[parseInt(Y.substring(0,2),16),parseInt(Y.substring(2,4),16),parseInt(Y.substring(4,6),16),ie].join(",")+")"}var a,u=1;function s(Y,ie,ae){switch(ae){case"webvtt.font.color":case"webvtt.font.opacity":var de=Services.prefs.getCharPref("webvtt.font.color"),ce=Services.prefs.getIntPref("webvtt.font.opacity")/100;a.fontSet=o(de,ce);break;case"webvtt.font.scale":u=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":de=Services.prefs.getCharPref("webvtt.bg.color"),ce=Services.prefs.getIntPref("webvtt.bg.opacity")/100,a.backgroundSet=o(de,ce);break;case"webvtt.edge.color":case"webvtt.edge.type":de=Services.prefs.getIntPref("webvtt.edge.type"),ce=Services.prefs.getCharPref("webvtt.edge.color"),a.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][de]+o(ce)}}typeof Services<"u"&&(a={},["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach(function(Y){s(0,0,Y),Services.prefs.addObserver(Y,s,!1)}));var r=Object.create||function(Y){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return n.prototype=Y,new n};function n(){}function l(Y,ie){this.name="ParsingError",this.code=Y.code,this.message=ie||Y.message}function c(Y){function ie(ae,de,ce,ge){return 3600*(0|ae)+60*(0|de)+(0|ce)+(0|ge)/1e3}return Y=Y.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/),Y?Y[3]?ie(Y[1],Y[2],Y[3].replace(":",""),Y[4]):59<Y[1]?ie(Y[1],Y[2],0,Y[4]):ie(0,Y[1],Y[2],Y[4]):null}function h(){this.values=r(null)}function j(Y,ie,ae,de){var ce,ge,he=de?Y.split(de):[Y];for(ce in he)typeof he[ce]=="string"&&(ge=he[ce].split(ae)).length===2&&ie(ge[0],ge[1])}((l.prototype=r(Error.prototype)).constructor=l).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},h.prototype={set:function(Y,ie){this.get(Y)||ie===""||(this.values[Y]=ie)},get:function(Y,ie,ae){return ae?this.has(Y)?this.values[Y]:ie[ae]:this.has(Y)?this.values[Y]:ie},has:function(Y){return Y in this.values},alt:function(Y,ie,ae){for(var de=0;de<ae.length;++de)if(ie===ae[de]){this.set(Y,ie);break}},integer:function(Y,ie){/^-?\d+$/.test(ie)&&this.set(Y,parseInt(ie,10))},percent:function(Y,ie){return!!(ie.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(ie=parseFloat(ie))&&ie<=100)&&(this.set(Y,ie),!0)}};var F={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},f={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},W={v:"title",lang:"lang"},U={rt:"ruby"};function M(Y,ie){function ae(ke){return F[ke]}for(var de,ce,ge,he,se,Z,oe,re=Y.document.createElement("div"),Te=re,Ce=[];oe=void 0,(oe=ie?(oe=(oe=ie.match(/^([^<]*)(<[^>]*>?)?/))[1]||oe[2],ie=ie.substr(oe.length),oe):null)!==null;)oe[0]==="<"?oe[1]==="/"?Ce.length&&Ce[Ce.length-1]===oe.substr(2).replace(">","")&&(Ce.pop(),Te=Te.parentNode):(ge=c(oe.substr(1,oe.length-2)))?(de=Y.document.createProcessingInstruction("timestamp",ge),Te.appendChild(de)):(ce=oe.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(ge=ce[1],he=ce[3],Z=se=void 0,Z=f[ge],de=Z?((se=Y.document.createElement(Z)).localName=Z,(Z=W[ge])&&he&&(se[Z]=he.trim()),se):null)&&(ge=Te,U[(Z=de).localName]&&U[Z.localName]!==ge.localName||(ce[2]&&(de.className=ce[2].substr(1).replace("."," ")),Ce.push(ce[1]),Te.appendChild(de),Te=de)):Te.appendChild(Y.document.createTextNode((ke=>{for(;ce=ke.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)ke=ke.replace(ce[0],ae);return ke})(oe)));return re}var R=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function K(Y){var ie=[],ae="";if(Y&&Y.childNodes){for(ce(ie,Y);ae=function ge(he){var se,Z,oe;return he&&he.length?(Z=(se=he.pop()).textContent||se.innerText)?(oe=Z.match(/^.*(\n|\r)/))?oe[he.length=0]:Z:se.tagName==="ruby"?ge(he):se.childNodes?(ce(he,se),ge(he)):void 0:null}(ie);)for(var de=0;de<ae.length;de++)if((ge=>{for(var he=0;he<R.length;he++){var se=R[he];if(ge>=se[0]&&ge<=se[1])return 1}})(ae.charCodeAt(de)))return"rtl"}return"ltr";function ce(ge,he){for(var se=he.childNodes.length-1;0<=se;se--)ge.push(he.childNodes[se])}}function G(){}function X(Y,ie,ae){var de=typeof navigator<"u"&&/MSIE\s8\.0/.test(navigator.userAgent),he="rgba(255, 255, 255, 1)",ce="rgba(0, 0, 0, 0.8)",ge="",he=(a!==void 0&&(he=a.fontSet,ce=a.backgroundSet,ge=a.edgeSet),de&&(he="rgb(255, 255, 255)",ce="rgb(0, 0, 0)"),G.call(this),this.cue=ie,this.cueDiv=M(Y,ie.text),{color:he,backgroundColor:ce,textShadow:ge,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"}),se=(de||(he.writingMode=ie.vertical===""?"horizontal-tb":ie.vertical==="lr"?"vertical-lr":"vertical-rl",he.unicodeBidi="plaintext"),this.applyStyles(he,this.cueDiv),this.div=Y.document.createElement("div"),he={textAlign:ie.align==="middle"?"center":ie.align,font:ae.font,whiteSpace:"pre-line",position:"absolute"},de||(he.direction=K(this.cueDiv),he.writingMode=ie.vertical===""?"horizontal-tb":ie.vertical==="lr"?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(he),this.div.appendChild(this.cueDiv),0);switch(ie.positionAlign){case"start":se=ie.position;break;case"middle":se=ie.position-ie.size/2;break;case"end":se=ie.position-ie.size}ie.vertical===""?this.applyStyles({left:this.formatStyle(se,"%"),width:this.formatStyle(ie.size,"%")}):this.applyStyles({top:this.formatStyle(se,"%"),height:this.formatStyle(ie.size,"%")}),this.move=function(Z){this.applyStyles({top:this.formatStyle(Z.top,"px"),bottom:this.formatStyle(Z.bottom,"px"),left:this.formatStyle(Z.left,"px"),right:this.formatStyle(Z.right,"px"),height:this.formatStyle(Z.height,"px"),width:this.formatStyle(Z.width,"px")})}}function z(Y){var ie,ae,de,ce,ge=typeof navigator<"u"&&/MSIE\s8\.0/.test(navigator.userAgent);Y.div&&(ie=Y.div.offsetHeight,ae=Y.div.offsetWidth,de=Y.div.offsetTop,ce=(ce=(ce=Y.div.childNodes)&&ce[0])&&ce.getClientRects&&ce.getClientRects(),Y=Y.div.getBoundingClientRect(),ce=ce?Math.max(ce[0]&&ce[0].height||0,Y.height/ce.length):0),this.left=Y.left,this.right=Y.right,this.top=Y.top||de,this.height=Y.height||ie,this.bottom=Y.bottom||de+(Y.height||ie),this.width=Y.width||ae,this.lineHeight=ce!==void 0?ce:Y.lineHeight,ge&&!this.lineHeight&&(this.lineHeight=13)}function te(Y,ie,ae,de){var ce,ge=new z(ie),he=ie.cue,se=(ye=>{if(typeof ye.line=="number"&&(ye.snapToLines||0<=ye.line&&ye.line<=100))return ye.line;if(!ye.track||!ye.track.textTrackList||!ye.track.textTrackList.mediaElement)return-1;for(var J=ye.track,fe=J.textTrackList,Ee=0,Ie=0;Ie<fe.length&&fe[Ie]!==J;Ie++)fe[Ie].mode==="showing"&&Ee++;return-1*++Ee})(he),Z=[];if(he.snapToLines){switch(he.vertical){case"":Z=["+y","-y"],ce="height";break;case"rl":Z=["+x","-x"],ce="width";break;case"lr":Z=["-x","+x"],ce="width"}var oe=ge.lineHeight,re=oe*Math.round(se),Te=ae[ce]+oe,Ce=Z[0];Math.abs(re)>Te&&(re=re<0?-1:1,re*=Math.ceil(Te/oe)*oe),se<0&&(re+=he.vertical===""?ae.height:ae.width,Z=Z.reverse()),ge.move(Ce,re)}else{var ke=ge.lineHeight/ae.height*100;switch(he.lineAlign){case"middle":se-=ke/2;break;case"end":se-=ke}switch(he.vertical){case"":ie.applyStyles({top:ie.formatStyle(se,"%")});break;case"rl":ie.applyStyles({left:ie.formatStyle(se,"%")});break;case"lr":ie.applyStyles({right:ie.formatStyle(se,"%")})}Z=["+y","-x","+x","-y"],ge=new z(ie)}Te=((ye,J)=>{for(var fe,Ee=new z(ye),Ie=1,Me=0;Me<J.length;Me++){for(;ye.overlapsOppositeAxis(ae,J[Me])||ye.within(ae)&&ye.overlapsAny(de);)ye.move(J[Me]);if(ye.within(ae))return ye;var Oe=ye.intersectPercentage(ae);Oe<Ie&&(fe=new z(ye),Ie=Oe),ye=new z(Ee)}return fe||Ee})(ge,Z),ie.move(Te.toCSSCompatValues(ae))}function ee(){}G.prototype.applyStyles=function(Y,ie){for(var ae in ie=ie||this.div,Y)Y.hasOwnProperty(ae)&&(ie.style[ae]=Y[ae])},G.prototype.formatStyle=function(Y,ie){return Y===0?0:Y+ie},(X.prototype=r(G.prototype)).constructor=X,z.prototype.move=function(Y,ie){switch(ie=ie!==void 0?ie:this.lineHeight,Y){case"+x":this.left+=ie,this.right+=ie;break;case"-x":this.left-=ie,this.right-=ie;break;case"+y":this.top+=ie,this.bottom+=ie;break;case"-y":this.top-=ie,this.bottom-=ie}},z.prototype.overlaps=function(Y){return this.left<Y.right&&this.right>Y.left&&this.top<Y.bottom&&this.bottom>Y.top},z.prototype.overlapsAny=function(Y){for(var ie=0;ie<Y.length;ie++)if(this.overlaps(Y[ie]))return!0;return!1},z.prototype.within=function(Y){return this.top>=Y.top&&this.bottom<=Y.bottom&&this.left>=Y.left&&this.right<=Y.right},z.prototype.overlapsOppositeAxis=function(Y,ie){switch(ie){case"+x":return this.left<Y.left;case"-x":return this.right>Y.right;case"+y":return this.top<Y.top;case"-y":return this.bottom>Y.bottom}},z.prototype.intersectPercentage=function(Y){return Math.max(0,Math.min(this.right,Y.right)-Math.max(this.left,Y.left))*Math.max(0,Math.min(this.bottom,Y.bottom)-Math.max(this.top,Y.top))/(this.height*this.width)},z.prototype.toCSSCompatValues=function(Y){return{top:this.top-Y.top,bottom:Y.bottom-this.bottom,left:this.left-Y.left,right:Y.right-this.right,height:this.height,width:this.width}},z.getSimpleBoxPosition=function(Y){var ie=Y.div?Y.div.offsetHeight:Y.tagName?Y.offsetHeight:0,ae=Y.div?Y.div.offsetWidth:Y.tagName?Y.offsetWidth:0,de=Y.div?Y.div.offsetTop:Y.tagName?Y.offsetTop:0;return{left:(Y=Y.div?Y.div.getBoundingClientRect():Y.tagName?Y.getBoundingClientRect():Y).left,right:Y.right,top:Y.top||de,height:Y.height||ie,bottom:Y.bottom||de+(Y.height||ie),width:Y.width||ae}},ee.StringDecoder=function(){return{decode:function(Y){if(!Y)return"";if(typeof Y!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(Y))}}},ee.convertCueToDOMTree=function(Y,ie){return Y&&ie?M(Y,ie):null},ee.processCues=function(Y,ie,ae){if(!Y||!ie||!ae)return null;for(;ae.firstChild;)ae.removeChild(ae.firstChild);var de=Y.document.createElement("div");if(de.style.position="absolute",de.style.left="0",de.style.right="0",de.style.top="0",de.style.bottom="0",de.style.margin="1.5%",ae.appendChild(de),(Te=>{for(var Ce=0;Ce<Te.length;Ce++)if(Te[Ce].hasBeenReset||!Te[Ce].displayState)return 1})(ie))for(var ce,ge,he=[],se=z.getSimpleBoxPosition(de),Z={font:Math.round(.05*se.height*100)/100*u+"px sans-serif"},oe=0;oe<ie.length;oe++)ce=new X(Y,ge=ie[oe],Z),de.appendChild(ce.div),te(0,ce,se,he),ge.displayState=ce.div,he.push(z.getSimpleBoxPosition(ce));else for(var re=0;re<ie.length;re++)de.appendChild(ie[re].displayState)},(ee.Parser=function(Y,ie){this.window=Y,this.state="INITIAL",this.buffer="",this.decoder=ie||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(Y){if(!(Y instanceof l))throw Y;this.onparsingerror&&this.onparsingerror(Y)},parse:function(Y){var ie=this;function ae(){for(var Z=ie.buffer,oe=0;oe<Z.length&&Z[oe]!=="\r"&&Z[oe]!==`
`;)++oe;var re=Z.substr(0,oe);return Z[oe]==="\r"&&++oe,Z[oe]===`
`&&++oe,ie.buffer=Z.substr(oe),re}function de(Z){j(Z,function(oe,re){var Te;oe==="Region"&&(oe=re,Te=new h,j(oe,function(Ce,ke){switch(Ce){case"id":Te.set(Ce,ke);break;case"width":Te.percent(Ce,ke);break;case"lines":Te.integer(Ce,ke);break;case"regionanchor":case"viewportanchor":var ye,J=ke.split(",");J.length===2&&((ye=new h).percent("x",J[0]),ye.percent("y",J[1]),ye.has("x")&&ye.has("y"))&&(Te.set(Ce+"X",ye.get("x")),Te.set(Ce+"Y",ye.get("y")));break;case"scroll":Te.alt(Ce,ke,["up"])}},/=/,/\s/),Te.has("id"))&&((oe=new ie.window.VTTRegion).width=Te.get("width",100),oe.lines=Te.get("lines",3),oe.regionAnchorX=Te.get("regionanchorX",0),oe.regionAnchorY=Te.get("regionanchorY",100),oe.viewportAnchorX=Te.get("viewportanchorX",0),oe.viewportAnchorY=Te.get("viewportanchorY",100),oe.scroll=Te.get("scroll",""),ie.onregion&&ie.onregion(oe),ie.regionList.push({id:Te.get("id"),region:oe}))},/:/)}Y&&(ie.buffer+=ie.decoder.decode(Y,{stream:!0}));try{if(ie.state==="INITIAL"){if(!/\r\n|\n/.test(ie.buffer))return this;var ce,ge=(ce=ae()).match(/^WEBVTT([ \t].*)?$/);if(!ge||!ge[0])throw new l(l.Errors.BadSignature);ie.state="HEADER"}for(var he=!1;ie.buffer;){if(!/\r\n|\n/.test(ie.buffer))return this;switch(he?he=!1:ce=ae(),ie.state){case"HEADER":/:/.test(ce)?de(ce):ce||(ie.state="ID");continue;case"NOTE":ce||(ie.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(ce)){ie.state="NOTE";break}if(!ce)continue;if(ie.cue=new ie.window.VTTCue(0,0,""),ie.state="CUE",ce.indexOf("-->")===-1){ie.cue.id=ce;continue}case"CUE":try{((Z,oe,re)=>{var Te=Z;function Ce(){var fe=c(Z);if(fe===null)throw new l(l.Errors.BadTimeStamp,"Malformed timestamp: "+Te);return Z=Z.replace(/^[^\sa-zA-Z-]+/,""),fe}function ke(){Z=Z.replace(/^\s+/,"")}if(ke(),oe.startTime=Ce(),ke(),Z.substr(0,3)!=="-->")throw new l(l.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+Te);Z=Z.substr(3),ke(),oe.endTime=Ce(),ke();var ye=Z,J=new h;j(ye,function(fe,Ee){switch(fe){case"region":for(var Ie=re.length-1;0<=Ie;Ie--)if(re[Ie].id===Ee){J.set(fe,re[Ie].region);break}break;case"vertical":J.alt(fe,Ee,["rl","lr"]);break;case"line":var Me=Ee.split(","),Oe=Me[0];J.integer(fe,Oe),J.percent(fe,Oe)&&J.set("snapToLines",!1),J.alt(fe,Oe,["auto"]),Me.length===2&&J.alt("lineAlign",Me[1],["start","middle","end"]);break;case"position":Me=Ee.split(","),J.percent(fe,Me[0]),Me.length===2&&J.alt("positionAlign",Me[1],["start","middle","end"]);break;case"size":J.percent(fe,Ee);break;case"align":J.alt(fe,Ee,["start","middle","end","left","right"])}},/:/,/\s/),oe.region=J.get("region",null),oe.vertical=J.get("vertical","");try{oe.line=J.get("line","auto")}catch{}oe.lineAlign=J.get("lineAlign","start"),oe.snapToLines=J.get("snapToLines",!0),oe.size=J.get("size",100);try{oe.align=J.get("align","center")}catch{oe.align=J.get("align","middle")}try{oe.position=J.get("position","auto")}catch{oe.position=J.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},oe.align)}oe.positionAlign=J.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},oe.align)})(ce,ie.cue,ie.regionList)}catch(Z){ie.reportOrThrowError(Z),ie.cue=null,ie.state="BADCUE";continue}ie.state="CUETEXT";continue;case"CUETEXT":var se=ce.indexOf("-->")!==-1;if(!ce||se&&(he=!0)){ie.oncue&&ie.oncue(ie.cue),ie.cue=null,ie.state="ID";continue}ie.cue.text&&(ie.cue.text+=`
`),ie.cue.text+=ce;continue;case"BADCUE":ce||(ie.state="ID");continue}}}catch(Z){ie.reportOrThrowError(Z),ie.state==="CUETEXT"&&ie.cue&&ie.oncue&&ie.oncue(ie.cue),ie.cue=null,ie.state=ie.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var Y=this;try{if(Y.buffer+=Y.decoder.decode(),!Y.cue&&Y.state!=="HEADER"||(Y.buffer+=`

`,Y.parse()),Y.state==="INITIAL")throw new l(l.Errors.BadSignature)}catch(ie){Y.reportOrThrowError(ie)}return Y.onflush&&Y.onflush(),this}},d.WebVTT=ee},{}],66:[function(t,e,O){e.exports.VIDEO_TYPE={VOD:"vod",LIVE:"live"},e.exports.TERMINAL_TYPE={PC:"pc",PAD:"pad",PHONE:"phone"},e.exports.EVENT={CREATE:1e3,STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,PREPARE:1101,PREPAREEND:1102,STARTPLAY:2e3,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,PLAYABORT:2012,CANPLAY:2015,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,HEVCINFO:2023,BACKGROUND:2049,FOREGROUND:2050,UNDERLOAD:3002,LOADED:3001,RETRY:3003,HEARTBEAT:9001,TRACE:9002,DUMP:9003,ERROR:4001,ERRORRETRY:4002,RTSFALLBACK:4003,VOD_REQUEST_FATAL_ERROR:4004,VOD_REQUEST_FATAL_ERROR_RESUME:4005,LICENSE_RESULT:5004,SNAPSHOT:2027,ROTATE:2028,IMAGE:2029,THUMBNAILSTART:2031,THUMBNAILCOMPLETE:2032,CCSTART:2033,CCCOMPLETE:2034,AUDIOTRACKSTART:2033,AUDIOTRACKCOMPLETE:2034},e.exports.AUTOPLAY_RESULT={SUCCEED:"succeed",FAILED:"failed"},e.exports.TRACK_TYPE={VIDEO:0,AUDIO:1,SUBTITLE:2,VOD:3}},{}],67:[function(h,e,O){var d=["args"];function o(){return(o=Object.assign?Object.assign.bind():function(W){for(var U=1;U<arguments.length;U++){var M,R=arguments[U];for(M in R)!{}.hasOwnProperty.call(R,M)||(W[M]=R[M])}return W}).apply(null,arguments)}var a=h("../lib/ua"),u=h("../lib/data"),s=h("../config"),r=h("./util"),n=h("../lib/playerutil"),l=h("./constants"),c=h("./reporter"),h=(()=>{function W(M,R){var K=this;this.player=M,this.cache=new f,this.session=new F,this.fpsObserver=new j,this.reporter=new c(R),this.initData(),this.reporter.sendImmediate(o({},this.reporter.getData(),{e:1e3})),this.listenDocument(),this.cache.observe(this.session,this.reporter,function(){K.updatePlayStatus()}),this.cache.checkStoreLogs()}var U=W.prototype;return U.initData=function(){this.createTime=performance.now(),this.firstFrameTime=null,this.manualPlayTime=null,this.autoPlayResult=null,this.firstFrameTimeline=[],this.playReported=!1,this.canplayReported=!1,this.vodInfoReported=!1,this.errorCode=null,this.pauseStartTime=0,this.seekStartTime=0,this.waitingStartTime=0,this.seekId=0,this.innerEventId=0,this.session.refresh();var M=this.player.getOptions(),R=r.getUuid(),K=this.getCustomData(M.customData),G=window.devicePixelRatio||1;this.reporter.initData({e:9e3,db:1,dm:"h5",el:[],os:a.os.name,ov:a.os.version,uuid:R,ss:this.makeWH(parseInt(window.screen.width*G),parseInt(window.screen.height*G)),tt:this.getTerminalType(),bt:a.browser.name,bv:a.browser.version,ua:a.USER_AGENT,app_n:this.getHost(window.location.href),av:s.h5Version,install_uuid:R,li_ki:(G=M.license)==null?void 0:G.key,pu:window.location.href,ri:R,vps:this.session.id,tid:M.traceId||void 0,vt:this.getVideoType(M),vu:M.source,srcd:this.getHost(M.source),vid:M.source?void 0:M.vid,pc:this.getUserOptions(M._userOptions),cd:K}),this.reportEvent(l.EVENT.CREATE,{args:{ri:(G=this.player._monitor)==null?void 0:G.sessionId}}),M.autoplay&&this.reportVV()},U.play=function(){this.session.open(),this.reportVV(),this.pauseEnd(),this.fpsObserver.reset()},U.pause=function(){this.pauseStartTime=performance.now(),this.reportEvent(l.EVENT.PAUSE)},U.pauseEnd=function(){var M;this.pauseStartTime&&(M=parseInt(performance.now()-this.pauseStartTime),this.pauseStartTime=0,this.reportEvent(l.EVENT.RECOVER,{args:{cost:M}}))},U.seek=function(){this.seekStartTime=performance.now(),this.reportEvent(l.EVENT.SEEK,{args:{_seekId:++this.seekId}})},U.seekEnd=function(){var M;this.seekStartTime&&(M=parseInt(performance.now()-this.seekStartTime),this.seekStartTime=0,this.reportEvent(l.EVENT.SEEK_END,{args:{cost:M,_seekId:this.seekId}}))},U.waiting=function(){!this.seekStartTime&&this.canplayReported&&(this.waitingStartTime=performance.now(),this.reportEvent(l.EVENT.UNDERLOAD,{args:{speed:this.player.tag.playbackRate}}))},U.waitingEnd=function(){var M;this.waitingStartTime&&(M=parseInt(performance.now()-this.waitingStartTime),this.waitingStartTime=0,this.reportEvent(l.EVENT.LOADED,{args:{cost:M}}))},U.autoPlayHasResult=function(M){this.autoPlayResult||(this.autoPlayResult=M?l.AUTOPLAY_RESULT.SUCCEED:l.AUTOPLAY_RESULT.FAILED)},U.manualPlay=function(){this.manualPlayTime||(this.manualPlayTime=performance.now())},U.firstFrame=function(){var M;this.firstFrameTime||(this.firstFrameTime=performance.now(),(M=(M=this.player._monitor)==null?void 0:M.timeline)&&(this.firstFrameTimeline=this.getTimeline(M)),this.fpsObserver.start(this.player.tag))},U.canplay=function(){this.waitingEnd(),this.canplayReported||(this.canplayReported=!0,this.reportEvent(l.EVENT.CANPLAY))},U.playFinish=function(){this.reportEvent(l.EVENT.STOP),this.reporter.lastRenderInfo({t:Date.now(),vt:this.getVt()}),this.reporter.backgroundStop(this.flag(document.visibilityState==="hidden")),this.doReport(),this.session.close(),this.firstFrame()},U.playError=function(M){this.errorCode=M.error_code;try{delete M.requestId,delete M.uuid,M.sri=M.serverRequestId,delete M.serverRequestId}catch{}this.reportEvent(l.EVENT.ERROR,{args:this.pruneEmpty(M)}),this.doReport(),this.session.close()},U.playAbort=function(M,R){this.session.closed||(this.reportEvent(l.EVENT.PLAYABORT,{args:{from:M,url:R}}),this.doReport(),this.session.close())},U.traceLog=function(M){this.reportEvent(l.EVENT.TRACE,{args:{log:M}})},U.mediaMeta=function(M){this.reporter.duration(parseInt(1e3*M.duration)),M.videoWidth&&M.videoHeight&&(this.reporter.videoDefinition(this.makeWH(M.videoWidth,M.videoHeight)),this.vodInfoReported||this.reporter.mediaInfo([{id:1,type:l.TRACK_TYPE.VIDEO,definition:this.makeWH(M.videoWidth,M.videoHeight)},{id:2,type:l.TRACK_TYPE.AUDIO}]),this.reporter.subMediaInfo([{id:1,type:l.TRACK_TYPE.VIDEO,definition:this.makeWH(M.videoWidth,M.videoHeight)},{id:2,type:l.TRACK_TYPE.AUDIO}]))},U.vodMediaInfo=function(M){var R,K,G=this,X=(this.vodInfoReported=!0,[]),z={},te="";try{M.PlayInfoList.PlayInfo.forEach(function(ee,Y){Y===0&&(ee.StreamType==="audio"?R=(ee.Format||"").toUpperCase():(R="AAC",te=ee.CodecName)),X.push({idx:Y,type:l.TRACK_TYPE.VOD,bitrate:parseInt(1e3*ee.Bitrate),codecFormat:ee.CodecName,avgFps:Number(ee.Fps),definition:G.makeWH(ee.Width,ee.Height)})}),z={RequestId:M.RequestId,PlayInfoList:{PlayInfo:M==null||(K=M.PlayInfoList)==null?void 0:K.PlayInfo.map(function(ee){return{StreamType:ee.StreamType,Definition:ee.Definition,Specification:ee.Specification,Duration:ee.Duration,Encrypt:ee.Encrypt,EncryptType:ee.EncryptType,Format:ee.Format,Rand:ee.Rand,Plaintext:ee.Plaintext,Status:ee.Status,ModificationTime:ee.ModificationTime,CodecName:ee.CodecName}})}}}catch{}this.reporter.mediaInfo(X),this.reporter.codecFormat(R,te),this.reportEvent(l.EVENT.COMPLETEFETCHDATA,{args:{mi:z}})},U.vodSelectUrl=function(M){this.reporter.startBitrate(parseInt(1e3*M.bitrate))},U.rtsFallback=function(M){this.reportEvent(l.EVENT.RTSFALLBACK,{args:M})},U.vodRequestFatalError=function(M){this.reportEvent(l.EVENT.VOD_REQUEST_FATAL_ERROR,{args:M})},U.vodRequestFatalErrorResume=function(M){this.reportEvent(l.EVENT.VOD_REQUEST_FATAL_ERROR_RESUME,{args:M})},U.updateTraceId=function(M){this.reporter.traceId(M)},U.updateSource=function(M){this.reporter.source(M),this.reporter.videoDomain(this.getHost(M)),this.reporter.containerInfo(this.getContainerInfo(M))},U.reportVV=function(){this.playReported||(this.playReported=!0,this.reportEvent(l.EVENT.STARTPLAY),this.reporter.backgroundPlay(this.flag(document.visibilityState==="hidden")))},U.reportEvent=function(M,R){this.reporter.addEvent(this.makeEvent(o({id:M,e:M},R)))},U.mergeSeek=function(){var M=this.reporter.getAllEvents(),M=r.mergeSeekInner(M);this.reporter.replaceEvents(M)},U.removeInternalEventsVars=function(){var M=this.reporter.getAllEvents(),M=r.removeInternalEventsVars(M);this.reporter.replaceEvents(M)},U.listenDocument=function(){var M=this,R=(document.addEventListener("visibilitychange",function(){var K;M.player.__disposed||((K=document.visibilityState)==="visible"?M.reportEvent(l.EVENT.FOREGROUND):K==="hidden"&&(M.reportEvent(l.EVENT.BACKGROUND),M.session.closed||M.doReport(!0)),M.cache.update(M.session.id,M.reporter.getData()))}),a.IS_PC?"beforeunload":"pagehide");window.addEventListener(R,function(){M.player.__disposed||M.playAbort("windowClose")})},U.updatePlayStatus=function(){var M=this.getPlayerOptions(),M=(this.updateSource(M.source),this.reporter.businessInfo(M.from),this.reporter.videoDropInfo(this.getVideoDropInfo()),this.getPlaySummary());this.reporter.playSummary(M),M.vv&&this.firstFrameTime&&this.reporter.firstRenderInfo(this.getFirstRenderInfo())},U.doReport=function(M){this.updatePlayStatus(),this.mergeSeek(),this.removeInternalEventsVars(),this.reporter.sequence(this.session.reportSequence++||void 0),M?this.reporter.report():(navigator.onLine?this.cache.clear(this.session.id):this.cache.update(this.session.id,this.reporter.getData()),this.reporter.flush(),this.initData())},U.getPlaySummary=function(){var M=parseInt(this.player._playingTime),R=parseInt(this.player._stuckTime),K=parseInt(this.player._stuckCount),X=this.reporter.getEvent(l.EVENT.SEEK_END),G=0,X=(X.length&&(G=parseInt(X.reduce(function(z,te){return z+te.args.cost},0)/X.length)),this.reporter.getData().sbr);return{pl:M,bf:R,bfc:K,ask:G,df:Number(this.fpsObserver.getFps()),vv:this.flag(this.playReported),ec:this.flag(this.errorCode),ecd:this.errorCode,apb:X}},U.getFirstRenderInfo=function(){var M=0,M=(this.autoPlayResult===l.AUTOPLAY_RESULT.SUCCEED?M=this.createTime:this.manualPlayTime&&(M=this.manualPlayTime),parseInt(this.firstFrameTime-M));return{efc:Math.max(M,0),timeline_web:this.firstFrameTimeline}},U.getVideoDropInfo=function(){var M=this.player.tag;if(M&&M instanceof HTMLVideoElement&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype)return{dc:(M=M.getVideoPlaybackQuality()).droppedVideoFrames,tc:M.totalVideoFrames}},U.getVt=function(){return Math.floor(1e3*this.player.getCurrentTime())},U.getTerminalType=function(){var M=l.TERMINAL_TYPE.PC;return a.IS_IPAD?M=l.TERMINAL_TYPE.PAD:a.os.phone&&(M=l.TERMINAL_TYPE.PHONE),M},U.getHost=function(M){if(M){var R="";try{R=new URL(M).host}catch{R=a.getHost(M)}return R}},U.getContainerInfo=function(M){var R="";(M=M===void 0?"":M).indexOf("//")===0&&(M=""+window.location.protocol+M);try{var K=new URL(M).pathname;1<K.split(".").length&&(R=K.split(".").pop())}catch{R=""}return{proto:M.split("://")[0],mb:0,cn:R}},U.getVideoType=function(M){var R=l.VIDEO_TYPE.VOD;return R=M.isLive||n.isRts(M.source)?l.VIDEO_TYPE.LIVE:R},U.getUserOptions=function(M){return M=o({},M),M.playauth&&(M.playauth=1,M.PlayAuth=void 0),M.accessKeyId&&(M.accessKeyId=1),M.accessKeySecret&&(M.accessKeySecret=1),M.securityToken&&(M.securityToken=1),this.pruneEmpty(M)},U.getTimeline=function(M){var R;return M?(R={},M.forEach(function(K,G){try{var X=G?K.ts-M[G-1].ts:0;R["tl_"+K.name]=G+"#"+parseInt(X)}catch{}}),R):{}},U.getPlayerOptions=function(){return this.player?this.player.getOptions():{}},U.getNameByValue=function(M,R){return Object.keys(M).find(function(K){return M[K]===R})},U.getCustomData=function(M){if(typeof M=="string"&&!(50<M.length))return M},U.makeEvent=function(K){var K=K||{},R=K.args,K=((G,X)=>{if(G==null)return{};var z,te={};for(z in G)if({}.hasOwnProperty.call(G,z)){if(X.indexOf(z)!==-1)continue;te[z]=G[z]}return te})(K,d);return o({_id:++this.innerEventId,t:Date.now()},K,{args:o({vt:this.getVt()},this.pruneEmpty(R||{}))})},U.makeWH=function(M,R){return M+"*"+R},U.flag=function(M){return M?1:0},U.pruneEmpty=function(M){return Object.keys(M).reduce(function(R,K){return M[K]!==void 0&&M[K]!==""&&(R[K]=M[K]),R},{})},U.destroy=function(){this.cache.dispose()},W})(),j=(()=>{function W(){this.fps=0,this.frameCount=0,this.lastStartTime=0}var U=W.prototype;return U.start=function(M){var R,K=this;!M||!1 in HTMLVideoElement.prototype||M.requestVideoFrameCallback(R=function(G){K.lastStartTime===0?K.lastStartTime=G:(G=(G-K.lastStartTime)/1e3,K.fps=(++K.frameCount/G).toFixed(2)),M.requestVideoFrameCallback(R)})},U.reset=function(){this.lastStartTime=0,this.frameCount=0},U.getFps=function(){return this.fps},W})(),F=(()=>{function W(){this.id=u.guid(),this.closed=!1,this.reportSequence=0}var U=W.prototype;return U.refresh=function(){this.id=u.guid(),this.reportSequence=0},U.open=function(){this.closed=!1},U.close=function(){this.closed=!0},W})(),f=(()=>{function W(){this.LOG_KEY="_alp_log",this.INTERVAL=5e3,this.init(),this.timer=null,this.session=null}var U=W.prototype;return U.init=function(){var M;if(!localStorage.getItem(this.LOG_KEY))return M=JSON.stringify({}),localStorage.setItem(this.LOG_KEY,M),M},U.observe=function(M,R,K){var G=this;K===void 0&&(K=function(){}),this.session=M,this.reporter=R,this.timer=setInterval(function(){var X;!M.closed&&(K(),X=R.getData())&&G.update(X.vps,R.getData())},this.INTERVAL)},U.update=function(M,R){this.session.closed||(R=this.createLog(R),this.write(M,R))},U.clear=function(M){var R=this.read();R&&(delete R[M],localStorage.setItem(this.LOG_KEY,JSON.stringify(R)))},U.read=function(){var M,R=(R=localStorage.getItem(this.LOG_KEY))||this.init();try{M=JSON.parse(R)}catch{}return M},U.write=function(M,R){if(R){var K;try{K=JSON.stringify(R)}catch{}K&&(K=this.read())&&(K[M]=R,localStorage.setItem(this.LOG_KEY,JSON.stringify(K)))}},U.createLog=function(M){return{log:M,lastUpdate:Date.now(),hidden:document.visibilityState==="hidden"}},U.checkStoreLogs=function(){var M=this,R=this.read();R&&Object.keys(R).length&&Object.keys(R).forEach(function(K){var G,X=R[K];K!==M.session.id&&(G=Date.now()-X.lastUpdate,X.hidden?M.clear(K):G>1.5*M.INTERVAL&&navigator.onLine&&(G=X.log.el||[],G=r.mergeSeekInner(G),G=r.removeInternalEventsVars(G),X.log.el=G,M.reporter.sendImmediate(o({},X.log,{se:999})),M.clear(K)))})},U.dispose=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},W})();e.exports=h},{"../config":19,"../lib/data":35,"../lib/playerutil":50,"../lib/ua":53,"./constants":66,"./reporter":68,"./util":70}],68:[function(a,e,O){var d=a("./sender"),o={e:void 0,db:void 0,dm:void 0,os:void 0,ov:void 0,uuid:void 0,ss:void 0,tt:void 0,bt:void 0,bv:void 0,us:void 0,app_n:void 0,av:void 0,install_uuid:void 0,li_ki:void 0,lv:void 0,pu:void 0,bi:void 0,bp:void 0,bs:void 0,ri:void 0,t:void 0,vps:void 0,tid:void 0,cd:void 0,vt:void 0,vu:void 0,srcd:void 0,vid:void 0,sbr:void 0,fri:void 0,lri:void 0,vdi:void 0,pc:void 0,mi:void 0,smi:void 0,ps:void 0,vdur:void 0,el:[],se:void 0,ci:void 0,hwd:1,def:void 0,acf:void 0,vcf:void 0},a=(()=>{function u(r){this.data=o,this.sender=new d(r)}var s=u.prototype;return s.getData=function(){return this.data},s.flush=function(){this.report(),this.data=o},s.report=function(){this.data.t=Date.now(),this.sender.sendImmediate(this.pruneReportData())},s.initData=function(r){this.data=r},s.addEvent=function(r){this.data.el.push(r)},s.getEvent=function(r){return this.data.el.filter(function(n){return n.id===r})},s.getAllEvents=function(){return this.data.el},s.replaceEvents=function(r){this.data.el=r},s.backgroundPlay=function(r){this.data.bp=r},s.backgroundStop=function(r){this.data.bs=r},s.duration=function(r){this.data.vdur=r},s.mediaInfo=function(r){this.data.mi=r},s.subMediaInfo=function(r){this.data.smi=r},s.videoDefinition=function(r){this.data.def=r},s.traceId=function(r){this.data.tid=r},s.source=function(r){this.data.vu=r},s.vps=function(r){this.data.vps=r},s.videoDomain=function(r){this.data.srcd=r},s.containerInfo=function(r){this.data.ci=r},s.codecFormat=function(r,n){this.data.acf=r,this.data.vcf=n},s.startBitrate=function(r){this.data.sbr=r},s.firstRenderInfo=function(r){this.data.fri=r},s.videoDropInfo=function(r){this.data.vdi=r},s.businessInfo=function(r){this.data.bi=r},s.lastRenderInfo=function(r){this.data.lri=r},s.playSummary=function(r){this.data.ps=r},s.sequence=function(r){this.data.se=r},s.pruneReportData=function(){var r=this;return Object.keys(this.data).reduce(function(n,l){return r.data[l]!==void 0&&(n[l]=r.data[l]),n},{})},s.sendImmediate=function(r){r.t=Date.now(),this.sender.sendImmediate(r)},u})();e.exports=a},{"./sender":69}],69:[function(o,e,O){var d=o("@aliyun-sls/web-track-browser"),o=(typeof __karma__<"u"&&__UNIT_TEST__==="true"&&(d=d.default),(()=>{function a(u){var s,r;u.disableTrack?this.tracker={sendImmediate:function(){}}:(s="cn-hangzhou.log.aliyuncs.com",r="vod-newplayer",u.env==="SEA"&&(s="ap-southeast-1.log.aliyuncs.com",r="vod-newplayer-sg"),this.tracker=new d({host:s,project:r,logstore:"hermes-player"}))}return a.prototype.sendImmediate=function(u){this.tracker.sendImmediate(u)},a})());e.exports=o},{"@aliyun-sls/web-track-browser":4}],70:[function(t,e,O){function d(){return(d=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var n,l=arguments[r];for(n in l)!{}.hasOwnProperty.call(l,n)||(s[n]=l[n])}return s}).apply(null,arguments)}var o=t("../lib/cookie"),a=t("../lib/data"),u=t("./constants");e.exports.getUuid=function(){var s=o.get("p_h5_u");return s||(s=a.guid(),o.set("p_h5_u",s,730)),s},e.exports.mergeSeekInner=function(s){var r=0,n=0,l=0,c=[],h=0,j=0,F=((s=s===void 0?[]:s).forEach(function(f){f._id&&(f.id===u.EVENT.SEEK?((f.t-n<500||f.t-r<500)&&(f._remove=!0,c.push(f.args._seekId),j=j||l),r=f.t):f.id===u.EVENT.SEEK_END&&(n=f.t,l=f._id,c.includes(f.args._seekId))&&(f._remove=!0,h++))}),h);return s.filter(function(f){return f._id===j&&(f._remove=!0),f.id===u.EVENT.SEEK_END&&F--,F===1&&(f._remove=!1,F--,f.args.merge=h),!f._remove})},e.exports.removeInternalEventsVars=function(s){return(s=s===void 0?[]:s).map(function(r){var n=d({},r,{args:d({},r.args)});return Object.keys(n).forEach(function(l){l.indexOf("_")===0&&delete n[l],n.args&&Object.keys(n.args).forEach(function(c){c.indexOf("_")===0&&delete n.args[c]})}),n})}},{"../lib/cookie":34,"../lib/data":35,"./constants":66}],71:[function(t,e,O){var d=t("../lib/io");t("../lib/storage");function o(a){this._uploadDuration=a.logDuration||5,this._uploadCount=a.logCount||10,this._logReportTo=a.logReportTo,this._dumpLogReportTo=a.dumpLogReportTo,this._logs=[],this._retry=0,this._disposed=!1,this._supportLocalStorage=!0;var u;try{localStorage?(u=localStorage.getItem("__aliplayer_log_data"),localStorage.removeItem("__aliplayer_log_data"),u&&(this._logs=JSON.parse(u))):this._supportLocalStorage=!1}catch{this._supportLocalStorage=!1}this._start()}o.prototype.add=function(a){var u=this._logs.length;if(a.__time__=Math.round(new Date/1e3),0<u&&a.e=="4001"){var u=this._logs[u-1];if(u.e=="4001"&&u.__time__-a.__time__<5)return}this._logs.push(a),(this._logs.length>this._uploadCount||a.e=="4001"||a.e=="2002"||a.e=="9002"&&(u=a.args)!=null&&u.includes("dump::"))&&this._report()},o.prototype.dispose=function(){this._report(),this._disposed=!0},o.prototype._start=function(){this._disposed=!1,this._retry=0,this._report()},o.prototype._report=function(a){var u,s,r;this._tickHandler&&(clearTimeout(this._tickHandler),this._tickHandler=null),0<(a=a||this._logs.splice(0,this._uploadCount)).length?(r={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(u=JSON.stringify({__logs__:a,__source__:""})).length},d.postWithHeader((s=this)._logReportTo,u,r,function(n){s._tick()},function(n){s._retry==0?(s._retry=1,s._report(a)):s._tick()})):this._tick()},o.prototype.reportDump=function(a){var u;a&&(u={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(a=JSON.stringify({__logs__:[a],__source__:""})).length},d.postWithHeader(this._dumpLogReportTo,a,u,function(s){},function(s){}))},o.prototype._tick=function(){var a;this._disposed||(this._retry=0,(a=this)._logs.length>this._uploadCount?a._report():this._tickHandler=setTimeout(function(){a._report()},1e3*this._uploadDuration))},e.exports=o},{"../lib/io":45,"../lib/storage":52}],72:[function(M,e,O){function d(){return(d=Object.assign?Object.assign.bind():function(R){for(var K=1;K<arguments.length;K++){var G,X=arguments[K];for(G in X)!{}.hasOwnProperty.call(X,G)||(R[G]=X[G])}return R}).apply(null,arguments)}var o,a=M("../lib/oo"),u=M("../lib/object"),s=M("../lib/data"),r=M("../lib/io"),n=M("../lib/ua"),l=M("../lib/event"),c=M("../config"),h=M("../player/base/event/eventtype"),j=M("./util"),F=M("./log"),f=M("../lib/playerutil"),W=0,U={CREATE:1e3,STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,PREPARE:1101,PREPAREEND:1102,STARTPLAY:2e3,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,PLAYABORT:2012,SEEKED:2014,CANPLAY:2018,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,HEVCINFO:2023,UNDERLOAD:3002,LOADED:3001,RETRY:3003,HEARTBEAT:9001,TRACE:9002,DUMP:9003,ERROR:4001,ERRORRETRY:4002,RTSFALLBACK:4003,VOD_REQUEST_FATAL_ERROR:4004,VOD_REQUEST_FATAL_ERROR_RESUME:4005,LICENSE_RESULT:5004,SNAPSHOT:2027,ROTATE:2028,IMAGE:2029,THUMBNAILSTART:2031,THUMBNAILCOMPLETE:2032,CCSTART:2033,CCCOMPLETE:2034,AUDIOTRACKSTART:2033,AUDIOTRACKCOMPLETE:2034},M=a.extend({init:function(z,te,X){this.trackLog=X=X===void 0?!0:X,this.player=z,this.requestId="",this.sessionId=s.guid(),this.playId=0,this.firstPlay=!0,this.osName=n.os.name,this.osVersion=n.os.version||"",this.exName=n.browser.name,this.exVersion=n.browser.version||"",this.lightSaasVideoId="",this._logService="",this._h265ProbeInfo={},this.loadedDataReported=!1,this.startPlayReported=!1,this.canplayReported=!1,this.doPlayReported=!1,this.seekingData={seekingStartTime:0},this.pendingPrepareEndData=null,this.h265RenderTypeTimer=null,this.statisticsHistoryTimer=null,this.timeline=[{name:"init",ts:performance.now()}],this.checkSeekStuckedTimer=null,c.logReportTo=te.logReportTo||c.logReportTo,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),te.logBatched&&(this._logService=new F(c));var X=this.player.getOptions(),z=te.from||"",te=(X.isLive,X.isLive?"live":"vod"),ee="pc",Y=(n.IS_IPAD?ee="pad":n.os.phone&&(ee="phone"),this.encodeURL(n.getReferer())),de=n.getHref(),ie=this.encodeURL(de),ae="",de=(de&&(ae=n.getHost(de)),c.h5Version),ce=j.getUuid(),ge=X.source?this.encodeURL(X.source):"",he=n.getHost(X.source),se=X.userId?X.userId+"":"0",Z=this.sessionId,oe=new Date().getTime(),re=String(X.traceId)||"";this._userNetInfo={cdnIp:"",localIp:""},this.opt={APIVersion:"0.6.0",t:oe,ll:"info",lv:"1.0",pd:"player",md:"saas_player",ui:"saas_player",sm:"play",os:this.osName,ov:this.osVersion,et:this.exName,ev:this.exVersion,uat:n.USER_AGENT,hn:"0.0.0.0",bi:z,ri:Z,e:"0",args:"0",li_ki:X.license.key||"",vt:te,tt:ee,dm:"h5",av:de,uuid:ce,vu:ge,vd:he,ua:se,dn:"custom",cdn_ip:"0.0.0.0",app_n:ae,r:Y,pu:ie,ti:re},this.bindEvent()},updateVideoInfo:function(R){R=R.from||"",this.opt.bi=R+"",this.updateSourceInfo()},updateSourceInfo:function(){var R,K=this.player.getOptions();K&&(R=K.source?this.encodeURL(K.source):"",K=n.getHost(K.source),this.opt.vu=R,this.opt.vd=K)},updateTraceId:function(R){this.opt.ti=String(R)},updateLightSaasVideoId:function(R){this.lightSaasVideoId=R},replay:function(){this.reset(),this.player.trigger(h.Video.LoadStart),this.player.trigger(h.Video.LoadedMetadata),this.player.trigger(h.Video.LoadedData),this.startHeartBeat()},bindEvent:function(){var R=this;this.player.on(h.Private.Create,function(K){R._onCreate(K)}),this.player.on(h.Player.Init,function(){R._onPlayerInit()}),this.player.on(h.Video.LoadStart,function(){R._onPlayerloadstart()}),this.player.on(h.Video.LoadedMetadata,function(){R._onPlayerLoadMetadata()}),this.player.on(h.Video.LoadedData,function(){R._onPlayerLoaddata()}),this.player.on(h.Player.H265PlayInfo,function(K){R._onH265PlayInfo(K),R._onPlayerH265PlayInfo(K)}),this.player.on(h.Player.H266PlayInfo,function(K){R._onH265PlayInfo(K),R._onPlayerH265PlayInfo(K)}),this.player.on(h.Video.Play,function(){R._onPlayerPlay()}),this.player.on(h.Video.Playing,function(){R._onPlayerReady()}),this.player.on(h.Video.Ended,function(){R._onPlayerFinish()}),this.player.on(h.Video.Pause,function(){R._onPlayerPause()}),this.player.on("seeking",function(){R._onPlayerSeeking()}),this.player.on("seeked",function(){R._onPlayerSeeked()}),this.player.on(h.Private.LicenseHasResult,function(K){R._onLicenseHasResult(K)}),this.player.on(h.Private.SeekStart,function(K){R._onPlayerSeekStart(K)}),this.player.on(h.Private.EndStart,function(K){R._seekEndData=K.paramData}),this.player.on(h.Player.Waiting,function(){R._onPlayerLoaded()}),this.player.on(h.Video.CanPlayThrough,function(){}),this.player.on(h.Video.CanPlay,function(){R._waitingDelayLoadingShowHandle&&(clearTimeout(R._waitingDelayLoadingShowHandle),R._waitingDelayLoadingShowHandle=null),R._onPlayerUnderload(),R._onPlayerCanplay()}),this.player.on(h.Video.TimeUpdate,function(){R._waitingDelayLoadingShowHandle&&(clearTimeout(R._waitingDelayLoadingShowHandle),R._waitingDelayLoadingShowHandle=null),R._seekEndData&&R.player._seeking&&R._onPlayerSeekEnd()}),this.player.on(h.Player.Error,function(K){R._onPlayerError(K)}),this.player.on(h.Player.RequestFullScreen,function(){R._onFullscreenChange(1)}),this.player.on(h.Player.CancelFullScreen,function(){R._onFullscreenChange(0)}),this.player.on(h.Private.PREPARE,function(K){R._prepareTime=performance.now(),R._log("PREPARE",{dn:K.paramData}),R.timeline.push({name:"prepare",ts:performance.now()})}),this.player.on(h.Private.ManualPlay,function(){R.loadedDataReported||(R._prepareTime=performance.now(),R.timeline.push({name:"prepare2",ts:performance.now()}))}),this.player.on(h.Player.Snapshoted,function(){R._log("SNAPSHOT")}),this.player.on(h.Private.Retry,function(K){K=K.paramData||{},R._log("RETRY",{type:K.type,source:K.source})}),this.player.on(h.Player.RtsFallback,function(X){var G,X=X.paramData||{};R._log("RTSFALLBACK",{reason:(G=X.reason)==null?void 0:G.error_msg,url:X.fallbackUrl})}),this.player.on(h.Private.VodRequestException,function(K){K=K.paramData||{},R.reportVodException(K)}),this.player.on(h.Private.VodRequestExceptionResume,function(K){K=K.paramData||{},R.reportVodExceptionResume(K)}),this.player.on(h.Private.TraceLog,function(K){K=K.paramData||{},R._reportTrace(K)}),this.player.on(h.Private.DumpBuffer,function(K){K=K.paramData||{},R._reportDump(K)}),this.player.on(h.Private.StatisticsInfo,function(K){K=K.paramData||{},R._onStatisticsHistoryUpdate(K)}),this.player.on(h.Private.Timeline,function(K){K=K.paramData||{},R._onTimeline(K)}),l.on(this.player.tag,h.Video.Playing,function(){R.reportPlaying()}),l.on(this.player.tag,h.Video.TimeUpdate,function(){R.reportPlaying()}),this.startHeartBeat.call(this),this.startStatisticsHistory.call(this)},startStatisticsHistory:function(){var R=this;this.opt.app_n==="n.dingtalk.com"&&(this.statisticsHistoryTimer&&clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=setInterval(function(){R.player.trigger(h.Private.TraceLog,"[statistics_history]"+JSON.stringify(R.statisticsHistory)),R.resetStatisticsHistoryData()},this.player._options.statisticsReportInterval))},reportPlaying:function(){var R;this.doPlayReported||this.player.paused()||this.player.readyState()===0||(this.doPlayReported=!0,this.first_play_time=performance.now(),R={dsm:"fix",tc:this.first_play_time-this.loadstartTime,fc:this.first_play_time-this.playstartTime},this._log("PLAY",R))},removeEvent:function(){this.player.offAll("init"),this.player.offAll("ready"),this.player.offAll("ended"),this.player.offAll("play"),this.player.offAll("pause"),this.player.offAll("seekStart"),this.player.offAll("seekEnd"),this.player.offAll("canplaythrough"),this.player.offAll("playing"),this.player.offAll("timeupdate"),this.player.offAll("error"),this.player.offAll("fullscreenchange"),this.player.offAll("seeking"),this.player.offAll("seeked"),this.player.offAll(h.Private.PREPARE),this.player.offAll(h.Player.RtsFallback),l.off(this.player.tag,h.Video.Playing),l.off(this.player.tag,h.Video.TimeUpdate),this._logService&&this._logService.dispose(),clearInterval(o),clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null,clearTimeout(this.checkSeekStuckedTimer),this.checkSeekStuckedTimer=null},reset:function(){this.stucking=!1,this.startTimePlay=0,this.pause_flag=0,this.firstPlay=!1,this.playId=0,this._canPlay=0,this.seekingStartTime=0,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},W=0,this.lightSaasVideoId="",this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),o&&(clearInterval(o),o=null)},encodeURL:function(R){var K;return R?(K=this.player.getOptions())&&!K.logBatched?encodeURIComponent(R):R:""},startHeartBeat:function(){var R=this;o&&clearInterval(o),o=setInterval(function(){var K;R.player.getCurrentTime()&&(K=Math.floor(1e3*R.player.getCurrentTime()),R.player.paused()&&(R.prevStats.timestamp=0),++W>=R.player._options.heartHeatInterval)&&R.updateStats.call(R,function(G){var z=R._imageInfo()||{},te=R.player.tag.playbackRate,X=R.player.getVolume(),z={vt:K,interval:1e3*W,imgLength:z.imgLength,playbackRate:te,volume:X,bw:R._getbwEstimator()+"KB"},te=((z=G?d({},z,{dls:Math.floor(G.downloadSpeedPerSec),dfps:Math.floor(G.decodedFramesPerSec),pkl:Number((G.packageLossRate||0).toFixed(2)),rtt:1e3*G.rtt}):z).player_status=d({},R.heartBeatStatusData),R.player);z.time={play_time:parseFloat((te._playingTime/1e3).toFixed(2)),stuck_count:parseFloat(te._stuckCount.toFixed(2)),stuck_time:parseFloat((te._stuckTime/1e3).toFixed(2))},R._log("HEARTBEAT",z),W=0})},1e3)},updateStats:function(R){R=R||function(){};var K=this;this.player.getStats().then(function(G){var X,z;G?(X=K.prevStats,G.bytesReceived=G.bytesReceived||0,G.framesDecoded=G.framesDecoded||0,G.packetsLost=G.packetsLost||0,G.packetsReceived=G.packetsReceived||0,z=((K.prevStats=G).timestamp-X.timestamp)/1e3,R({downloadSpeedPerSec:(G.bytesReceived-X.bytesReceived)/z,decodedFramesPerSec:(G.framesDecoded-X.framesDecoded)/z,packageLossRate:(G.packetsLost-X.packetsLost)/(G.packetsLost-X.packetsLost+(G.packetsReceived-X.packetsReceived)),rtt:G.rtt,timeGap:z})):R()}).catch(function(G){console.log("error in monitor getStats: ",G),R()})},reportStartPlay:function(){this.startPlayReported||(this._log("STARTPLAY",{vt:new Date().getTime()}),this.startPlayReported=!0)},reportCanplay:function(){this.canplayReported||(this._log("CANPLAY",{vt:new Date().getTime()}),this.canplayReported=!0)},reportPlayAbort:function(R){this._log("PLAYABORT",{vt:new Date().getTime(),from:R})},reportVodException:function(R){console.log("VOD_REQUEST_FATAL_ERROR",R),this._log("VOD_REQUEST_FATAL_ERROR",R)},reportVodExceptionResume:function(R){console.log("VOD_REQUEST_FATAL_ERROR_RESUME",R),this._log("VOD_REQUEST_FATAL_ERROR_RESUME",R)},resetStartPlayReportFlag:function(){this.startPlayReported=!1},resetCanplayReportFlag:function(){this.canplayReported=!1},resetLoadedDataReported:function(){this.loadedDataReported=!1,this._prepareTime=performance.now()},resetDoPlayReportFlag:function(){this.doPlayReported=!1},resetSessionId:function(){this.sessionId=s.guid()},resetHeartBeatStatusData:function(){this.heartBeatStatusData={t_last_pause:-1,t_last_resume:-1,t_last_load_start:-1,t_last_load_end:-1},this.player.startPlayTimeMonitor()},resetStatisticsHistoryData:function(){this.statisticsHistory={speed:[],framesDropped:[],downlink:[],type:[],rtt:[]}},resetTimeline:function(){var R=performance.now();this._createTime=R,this.timeline=[{name:"init",ts:R}]},resetVV:function(){this.startPlayReported&&(this.resetStartPlayReportFlag(),this.resetLoadedDataReported(),this.resetDoPlayReportFlag(),this.resetCanplayReportFlag(),this.resetSessionId(),this.resetTimeline())},updateH265ProbeInfo:function(R){this._h265ProbeInfo=R||{}},_onFullscreenChange:function(R){R?this._log("FULLSREEM",{}):this._log("QUITFULLSCREEM",{})},_onTimeline:function(R){var K=["frag_s","frag_f","frag_parsed"].includes(R.name);this.timeline.some(function(G){return K&&G.name===R.name})||this.timeline.push(R)},_onPlayerloadstart:function(){this.loadstartTime=performance.now(),this.playId=s.guid()},_onPlayerLoadMetadata:function(){this.loadMetaDataCost=performance.now()-this.loadstartTime,this.timeline.push({name:"meta",ts:performance.now()})},_onPlayerLoaddata:function(){var R,K,G,X,z=this;this.timeline.push({name:"loadeddata",ts:performance.now()}),this.loadedDataReported||(X=G=0,this.player.tag&&(G=this.player.tag.videoWidth,X=this.player.tag.videoHeight),R={fc:parseInt(performance.now()-this._createTime),tc:parseInt(performance.now()-this._prepareTime),cc:parseInt(performance.now()-this.loadstartTime),md:parseInt(this.loadMetaDataCost),mi:JSON.stringify({type:"video",definition:G+"*"+X})},this.timeline.forEach(function(te,ee){try{var Y=ee?te.ts-z.timeline[ee-1].ts:0;R["tl_"+te.name]=ee+"#"+parseInt(Y)}catch{}}),(G=this.player.tag)!=null&&G.duration&&(R.vdur=1e3*((X=this.player.tag)==null?void 0:X.duration)),(5<this._h265ProbeInfo.codecCost||5<this._h265ProbeInfo.decoderCost)&&(G=Math.floor(this._h265ProbeInfo.codecCost)||0,X=Math.floor(this._h265ProbeInfo.decoderCost)||0,R.tc+=K=G+X,R.cc+=K,R.pcc=G,R.pdc=X),K=[{type:"audio"}],G={type:"video",codecType:null,isHardwareDecode:null},X=this._h265ProbeInfo.codecTag,f.isH265Codec(X)?G.codecType="h265":f.isH266Codec(X)?G.codecType="h266":f.isH264Codec(X)&&(G.codecType="h264"),K.push(G),R.decode_info=K,this._h265ProbeInfo.waitRenderType?(this.pendingPrepareEndData=R,this.h265RenderTypeTimer=setTimeout(function(){z._log("PREPAREEND",R),z.h265RenderTypeTimer=null},2e3)):this._log("PREPAREEND",R)),this.loadedDataReported=!0},_onStatisticsHistoryUpdate:function(R){this.opt.app_n==="n.dingtalk.com"&&(this.statisticsHistory.speed.push(parseInt(R.speed)),this.statisticsHistory.framesDropped.push(R.droppedFrames),R=navigator.connection)&&(this.statisticsHistory.downlink.push(R.downlink),this.statisticsHistory.type.push(R.effectiveType),this.statisticsHistory.rtt.push(R.rtt))},_onH265PlayInfo:function(R){var K,G;this.h265RenderTypeTimer&&(clearTimeout(this.h265RenderTypeTimer),this.h265RenderTypeTimer=null),this.pendingPrepareEndData&&(R=R.paramData,K=this.pendingPrepareEndData,this.pendingPrepareEndData=null,G=K.decode_info[1],R.renderType==="wasm"&&(G.isHardwareDecode=!1),this._log("PREPAREEND",K))},_onPlayerH265PlayInfo:function(R){R=R.paramData||{},this._log("HEVCINFO",{cd:R.codecTag,rd:R.renderType,si:R.simd,sio:R.simdOption,wt:R.wasmThreads,wto:R.wasmThreadsOption,sp:R.splayer})},_onPlayerCanplay:function(){this._canPlay=1,this.reportCanplay(),this.prevStats.timestamp||this.updateStats.call(this)},_onCreate:function(R){R=R.paramData||{},R.hasPa=!!R.playauth,delete R.playauth,R.hasSk=!!R.accessKeySecret,delete R.accessKeySecret,R.hasSt=!!R.securityToken,delete R.securityToken,this._log("CREATE",R),this._createTime=performance.now()},_onPlayerInit:function(){this.stucking=!1,this.pause_flag=0,this.startTimePlay=0,this._canPlay=0,this.seekingStartTime=0},_onPlayerReady:function(){this.startTimePlay||(this.startTimePlay=new Date().getTime())},_onPlayerFinish:function(){this._log("STOP",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.reset()},_onPlayerPlay:function(){var R;this.playstartTime=new Date().getTime(),this.playId==0&&(this.playId=s.guid()),this.player._isPreload()||(this.loadstartTime=performance.now()),this.doPlayReported&&this.pause_flag&&(this.pause_flag=0,this.pauseEndTime=new Date().getTime(),this.heartBeatStatusData.t_last_resume=this.pauseEndTime,R=this.pauseEndTime-this.pauseTime,this._log("RECOVER",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:R,pass:R,t_last_pause:this.pauseTime}))},_onPlayerPause:function(){!this.doPlayReported||this.startTimePlay&&!this.player._seeking&&(this.pause_flag=1,this.pauseTime=new Date().getTime(),this.heartBeatStatusData.t_last_pause=this.pauseTime,this.heartBeatStatusData.t_last_resume=-1,this._log("PAUSE",{vt:Math.floor(1e3*this.player.getCurrentTime())}))},_onLicenseHasResult:function(R){R=R.paramData||{},this._log("LICENSE_RESULT",{li_ri:R.result+" "+(R.errorCode||""),li_ti:R.featureId||"sdk"})},_onPlayerSeekStart:function(R){this.seekStartTime=R.paramData.fromTime,this.startTimePlay=0,this.seekStartStamp=new Date().getTime()},_onPlayerSeekEnd:function(){this.seekEndStamp=new Date().getTime(),this._log("SEEK",{drag_from_timestamp:Math.floor(1e3*this.seekStartTime),drag_to_timestamp:Math.floor(1e3*this._seekEndData.toTime)}),this._log("SEEK_END",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.seekEndStamp-this.seekStartStamp}),this._seekEndData=null},_onPlayerLoaded:function(){var R,K=this;this.doPlayReported&&!this.stucking&&document.visibilityState!=="hidden"&&(this.player._seeking?(this.seekingStartTime=this.player.getCurrentTime(),this.checkSeekStuckedTimer&&clearTimeout(this.checkSeekStuckedTimer),this.checkSeekStuckedTimer=setTimeout(function(){var G=K.player.readyState()<4;K.player.readyState()||(G=!0),K.player.getCurrentTime()===K.seekingStartTime&&G&&(G=K._getbwEstimator(),K._log("UNDERLOAD",{vt:Math.floor(1e3*K.player.getCurrentTime()),bw:G,cbs:K._getCbs()}),K.stucking=!0,K.stuckStartTime=new Date().getTime(),K._getCbs()===0)&&(K.heartBeatStatusData.t_last_load_start=K.stuckStartTime,K.heartBeatStatusData.t_last_load_end=-1)},500)):(this.stuckStartTime=new Date().getTime(),this._getCbs()===0&&(this.heartBeatStatusData.t_last_load_start=this.stuckStartTime,this.heartBeatStatusData.t_last_load_end=-1),this.stuckStartTime-this.startTimePlay<=1e3||(this.stucking=!0,R=this._getbwEstimator(),this._log("UNDERLOAD",{vt:Math.floor(1e3*this.player.getCurrentTime()),bw:R,cbs:this._getCbs()}),this.stuckStartTime=new Date().getTime())))},_onPlayerUnderload:function(){var R,K,G,X;!this.doPlayReported&&this.player._options&&this.player._options.autoplay||this.stucking&&(R=Math.floor(1e3*this.player.getCurrentTime()),K=this.stuckStartTime||new Date().getTime(),0<(G=Math.floor(new Date().getTime()-K))&&G<(1e3*this.player._options.waitingTimeout||6e4)&&(X=this._getbwEstimator(),this._getCbs()===0&&(this.heartBeatStatusData.t_last_load_end=new Date().getTime()),this._log("LOADED",{vt:R,cost:G,bw:X,cbs:this._getCbs(),t_last_load_start:K})),this.seekStart=!1,this.stucking=!1)},_onPlayerSeeking:function(){this.seekStart=!0,this.seekingData.seekingStartTime=performance.now()},_onPlayerSeeked:function(){var R=this;this.player._splayer?this.player.one("canplay",function(){R._reportSeeked()}):this._reportSeeked()},_reportSeeked:function(){var R=performance.now(),R=Math.floor(R-this.seekingData.seekingStartTime);this._log("SEEKED",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:R})},_reportTrace:function(R){this._log("TRACE",{log:R})},_reportDump:function(R){this._log("DUMP",R)},_onPlayerError:function(R){this._reportTrace(R.paramData),this.playId=0,this.statisticsHistoryTimer&&(clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null,this.resetStatisticsHistoryData()),o&&(clearInterval(o),o=null)},_getbwEstimator:function(){var R=NaN;try{R=((R=this.player._getbwEstimator&&parseInt(this.player._getbwEstimator(),10))/8/1024).toFixed(2)}catch{}return R},_getCbs:function(){return!this.player.getOptions().isLive&&this.seekStart?1:0},_log:function(R,K){if(this.trackLog){this.updateSourceInfo();var G=u.copy(this.opt),X=(this.requestId=s.guid(),c.logReportTo),R=(G.e=U[R]+"",G.en=R,G.ri=this.sessionId,G.bi=G.bi&&String(G.bi),G.t=new Date().getTime()+"",G.cdn_ip=this._userNetInfo.cdnIp,G.hn=this._userNetInfo.localIp,this.player.getCurrentQuality()),z=(R!=""&&(G.definition=R.definition),[]),R=(u.each(K,function(ie,ae){if(typeof ae!="string")try{ae=JSON.stringify(ae)}catch{}z.push(ie+"="+ae)}),""),K=this.player.getOptions(),R=((R=K&&K.vid||this.lightSaasVideoId?K.vid||this.lightSaasVideoId:R)&&z.push("vid="+R),"");(R=K&&K.mediaAuth?K.mediaAuth:R)&&z.push("pauth="+R);try{Aliplayer&&Aliplayer.__logCallback__&&(G.args=z,Aliplayer.__logCallback__(G))}catch(ie){console.log(ie)}if((z=z.join("&"))==""&&(z="0"),G.args=this.encodeURL(z),this._logService){if(G.e===String(U.DUMP))return void this._logService.reportDump(G);this._logService.add(G)}else{var te=[];u.each(G,function(ie,ae){te.push(ie+"="+ae)}),te=te.join("&"),r.jsonp(X+"?"+te,function(){},function(){})}return this.sessionId}},_imageInfo:function(){try{var R,K,G,X,z,te,ee;return/MSIE\s8\.0/.test(navigator.userAgent)?{}:(R=this.player.tag)?(K=document.createElement("canvas"),G=R.videoWidth,X=R.videoHeight,K.width=G,K.height=X,(z=K.getContext("2d")).save(),z.drawImage(R,0,0,G,X),z.restore(),te=K.toDataURL("image/jpeg",1),ee="",{imgLength:(ee=te?(ee=te.substr(te.indexOf(",")+1))||"":ee).length}):{}}catch{return{}}}});e.exports=M},{"../config":19,"../lib/data":35,"../lib/event":38,"../lib/io":45,"../lib/object":47,"../lib/oo":48,"../lib/playerutil":50,"../lib/ua":53,"../player/base/event/eventtype":77,"./log":71,"./util":73}],73:[function(t,e,O){var d=t("../lib/cookie"),o=t("../lib/data"),a=t("../lib/ua");e.exports.getUuid=function(){var u=d.get("p_h5_u");return u||(u=o.guid(),d.set("p_h5_u",u,730)),u},e.exports.getTerminalType=function(){var u="pc";return a.IS_IPAD?u="pad":a.IS_ANDROID?u="android":a.IS_IOS&&(u="iphone"),u},e.exports.returnUTCDate=function(j){var s=j.getUTCFullYear(),r=j.getUTCMonth(),n=j.getUTCDate(),l=j.getUTCHours(),c=j.getUTCMinutes(),h=j.getUTCSeconds(),j=j.getUTCMilliseconds();return Date.UTC(s,r,n,l,c,h,j)},e.exports.getRfc822=function(u){return u.toUTCString().replace("UTC","GMT")}},{"../lib/cookie":34,"../lib/data":35,"../lib/ua":53}],74:[function(t,e,O){var d=t("./base/player"),o=t("./saas/mtsplayer"),a=t("./saas/vodplayer"),u=t("./saas/lightPlayer"),s=t("./audio/audioplayer"),r=t("./hls/hlsplayer"),n=t("./flv/flvplayer"),l=t("./dash/dashplayer"),c=t("./rts/rtsplayer"),h=t("./drm/drmplayer"),j=t("./splayer/splayer"),F=t("../lib/ua"),f=t("../lib/playerutil"),W=(t("../lib/dom"),t("../lib/io"),t("../lang/index")),U=t("../lib/constants"),M=t("./base/event/eventtype");e.exports.create=function(X,G){X.PlayAuth&&(X.playauth=X.PlayAuth),typeof X.rtsFallback!="boolean"&&X.rtsFallbackSource&&(X.rtsFallback=!0),X._userOptions||(X._userOptions=Object.assign({},X)),navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("Olympic_Android")&&(X.useNativeControls=!0),X.readyCallback=G=typeof G!="function"?function(){}:G,W.setCurrentLanguage(X.language,"h5",X.languageTexts,X.extLanguageTexts);var G=f.handleOption(X),X=G.source,z=G.format;if(z&&X)try{z=z.toLowerCase()}catch(ie){console.log("Aliplayer - parsing format failed",ie),z=""}else z="";f.isSupportedFormat(z)||(z=""),G.optionFormat=z,G.drm&&(G.isDrm=!0),G.useDrm2===void 0&&(G.useDrm2=!(G.isDrm&&G.accessKeyId));var te,ee=f.isAudio(X,z),Y=(ee&&(G.mediaType="audio"),f.createWrapper(G));if(Y.player)return Y.player;if(ee)te=new s(Y,G);else if(f.isRts(X))te=new c(Y,G);else if((G.forceH265||G.enableH265)&&(f.isMp4(X,z)||f.isFlv(X,z)||f.isHls(X,z)))te=new j(Y,G);else if((G.forceH266||G.enableH266)&&(f.isMp4(X,z)||G.isLive&&(f.isFlv(X,z)||f.isHls(X,z))))te=new j(Y,G);else if(!G.useFlashPrism&&f.isFlv(X,z)&&f.isSupportFlv())te=new n(Y,G);else if([null,void 0].indexOf(G.mediaAuth)!==-1||G.source)if(G.vid&&!G.source)if(G.authInfo)te=new o(Y,G);else{if(!(G.playauth||G.accessKeyId&&G.accessKeySecret))throw ee="vid="+G.vid+" playauth='', playauth property is required by VOD() as new Aliplayer.",new Error(ee);te=new a(Y,G)}else f.isHls(X,z)?f.canPlayHls()?te=new(f.isSupportHls()&&(f.isUsedHlsPluginOnMobile()||f.isSafariUsedHlsPlugin(G.useHlsPluginForSafari))?G.isDrm?h:r:G.isDrm?h:d)(Y,G):f.isSupportHls()?te=new(G.isDrm?h:r)(Y,G):F.os.pc||(te=new d(Y,G)):f.isDash(X,z)&&f.isSupportMSE()?te=new(G.isDrm?h:l)(Y,G):(te=new d(Y,G),G.source||(ee={error_code:U.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL",display_msg:W.get("Error_Empty_Source")},te.trigger(M.Player.Error,ee)));else te=new u(Y,G);return te}},{"../lang/index":28,"../lib/constants":33,"../lib/dom":37,"../lib/io":45,"../lib/playerutil":50,"../lib/ua":53,"./audio/audioplayer":75,"./base/event/eventtype":77,"./base/player":102,"./dash/dashplayer":109,"./drm/drmplayer":112,"./flv/flvplayer":114,"./hls/hlsplayer":116,"./rts/rtsplayer":118,"./saas/lightPlayer":122,"./saas/mtsplayer":124,"./saas/vodplayer":129,"./splayer/splayer":138}],75:[function(r,e,O){var d=r("../base/player"),o=r("../../ui/component"),a=r("../../lib/dom"),u=r("../../lib/object"),s=r("../../lib/playerutil"),r=d.extend({init:function(n,l){this._isAudio=!0,l.skinLayout===void 0&&(l.skinLayout=s.getDefaultAudioLayout()),d.call(this,n,l)}});r.prototype.createEl=function(){this.tag.tagName!=="AUDIO"&&(this._el=this.tag,this.tag=o.prototype.createEl.call(this,"audio"));var n=this._el,l=this.tag,c=(l.player=this,a.getElementAttributes(l));return u.each(c,function(h){n.setAttribute(h,c[h])}),this.setVideoAttrs(),l.parentNode&&l.parentNode.insertBefore(n,l),a.insertFirst(l,n),n},e.exports=r},{"../../lib/dom":37,"../../lib/object":47,"../../lib/playerutil":50,"../../ui/component":143,"../base/player":102}],76:[function(t,e,O){var d=t("../../../lib/event"),o=t("./eventtype"),a=t("../eventHandler/video/index"),u=t("../eventHandler/player/index");e.exports.offAll=function(s){var r,n,l,c=s.tag,h=s._el;for(r in o.Video)d.off(c,o.Video[r]);for(n in o.Player)d.off(h,o.Player[n]);for(l in o.Private)d.off(h,o.Private[l])},e.exports.offVideoAll=function(s){var r,n=s.tag;for(r in o.Video)d.off(n,o.Video[r])},e.exports.onAll=function(s){a.bind(s),u.bind(s)}},{"../../../lib/event":38,"../eventHandler/player/index":81,"../eventHandler/video/index":91,"./eventtype":77}],77:[function(t,e,O){e.exports={Video:{TimeUpdate:"timeupdate",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",Suspend:"suspend",Stalled:"stalled",LoadStart:"loadstart",DurationChange:"durationchange",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Progress:"progress",CanPlayThrough:"canplaythrough",ContextMenu:"contextmenu",Seeking:"seeking",Seeked:"seeked",ManualEnded:"manualended",VolumeChange:"volumechange",RateChange:"ratechange",Resize:"resize"},Player:{TimeUpdate:"timeupdate",DurationChange:"durationchange",Init:"init",Ready:"ready",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",RequestFullScreen:"requestFullScreen",CancelFullScreen:"cancelFullScreen",Snapshoted:"snapshoted",Snapshoting:"snapshoting",OnM3u8Retry:"onM3u8Retry",LiveStreamStop:"liveStreamStop",AutoPlayPrevented:"autoPlayPrevented",AutoPlay:"autoplay",StartSeek:"startSeek",CompleteSeek:"completeSeek",TextTrackReady:"textTrackReady",AudioTrackReady:"audioTrackReady",AudioTrackUpdated:"audioTrackUpdated",LevelsLoaded:"levelsLoaded",AudioTrackSwitch:"audioTrackSwitch",AudioTrackSwitched:"audioTrackSwitched",LevelSwitch:"levelSwitch",LevelSwitched:"levelSwitched",MarkerDotOver:"markerDotOver",MarkerDotOut:"markerDotOut",DefaultBandWidth:"defaultbandwidth",ResolutionChange:"resolutionChange",SeiFrame:"seiFrame",RtsFallback:"rtsFallback",RtsTraceId:"rtsTraceId",H265PlayInfo:"h265PlayInfo",H266PlayInfo:"h266PlayInfo",H265DecoderOverload:"h265DecoderOverload",SettingSelected:"settingSelected",AutoResize:"autoResize",VideoUnavailable:"videoUnavailable"},Private:{Create:"create",Play_Btn_Show:"play_btn_show",UiH5Ready:"uiH5Ready",Error_Hide:"error_hide",Error_Show:"error_show",Info_Show:"info_show",Info_Hide:"info_hide",H5_Loading_Show:"h5_loading_show",H5_Loading_Hide:"h5_loading_hide",HideProgress:"hideProgress",CancelHideProgress:"cancelHideProgress",UpdateProgress:"updateProgress",UpdateCursorPosition:"updateCursorPosition",Click:"click",MouseOver:"mouseover",MouseOut:"mouseout",MouseEnter:"mouseenter",MouseLeave:"mouseleave",TouchStart:"touchstart",TouchMove:"touchmove",TouchEnd:"touchend",HideBar:"hideBar",ShowBar:"showBar",ControlBarClick:"controlBarClick",ReadyState:"readyState",SourceLoaded:"sourceloaded",QualityChange:"qualitychange",Play_Btn_Hide:"play_btn_hide",Cover_Hide:"cover_hide",Cover_Show:"cover_show",SeekStart:"seekStart",EndStart:"endStart",UpdateProgressBar:"updateProgressBar",LifeCycleChanged:"lifeCycleChanged",Dispose:"dispose",Created:"created",Snapshot_Hide:"snapshot_hide",AutoStreamShow:"auto_stream_show",AutoStreamHide:"auto_stream_hide",VolumnChanged:"volumnchanged",LiveShiftQueryCompleted:"liveShiftQueryCompleted",LiveShiftSwitchToLive:"LiveShiftSwitchToLive",StreamSelectorHide:"streamSelectorHide",SpeedSelectorHide:"speedSelectorHide",SettingShow:"settingShow",SettingHide:"settingHide",SelectorShow:"selectorShow",SelectorHide:"selectorHide",SettingListShow:"settingListShow",SettingListHide:"settingListHide",ThumbnailHide:"thumbnailHide",ThumbnailShow:"thumbnailShow",ThumbnailLoaded:"thumbnailLoaded",TooltipShow:"tooltipShow",TooltipHide:"tooltipHide",SelectorUpdateList:"selectorUpdateList",SelectorValueChange:"selectorValueChange",SelectorGenerateList:"selectorGenerateList",VolumeVisibilityChange:"volumeVisibilityChange",VolumeUpdatePosition:"volumeUpdatePosition",ChangeURL:"changeURL",UpdateToSettingList:"updateToSettingList",CCChanged:"CCChanged",CCStateChanged:"CCStateChanged",CCReset:"ccReset",TextTrackFounded:"textTrackFounded",UserTrackReset:"userTrackReset",PlayClick:"click",ProgressMarkerLoaded:"progressMarkerLoaded",MarkerTextShow:"markerTextShow",MarkerTextHide:"markerTextHide",PREPARE:"prepare",ProgressMarkerChanged:"progressMarkerChanged",SeiFrame:"privateSeiFrame",PlayInfoLoaded:"playInfoLoaded",Retry:"retry",LicenseHasResult:"licenseHasResult",PatchWaiting:"patchWaiting",VttHide:"vttHide",VttSwitchTrack:"vttSwitchTrack",VttClearTracks:"vttClearTracks",SafariDrmLevelSwitch:"safariDrmLevelSwitch",VodRequestException:"vodRequestException",VodRequestExceptionResume:"vodRequestExceptionResume",TraceLog:"traceLog",DumpBuffer:"dumpBuffer",PlaybackRateChanged:"playbackRateChanged",StatisticsInfo:"statisticsInfo",MutedAutoplay:"mutedAutoplay",HideUnmuteButton:"hideUnmuteButton",Timeline:"timeline",ManualPlay:"manualPlay",UpdateWatchTime:"updateWatchTime",FastForwardShow:"fastForwardShow",FastForwardHide:"fastForwardHide"}}},{}],78:[function(t,e,O){t("../../event/eventtype");var d=t("../../../../lib/dom"),o=t("../../../../lib/ua");e.exports.handle=function(){o.IS_IOS&&(o.IS_IOS,!this._splayer||this._splayer.renderType!==2)||d.removeClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":37,"../../../../lib/ua":53,"../../event/eventtype":77}],79:[function(t,e,O){var d=t("../../event/eventtype");e.exports.handle=function(o){var a=this;a.trigger(d.Player.CompleteSeek,o.paramData.toTime),a.one(d.Player.CanPlay,function(){a._enteredProgressMarker&&a.pause()})}},{"../../event/eventtype":77}],80:[function(t,e,O){var d=t("../../event/eventtype"),o=(t("../../../../lib/constants"),t("../../../../lang/index"),t("../../../../monitor/util"));e.exports.handle=function(s){var u=this,s=s.paramData;u.trigger(d.Private.H5_Loading_Hide),u.trigger(d.Private.Cover_Hide),u.trigger(d.Private.Play_Btn_Hide),u.trigger(d.Private.SettingListHide),u.trigger(d.Private.SelectorHide),u.trigger(d.Private.VolumeVisibilityChange,""),s=s||{},u._monitor&&(s.uuid=o.getUuid(),s.serverRequestId=u._serverRequestId,s.requestId=u._monitor2.session.id,s.cdnIp=u._monitor._userNetInfo.cdnIp,s.localIp=u._monitor._userNetInfo.localIp),u._isError=!0,u.trigger(d.Private.Error_Show,s),u.trigger(d.Private.LifeCycleChanged,{type:d.Player.Error,data:s}),u._monitor2.playError(s)}},{"../../../../lang/index":28,"../../../../lib/constants":33,"../../../../monitor/util":73,"../../event/eventtype":77}],81:[function(t,e,O){var d=t("../../event/eventtype"),o=t("../../../../lib/event"),a=t("./lifecyclecommon"),u={endStart:t("./endstart"),seekStart:t("./seekstart"),requestFullScreen:t("./requestfullscreen"),cancelFullScreen:t("./cancelfullscreen"),error:t("./error"),privateSeiFrame:t("./seiframe"),patchWaiting:t("../video/waiting")},s=[d.Private.EndStart,d.Private.SeekStart,d.Player.RequestFullScreen,d.Player.CancelFullScreen,d.Player.Error,d.Player.Ready,d.Private.Dispose,d.Private.Created,d.Private.SeiFrame,d.Private.PatchWaiting];e.exports.bind=function(r){r.el();for(var n=0;n<s.length;n++){var l=s[n];u[l]!="undefined"&&((c,h,j)=>{var F=c.el();o.on(F,h,function(f){var W=(j&&j.handle?j:a).handle;W.call(c,f,h)})})(r,l,u[l])}}},{"../../../../lib/event":38,"../../event/eventtype":77,"../video/waiting":101,"./cancelfullscreen":78,"./endstart":79,"./error":80,"./lifecyclecommon":82,"./requestfullscreen":83,"./seekstart":84,"./seiframe":85}],82:[function(t,e,O){var d=t("../../event/eventtype");e.exports.handle=function(o,a){this.trigger(d.Private.LifeCycleChanged,{type:a,data:o})}},{"../../event/eventtype":77}],83:[function(t,e,O){t("../../event/eventtype");var d=t("../../../../lib/dom"),o=t("../../../../lib/ua");e.exports.handle=function(){o.IS_IOS&&(o.IS_IOS,!this._splayer||this._splayer.renderType!==2)||d.addClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":37,"../../../../lib/ua":53,"../../event/eventtype":77}],84:[function(t,e,O){var d=t("../../event/eventtype");e.exports.handle=function(o){this._seeking=!0,this.trigger(d.Player.StartSeek,o.paramData.fromTime)}},{"../../event/eventtype":77}],85:[function(t,e,O){t("../../event/eventtype"),e.exports.handle=function(u){var o,a,u=u.paramData,s=u.pts;this._hls2?s=parseInt(1e3*s):this._hls&&(o=u.pts,a=this._initPTS,s=parseInt((o-a)/90,10)),this._seis[s]=this._seis[s]||[],this._seis[s].push(u.dataContent)}},{"../../event/eventtype":77}],86:[function(t,e,O){var d=t("../../event/eventtype");e.exports.handle=function(o){var a=this,u=(a._retrySwitchUrlCount=0,a._liveRetryCount=0,a._clearLiveErrorHandle(),a._dumpBuffer="ABORTED",new Date().getTime()-a.readyTime);a._options.autoplay||a._options._autoplay||!a.paused()||(a.trigger(d.Private.H5_Loading_Hide),a.trigger(d.Private.Play_Btn_Show)),a.trigger(d.Player.CanPlay,{loadtime:u}),a._monitor2.canplay()}},{"../../event/eventtype":77}],87:[function(t,e,O){var d=t("../../event/eventtype"),o=t("../../../../lib/dom"),a=t("../../../../lib/ua");e.exports.handle=function(u){this._seeking=!1;var s=this.tag;s.style.display==="none"&&a.IS_IOS&&setTimeout(function(){o.css(s,"display","block")},100),this.trigger(d.Video.CanPlayThrough)}},{"../../../../lib/dom":37,"../../../../lib/ua":53,"../../event/eventtype":77}],88:[function(t,e,O){e.exports.handle=function(d,o){var a="";d&&d.paramData&&(a=d.paramData),this.trigger(o,a)}},{}],89:[function(t,e,O){var d=t("../../event/eventtype");t("../../../../lang/index"),t("../../../../lib/event"),e.exports.handle=function(o){var a=this;a.waiting=!1,a._ended=!0,a._currentTimeForDisableSeek=0,a.traceLog("video/ended.js","event::ended"),a._monitor2.playFinish(),a.trigger(d.Private.Play_Btn_Show),a.trigger(d.Player.Ended,{playTime:a.getPlayTime()}),a.__disposed||(a._monitor&&a._monitor._onPlayerInit(),a._options.rePlay?(a._monitor&&a._monitor.startHeartBeat(),this._splayer||(a.seek(a._getPlayStartTime()),a.tag.play())):a._options.isLive&&a.trigger(d.Private.H5_Loading_Hide))}},{"../../../../lang/index":28,"../../../../lib/event":38,"../../event/eventtype":77}],90:[function(t,e,O){var d=t("../../event/eventtype"),o=t("../../../../lib/constants"),a=t("../../../../lang/index"),u=(t("../../../../lib/event"),t("../../../../lib/ua")),s=(t("../../../../lib/io"),t("../../../../lib/playerutil")),r="video/error.js";function n(l,c,h){var j=l._options,F=j.source||"";(c=c!==4&&u.IS_IOS&&/qqbrowser/i.test(u.USER_AGENT)?4:c)===4&&s.isHls(F)?s.detectRegionBlock(F,function(f){f?(f={mediaId:j.isLive?"ISLIVE":j.vid||"",error_code:o.ErrorCode.RegionBlock,error_msg:a.get("Error_Region_Block_Text"),diagnosis_info:a.get("Tip_Err_Blocked")},l.logError(f),l.trigger("error",f)):h()}):h()}e.exports.handle=function(l){if((l.target||l.srcElement).error){var c=this;if(c.waiting=!1,c._clearTimeout(),c.checkOnline()&&!c._splayer&&!c._drm){var h,f="",j=l.target||l.srcElement,F=j.error&&j.error.message||"",f="";if(j.error&&j.error.code&&(h=j.error.code,f=o.VideoErrorCode[j.error.code],F=h+" || "+F),c.traceLog(r,"event::error#"+h+"#"+F),c._reportDumpBuffer&&c._reportDumpBuffer(),c._options.isLive)n(c,h,function(){c._options.liveRetry>c._liveRetryCount?c._reloadAndPlayForM3u8():(c._liveRetryCount=0,c.trigger(d.Player.LiveStreamStop),c._liveErrorHandle=setTimeout(function(){var U={mediaId:"ISLIVE",error_code:f,error_msg:F||a.get("Error_Play_Text")+""+a.get("Error_Retry_Text")};c.logError(U),U.display_msg=o.VideoErrorCodeText[h]||U.error_msg,c.trigger("error",U)}),u.IS_UC&&(c._liveErrorHandle=null))});else if(h==3){if(j="",-1<F.indexOf("no decoder found"))j=a.get("Error_No_Decoder_Text");else if(c._nudgeCount=c._nudgeCount||0,c._nudgeCount<5){c._nudgeCount++;var W=+c._nudgeCount,W=c.getCurrentTime()+W;if(c.traceLog(r,"decode error, try to nudge("+c._nudgeCount+"/5) from "+c.getCurrentTime()+" to "+W+"s, duration: "+c.getDuration()+"("+F+")",!0),W<c.getDuration())return void c._loadByUrlInner(c._options.source,W,!0)}else if((function(){var U=!1,M=this.getOptions();{var R;this._fallback||!s.isHls(M.source)||this._options._native||!s.canPlayHls()||this.swPlayer||(U=!0,this._options.useHlsPluginForSafari=!1,this._options._native=!0,this.traceLog(r,"fallback to native player"),R=this.getCurrentTime(),window.Aliplayer&&window.Aliplayer.reloadInstance(this._options,function(K){K._fallback=!0,M.isLive||K.seek(R)},this))}return U}).call(c)||(function(){var U=!1,M=this.getOptions();{var R;!this._fallback&&s.isHls(M.source)&&this._options._native&&s.isSupportHls()&&(U=!0,this._options.useHlsPluginForSafari=!0,this._options._native=!1,this.traceLog(r,"fallback to MSE player"),R=this.getCurrentTime(),window.Aliplayer)&&window.Aliplayer.reloadInstance(this._options,function(K){K._fallback=!0,M.isLive||K.seek(R)},this)}return U}).call(c))return;W={mediaId:c._options.vid||"",error_code:f,error_msg:F},c.logError(W),W.display_msg=o.VideoErrorCodeText[h]+(j?""+j:""),W.diagnosis_info=a.get("Tip_Err_Decode")+"<br />"+a.get("Tip_Err_Common_Short")+F,c.trigger(d.Player.Error,W)}else c._reloadForVod()||n(c,h,function(){var U,M,R;U=a.get("Error_Play_Text"),M=!1,h<3?U=o.VideoErrorCodeText[h]:c._eventState==o.SUSPEND?(U=a.get("Error_Load_Abort_Text"),f=o.ErrorCode.RequestDataError):c._eventState==o.LOAD_START?(U=a.get("Error_Network_Text"),0<c._options.source.indexOf("auth_key")&&(U=U+""+a.get("Error_AuthKey_Text")),f=o.ErrorCode.StartLoadData):c._eventState==o.LOADED_METADATA&&(U=a.get("Error_Play_Text"),f=o.ErrorCode.PlayingError),U=U+""+a.get("Error_Retry_Text"),1<c._urls.length&&c._retrySwitchUrlCount<3&&c._options.source.indexOf(".mpd")==-1&&(c.switchUrl(),M=!0),R={mediaId:c._options.vid||"",error_code:f,error_msg:F},M||(c.logError(R),R.display_msg=U,c.trigger(d.Player.Error,R))})}}else this.traceLog(r,"video.MediaError is null, may be caused by non-video source, like invalid poster ("+(l.target||l.srcElement).poster+")")}},{"../../../../lang/index":28,"../../../../lib/constants":33,"../../../../lib/event":38,"../../../../lib/io":45,"../../../../lib/playerutil":50,"../../../../lib/ua":53,"../../event/eventtype":77}],91:[function(t,e,O){var d=t("../../../../lib/event"),o=t("../../event/eventtype"),a={canplay:t("./canplay"),canplaythrough:t("./canplaythrough"),common:t("./common"),ended:t("./ended"),error:t("./error"),pause:t("./pause"),play:t("./play"),playing:t("./playing"),waiting:t("./waiting"),timeupdate:t("./timeupdate"),manualended:t("./ended"),loadedmetadata:t("./loadedmetadata"),loadeddata:t("./loadeddata"),seeking:t("./seeking"),seeked:t("./seeked"),resize:t("./resize")};e.exports.bind=function(u){u.tag;for(var s in o.Video)s=o.Video[s],((r,n,l)=>{var c=r.tag;d.on(c,n,function(h){l.handle.call(r,h,n),n!=o.Video.Error&&(n==o.Video.ManualEnded&&(n=o.Video.Ended),r.trigger(o.Private.LifeCycleChanged,{type:n,data:h}))})})(u,s,a[s]!==void 0?a[s]:a.common)}},{"../../../../lib/event":38,"../../event/eventtype":77,"./canplay":86,"./canplaythrough":87,"./common":88,"./ended":89,"./error":90,"./loadeddata":92,"./loadedmetadata":93,"./pause":94,"./play":95,"./playing":96,"./resize":97,"./seeked":98,"./seeking":99,"./timeupdate":100,"./waiting":101}],92:[function(t,e,O){var d=t("../../event/eventtype");e.exports.handle=function(o){this.trigger(d.Video.LoadedData),this._monitor2.firstFrame()}},{"../../event/eventtype":77}],93:[function(t,e,O){var d=t("../../event/eventtype");t("../../../../lib/playerutil"),e.exports.handle=function(o){var a=this.tag,u=a.duration<1?0:a.duration;this._getSubVideoConfig().start>u-1&&(console.warn("Params.start ["+this._getSubVideoConfig().start+"] is greater than video.duration ["+u+"] - 1, seeking to 0"),this.setStartEnd(0,this._getSubVideoConfig().end)),this._getWatchTimeConfig().watchStartTime>u-1&&(console.warn("Params.watchStartTime ["+this._getWatchTimeConfig().watchStartTime+"] is greater than video.duration ["+u+"] - 1, seeking to 0"),this.setWatchTime(0,this._getWatchTimeConfig().watchEndTime)),this.trigger(d.Private.ReadyState),this._splayer&&this.trigger(d.Video.DurationChange),this.trigger(d.Video.LoadedMetadata),a.videoWidth&&a.videoHeight||this.trigger(d.Player.VideoUnavailable),this._monitor2.mediaMeta({duration:u,videoWidth:a.videoWidth,videoHeight:a.videoHeight})}},{"../../../../lib/playerutil":50,"../../event/eventtype":77}],94:[function(t,e,O){var d=t("../../event/eventtype"),o=t("../../../../lib/ua");e.exports.handle=function(a){var u=this;u._seeking&&u._splayer||(u._hls&&u._options&&u._options.isLive&&o.IS_FIREFOX&&u.trigger(d.Private.Play_Btn_Show),u._clearTimeout(),u.trigger(d.Private.AutoStreamHide),u.trigger(d.Player.Pause),u._isManualPause&&(u.trigger(d.Private.Play_Btn_Show),u.trigger(d.Private.H5_Loading_Hide),u._monitor2.pause()),u.waiting=!1)}},{"../../../../lib/ua":53,"../../event/eventtype":77}],95:[function(t,e,O){var d=t("../../event/eventtype");e.exports.handle=function(o){this.trigger(d.Private.Error_Hide),this.trigger(d.Private.Cover_Hide),this.trigger(d.Private.AutoStreamHide),this.waiting=!1,this.trigger(d.Player.Play)}},{"../../event/eventtype":77}],96:[function(t,e,O){var d=t("../../event/eventtype");e.exports.handle=function(o){var a,u=this;this.tag.paused||(u.trigger(d.Private.H5_Loading_Hide),u.trigger(d.Private.Cover_Hide),u.trigger(d.Private.Info_Hide),u.waiting=!1,u._ended=!1,u._liveRetryCount=0,u._vodRetryCount=0,u._seeking=!1,a=u.getCurrentTime(),u._waitingReloadTime!=a&&(u._waitingTimeoutCount=0),u._checkTimeoutHandle&&(clearTimeout(u._checkTimeoutHandle),u._checkTimeoutHandle=null),u._waitingLoadedHandle&&(clearTimeout(u._waitingLoadedHandle),u._waitingLoadedHandle=null),u._ucSourceHandle&&(clearTimeout(u._ucSourceHandle),u._ucSourceHandle=null),u._waitingDelayLoadingShowHandle&&(clearTimeout(u._waitingDelayLoadingShowHandle),u._waitingDelayLoadingShowHandle=null),u._waitingTimeoutHandle&&(clearTimeout(u._waitingTimeoutHandle),u._waitingTimeoutHandle=null,u._ccService)&&u._options.isLive&&(a=u._ccService.getCurrentSubtitle(),u._setDefaultCC=!0,a)&&u._ccService.switch(a),u.trigger(d.Private.AutoStreamHide),u.trigger(d.Player.Playing),u.trigger(d.Private.Error_Hide),u.trigger(d.Private.Play_Btn_Hide))}},{"../../event/eventtype":77}],97:[function(t,e,O){var d=t("../../event/eventtype"),o=t("../../../../feature/ratioAdapter");e.exports.handle=function(a){this.trigger(d.Video.Resize);var u=this.getOptions();if(u.autoSize){if(!this._ratioAdapter){if(u.autoSize!==!0&&u.autoSize!=="width"&&u.autoSize!=="height")return void console.warn("Unknown parameter [autoSize]: "+u.autoSize+", only true/height/width are supported");u.autoSize===!0&&(u.autoSize="height"),this._ratioAdapter=new o}this._ratioAdapter.autoResize(this.tag.videoWidth/this.tag.videoHeight,this,u.autoSize)}}},{"../../../../feature/ratioAdapter":26,"../../event/eventtype":77}],98:[function(t,e,O){var d=t("../../event/eventtype");e.exports.handle=function(o){this.trigger(d.Video.Seeked),this._monitor2.seekEnd()}},{"../../event/eventtype":77}],99:[function(t,e,O){var d=t("../../event/eventtype");e.exports.handle=function(o){var a,u,s,r=this.tag,n=(this.getOptions().disableSeek&&(n=r.currentTime-this._currentTimeForDisableSeek,.01<Math.abs(n))&&(r.currentTime=this._currentTimeForDisableSeek),r.currentTime);this._canSeek(n)||(a=this._getWatchTimeConfig(),s=0,(u=this._getSubVideoConfig()).start||u.end?s=n>u.end?u.end:u.start:(a.watchStartTime||a.watchEndTime)&&(s=n>a.watchEndTime?a.watchEndTime:a.watchStartTime),r.currentTime=s),this.trigger(d.Video.Seeking),this._monitor2.seek()}},{"../../event/eventtype":77}],100:[function(t,e,O){var d=t("../../event/eventtype"),o=t("../../../../lib/ua"),a=t("../../../../lib/event"),u=t("../../plugin/status");function s(r){var n=this;r!=null&&r.length&&r.forEach(function(l){n.trigger(d.Player.SeiFrame,l)})}e.exports.handle=function(r){var n=this;if(n._isError||n.trigger(d.Player.TimeUpdate,r.timeStamp),!n.__disposed){n._decodeErrorNudgeTimer||(n._decodeErrorNudgeTimer=setTimeout(function(){n._nudgeCount=0},3e3)),(o.IS_IOS||o.IS_MAC_SAFARI)&&(clearTimeout(n._waitingPatchTimer),n._waitingPatchTimer=setTimeout(function(){n.waiting||n._isError||n.paused()||n._disposed||(console.log("!!!!!!!manually waiting!!!!!!!"),n.trigger(d.Private.PatchWaiting))},3e3));var l,c,h,j=n.getCurrentTime(),r=(n.tag.seeking||(n._currentTimeForDisableSeek=j),n.waiting&&!n._TimeUpdateStamp&&(n._TimeUpdateStamp=j),n.waiting!=0&&n._TimeUpdateStamp==j||j===0||(n.trigger(d.Private.H5_Loading_Hide),n.trigger(d.Private.AutoStreamHide),n._checkTimeoutHandle&&clearTimeout(n._checkTimeoutHandle),n._waitingTimeoutHandle&&clearTimeout(n._waitingTimeoutHandle),n._waitingLoadedHandle&&clearTimeout(n._waitingLoadedHandle),n._ucSourceHandle&&(clearTimeout(n._ucSourceHandle),n._ucSourceHandle=null),n.waiting=!1),o.IS_ANDROID&&o.IS_UC&&(n._timeNotUpdateCount=n._timeNotUpdateCount||0,n.waiting||j!==n._TimeUpdateStamp||(n._timeNotUpdateCount++,2<=n._timeNotUpdateCount&&(n._timeNotUpdateCount=0,n.trigger(d.Private.PatchWaiting)))),n._TimeUpdateStamp=j,n._options.isLive||(l=n.getDuration(),r=!1,c=0,l<j&&!n.paused()?(c=1,r=!0):l-j<.2&&0<=o.browser.version.indexOf("49.")&&!n.paused()?(c=2,r=!0):n.exceedPreviewTime(j)?(c=3,r=!0):j>=n._getWatchTimeConfig().watchEndTime&&(c=4,r=!0,n.pause()),r&&setTimeout(function(){n._ended||(n._splayer||n.paused()||n.pause(),a.trigger(n.tag,d.Video.ManualEnded),n.traceLog&&n.traceLog("video/timeupdate.js","ManualEnded#"+c+"#"+j+"#"+l))},100)),n._player.tag),F=(r&&n._options.isLive&&(n._player.resolution&&0<r.videoWidth&&0<r.videoHeight&&(0<n._player.resolution.width||0<n._player.resolution.height)&&(n._player.resolution.width!==r.videoWidth||n._player.resolution.height!==r.videoHeight)&&(h={oldResolution:{width:n._player.resolution.width,height:n._player.resolution.height},newResolution:{width:r.videoWidth,height:r.videoHeight}},n.trigger(d.Player.ResolutionChange,h)),n._player.resolution.width=r.videoWidth==0?n._player.resolution.width:r.videoWidth,n._player.resolution.height=r.videoHeight==0?n._player.resolution.height:r.videoHeight),o.IS_CHROME&&Number(o.CHROME_VERSION)<50&&(n._playingSlientPause&&(clearTimeout(n._playingSlientPause),n._playingSlientPause=null),n._playingSlientPause=setTimeout(function(){var K,G;n._status!=u.playing||n.paused()||n._drm||n._urls.length||(K=n.getCurrentTime(),G=n._options.isLive?0:K,n._loadByUrlInner(n._options.source,G,K))},3e3)),n._seis||{}),f=Object.keys(F);if(f.length!==0)for(var W=parseInt(1e3*j,10)+300,U=0;U<f.length;U++){var M=f[U];if(!(M<=W))break;s.call(n,F[M]),delete F[M]}}}},{"../../../../lib/event":38,"../../../../lib/ua":53,"../../event/eventtype":77,"../../plugin/status":106}],101:[function(t,e,O){var d=t("../../event/eventtype"),o=t("../../../../lib/constants"),a=t("../../../../lib/event"),u=t("../../../../lang/index"),s=t("../../../../lib/ua"),r=t("../../../../lib/playerutil"),n="video/waiting.js";e.exports.handle=function(l){var c=this;if(c._monitor2.waiting(),!c._options.isLive){var h=this.getCurrentTime(),j=this.getDuration();if(!c._ended&&0<j&&(j-h<.5||j<h))return c.pause(),c._ended=!0,a.trigger(this.tag,d.Video.ManualEnded),void(c.traceLog&&c.traceLog(n,"ManualEnded#"+h+"#"+j))}c.waiting=!0;function F(){c._checkTimeoutHandle&&(clearTimeout(c._checkTimeoutHandle),c._checkTimeoutHandle=null),c._waitingTimeoutHandle&&(clearTimeout(c._waitingTimeoutHandle),c._waitingTimeoutHandle=null),c._waitingLoadedHandle&&(clearTimeout(c._waitingLoadedHandle),c._waitingLoadedHandle=null),c._waitingDelayLoadingShowHandle&&(clearTimeout(c._waitingDelayLoadingShowHandle),c._waitingDelayLoadingShowHandle=null),c._ucSourceHandle&&(clearTimeout(c._ucSourceHandle),c._ucSourceHandle=null)}F(),c._waitingDelayLoadingShowHandle=setTimeout(function(){s.IS_IOS&&c.paused()||c._isError||c.trigger(d.Private.H5_Loading_Show)},1e3*c._options.delayLoadingShow),c._TimeUpdateStamp=null,c._checkTimeoutHandle=setTimeout(function(){c.trigger(d.Private.AutoStreamShow)},1e3*c._options.loadDataTimeout),c.trigger(d.Player.Waiting),c._waitingTimeoutHandle=setTimeout(function(){var f;c.tag&&c._options&&(c.pause(),f={mediaId:c._options.vid||"",error_code:o.ErrorCode.LoadingTimeout,error_msg:u.get("Error_Waiting_Timeout_Text")},c.logError(f),c.trigger("error",f))},1e3*c._options.waitingTimeout),h=c._options,h.disableLiveHalfRetry&&h.isLive||h.disableVodHalfRetry&&!h.isLive||(c._waitingLoadedHandle=setTimeout(function(){var f=c.getCurrentTime();c._waitingTimeoutCount==0&&f!=c._waitingReloadTime&&(c.traceLog(n,"half-retry::"+c._options.waitingTimeout/2),c._waitingTimeoutCount=1,c._waitingReloadTime=f,f=c._options.isLive?0:f,c._loadByUrlInner(c._options.source,f,!0))},c._options.waitingTimeout/2*1e3)),s.IS_ANDROID&&s.IS_DINGTALK&&(c._ucSourceHandle=setTimeout(function(){r.detectRegionBlock(c._options.source,function(f){f&&(f={mediaId:c._options.vid,error_code:o.ErrorCode.RegionBlock,error_msg:u.get("Error_Region_Block_Text"),diagnosis_info:u.get("Tip_Err_Blocked")},c.logError(f),c.trigger("error",f))})},5e3)),c.on("error",function(){F()})}},{"../../../../lang/index":28,"../../../../lib/constants":33,"../../../../lib/event":38,"../../../../lib/playerutil":50,"../../../../lib/ua":53,"../../event/eventtype":77}],102:[function(t,e,O){(function(d){(function(){var o=typeof Promise>"u"?t("es6-promise").Promise:Promise,a=t("../../ui/component"),u=t("../../lib/object"),s=t("../../lib/dom"),r=t("../../lib/event"),n=t("../../ui/exports"),l=t("../../monitor/monitor"),c=t("../../lib/ua"),h=t("../../lib/constants"),j=t("../../lib/playerutil"),F=t("../../lib/util"),f=t("./x5play"),W=t("../../lib/cookie"),U=t("../../lang/index"),M=t("../../feature/autoplaydelay"),R=t("./event/eventmanager"),K=t("../../ui/component/cover"),G=t("../../feature/license"),X=t("../../ui/component/text-track-display"),z=t("../../ui/component/press-fast-forward"),te=t("../../ui/component/double-click-skip"),ee=t("../../commonui/autostreamselector"),Y=t("./event/eventtype"),ie=t("./plugin/lifecyclemanager"),ae=t("../service/export"),de=t("../../ui/component/progressmarker"),ce=t("../../feature/keyboardControl"),ge=t("../../feature/AntiRecord"),he=t("../../lib/vttnext/index"),se=t("../../lib/codec-probe"),Z=t("../splayer/splayerinjector"),oe=t("../../ui/component/util").throttle,re=t("../../feature/ratioAdapter"),Te=t("../../feature/logoManager"),Ce=t("../../monitor-new/monitor"),ke="base/player.js",ye=a.extend({init:function(J,fe){var Ee;function Ie(Me){var Oe,we=this;d==="dev"||window.location.protocol==="file:"||window.location.protocol==="resource:"||-1<window.location.href.indexOf("resource://")||this._licenseHasResult||(this._licenseHasResult=!0,fe.license&&fe.license.key&&fe.license.domain?(Me.paramData.renderType!=="native"&&(Me=Me.paramData.codecTag,j.isH265Codec(Me)?Oe=h.FEATURE_ID_H265:j.isH266Codec(Me)&&(Oe=h.FEATURE_ID_H266)),G.getLicense(fe.license.domain,fe.license.key,fe.env==="SEA"?"ap-southeast-1":"cn-shanghai").then(function(Le){var ve=Le.validate(h.PLAYER_SDK_CODE_LEGACY,Oe),Le=Le.validate(h.PLAYER_SDK_CODE,Oe),Ne=ve===0||Le===0;if(Ne||console.log(h.PLAYER_SDK_CODE_LEGACY,ve,h.PLAYER_SDK_CODE,Le),Ne)we.trigger(Y.Private.LicenseHasResult,{result:h.LicenseResultCode.Success,featureId:Oe});else{if(ve===2||Le===2)return o.reject(h.LicenseResultCode.Expired);{if(ve===1&&Le===1)return o.reject(h.LicenseResultCode.NotFound);console.error("license validate unknown error")}}}).catch(function(ue){var ve=String(ue).split("#"),ve=(ue=Number(ve[0]),ve[1]);we.trigger(Y.Private.LicenseHasResult,{result:ue,errorCode:ve,featureId:Oe}),G.logError(ue)})):(console.error(U.get("Tip_License_Required")+": https://help.aliyun.com/zh/vod/developer-reference/license-authorization-and-management#13133fa053843"),console.error(U.get("Tip_License_Params")+": https://help.aliyun.com/zh/vod/developer-reference/integration#387d8a4c094im"),this.trigger(Y.Private.LicenseHasResult,{result:h.LicenseResultCode.LicenseKeyInvalid})))}this.tag=J,this.loaded=!1,this.played=!1,this.oncePlayed=!1,this.waiting=!1,this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._isError=!1,this._isHls=!1,this._liveRetryCount=0,this._liveRetryTimer=null,this._flvDumpTimer=null,this._vodRetryCount=0,this._nudgeCount=0,this._seeking=!1,this._serverRequestId=0,this._waitingTimeoutCount=0,this._waitingReloadTime=0,this._created=!1,this._enteredProgressMarker=!1,this._liveShiftSeekStartTime=0,this._seis={},this._initPTS=0,this.isMutiLevel=!1,this._antiRecord=null,this._ratioAdapter=null,this._logoManager=null,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0,this._loadByUrlStartTime=0,this._posOffset=0,this._onceLogged=!1,this._licenseHasResult=!1,this.__disposed=!1,this.resolution={width:0,height:0},fe.skinLayout===void 0&&(fe.skinLayout=j.getDefaultH5Layout()),(J=fe.skinLayoutIgnore)!=null&&J.length&&(fe.skinLayout=j.ignoreSkinLayouts(fe.skinLayout,fe.skinLayoutIgnore)),j.isRts(fe.source)&&!fe.autoplay&&(fe.preload=!1),fe.env==="SEA"&&(fe.logReportTo="https://videocloud-sgp.ap-southeast-1.log.aliyuncs.com/logstores/newplayer/track",fe.disableDumpBuffer=!0),a.call(this,this,fe),this.addClass("prism-player"),fe.plugins&&u.each(fe.plugins,function(Me,Oe){this[Me](Oe)},this),this._createService(),this.UI={},fe.useNativeControls?this.tag.setAttribute("controls","controls"):(this.UI=n,fe.errorDisplay==0&&(this.UI.errorDisplay=void 0)),fe.disablePip&&this.tag.setAttribute("disablePictureInPicture","true"),this._handleLongPress(fe),this._handleClickPause_dbClickFullscreen(fe),this.initChildren(),this._options.trackLog&&(this._monitor=new l(this,{video_id:0,album_id:0,from:this._options.from,source:this._options.source,logBatched:this._options.logBatched,logReportTo:this._options.logReportTo},this._options.trackLog)),this._monitor2=new Ce(this,fe),R.onAll(this),this.trigger(Y.Private.Create,fe._userOptions),this._options.preventRecord&&(this._antiRecord=new ge({player:this}),this._antiRecord.start()),this._lifeCycleManager=new ie(this),this._overrideNativePlay(),this._liveshiftService&&!this._liveshiftService.validate()?(J={mediaId:this._options.vid||"",error_code:h.ErrorCode.InvalidParameter,error_msg:U.get("ShiftLiveTime_Error")},this.trigger(Y.Player.Error,J)):(this._posOffset=this._getSubVideoConfig().start||0,this._options.extraInfo&&(J=this._options.extraInfo).liveRetry&&(this._options.liveRetry=J.liveRetry),this.on(Y.Private.ReadyState,function(){this.trigger(Y.Player.Ready)}),this.on(Y.Player.H265PlayInfo,Ie),this.on(Y.Player.H266PlayInfo,Ie),this.one(Y.Player.CanPlay,Ie),this.on(Y.Private.LicenseHasResult,function(Le){var Oe=this,Le=Le.paramData||{},we=Le.result,ue=Le.errorCode,ve=Le.featureId,Le=h.LicenseResultCode,Ne="";switch(we){case Le.LicenseKeyInvalid:case Le.DomainInvalid:Ne=U.get(h.LicenseErrorKey.Empty);break;case Le.NotFound:var Ne=U.get(h.LicenseErrorKey.Unauthorized),Ue="";ve===h.FEATURE_ID_H265&&(Ue="H265"),ve===h.FEATURE_ID_H266&&(Ue="H266"),console.error(U.get("Tip_License_Feature"),Ue);break;case Le.Expired:Ne=U.get(h.LicenseErrorKey.Expired);break;case Le.CertInvalid:-1<["E003","E005","E006"].indexOf(ue)?(Ne=U.get(h.LicenseErrorKey.LicenseKeyInvalid)+"("+ue+")",console.error(U.get("Tip_License_Check"))):ue==="E008"?(Ne=U.get(h.LicenseErrorKey.DomainInvalid)+"("+ue+")",console.error(U.get("Tip_License_Domain"))):ue==="E010"&&(Ne=U.get(h.LicenseErrorKey.NotFound)+"("+ue+")",console.error(U.get("Tip_License_Check")))}Ne&&(console.error(U.get("Tip_License_Reason")+" "+Ne),setTimeout(function(){Oe.trigger(Y.Player.Error,{mediaId:Oe._options.vid||"",error_code:h.ErrorCode.LicenseError,display_msg:U.get("Error_Play_Text")+" (LICENSE ERROR)",error_msg:Ne}),Oe.tag.pause(),Oe.trigger(Y.Private.HideUnmuteButton),R.offAll(Oe),Oe.tag&&Oe.tag.parentNode&&Oe.tag.parentNode.removeChild(Oe.tag),Oe.play=function(){},Oe.loadByUrl=function(){}}))}),this._thumbnailService&&this._options.thumbnailUrl&&this._thumbnailService.get(this._options.thumbnailUrl),0<this._options.progressMarkers.length&&this.trigger(Y.Private.ProgressMarkerLoaded,this._options.progressMarkers),this._options.source&&this._options._native&&this._executeReadyCallback(),this._options.autoplay||this._options.preload?this.trigger(Y.Private.H5_Loading_Show):this.trigger(Y.Private.Play_Btn_Show),this._extraMultiSources(),this._options.source&&(this.trigger(Y.Private.PREPARE,"custom"),this._options.autoPlayDelay?(this._autoPlayDelay=new M(this),(Ee=this)._autoPlayDelay.handle(function(){Ee.initPlay()})):this.initPlay()),this._options.ratio&&(this._options.autoSize?console.warn("The parameter [ratio] will be ignored when [autoSize] is set."):(this._options.height&&console.warn("The parameter [height] will be ignored when [ratio] is set."),this._ratioAdapter=new re,this._ratioAdapter.autoResize(this._options.ratio,this))),ce.init.call(this),(J=this._options.logo)!=null&&J.length&&(this._logoManager=new Te({container:this.el(),video:this.tag,logo:this._options.logo})),this._vttBroker=new he({player:this}),this._getUserTextTracks())}});ye.prototype.isSupportMSE=function(){return j.isSupportMSE()},ye.prototype.initPlay=function(J){this._initPlayBehavior(J,this._options.source)},ye.prototype.initChildren=function(){var J=this.options(),fe=J.skinLayout;if(fe!==!1&&!u.isArray(fe))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");fe!==!1&&fe.length!==0&&(this.options({children:fe}),a.prototype.initChildren.call(this)),this.UI.cover=K,J.className="",this.addChild("cover",J),this.UI.autoStreamSelector=ee,this.addChild("autoStreamSelector",J),this.UI.progressMarker=de,this.addChild("progressMarker",J),this.UI.textTrackDisplay=X,this.addChild("textTrackDisplay",J),J.longPressFastForward&&(this.UI.pressFastForward=z,this.addChild("pressFastForward",{name:"pressFastForward",align:"free"})),j.enableDbClickSkip(J)&&(this.UI.doubleClickSkip=te,this.addChild("doubleClickSkip",{name:"doubleClickSkip",align:"free"})),this.trigger(Y.Private.UiH5Ready)},ye.prototype.createEl=function(){var J=!1,fe=(this.tag.tagName!=="VIDEO"?(this._el=this.tag,this.tag=a.prototype.createEl.call(this,"video"),this._options.playsinline&&(this.tag.setAttribute("webkit-playsinline",""),this.tag.setAttribute("playsinline",""),this.tag.setAttribute("x-webkit-airplay",""),this.tag.setAttribute("x5-playsinline",""))):(J=!0,this._el=this.tag.parentNode),this._el),Ee=this.tag,Ie=(this._options.enableSystemMenu||(Ee.addEventListener?Ee.addEventListener("contextmenu",function(Me){Me.preventDefault()},!1):Ee.attachEvent("oncontextmenu",function(){window.event.returnValue=!1})),Ee.player=this,s.getElementAttributes(Ee));return u.each(Ie,function(Me){fe.setAttribute(Me,Ie[Me])}),this.setVideoAttrs(),J||(Ee.parentNode&&Ee.parentNode.insertBefore(fe,Ee),s.insertFirst(Ee,fe)),fe},ye.prototype.setVideoAttrs=function(){var J=this._options.preload,fe=this._options.autoplay;if(this.tag.style.width=this._options.videoWidth||"100%",this.tag.style.height=this._options.videoHeight||"100%",J&&this.tag.setAttribute("preload","preload"),fe&&c.IOS_VERSION!=="15"&&this.tag.setAttribute("autoplay","autoplay"),c.IS_IOS&&this.tag.setAttribute("poster","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAMZJREFUeAHt0DEBAAAAwqD1T20LL4hAYcCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMDAc2CcpAABaODCqQAAAABJRU5ErkJggg=="),(c.IS_UC||c.dingTalk()||c.IS_QUARK)&&this.tag.setAttribute("renderer","standard"),this._options.extraInfo)for(var Ee in this._options.extraInfo)c.IS_OPPO&&Ee==="crossOrigin"||this.tag.setAttribute(Ee,this._options.extraInfo[Ee]);f.adaptX5Play(this)},ye.prototype.checkOnline=function(){var J;return!(this._options&&!this._options.debug&&navigator.onLine==0&&((J={mediaId:this._options.vid||"",error_code:h.ErrorCode.NetworkUnavaiable,error_msg:U.get("Error_Offline_Text")}).display_msg=U.get("Error_Offline_Text"),this.trigger(Y.Player.Error,J),1))},ye.prototype.id=function(){return this.el().id},ye.prototype.renderUI=function(){},ye.prototype.switchUrl=function(){var J,fe;this.traceLog(ke,"switchUrl"),this._urls.length!=0&&(this._currentPlayIndex=this._currentPlayIndex+1,this._urls.length<=this._currentPlayIndex&&(this._currentPlayIndex=0,this._retrySwitchUrlCount++),J=this._urls[this._currentPlayIndex],W.set(h.SelectedStreamLevel,J.definition,365),this.trigger(Y.Private.QualityChange,U.get("Quality_Change_Fail_Switch_Text")),fe=this.getCurrentTime(),this._vodRetryCount=0,this._originalSource="",this._loadByUrlInner(J.Url,fe,!0))},ye.prototype.setControls=function(){var J=this.options();J.useNativeControls?this.tag.setAttribute("controls","controls"):typeof J.controls=="object"&&(J=this._initControlBar(J.controls),this.addChild(J))},ye.prototype.enableClickPause=function(){this._clickPauseEnabled=!0},ye.prototype.disableClickPause=function(){this._clickPauseEnabled=!1},ye.prototype._initControlBar=function(J){return new ControlBar(this,J)},ye.prototype.getMetaData=function(){},ye.prototype.getReadyTime=function(){return this.readyTime},ye.prototype.readyState=function(){return this.tag.readyState},ye.prototype.getError=function(){return this.tag.error},ye.prototype.getRecentOccuredEvent=function(){return this._eventState},ye.prototype.getSourceUrl=function(){return this._options?this._options.source:""},ye.prototype.getMonitorInfo=function(){return this._monitor?this._monitor.opt:{}},ye.prototype.getCurrentQuality=function(){var J;return 0<this._urls.length?{width:(J=this._urls[this._currentPlayIndex]).width,url:J.Url,definition:J.definition}:""},ye.prototype.getCurrentPDT=function(){var J;if((c.IS_SAFARI||c.IS_IOS)&&this.tag)return J=Date.parse(this.tag.getStartDate()),isNaN(J)?0:J+1e3*this.getCurrentTime()},ye.prototype.stopPlayTimeMonitor=function(){this._playTimeMonitorTimer&&(clearInterval(this._playTimeMonitorTimer),this._playTimeMonitorTimer=null)},ye.prototype.startPlayTimeMonitor=function(){var J=this,fe=(this._playingTime=0,this._stuckTime=0,this._stuckCount=0,performance.now()),Ee=0,Ie=0,Me=!1,Oe=0;this.stopPlayTimeMonitor(),this._playTimeMonitorTimer=setInterval(function(){var we=J.paused()?Me=!0:!J.tag,ue=1e3*J.getCurrentTime(),ve=(ue<1e3&&(we=!0),ue>=1e3*J.tag.duration-1e3&&(we=!0),performance.now()),Le=ve-fe,Ne=(fe=ve,(ue-Ee)/J.tag.playbackRate);Ee=ue,Ne<0&&(we=!0),(ue=J._monitor)!=null&&ue.canplayReported||(we=!0),J._monitor2.firstFrameTime||(we=!0),(we=document.visibilityState==="hidden"?!0:we)||(Me?Me=!1:Ne<.8*Le?(Le<ve-Ie&&(J._stuckCount++,Oe=ve),ve-Oe>=1e3*J.getOptions().waitingTimeout?J.stopPlayTimeMonitor():(Ie=ve,J._playingTime+=Ne,J._stuckTime+=Le-Ne)):J._playingTime+=Le)},1e3)},ye.prototype.setSpeed=function(J,fe){fe===void 0&&(fe=!0),this.tag&&(this._originalPlaybackRate=J,this.tag.playbackRate=J,fe)&&this.trigger(Y.Private.PlaybackRateChanged,J)},ye.prototype.play=function(J){return this.traceLog(ke,"play::"+J),J&&(this.trigger(Y.Private.ManualPlay),this._monitor2.manualPlay()),this.tag&&(this.tag.ended||this._ended?this.replay():((this._options.preload||this.loaded)&&this.tag.src||this._initLoad(this._options.source),this.trigger(Y.Private.Cover_Hide),this.tag.play())),this._isManualPlay=J||!1,this},ye.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this.seek(this._getPlayStartTime()),this.tag.play(),this},ye.prototype._getPlayStartTime=function(){return Math.max(0,this._getWatchTimeConfig().watchStartTime||0,this._loadByUrlStartTime||0)},ye.prototype._getWatchTimeConfig=function(){var Ie=this.getOptions(),J=Ie.start,fe=Ie.end,Ee=Ie.watchStartTime,Ie=Ie.watchEndTime,Ee=Number(Ee),Ie=Number(Ie);return(Ee||Ie)&&(j.hasValue(J)||j.hasValue(fe))?(this._logOnce("Params.watchStartTime and Params.watchEndTime will be ignored when Params.start or Params.end is set","warn"),{watchStartTime:void 0,watchEndTime:void 0}):(Ie=Ie||void 0,(Ee=Ee||void 0)<0&&(this._logOnce("Params.watchStartTime is less than 0 ["+Ee+"], setting to undefined","warn"),Ee=void 0),Ie<0&&(this._logOnce("Params.watchEndTime is less than 0 ["+Ie+"], setting to undefined","warn"),Ie=void 0),Ie<=Ee&&(this._logOnce("Params.watchEndTime("+Ie+") is less than Params.watchStartTime("+Ee+"), setting to [undefined, "+Ie+"]","warn"),Ee=void 0),{watchStartTime:Ee,watchEndTime:Ie})},ye.prototype._getSubVideoConfig=function(){var J=this.getOptions(),fe=J.start,J=J.end,fe=Number(fe);return J=(J=Number(J))||void 0,(fe=fe||void 0)<0&&(this._logOnce("Params.start is less than 0 ["+fe+"], setting to undefined","warn"),fe=void 0),J<0&&(this._logOnce("Params.end is less than 0 ["+J+"], setting to undefined","warn"),J=void 0),J<=fe&&(this._logOnce("Params.start("+fe+") is greater than Params.end("+J+"), setting to [undefined, "+J+"]","warn"),fe=void 0),{start:fe,end:J}},ye.prototype.pause=function(J){return this.tag&&this.tag.pause(),this._isManualPause=J||!1,this},ye.prototype.stop=function(){return this.traceLog(ke,"stop"),this.tag.setAttribute("src",null),this},ye.prototype.paused=function(){if(this.tag)return this.tag.paused!==!1},ye.prototype.getDuration=function(){var J=0,Ee=(this.tag&&(J=this.isPreview()&&this._vodDuration||this.tag.duration),this._getSubVideoConfig()),fe=Ee.start,Ee=Ee.end;return J=fe||Ee?Math.min(this.tag.duration,Ee||this.tag.duration)-Math.max(0,fe||0):J},ye.prototype.getDisplayDuration=function(){var J=0,Ee=(this.tag&&(J=this._vodDuration||this.getDuration()),this._getSubVideoConfig()),fe=Ee.start,Ee=Ee.end;return J=fe||Ee?Math.min(this.tag.duration,Ee||this.tag.duration)-Math.max(0,fe||0):J},ye.prototype.getCurrentTime=function(){return this.tag?this.tag.currentTime-this._posOffset:0},ye.prototype.seek=function(J){var fe;if(!Number.isNaN(J)&&(J=Number(J),J+=this._posOffset,this._canSeek(J)))return this._ended=!1,fe=this.tag.duration,this._doSeek(this,J=fe<=J?fe:J),this},ye.prototype._doSeek=oe(function(Ee){var fe=Ee[0],Ee=Ee[1];try{var Ie=fe._originalPlaybackRate||fe.tag.playbackRate;["16"].indexOf(c.IOS_VERSION)!==-1&&!fe.oncePlayed||(fe.tag.currentTime=Ee),fe._seeking=!0,fe.traceLog(ke,"doSeek::"+Ee),c.IS_IE11&&setTimeout(function(){fe.tag&&(fe.tag.playbackRate=Ie)})}catch(Me){console.log(Me)}},100),ye.prototype.traceLog=function(J,fe,Ee){J="["+J+"]"+fe,this.trigger(Y.Private.TraceLog,J),Ee&&this._monitor2.traceLog(J)},ye.prototype._loadByUrlInner=function(J,fe,Ee){this.loadByUrl(J,fe,Ee,!0)},ye.prototype.loadByUrl=function(J,fe,Ee,Ie){var Me,Oe=this,we=(this.traceLog(ke,"loadByUrl::"+J+"#"+fe+"#"+Ee+"#"+Ie),this._monitor&&this._monitor._onPlayerUnderload(),this._monitor&&!Ie&&(this._monitor.reportPlayAbort("loadByUrl"),this._monitor.resetVV()),Ie||this._monitor2.playAbort("loadByUrl",(Me=J,(we=fe)&&(Me+="#sec-"+we),(we=Ee)&&(Me+="#atp-"+we),Me)),/\.m3u8|\.flv|\.mp4|artc\:\/\/|rtmp\:\/\//gi),ue=((this._options.source||"").match(we)||[])[0]!==((J||"").match(we)||[])[0];if(this._options.liveShiftSource&&(ue=!1),this._options.enableH266&&(ue=!1),this._h265InfoReported=!1,this._probeInfo||(this._probeInfo={}),this._probeInfo.codecTag=void 0,!ue&&(j.isMp4(J)||j.isFlv(J)||j.isHls(J)))return this._options.forceH265||this._options.forceH266||!this._options.enableH265&&!this._options.enableH266||c.IS_ANDROID&&c.dingTalk()&&!j.isFlv(J)?void ve.call(this):void se(J,this._options,function(Ne){var Ne=j.getVideoTrack(Ne.tracks),Ue=(Ne||{}).codecTag||((Ue=(Ne||{}).codec)==null?void 0:Ue.split(".")[0]);Oe._probeInfo.codecTag=Ue,Ne&&j.isH265Codec(Ue)?j.isFlv(J)||j.isHls(J)?(Oe._splayer||(ue=!0),ve.call(Oe)):j.shouldUseBasePlayer({codecTag:Ue,url:J},function($e){$e?(Oe._splayer&&(ue=!0),Oe._probeInfo.codecTag&&Z.reportH265PlayInfo.call(Oe,{renderType:"native",codecTag:Oe._probeInfo.codecTag})):Oe._splayer||(ue=!0),ve.call(Oe)}):(Ne&&j.isH266Codec(Ue)?Oe._splayer||(ue=!0):Oe._splayer&&(ue=!0),ve.call(Oe))},function(Le){ve.call(Oe)});function ve(){var Le,Ne=this;ue&&window.Aliplayer?(console.log("[RELOAD INSTANCE]"),this.traceLog(ke,"reloadInstance::"+J),this._options.source=J,window.Aliplayer.reloadInstance(this._options,function(){},this)):(Ie||(this._urls=[]),this._monitor&&!Ie&&(this._monitor.reset(),this._monitor.startHeartBeat()),this._isError=!1,this._clearTimeout(),this.trigger(Y.Private.Error_Hide),this._options.source=J,this._posOffset=this._getSubVideoConfig().start||0,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:J,from:this._options.from}),Ie||(this.trigger(Y.Private.ChangeURL),this._vodRetryCount=0),fe&&this._canSeek(fe)?this._loadByUrlStartTime=fe-this._posOffset:this._loadByUrlStartTime=0,this._options._autoplay=Ee,this.initPlay(Ee),(Le=this._options.autoplay||Ee)&&this.trigger(Y.Private.Cover_Hide),Le?this.trigger(Y.Player.Play):this.trigger(Y.Player.Pause),this._options.isLive||!fe&&fe!=0||isNaN(fe)||r.one(this.tag,Y.Video.CanPlay,function(Ue){Le&&(c.IS_IOS||c.IS_MAC_SAFARI)&&Ne._splayer&&Ne.play()}))}ve.call(this)},ye.prototype.setLogo=function(J){this._logoManager&&this._logoManager.dispose(),this._logoManager=new Te({container:this.el(),video:this.tag,logo:J})},ye.prototype.dispose=function(){this.__disposed||(this.__disposed=!0,this.trigger(Y.Private.Dispose),this.tag.pause(),R.offAll(this),ce.dispose.call(this),this._ratioAdapter&&(this._ratioAdapter.dispose(),this._ratioAdapter=null),this._logoManager&&(this._logoManager.dispose(),this._logoManager=null),this._antiRecord&&(this._antiRecord.dispose(),this._antiRecord=null),this._monitor&&(this._monitor.reportPlayAbort("dispose"),this._monitor.removeEvent(),this._monitor=null),this._monitor2.playAbort("dispose"),this._monitor2.destroy(),this._monitor2=void 0,this._autoPlayDelay&&this._autoPlayDelay.dispose(),this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._playingSlientPause&&(clearTimeout(this._playingSlientPause),this._playingSlientPause=null),this._waitingLoadedHandle&&(clearTimeout(this._waitingLoadedHandle),this._waitingLoadedHandle=null),this._ucSourceHandle&&(clearTimeout(this._ucSourceHandle),this._ucSourceHandle=null),this._readyStateTimer&&(clearInterval(this._readyStateTimer),this._readyStateTimer=null),this._vodRetryCountHandle&&(clearTimeout(this._vodRetryCountHandle),this._vodRetryCountHandle=null),this._waitingDelayLoadingShowHandle&&(clearTimeout(this._waitingDelayLoadingShowHandle),this._waitingDelayLoadingShowHandle=null),this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this.stopPlayTimeMonitor(),this._disposeService(),this._clearLiveErrorHandle(),this._el.innerHTML="",this.destroy(),this._releaseMediaElement(),this._options.recreatePlayer=null,this._options=null,this.isMutiLevel=!1,this._seis={},this._initPTS=0,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0,this._posOffset=0,this._onceLogged=!1)},ye.prototype._releaseMediaElement=function(){this.tag.removeAttribute("src"),this.tag.load(),this.tag=null},ye.prototype.mute=function(J){return this._muteInner(),this._originalVolumn=this.tag.volume,J||(J=U.get("Volume_Mute"),this._player.trigger(Y.Private.Info_Show,{text:J,duration:1e3,align:"lb"})),this._setInnerVolume(0),this},ye.prototype._muteInner=function(){this.tag.muted=!0,this.trigger(Y.Private.VolumnChanged,-1)},ye.prototype.unMute=function(J){return this._unMuteInner(),J||(J=U.get("Volume_UnMute"),this._player.trigger(Y.Private.Info_Show,{text:J,duration:1e3,align:"lb"})),this._setInnerVolume(this._originalVolumn||.5),this},ye.prototype._unMuteInner=function(){this.tag.muted=!1,this.getOptions().mute&&(this.getOptions().mute=!1),this.trigger(Y.Private.VolumnChanged,-2)},ye.prototype.muted=function(){return this.tag&&this.tag.muted},ye.prototype.getVolume=function(){return this.tag&&this.tag.volume},ye.prototype.getOptions=function(){return this._options},ye.prototype.setVolume=function(J,fe){(J=Math.min(1,Math.max(0,J)))!=0?this._unMuteInner():J==0&&this._muteInner(),this._setInnerVolume(J),J=U.get("Curent_Volume")+"<span>"+(100*J).toFixed()+"%</span>",this._player.trigger(Y.Private.Info_Show,{text:J,duration:1e3,align:"lb"})},ye.prototype._setInnerVolume=function(J){this.tag.volume=J,this.trigger(Y.Private.VolumnChanged,J)},ye.prototype.hideProgress=function(){this.trigger(Y.Private.HideProgress)},ye.prototype.cancelHideProgress=function(){this.trigger(Y.Private.CancelHideProgress)},ye.prototype.setPlayerSize=function(J,fe){this._el&&(this._el.style.width=J,this._el.style.height=fe)},ye.prototype.getBuffered=function(){return this.tag.buffered},ye.prototype.setRotate=function(J){this.tag&&(this._rotate=J,this._setTransform(),this.log("ROTATE",{rotation:J}))},ye.prototype.getRotate=function(J){return this._rotate===void 0?0:this._rotate},ye.prototype.setImage=function(J){this.tag&&(this._image=J,this._setTransform(),this.log("IMAGE",{mirror:J=="horizon"?2:1,text:J}))},ye.prototype.getImage=function(){return this._image},ye.prototype.cancelImage=function(){this.tag&&(this._image="",this._setTransform(),this.log("IMAGE",{mirror:0}))},ye.prototype.setCover=function(J){var fe=document.querySelector("#"+this.id()+" .prism-cover");fe&&J&&(fe.style.backgroundImage="url("+J+")",this._options.cover=J,this._options.autoplay||this.trigger(Y.Private.Cover_Show))},ye.prototype.setTextTracks=function(J){this._options.textTracks=J,J=j.unqiueTextTracks(J||[]),this.trigger(Y.Private.VttClearTracks),J&&J.length&&this.trigger(Y.Private.TextTrackFounded,{from:"user",textTracks:J}),this.trigger(Y.Private.CCReset)},ye.prototype._setTransform=function(){this._transformProp||(this._transformProp=s.getTransformName(this.tag));var J=" translate(-50%, -50%)";this._rotate&&(J+=" rotate("+this._rotate+"deg)"),this._image&&(this._image=="vertical"?J+=" scaleY(-1)":this._image=="horizon"&&(J+=" scaleX(-1)")),this.tag.style[this._transformProp]=J},ye.prototype._startPlay=function(){this.tag.paused&&this.tag.play()},ye.prototype._initPlayBehavior=function(J,fe){var Ee=this;return!this._checkSupportVideoType()&&(j.validateSource(fe)?(J===void 0&&(J=!1),this._created||(this._created=!0,this.trigger(Y.Private.Created)),this.loaded||this.trigger(Y.Player.Init),this._options.mute&&this.mute(!0),this.one(Y.Video.CanPlay,function(){var Ie=Ee._getPlayStartTime();Ee.getCurrentTime()<Ie&&Ee.seek(Ie),Ee._loadByUrlStartTime=0,Ee.tag.playbackRate!==1&&Ee.setSpeed(Ee.tag.playbackRate)}),this._options.autoplay||this._options._autoplay||this._options.preload||J?(this._options._preload=!0,this._initLoad(fe),!this._options.autoplay&&!this._options._autoplay||this._isError||this._dash||this._startPlay()):this.trigger(Y.Private.Play_Btn_Show),!0):((J={mediaId:this._options.vid||"",error_code:h.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=U.get("Error_Invalidate_Source"),this.trigger(Y.Player.Error,J),!1))},ye.prototype._isPreload=function(){return this._options.autoplay||this._options.preload||this._options._preload},ye.prototype._initLoad=function(J){J&&(this._isPreload()&&!c.IS_MOBILE?this.trigger(Y.Private.H5_Loading_Show):(this.trigger(Y.Private.H5_Loading_Hide),this.trigger(Y.Private.Play_Btn_Show)),this.tag.setAttribute("src",J),this.oncePlayed=!1,this.loaded=!0)},ye.prototype._clearLiveErrorHandle=function(){this._liveErrorHandle&&(clearTimeout(this._liveErrorHandle),this._liveErrorHandle=null)},ye.prototype._reloadAndPlayForM3u8=function(){this._liveRetryCount==0&&this.trigger(Y.Player.OnM3u8Retry);var J=this._options,fe=J.liveRetryInterval+J.liveRetryStep*this._liveRetryCount,Ee=this;this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this.traceLog(ke,"reloadAndPlayForM3u8::#"+Ee._options.source+"#"+1e3*fe),this._liveRetryTimer=setTimeout(function(){Ee._liveRetryCount++,Ee._loadByUrlInner(Ee._options.source,void 0,J.autoplay)},1e3*fe)},ye.prototype._checkSupportVideoType=function(){var J,fe=this,Ee=this._options.source,Ie="";if(j.isRTMP(Ee)&&!this._options.useFlashPrism)Ie=U.get("Error_Not_Support_RTMP");else if(j.isDash(Ee)&&!j.isSupportMSE())Ie=U.get("Error_Not_Support_Mse_Dash");else if(!this.tag.canPlayType||!this._options.source||!c.IS_MOBILE)return"";return 0<Ee.indexOf("m3u8")?this.tag.canPlayType("application/x-mpegURL")!=""||j.isSupportHls()||(Ie=U.get("Error_Not_Support_M3U8_Text")):0<Ee.indexOf("mp4")?this.tag.canPlayType("video/mp4")==""&&(Ie=U.get("Error_Not_Support_MP4_Text")):(j.isRTMP(Ee)||j.isFlv(Ee))&&c.IS_MOBILE&&(this._options.useFlvPlugOnMobile?j.isSupportFlv()||(Ie=U.get("Error_Not_Support_Mse_Flv")):Ie=U.get("Error_Not_Support_Format_On_Mobile")),Ie&&(Ee=j.getFormat(Ee),J={mediaId:this._options.vid||"",error_code:h.ErrorCode.FormatNotSupport,error_msg:Ie+(Ee?"(format:"+Ee+")":"")},this.logError(J),J.display_msg=Ie,setTimeout(function(){fe.trigger(Y.Player.Error,J)})),Ie},ye.prototype._handleLongPress=function(J,fe){var Ee,Ie,Me=this;function Oe(){Ie?(clearTimeout(Ie),Ie=null):r.trigger(fe,"longPressEnd")}J.longPressFastForward&&(fe=fe||this.tag,r.on(fe,"longPress",function(){Me.trigger(Y.Private.FastForwardShow),Ee=Me.tag.playbackRate,Me.tag.playbackRate=2}),r.on(fe,"longPressEnd",function(){Me.trigger(Y.Private.FastForwardHide),Me.tag.playbackRate=Ee}),Ie=null,r.on(fe,"touchstart",function(){Ie&&clearTimeout(Ie),Ie=setTimeout(function(){Ie=null,r.trigger(fe,"longPress")},500)}),r.on(fe,"touchend",Oe),r.on(fe,"touchcancel",Oe))},ye.prototype._handleClickPause_dbClickFullscreen=function(J,fe){var Ee,Ie,Me,Oe=this,we=null;!J.isLive&&J.clickPause&&(this._clickPauseEnabled=!0,Ee=c.IS_IOS?"touchstart":"click",fe=fe||this.tag,r.on(fe,Ee,function(){Oe._clickPauseEnabled&&(J.dbClickFullscreen?(we&&clearTimeout(we),we=setTimeout(function(){Oe.paused()?Oe.play(!0):Oe.pause(!0),we=null},J.clickPauseDelay)):Oe.paused()?Oe.play(!0):Oe.pause(!0))})),J.dbClickFullscreen&&(Ie=function(){we&&(clearTimeout(we),we=null);var ue=this.fullscreenService;ue.getIsFullScreen()?ue.cancelFullScreen():ue.requestFullScreen(),this.trigger(Y.Private.MarkerTextHide),r.trigger(this.tag,"touchend")},c.IS_IOS?(Me=null,r.on(this.tag,"touchstart",function(){Me=Me?(Ie.call(Oe),clearTimeout(Me),null):setTimeout(function(){Me=null},J.dbClickFullscreenDelay)})):r.on(this.tag,"dblclick",function(){Ie.call(Oe)}))},ye.prototype.getComponent=function(J){return this._lifeCycleManager.getComponent(J)},ye.prototype.logError=function(J,fe){(this._options.autoplay||this._options._autoplay)&&this._monitor&&this._monitor.reportStartPlay(),(J=J||{}).vt=this.getCurrentTime(),this.log(fe?"ERRORRETRY":"ERROR",J)},ye.prototype.log=function(J,fe){var Ee=0,Ie=0;if(this._monitor)return this._options&&(Ee=this._options.vid||"0",Ie=this._options.from||"0"),this._monitor.updateVideoInfo({video_id:Ee,album_id:0,source:this._options.source,from:Ie}),this._monitor._log(J,fe)},ye.prototype.setSanpshotProperties=function(J,fe,Ee){if(this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric.width=J,this._snapshotMatric.height=fe,1<Ee)throw new Error("rate doesn't allow more than 1");this._snapshotMatric.rate=Ee},ye.prototype.setSnapshotProperties=function(J,fe,Ee){this.setSanpshotProperties(J,fe,Ee)},ye.prototype.takeSnapshot=function(){var J=document.createElement("canvas"),we=this.tag,fe=we.videoWidth,Ee=we.videoHeight,Ie=this._getSanpshotMatric(),Me=(J.width=Ie.width||fe,J.height=Ie.height||Ee,this.getCurrentTime()),Oe=J.getContext("2d"),ue=(Oe.save(),this.getImage()),ue=(ue=="vertical"?(Oe.translate(0,J.height),Oe.scale(1,-1)):ue=="horizon"&&(Oe.translate(J.width,0),Oe.scale(-1,1)),we),we=(this._splayer&&(ue=this._splayer.renderType===2?this._el.querySelector("canvas"):this._el.querySelector("video")),Oe.drawImage(ue,0,0,fe,Ee),Oe.restore(),j.drawSnapshotText(Oe,this.getOptions()),""),ue="";try{we=J.toDataURL("image/jpeg",Ie.rate||1)}catch(ve){(ue=ve)&&ue.message&&-1<ue.message.indexOf("Tainted canvases")&&(ue=new Error(' extraInfo: { crossOrigin:"anonymous" }'))}return fe="",Ee="",we&&(Oe=(fe=we).substr(fe.indexOf(",")+1),Ee=F.toBinary(Oe)),{time:Me,base64:fe,binary:Ee,error:ue}},ye.prototype.getStatus=function(){return this._status||"init"},ye.prototype.enterProgressMarker=function(){this._enteredProgressMarker=!0},ye.prototype.isInProgressMarker=function(){return this._enteredProgressMarker},ye.prototype.exitProgressMarker=function(){this._enteredProgressMarker=!1},ye.prototype.setProgressMarkers=function(J){this.trigger(Y.Private.ProgressMarkerChanged,J=J||[])},ye.prototype.getProgressMarkers=function(){return this._progressMarkerService?this._progressMarkerService.progressMarkers:[]},ye.prototype.setPreviewTime=function(J){this._options.playConfig||(this._options.playConfig={}),this._options.playConfig.PreviewTime=J},ye.prototype.getPreviewTime=function(){var J=0;return J=this._options.playConfig?this._options.playConfig.PreviewTime:J},ye.prototype.exceedPreviewTime=function(J){return this.isPreview()&&J>=this._options.playConfig.PreviewTime},ye.prototype.isPreview=function(){var J=this._options.playConfig.PreviewTime,fe=this._vodDuration||this.tag.duration;return 0<J&&J<fe},ye.prototype.getStats=function(){return new o(function(J){J()})},ye.prototype.setTraceId=function(J){this._monitor&&this._monitor.updateTraceId(J),this._monitor2.updateTraceId(J)},ye.prototype._canSeek=function(J){var Ee=this._getSubVideoConfig(),fe=Ee.start,Ee=Ee.end;return fe||Ee?!(J<fe||Ee<J):!(!(fe=this._getWatchTimeConfig()).watchStartTime||fe.watchEndTime)||!(J<fe.watchStartTime||J>fe.watchEndTime)},ye.prototype.setWatchTime=function(J,fe){this._options.watchStartTime=J,this._options.watchEndTime=fe,this.trigger(Y.Private.UpdateWatchTime),J=this.getCurrentTime(),fe=this._getWatchTimeConfig(),J<fe.watchStartTime?this.seek(fe.watchStartTime):J>fe.watchEndTime&&this.seek(fe.watchEndTime)},ye.prototype.setNextWatchTime=function(J,fe){this._options.watchStartTime=J,this._options.watchEndTime=fe},ye.prototype.setStartEnd=function(J,fe){this._options.start=J,this._options.end=fe,J=this._getSubVideoConfig(),this._posOffset=J.start||0,this.trigger(Y.Player.DurationChange),fe=this.getCurrentTime()+this._posOffset,fe<J.start?this.seek(0):fe>J.end&&this.seek(J.end-this._posOffset)},ye.prototype.setNextStartEnd=function(J,fe){this._options.start=J,this._options.end=fe},ye.prototype.getPlayTime=function(){return Math.round(this._playingTime/1e3)},ye.prototype._getSanpshotMatric=function(){return this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric},ye.prototype._autoplayFailedHandler=function(){var J,fe=this;(J=this.getOptions().autoplayPolicy)!=null&&J.fallbackToMute&&!this.muted()?(this.mute(!0),(J=this.tag.play())?J.then(function(){fe.trigger(Y.Private.MutedAutoplay)}).catch(function(Ee){fe.tag.paused?(console.warn("Muted autoplay failed",Ee),fe.unMute(!0)):fe.one("canplay",function(){fe.trigger(Y.Private.MutedAutoplay)})}):this.paused()?this.unMute(!0):this.trigger(Y.Private.MutedAutoplay)):(this.oncePlayed=!1,this.trigger(Y.Private.Play_Btn_Show),this.trigger(Y.Private.H5_Loading_Hide),this.trigger(Y.Player.AutoPlayPrevented),this.trigger(Y.Player.AutoPlay,!1),this._monitor2.autoPlayHasResult(!1),this._options.cover&&this.trigger(Y.Private.Cover_Show))},ye.prototype._overrideNativePlay=function(){var J=this.tag.play,fe=this;this.tag.play=function(){if(fe._monitor&&fe._monitor.reportStartPlay(),fe._monitor2.play(),fe._isManualPause=!1,!fe._options.source)return Ee={mediaId:fe._options.vid||"",error_code:h.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"},fe._options.vid||fe._options.mediaAuth?void 0:(Ee.display_msg=U.get("Error_Empty_Source"),void fe.trigger(Y.Player.Error,Ee));fe.readyTime=new Date().getTime();var Ee=J.apply(fe.tag),Ie=(fe.oncePlayed=!0,Ee!==void 0&&Ee.then(function(){fe._isAutoPlay()&&(fe.trigger(Y.Player.AutoPlay,!0),fe._monitor2.autoPlayHasResult(!0))}).catch(function(Me){!fe.tag||!fe.tag.paused||fe._isError||fe._options._autoplay||fe._switchedLevel||fe._autoplayFailedHandler()}),fe._originalPlaybackRate||fe.tag.playbackRate);return setTimeout(function(){fe.tag&&(fe.tag.playbackRate=Ie)}),Ee}},ye.prototype._extraMultiSources=function(){var J=this._options.source;if(J&&-1<J.indexOf("{")&&-1<J.indexOf("}")){var fe="";try{fe=JSON.parse(J)}catch(Oe){console.error(Oe),console.error("json")}var Ee,Ie=[];for(Ee in fe){var Me=h.QualityLevels[Ee];Ie.push({definition:Ee,Url:fe[Ee],desc:Me||Ee})}this._setupSourceList(Ie)}return Ie},ye.prototype._setupSourceList=function(J){var fe;(J=J===void 0?[]:J).length&&(this._currentPlayIndex=j.findSelectedStreamLevel(J,this._options.defaultDefinition),fe=J[this._currentPlayIndex],this._urls=J,this._options.source=fe.Url,this.trigger(Y.Private.SourceLoaded,fe))},ye.prototype._createService=function(){if(ae)for(var J=ae.length,fe=0;fe<J;fe++){var Ee=ae[fe],Ie=Ee.condition;Ie===void 0?Ie=!0:typeof Ie=="function"&&(Ie=Ie.call(this)),Ie&&(this[Ee.name]=new Ee.service(this))}},ye.prototype._disposeService=function(){if(ae)for(var J=ae.length,fe=0;fe<J;fe++){var Ee=this[ae[fe].name];Ee!==void 0&&Ee.dispose&&Ee.dispose()}},ye.prototype._executeReadyCallback=function(){if(!this._options._readyCallbackCalled){this._options._readyCallbackCalled=!0;try{this._options.autoplay||this._options.preload||(this.trigger(Y.Private.H5_Loading_Hide),this.trigger(Y.Private.Play_Btn_Show)),this._options.readyCallback(this)}catch(J){console.log(J)}}},ye.prototype._clearTimeout=function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._decodeErrorNudgeTimer&&(clearTimeout(this._decodeErrorNudgeTimer),this._decodeErrorNudgeTimer=null),this._clearLiveErrorHandle()},ye.prototype._reloadForVod=function(){var J,fe,Ee;return this._originalSource||(this._originalSource=this._options.source),!!(this._vodRetryCount<this._options.vodRetry&&navigator.onLine)&&(J=this.getCurrentTime(),(fe=this._originalSource).indexOf("auth_key=")<0&&(fe=fe&&0<fe.indexOf("?")?fe+"&_t="+new Date().valueOf():fe+"?_t="+new Date().valueOf()),this._vodRetryCountHandle&&clearTimeout(this._vodRetryCountHandle),(Ee=this).traceLog(ke,"reloadForVod::#"+fe+"#"+100*this._vodRetryCount),this._vodRetryCountHandle=setTimeout(function(){Ee._loadByUrlInner(fe,J,Ee.getOptions().autoplay)},100*this._vodRetryCount),this._vodRetryCount=this._vodRetryCount+1,!0)},ye.prototype._getUserTextTracks=function(){var J=this._options.textTracks||[];(J=j.unqiueTextTracks(J)).length&&this.trigger(Y.Private.TextTrackFounded,{from:"user",textTracks:J})},ye.prototype._isAutoPlay=function(){return this._options.autoplay||this._options._autoplay},ye.prototype._logOnce=function(J,fe){this._onceLogged||(console[fe||"log"](J),this._onceLogged=!0)},e.exports=ye}).call(this)}).call(this,"prod")},{"../../commonui/autostreamselector":16,"../../feature/AntiRecord":21,"../../feature/autoplaydelay":22,"../../feature/keyboardControl":23,"../../feature/license":24,"../../feature/logoManager":25,"../../feature/ratioAdapter":26,"../../lang/index":28,"../../lib/codec-probe":31,"../../lib/constants":33,"../../lib/cookie":34,"../../lib/dom":37,"../../lib/event":38,"../../lib/object":47,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../../lib/vttnext/index":59,"../../monitor-new/monitor":67,"../../monitor/monitor":72,"../../ui/component":143,"../../ui/component/cover":147,"../../ui/component/double-click-skip":148,"../../ui/component/press-fast-forward":155,"../../ui/component/progressmarker":157,"../../ui/component/text-track-display":168,"../../ui/component/util":173,"../../ui/exports":176,"../service/export":132,"../splayer/splayerinjector":139,"./event/eventmanager":76,"./event/eventtype":77,"./plugin/lifecyclemanager":105,"./x5play":107,"es6-promise":13}],103:[function(t,e,O){t=t("../../../lib/oo").extend({}),e.exports=t},{"../../../lib/oo":48}],104:[function(t,e,O){e.exports={createEl:"createEl",created:"created",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",timeUpdate:"timeupdate",error:"error",ended:"ended",dispose:"dispose",markerDotOver:"markerDotOver",markerDotOut:"markerDotOut"}},{}],105:[function(t,e,O){function d(l){(this._player=l)._status="init",this.components=[];var c=l.getOptions().components;if(c&&o.isArray(c)&&0<c.length)for(var h=0;h<c.length;h++){var f=c[h];if(!f)return void console.log("The "+h+" custome component is "+f);var j=f.type===void 0?f:f.type,F=f.args===void 0?[]:f.args,f=f.name===void 0?"":f.name;if(!j)return void console.log(f+" compenent is "+j);F=F&&0<F.length?[].concat.call([j],F):[],j=new(Function.prototype.bind.apply(j,F)),F=j[u.createEl],F&&typeof F=="function"&&F.call(j,l.el(),l),this.components.push({name:f,obj:j})}var W=this;l.on(a.Private.LifeCycleChanged,function(U){var M=U.paramData,R=M.type;R===a.Video.CanPlayThrough&&W._player.trigger(a.Player.TimeUpdate,M.data.target.currentTime),R===a.Video.Ended&&W._player.trigger(a.Player.TimeUpdate,W._player.getDuration()),W.components.length!=0&&r.call(W,l,U)})}var o=t("../../../lib/object"),a=t("../event/eventtype"),u=t("./lifecycle"),s=t("./status"),r=(d.prototype.getComponent=function(l){var c=null,h=this.components.length;if(l){for(var j=0;j<h;j++)if(this.components[j].name==l){c=this.components[j].obj;break}}return c},function(l,c){if(c){for(var c=c.paramData,h=c.type,j=c.data,F=((c=h)!=a.Video.LoadStart&&c!=a.Video.LoadedData&&c!=a.Video.LoadedMetadata||(h=u.loading),n(l,h),this.components.length),f=0;f<F;f++){var W=this.components[f].obj,U=W[h];U&&typeof U=="function"&&U.call(W,l,j)}h==a.Private.Dispose&&(this.components=[])}}),n=function(l,c){s[c]===void 0||c==s.pause&&(l._status==s.error||l._status==s.ended)||c==s.ready&&l._status==s.playing||(l._status=c)};e.exports=d},{"../../../lib/object":47,"../event/eventtype":77,"./lifecycle":104,"./status":106}],106:[function(t,e,O){e.exports={init:"init",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",error:"error",ended:"ended"}},{}],107:[function(t,e,O){function d(u,s){var r=u.el().style.height,n=u.el().style.width,l=(u.originalLayout={container:{height:r,width:n},video:{width:u.tag.style.width,height:u.tag.style.height}},document.body.clientHeight*(window.devicePixelRatio||1)+"px"),c=document.body.clientWidth+"px";width=s?(height=l,c):(height=r.indexOf("%")?r:r+"px",n.indexOf("%")?n:n+"px"),u.tag.style.width=c,u.tag.style.height=l,u.el().style.height=s?l:height}var o=t("../../lib/ua"),a=t("../../lib/dom");e.exports.isAndroidX5=function(){return o.os.android&&o.is_X5||o.dingTalk()},e.exports.adaptX5Play=function(u){o.os.android&&o.is_X5&&(u._options.x5_type=="h5"&&(u.tag.setAttribute("x5-video-player-type",u._options.x5_type),window.onresize=function(){var s,r;d(u,u._options.x5_fullscreen||u._options.x5_video_position=="center"),(s=u)._x5VideoOrientation=="landscape"&&(s._originalTagWidth=s.tag.style.width,s._originalTagHeight=s.tag.style.height,(r=document.querySelector("#"+s.id()+" .prism-controlbar"))&&parseFloat(r.offsetHeight),s.tag.style.height="100%",s.tag.style.width=window.screen.width+"px")},u.tag.addEventListener("x5videoenterfullscreen",function(){d(u,u._options.x5_fullscreen||u._options.x5_video_position=="center"),u.trigger("x5requestFullScreen")}),u.tag.addEventListener("x5videoexitfullscreen",function(){var s,r;(s=u).originalLayout&&(r=s.originalLayout,s.el().style.height=r.container.height,s.el().style.width=r.container.width,s.tag.style.width=r.video.width,s.tag.style.height=r.video.height),u.trigger("x5cancelFullScreen"),u.fullscreenService.getIsFullScreen()&&u.fullscreenService.cancelFullScreen()}),u.on("requestFullScreen",function(){u._options.x5_video_position=="top"&&a.removeClass(u.tag,"x5-top-left"),o.os.android&&o.is_X5&&u._options.x5LandscapeAsFullScreen&&(u.tag.setAttribute("x5-video-orientation","landscape"),u._x5VideoOrientation="landscape")}),u.on("cancelFullScreen",function(){u._options.x5_video_position=="top"&&a.addClass(u.tag,"x5-top-left"),o.os.android&&o.is_X5&&u._options.x5LandscapeAsFullScreen&&(u.tag.setAttribute("x5-video-orientation","portrait"),d(u,u._options.x5_fullscreen||u._options.x5_video_position=="center"),u._x5VideoOrientation="portrait")})),u._options.x5_fullscreen!==void 0&&u._options.x5_fullscreen&&(u.tag.setAttribute("x5-video-player-fullscreen",u._options.x5_fullscreen),a.addClass(u.tag,"x5-full-screen")),u._options.x5_video_position=="top"&&a.addClass(u.tag,"x5-top-left"),u._options.x5_orientation!==void 0)&&u.tag.setAttribute("x5-video-orientation",u._options.x5_orientation)}},{"../../lib/dom":37,"../../lib/ua":53}],108:[function(t,e,O){var d=t("../../lib/object"),o=t("../../lib/io"),a=t("../../config"),u=t("../../lang/index"),s=t("../../lib/constants"),r=t("../../lib/playerutil"),n=t("../base/event/eventtype"),l="dashinjector.js";e.exports.inject=function(c,h,j,F){var f=F.source;if(!(function(U){return!this._dash&&r.isDash(U)&&r.isSupportMSE()}).call(c,f))return console.warn("Should not inject dash player");function W(){this._disposed||(this._disposed=!0,this._destroyDash(),this._superPt&&(this._superPt.dispose.call(this),h.prototype.play=this._superPt.play,h.prototype.pause=this._superPt.pause,h.prototype.initPlay=this._superPt.initPlay,h.prototype.seek=this._superPt.seek,h.prototype.canSeekable=this._superPt.canSeekable))}c._Type=h,c._superType=j,c._superPt=j.prototype,c._disposed=!1,c._dash=null,h.prototype.initPlay=function(){var U=this,M=(this.trigger(n.Private.H5_Loading_Show),performance.now());(function(R,K){var X="aliplayer-dash-min.js",G=this.getOptions(),X=G.dashjsUrl||"https://"+a.domain+a.path+a.h5Version+"/dash/"+X;G.assetPrefix&&(G.assetPrefix,(z=>{throw new TypeError('"'+z+'" is read-only')})("url")),o.loadJS(X,R,K)}).call(this,function(){U.traceLog(l,"got js#"+parseInt(performance.now()-M)+"ms"),(function(){var R,K,G,X=!this._dash;this._disposed||(this._destroyDash(),(R=this.getOptions()).vid||(R.isVBR=!0),K={streaming:{retryAttempts:{MPD:R.isLive?R.liveRetry:R.vodRetry}}},K=d.deepMerge(K,R.dashOption),G=dashjs.MediaPlayer().create(),this._dash=G,(function(){var z=this,te=this._dash,ee=this.getOptions(),Y=!1;te.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,function(ie){var ae,de;Y||(Y=!0,de=(de=te.getBitrateInfoListFor("video"))==null?void 0:de.map(function(ce){return{url:""+s.DASH_QUALITY_PROTOCOL+ce.qualityIndex,width:ce.width,height:ce.height,bitrate:ce.bitrate,attrs:{BANDWIDTH:ce.bitrate,RESOLUTION:ce.width+"x"+ce.height}}}),z.trigger(n.Player.LevelsLoaded,{levels:de}),ae=te.getCurrentTrackFor("audio"),de=te.getTracksFor("audio").map(function(ce){return{id:ce.index,language:ce.lang,enabled:ae?.index===ce.index}}),z.trigger(n.Player.AudioTrackUpdated,{audioTracks:de}))}),te.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(ie){var ae,de;ie.mediaType==="video"&&(ae=z._qualityService.levels||[],de=""+s.DASH_QUALITY_PROTOCOL+ie.newQuality,ie=ae.find(function(ce){return ce.Url===de}),z.trigger(n.Private.QualityChange,{levelSwitch:!0,url:de,desc:ie?.desc}))}),te.on("bytesAppendedEndFragment",function(ie){try{var ae,de;ie.mediaType==="video"&&(ae=ie.bufferedRanges.length)&&(de=ie.bufferedRanges.end(ae-1),ie.startTime>de)&&(te.refreshManifest(),z.traceLog(l,"PTS rollback, refresh manifest, expectedStart: "+ie.startTime+", resultBufferEnd: "+de),console.warn("PTS rollback, refresh manifest"))}catch(ce){console.log("exception",ce)}}),te.on(dashjs.MediaPlayer.events.ERROR,function(ie){var ae=ie.error,de=dashjs.MediaPlayer.errors,ce=(Te=>{var Ce,ke,ye={};for(Ce in Te)Te.hasOwnProperty(Ce)&&(ke=Te[Ce],ye[ke]=Ce);return ye})(de)[ae.code],ge=[de.TIME_SYNC_FAILED_ERROR_CODE,de.TIMED_TEXT_ERROR_ID_PARSE_CODE];if(console.log("dash error",ie,"code:",ce),z.traceLog(l,"dashjs-error::"+ce+"#"+ae.message+"#"+((ie=ae.data)==null||(ie=ie.response)==null?void 0:ie.status),!0),!ge.includes(ae.code)){z._clearTimeout();var he,se,Z,oe=ae.code;switch(oe){case de.DOWNLOAD_ERROR_ID_CONTENT_CODE:case de.DOWNLOAD_ERROR_ID_MANIFEST_CODE:case de.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE:case de.DOWNLOAD_ERROR_ID_SIDX_CODE:case de.DOWNLOAD_ERROR_ID_XLINK_CODE:case de.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE:case de.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE:var re=(re=ae.data)==null||(re=re.response)==null?void 0:re.status;if(re===404){if(te.isDynamic()&&oe===de.DOWNLOAD_ERROR_ID_CONTENT_CODE)return z.traceLog(l,"dashjs::reload mpd because seg 404"),void te.attachSource(ee.source);he=s.ErrorCode.NotFoundSourceURL,se=u.get("Error_Not_Found"),Z=u.get("Tip_Err_Not_found")}else se=re===403?(he=s.ErrorCode.AuthKeyExpired,u.get("Error_AuthKey_Text")):re===0?(he=s.ErrorCode.RequestDataError,u.get("Error_Play_Text")+","+u.get("Maybe_Cors_Error")):(he=s.ErrorCode.RequestDataError,u.get("Error_Network_Text")+"("+ce+"|"+re+")");break;case de.MANIFEST_ERROR_ID_NOSTREAMS_CODE:case de.MANIFEST_ERROR_ID_MULTIPLEXED_CODE:case de.MANIFEST_ERROR_ID_PARSE_CODE:case de.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE:case de.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE:he=s.ErrorCode.LoadedMetadata,se=u.get("Error_Manifest_Decode_Text")+"("+ce+")";break;default:he=s.ErrorCode.OtherError,se=u.get("Error_Play_Text")+"("+ce+")"}se+="<br>"+ae.message,ie={mediaId:ee.vid||"",mediaAuth:ee.mediaAuth||"",error_code:he,error_msg:se,diagnosis_info:Z},z.logError(ie),z.trigger(n.Player.Error,ie),z._dash.reset()}})}).call(this),G.initialize(),G.updateSettings(K),G.setAutoPlay(R.autoplay),G.attachView(this.tag),G.attachSource(R.source),this._initPlayBehavior(),X&&this._executeReadyCallback())}).call(U)},function(){var R={mediaId:F.vid||"",mediaAuth:F.mediaAuth||"",error_code:s.ErrorCode.ModuleLoadError,error_msg:"dash module load error."};U.trigger(n.Player.Error,R)})},Object.defineProperty(h.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return W},set:function(){return W}}),h.prototype._switchLevel=function(U){this.traceLog(l,"switchLevel::"+U);var M=this._dash;U?(U=Number(U.replace(s.DASH_QUALITY_PROTOCOL,"")),M.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1,video:!1}}}}),M.setQualityFor("video",U)):M.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0,video:!0}}}})},h.prototype._switchAudioTrack=function(U){var M=this._dash,R=M.getTracksFor("audio").find(function(K){return K.index===U});R&&M.setCurrentTrack(R)},h.prototype._destroyDash=function(){this._dash&&(this._dash.destroy(),this._dash=null)}}},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/object":47,"../../lib/playerutil":50,"../base/event/eventtype":77}],109:[function(t,e,O){var d=t("../base/player"),o=t("./dashinjector"),a=d.extend({init:function(u,s){s._native=!1,o.inject(this,a,d,s),d.call(this,u,s)}});e.exports=a},{"../base/player":102,"./dashinjector":108}],110:[function(t,e,O){function d(){return(d=Object.assign?Object.assign.bind():function(f){for(var W=1;W<arguments.length;W++){var U,M=arguments[W];for(U in M)!{}.hasOwnProperty.call(M,U)||(f[U]=M[U])}return f}).apply(null,arguments)}var o=t("../../lib/io"),a=t("../../config"),u=t("../../lib/constants"),s=t("../../lib/util"),r=t("../../lib/playerutil"),n=(t("../../lib/dom"),t("../../lang/index")),l=t("../base/event/eventtype"),c=t("../saas/drm"),h=t("../../lib/ua"),j="drminjector.js",F=(()=>{function f(){}var W=f.prototype;return W.destroy=function(){},W.append=function(U){},W.remove=function(U,M){},W.isTextVisible=function(){},W.setTextVisibility=function(U){},f})();e.exports.inject=function(f,W,U,M,R,K,G){var X,z=M.source;function te(ge){var he=shaka.util.Error.Code,se="",Z=ge.data||[];switch(ge.code){case he.BAD_HTTP_STATUS:case he.HTTP_ERROR:case he.TIMEOUT:case he.LICENSE_REQUEST_FAILED:se=n.get("Tip_Drm_Request_Err")+ee(Z);break;case he.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:case he.SESSION_TIMEOUT:window.isSecureContext?(se=n.get("Tip_Drm_Key_System_Unavailable"),Z.length&&(se+="<br />"+n.get("Tip_Err_Common_Short")+Z)):se=n.get("Tip_Drm_Secure_Context");break;case he.FAILED_TO_CREATE_CDM:window.location.protocol==="file:"&&(se=n.get("Tip_Drm_File_Not_Allowed"));break;case he.HLS_INVALID_PLAYLIST_HIERARCHY:se=n.get("Tip_Drm_Playlist_Hierarchy")}return ge=ee(Z),se||ge}function ee(ge){return n.get("Tip_Err_Common")+ge}function Y(ge){var he=this;this._drm.load(this._options.source,ge.startTime).then(function(){if(he.trigger(l.Private.H5_Loading_Hide),ge.continuePlay&&(he.play(),ge.prevVariant)&&ge.prevVariant!==0){for(var se,Z=he._drm.getVariantTracks(),oe=0;oe<Z.length;oe++)if(Z[oe].id===ge.prevVariant){se=Z[oe];break}se&&he._drm.selectVariantTrack(se,!0)}}).catch(function(se){ae.call(he,se)})}function ie(){de();var he=u.ErrorCode.DrmNotSupported,ge=n.get("Error_Drm_Not_Supported"),he={mediaId:this._options.vid||"",error_code:he,error_msg:ge,diagnosis_info:n.get("Tip_Drm_Unsupported")};this.logError(he),this.trigger(l.Player.Error,he)}function ae(ge){de();var se=u.ErrorCode.DrmLoadError,he=n.get("Error_Drm_Load"),se={mediaId:this._options.vid||"",error_code:se,error_msg:he+" | "+this._shakaCodeMap[ge.code],drm_info:JSON.stringify({cdmData:this._cdmData,licenseData:this._licenseData})};this.logError(se),se.diagnosis_info=te.call(this,ge),this.trigger(l.Player.Error,se)}function de(){this._sessionTimer&&(clearTimeout(this._sessionTimer),this._sessionTimer=null)}function ce(ge,he){he=he.getVariantTracks().find(function(se){return se.active}),console.log("activeTrack",he),ge.trigger(l.Private.QualityChange,{levelSwitch:!0,bitrate:he.bandwidth,desc:he.height})}!K&&(M=z,f._drm||!r.isDash(M)&&!r.isHls(M))||(f._isDrm=!0,f._drm=null,f._isLoadedDrm=!1,f._sessionTimer=null,f._isFairPlay=h.IS_MAC_SAFARI||h.IS_IOS,f._fairPlayHandlers={},f._shakaCodeMap={},f._cdmData="",f._licenseData="",console.log("use FairPlay",f._isFairPlay),W.prototype._checkDrmReady=function(){return!(this._drm==null&&!this._isFairPlay&&(console.warn("please invoke this method after ready event"),1))},W.prototype.play=function(ge){if(this.traceLog(j,"play::"+ge),this._checkDrmReady())return this._isManualPlay=ge||!1,ge&&this._monitor2.manualPlay(),this.trigger(l.Private.Cover_Hide),this.tag.ended?this.replay():(this.getCurrentTime(),this.tag.paused&&this.tag.play()),this},W.prototype.initPlay=function(ge){var he,se,Z;function oe(re,Te){var Ce,ke,ye,J;re._antiRecord&&(console.log("Manual check before load source"),re._antiRecord.check())||(!shaka.Player.isBrowserSupported()||!(!h.IS_ANDROID||!h.IS_UC&&!h.IS_FIREFOX)?ie.call(re):(Ce=null,shaka.Player.probeSupport().then(function(fe){Ce&&(clearTimeout(Ce),Ce=null),fe&&fe.drm&&fe.drm["com.widevine.alpha"]?re.destroy(J):ie.call(re)}),Ce=setTimeout(function(){ie.call(re)},5e3),ke=!re._drm,ye=function(){var fe,Ee,Ie;re._drm=new shaka.Player(re.tag),X(re,re._drm),shaka.util.Error.Code.SESSION_TIMEOUT="SESSION_TIMEOUT",re._shakaCodeMap=(fe=shaka.util.Error.Code,Ee={},Object.keys(fe).forEach(function(Me){Ee[fe[Me]]=Me}),Ee),Ie=re._options.isLive?"https://"+r.getLiveHostByRegion(re._options.region):"https://vod."+re._options.region+".aliyuncs.com",re._drm.configure(d({drm:{servers:{"com.widevine.alpha":Ie,"com.microsoft.playready":Ie},retryParameters:{maxAttempts:1}}},re._options.drmOption||{},{textDisplayFactory:function(){return new F}})),re._drm.getNetworkingEngine().registerRequestFilter(function(Me,Oe){shaka.util.StringUtils;var we=shaka.util.Uint8ArrayUtils;Me==shaka.net.NetworkingEngine.RequestType.LICENSE&&(Me=we.toBase64(new Uint8Array(Oe.body)),we=re._options.isLive?c.getRequestUrl(Me,re):c.postData(Me,re),re._cdmData=Me,Oe.uris[0]=we.url,Oe.headers["content-type"]="application/x-www-form-urlencoded",Oe.body=we.data)}),re._drm.getNetworkingEngine().registerResponseFilter(function(Me,Oe){var we=shaka.util.StringUtils,ue=shaka.util.Uint8ArrayUtils;Me==shaka.net.NetworkingEngine.RequestType.LICENSE&&(Me=we.fromUTF8(Oe.data),we=JSON.parse(Me),Me=re._options.isLive?we.Response.B64License:JSON.parse(we.License).b64License,re._licenseData=Me,Oe.data=ue.fromBase64(Me))}),re._drm.addEventListener("error",function(Me){console.log("errorMessage"),console.log(Me.detail.code),console.log(Me.detail)}),re._drm.load(re._options.source).then(function(){re._initPlayBehavior(Te)}).catch(function(Me){ae.call(re,Me)}),de.call(re),re.one(l.Video.CanPlay,function(){de.call(re)}),re._sessionTimer=setTimeout(function(){re._isError||(ae.call(re,{code:"SESSION_TIMEOUT"}),re._drm&&re._drm.destroy())},re._player.getOptions().drmSessionTimeout||5e3),R&&R(re._drm),ke&&(re._executeReadyCallback(),re._urls)&&0<re._urls.length&&(re._currentPlayIndex=r.findSelectedStreamLevel(re._urls,re._options.defaultDefinition),Ie=re._urls[re._currentPlayIndex],re.trigger(l.Private.SourceLoaded,Ie))},J=function(fe){try{ye()}catch(Ee){console.log(Ee)}}))}s.contentProtocolMixed(z)?(de(),(he={mediaId:this._options.vid||"",error_code:u.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=n.get("Request_Block_Text"),this.trigger(l.Player.Error,he)):this._options.accessKeyId&&this._options.accessKeySecret?((se=this)._waitingTimeoutCount=1,this._isFairPlay?(this.trigger(l.Private.H5_Loading_Show),(function(re,Te){var Ce;this._isFairPlay&&((()=>{var ke;return h.IS_IOS?(ke=parseInt(h.os.version),console.log("osVersion",ke),12<=ke):h.IS_MAC_SAFARI?(ke=parseInt(h.browser.version),console.log("browserVersion",ke),12<=ke):void 0})()?((Ce=this).destroy(),c.loadCertificate(this,function(){re&&re(),Ce._initPlayBehavior(Te,Ce._options.source),Ce._executeReadyCallback()})):ie.call(this))}).call(this,R,ge)):this._isLoadedDrm&&typeof shaka<"u"?oe(this,ge):(this.trigger(l.Private.H5_Loading_Show),Z=performance.now(),(function(re,Te){var Ce="aliplayer-drm-min.js",ke="",ke=a.domain?"https://"+a.domain+a.path+a.h5Version+"/drm/"+Ce:"/build/drm/"+Ce,ye=(this._options.shakaUrl&&(ke=this._options.shakaUrl),this);o.loadJS(ke,function(){shaka.polyfill.installAll(),re.apply(ye)},function(J){Te&&Te(J)})}).call(se,function(){this.traceLog(j,"got js#"+parseInt(performance.now()-Z)),this._isLoadedDrm=!0,oe(this,ge)},function(re){re={mediaId:se._options.vid||"",mediaAuth:se._options.mediaAuth||"",error_code:u.ErrorCode.ModuleLoadError,error_msg:"drm player module load error."+(re?re.message:"")},se.trigger(l.Player.Error,re)}))):(de(),(he={mediaId:this._options.vid||"",error_code:u.ErrorCode.InvalidParameter,error_msg:"No sts params."}).display_msg=n.get("Error_Drm_No_Sts"),this.trigger(l.Player.Error,he))},W.prototype.destroy=function(ge){var he;this._drm?(de.call(he=this),this._drm.destroy().then(function(){he._drm=null,typeof ge=="function"&&ge(he)})):(this._isFairPlay&&this._destroyFairPlay(),typeof ge=="function"&&ge(this))},W.prototype._destroyFairPlay=function(){c.destroyFairPlay.call(this)},W.prototype.dispose=function(){U.dispose.call(this),this.destroy()},W.prototype._switchLevel=function(ge,he){if(he=he||{isAuto:!0},this.trigger(l.Player.LevelSwitch),this._switchedLevel=!0,this._isFairPlay){this._manuallySwitchDrmLevel=!he.isAuto;var se=this.autoplay||this._status!="pause";this._loadByUrlInner(ge,this.getCurrentTime(),se)}else if(he.isAuto)this._drm.configure({abr:{enabled:!0}}),ce(this._player,this._drm);else{for(var Z,oe=this._drm.getVariantTracks(),re=0;re<oe.length;re++){var Te=oe[re];if(Number(Te.bandwidth)===Number(he.bitrate)&&Number(Te.height)===Number(he.resolution.split("x")[1])){Z=Te;break}}Z||console.warn("cannot find target track",he),this._drm.configure({abr:{enabled:!1}}),this._drm.selectVariantTrack(Z,!this._options.seamlessHandover)}var Ce=this;setTimeout(function(){Ce.trigger(l.Player.LevelSwitched),this._switchedLevel=!1},1e3)},W.prototype._getDRMEncryptItem=function(){var ge=this._urls;if(ge&&0<ge.length)for(var he=ge.length,se=0;se<he;se++){var Z=ge[se];if(Z.Url==this._options.source&&+Z.encryption)return Z}return""},W.prototype._getItemBySource=function(){var ge=this._urls;if(ge&&0<ge.length)for(var he=ge.length,se=0;se<he;se++){var Z=ge[se];if(Z.Url==this._options.source)return Z}return""},X=function(ge,he){he.addEventListener("error",function(re){var Z,oe=ge,re=re.detail,Ce="Error code:"+re.code+"message:"+re.message,Te=(oe.traceLog(j,Ce,!0),console.log(Ce),u.ErrorCode.OtherError),Ce=n.get("Error_Play_Text");re.code==shaka.util.Error.Code.EXPIRED?(function(){var ke=this,ye=(this.trigger(l.Private.H5_Loading_Show),null);this._options.isLive||(ye=this.getCurrentTime());var J,fe=!this.paused(),Ee=this._drm.getConfiguration().abr.enabled;if(!Ee){for(var Ie=this._drm.getVariantTracks(),Me=0;Me<Ie.length;Me++)if(Ie[Me].active){J=Ie[Me].id;break}}var Oe={startTime:ye,continuePlay:fe,prevVariant:J,isAdaptive:Ee};typeof this._options.refreshAccessInfo=="function"?this._options.refreshAccessInfo().then(function(we){(we=we||{}).accessKeyId&&(ke._options.accessKeyId=we.accessKeyId),we.securityToken&&(ke._options.securityToken=we.securityToken),we.accessKeySecret&&(ke._options.accessKeySecret=we.accessKeySecret),Y.call(ke,Oe)}):Y.call(ke,Oe)}).call(oe):(re.code==shaka.util.Error.Code.HTTP_ERROR?(Te=u.ErrorCode.NetworkError,Ce=n.get("Http_Error")):re.code==shaka.util.Error.Code.TIMEOUT?(Te=u.ErrorCode.LoadingTimeout,Ce=n.get("Error_Waiting_Timeout_Text")):re.code==shaka.util.Error.Code.LICENSE_REQUEST_FAILED?(Te=u.ErrorCode.DrmLicenseRequestFailed,Ce=n.get("Error_Drm_License_Request_Failed")):re.Category==shaka.util.Error.NETWORK&&(Te=u.ErrorCode.NetworkError,Ce=n.get("Error_Network_Text")),de.call(oe),setTimeout(function(){oe.trigger(l.Private.Play_Btn_Hide)}),oe.checkOnline()&&(Z=oe._drm.drmInfo()||{},Z={keyIds:Array.from(Z.keyIds||[]),initData:String(((Z=(Z.initData||[])[0])==null?void 0:Z.initData)||[]),cdmData:oe._cdmData,licenseData:oe._licenseData},Z={mediaId:oe._options.vid||"",error_code:Te,error_msg:re.message,shaka_error:JSON.stringify(re.data||[]),drm_info:JSON.stringify(Z)},oe.logError(Z),Z.display_msg=Ce+" | "+oe._shakaCodeMap[re.code],Z.diagnosis_info=te.call(oe,re),oe.trigger(l.Player.Error,Z)))}),he.addEventListener("variantchanged",function(se){console.log("DRM Event: variantchanged",se)}),he.addEventListener("abrstatuschanged",function(se){console.log("DRM Event: abrstatuschanged",se)}),he.addEventListener("drmsessionupdate",function(se){console.log("DRM Event: drmsessionupdate",se),de.call(ge)}),he.addEventListener("expirationupdated",function(se){console.log("DRM Event: expirationupdated",se),console.log("Exp:",this.getExpiration())}),he.addEventListener("adaptation",function(se){console.log("adaptation",se),ce(ge,he)}),he.addEventListener("trackschanged",function(se){console.log("DRM EVENT: trackschanged",he.getTextLanguages(),he.getTextTracks());var Z=he.getTextLanguages();Z&&Z.length&&(Z=(oe=>{var re={subtitle:"subtitles",caption:"captions"},Te=(console.log("Building track config"),oe.getManifest().textStreams||[]),Ce=(console.log("textStreams",Te),oe.getTextLanguages()),ke=(console.log("languageList",Ce),[]);try{Te.forEach(function(ye){Ce.includes(ye.language)&&ke.push({kind:re[ye.kind]||ye.kind,label:ye.label,srclang:ye.language,src:Array.from(ye.segmentIndex)[0].getUris()[0]})})}catch(ye){console.log("error in retrieving text track url: ",ye)}return ke})(he),ge.trigger(l.Private.TextTrackFounded,{from:"drm",textTracks:Z}),ge.trigger(l.Private.CCReset))})})}},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/dom":37,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../base/event/eventtype":77,"../saas/drm":120}],111:[function(t,e,O){function d(){d=function(){return oe};var Z,oe={},re=Object.prototype,Te=re.hasOwnProperty,ue=typeof Symbol=="function"?Symbol:{},Ce=ue.iterator||"@@iterator",ke=ue.asyncIterator||"@@asyncIterator",ye=ue.toStringTag||"@@toStringTag";function J(De,Xe,Ke,Ye){Object.defineProperty(De,Xe,{value:Ke,enumerable:!Ye,configurable:!Ye,writable:!Ye})}try{J({},"")}catch{J=function(Xe,Ke,Ye){return Xe[Ke]=Ye}}function fe(De,_t,Ke,Ye){var it,ut,at,ct,_t=_t&&_t.prototype instanceof Me?_t:Me,_t=Object.create(_t.prototype);return J(_t,"_invoke",(it=De,ut=Ke,at=new Je(Ye||[]),ct=1,function(bt,vt){if(ct===3)throw Error("Generator is already running");if(ct===4){if(bt==="throw")throw vt;return{value:Z,done:!0}}for(at.method=bt,at.arg=vt;;){var gt=at.delegate;if(gt&&(gt=function wt(xt,pt){var yt=pt.method,He=xt.i[yt];return He===Z?(pt.delegate=null,yt==="throw"&&xt.i.return&&(pt.method="return",pt.arg=Z,wt(xt,pt),pt.method==="throw")||yt!=="return"&&(pt.method="throw",pt.arg=new TypeError("The iterator does not provide a '"+yt+"' method")),Ie):(yt=Ee(He,xt.i,pt.arg),yt.type==="throw"?(pt.method="throw",pt.arg=yt.arg,pt.delegate=null,Ie):(He=yt.arg,He?He.done?(pt[xt.r]=He.value,pt.next=xt.n,pt.method!=="return"&&(pt.method="next",pt.arg=Z),pt.delegate=null,Ie):He:(pt.method="throw",pt.arg=new TypeError("iterator result is not an object"),pt.delegate=null,Ie)))}(gt,at),gt)){if(gt===Ie)continue;return gt}if(at.method==="next")at.sent=at._sent=at.arg;else if(at.method==="throw"){if(ct===1)throw ct=4,at.arg;at.dispatchException(at.arg)}else at.method==="return"&&at.abrupt("return",at.arg);if(ct=3,gt=Ee(it,ut,at),gt.type==="normal"){if(ct=at.done?4:2,gt.arg===Ie)continue;return{value:gt.arg,done:at.done}}gt.type==="throw"&&(ct=4,at.method="throw",at.arg=gt.arg)}}),!0),_t}function Ee(De,Xe,Ke){try{return{type:"normal",arg:De.call(Xe,Ke)}}catch(Ye){return{type:"throw",arg:Ye}}}oe.wrap=fe;var Ie={};function Me(){}function Oe(){}function we(){}var ue={},ve=(J(ue,Ce,function(){return this}),Object.getPrototypeOf),ve=ve&&ve(ve(et([]))),Le=(ve&&ve!==re&&Te.call(ve,Ce)&&(ue=ve),we.prototype=Me.prototype=Object.create(ue));function Ne(De){["next","throw","return"].forEach(function(Xe){J(De,Xe,function(Ke){return this._invoke(Xe,Ke)})})}function Ue(De,Xe){var Ke;J(this,"_invoke",function(Ye,it){function ut(){return new Xe(function(at,ct){(function _t(pt,vt,gt,wt){var xt,pt=Ee(De[pt],De,vt);if(pt.type!=="throw")return(vt=(xt=pt.arg).value)&&typeof vt=="object"&&Te.call(vt,"__await")?Xe.resolve(vt.__await).then(function(yt){_t("next",yt,gt,wt)},function(yt){_t("throw",yt,gt,wt)}):Xe.resolve(vt).then(function(yt){xt.value=yt,gt(xt)},function(yt){return _t("throw",yt,gt,wt)});wt(pt.arg)})(Ye,it,at,ct)})}return Ke=Ke?Ke.then(ut,ut):ut()},!0)}function $e(De){this.tryEntries.push(De)}function rt(De){var Xe=De[4]||{};Xe.type="normal",Xe.arg=Z,De[4]=Xe}function Je(De){this.tryEntries=[[-1]],De.forEach($e,this),this.reset(!0)}function et(De){if(De!=null){var Xe,Ke=De[Ce];if(Ke)return Ke.call(De);if(typeof De.next=="function")return De;if(!isNaN(De.length))return Xe=-1,(Ke=function Ye(){for(;++Xe<De.length;)if(Te.call(De,Xe))return Ye.value=De[Xe],Ye.done=!1,Ye;return Ye.value=Z,Ye.done=!0,Ye}).next=Ke}throw new TypeError(typeof De+" is not iterable")}return J(Le,"constructor",Oe.prototype=we),J(we,"constructor",Oe),J(we,ye,Oe.displayName="GeneratorFunction"),oe.isGeneratorFunction=function(De){return De=typeof De=="function"&&De.constructor,!!De&&(De===Oe||(De.displayName||De.name)==="GeneratorFunction")},oe.mark=function(De){return Object.setPrototypeOf?Object.setPrototypeOf(De,we):(De.__proto__=we,J(De,ye,"GeneratorFunction")),De.prototype=Object.create(Le),De},oe.awrap=function(De){return{__await:De}},Ne(Ue.prototype),J(Ue.prototype,ke,function(){return this}),oe.AsyncIterator=Ue,oe.async=function(De,Xe,Ke,Ye,it){it===void 0&&(it=Promise);var ut=new Ue(fe(De,Xe,Ke,Ye),it);return oe.isGeneratorFunction(Xe)?ut:ut.next().then(function(at){return at.done?at.value:ut.next()})},Ne(Le),J(Le,ye,"Generator"),J(Le,Ce,function(){return this}),J(Le,"toString",function(){return"[object Generator]"}),oe.keys=function(De){var Xe,Ke=Object(De),Ye=[];for(Xe in Ke)Ye.unshift(Xe);return function it(){for(;Ye.length;)if((Xe=Ye.pop())in Ke)return it.value=Xe,it.done=!1,it;return it.done=!0,it}},oe.values=et,Je.prototype={constructor:Je,reset:function(De){if(this.prev=this.next=0,this.sent=this._sent=Z,this.done=!1,this.delegate=null,this.method="next",this.arg=Z,this.tryEntries.forEach(rt),!De)for(var Xe in this)Xe.charAt(0)==="t"&&Te.call(this,Xe)&&!isNaN(+Xe.slice(1))&&(this[Xe]=Z)},stop:function(){this.done=!0;var De=this.tryEntries[0][4];if(De.type==="throw")throw De.arg;return this.rval},dispatchException:function(De){if(this.done)throw De;var Xe=this;function Ke(bt){ut.type="throw",ut.arg=De,Xe.next=bt}for(var Ye=Xe.tryEntries.length-1;0<=Ye;--Ye){var it=this.tryEntries[Ye],ut=it[4],at=this.prev,ct=it[1],_t=it[2];if(it[0]===-1)return Ke("end"),!1;if(!ct&&!_t)throw Error("try statement without catch or finally");if(it[0]!=null&&it[0]<=at){if(at<ct)return this.method="next",this.arg=Z,Ke(ct),!0;if(at<_t)return Ke(_t),!1}}},abrupt:function(De,Xe){for(var Ke=this.tryEntries.length-1;0<=Ke;--Ke){var Ye=this.tryEntries[Ke];if(-1<Ye[0]&&Ye[0]<=this.prev&&this.prev<Ye[2]){var it=Ye;break}}var ut=(it=it&&(De==="break"||De==="continue")&&it[0]<=Xe&&Xe<=it[2]?null:it)?it[4]:{};return ut.type=De,ut.arg=Xe,it?(this.method="next",this.next=it[2],Ie):this.complete(ut)},complete:function(De,Xe){if(De.type==="throw")throw De.arg;return De.type==="break"||De.type==="continue"?this.next=De.arg:De.type==="return"?(this.rval=this.arg=De.arg,this.method="return",this.next="end"):De.type==="normal"&&Xe&&(this.next=Xe),Ie},finish:function(De){for(var Xe=this.tryEntries.length-1;0<=Xe;--Xe){var Ke=this.tryEntries[Xe];if(Ke[2]===De)return this.complete(Ke[4],Ke[3]),rt(Ke),Ie}},catch:function(De){for(var Xe=this.tryEntries.length-1;0<=Xe;--Xe){var Ke,Ye,it=this.tryEntries[Xe];if(it[0]===De)return(Ke=it[4]).type==="throw"&&(Ye=Ke.arg,rt(it)),Ye}throw Error("illegal catch attempt")},delegateYield:function(De,Xe,Ke){return this.delegate={i:et(De),r:Xe,n:Ke},this.method==="next"&&(this.arg=Z),Ie}},oe}function o(Z,oe,re,Te,Ce,ke,ye){try{var J=Z[ke](ye),fe=J.value}catch(Ee){return re(Ee)}J.done?oe(fe):Promise.resolve(fe).then(Te,Ce)}function a(Z){return function(){var oe=this,re=arguments;return new Promise(function(Te,Ce){var ke=Z.apply(oe,re);function ye(fe){o(ke,Te,Ce,ye,J,"next",fe)}function J(fe){o(ke,Te,Ce,ye,J,"throw",fe)}ye(void 0)})}}var u=typeof Promise>"u"?t("es6-promise").Promise:Promise,s=t("../../lib/io"),r=t("../../config"),n=t("../../lang/index"),l=t("../base/event/eventtype"),c=t("../../lib/constants"),h="drminjectorNg.js",j={LoadJs:1,LoadSource:2,PlayerError:3,SupportError:4,ParamsError:5},F={Widevine:"com.widevine.alpha",FairPlay:"com.apple.fps"},f={},W={};function U(Z){return M.apply(this,arguments)}function M(){return(M=a(d().mark(function Z(oe){var re,Te,Ce,ke,ye=this;return d().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(this._drm)return J.next=3,this._drm.destroy();J.next=4;break;case 3:this._drm=null;case 4:J.prev=4,ge.call(this,"mod_shaka_s"),J.next=8;var fe=oe;return new u(function(Ee,Ie){var Me="https://"+r.domain+r.path+r.h5Version+"/drm/aliplayer-drm2-min.js";fe!=null&&fe.shakaUrl&&(Me=fe?.shakaUrl),s.loadJS(Me,Ee,Ie)});case 8:ge.call(this,"mod_shaka_f"),J.next=15;break;case 11:return J.prev=11,J.t0=J.catch(4),console.log("[load shaka-player error]",J.t0),J.abrupt("return",Y.call(this,j.LoadJs,J.t0));case 15:if(shaka.polyfill.installAll(),f=ie(shaka.util.Error.Code),W=ie(shaka.net.NetworkingEngine.RequestType),shaka.Player.isBrowserSupported()){J.next=20;break}return J.abrupt("return",Y.call(this,j.SupportError));case 20:if(window.isSecureContext){J.next=22;break}return J.abrupt("return",Y.call(this,j.SupportError,{_code:"no-secure-context"}));case 22:if(Ce=(Ee=>{var Ie=null;return(Ee=Ee||{}).widevine||Ee.fairplay||(Ie={message:n.get("Error_Drm_Params_Missing")}),[Ee,Ie]})(oe.drm),Te=Ce[0],Ce=Ce[1])return J.abrupt("return",Y.call(this,j.ParamsError,Ce));J.next=25;break;case 25:return oe.vid||(this._options.isVBR=!0),Ce=new shaka.Player,ee.call(this,Ce),this._drm=Ce,ke={drm:{servers:((ke={})[F.Widevine]=(re=Te.widevine)==null?void 0:re.licenseUrl,ke[F.FairPlay]=(re=Te.fairplay)==null?void 0:re.licenseUrl,ke),advanced:((re={})[F.Widevine]={serverCertificateUri:(ke=Te.widevine)==null?void 0:ke.certificateUrl},re[F.FairPlay]={serverCertificateUri:(ke=Te.fairplay)==null?void 0:ke.certificateUrl,serverCertificate:(ke=Te.fairplay)==null?void 0:ke.certificate},re)},autoShowText:1},shaka.util.PlayerConfiguration.mergeConfigObjects(ke,oe.drmOption||{}),Ce.configure(ke),Ce.attach(this.tag),Ce.getNetworkingEngine().registerRequestFilter(function(Ee,Ie,Me){if((we=Ie.drmInfo)!=null&&we.keySystem&&(ye._keySystem=Ie.drmInfo.keySystem),Ee===shaka.net.NetworkingEngine.RequestType.LICENSE){ge.call(ye,"drm_li_s");var Oe=he.call(ye);if(Oe.licenseHeaders&&Object.keys(Oe.licenseHeaders).forEach(function(ue){Ie.headers[ue]=Oe.licenseHeaders[ue]}),typeof Oe.licenseRequestFilter=="function")return Oe.licenseRequestFilter(Ie,shaka.util)}else if(Ee===shaka.net.NetworkingEngine.RequestType.SERVER_CERTIFICATE){ge.call(ye,"drm_cer_s");var we=he.call(ye);if(typeof we.certificateRequestFilter=="function")return we.certificateRequestFilter(Ie,shaka.util)}}),Ce.getNetworkingEngine().registerResponseFilter(function(Ee,Ie,Me){if(Ee===shaka.net.NetworkingEngine.RequestType.LICENSE){ge.call(ye,"drm_li_f"),se.call(ye,Ee,Ie);var Oe=he.call(ye);if(typeof Oe.licenseResponseFilter=="function")return Oe.licenseResponseFilter(Ie,shaka.util)}else if(Ee===shaka.net.NetworkingEngine.RequestType.SERVER_CERTIFICATE&&(ge.call(ye,"drm_cer_f"),se.call(ye,Ee,Ie),Oe=he.call(ye),typeof Oe.certificateResponseFilter=="function"))return Oe.certificateResponseFilter(Ie,shaka.util)}),J.prev=37,J.next=40,Ce.load(oe.source);case 40:J.next=46;break;case 42:J.prev=42,J.t1=J.catch(37),console.log("error when load source",J.t1),Y.call(this,j.LoadSource,J.t1);case 46:this._initPlayBehavior(),this._executeReadyCallback();case 48:case"end":return J.stop()}},Z,this,[[4,11],[37,42]])}))).apply(this,arguments)}function R(Z){this.traceLog(h,"play::"+Z),Z&&(this.trigger(l.Private.ManualPlay),this._monitor2.manualPlay()),this._isManualPlay=!!Z,this.tag.ended||this._ended?this.replay():this.tag.paused&&this.tag.play()}function K(){this._switchingDesc=null,this._keySystem=null,this._baseType.dispose.call(this),this._drm&&(this._drm.destroy(),this._drm=null)}function G(Z,oe){var re,Te,Ce,ke=this._drm;Z?(re=Number(Z.split(c.DASH_QUALITY_PROTOCOL)[1]),(Z=ke.getVariantTracks().find(function(ye){return ye.id===re}))&&(ke.configure({abr:{enabled:!1}}),Te=!1,Ce=this.getOptions().seamlessHandover,ke.selectVariantTrack(Z,Te=typeof Ce=="boolean"?!Ce:Te),Te||(this._switchingDesc=oe.desc))):(ke.configure({abr:{enabled:!0}}),this._switchingDesc=null)}function X(){var Z=this._drm;if(Z)return Z.getTextTracks().map(function(oe){return{language:oe.language,label:oe.label,kind:oe.kind==="subtitle"?"subtitles":"captions",default:oe.active}});console.warn("shaka has not been initialized but _getTextTracks is called")}function z(Z){var oe=this._drm;oe&&(Z?(oe.setTextTrackVisibility(!0),oe.selectTextLanguage(Z)):oe.setTextTrackVisibility(!1))}function te(Z){Z&&this._drm.selectAudioLanguage(Z),ce.call(this)}function ee(Z){var oe=this;Z.addEventListener("error",function(re){Y.call(oe,j.PlayerError,re.detail)}),Z.addEventListener("trackschanged",function(){(function(){var re,Te,Ce,ke=this._drm,ye=ke.getAudioLanguages(),J=(re=ke.getVariantTracks())==null?void 0:re.find(function(fe){return fe.active});J&&(Te=[],ye.length===1&&ye[0]==="und"?Te.push({id:"und",language:n.get("Default"),enabled:!0}):ye.length&&(Ce=ke.getAudioLanguagesAndRoles()||[],ye.forEach(function(fe){var Ee;Te.push({id:fe,language:((Ee=Ce.find(function(Ie){return Ie.language===fe}))==null?void 0:Ee.label)||fe,enabled:fe===J.language})})),this.trigger(l.Player.AudioTrackUpdated,{audioTracks:Te}))}).call(oe),Z.keySystem()===F.FairPlay?oe.trigger(l.Player.LevelsLoaded,{levels:[{}]}):(ce.call(oe),de.call(oe,Z))}),Z.addEventListener("adaptation",function(){Z.keySystem()!==F.FairPlay&&de.call(oe,Z)}),this.tag.addEventListener("resize",function(){oe._switchingDesc&&oe.trigger(l.Private.Info_Show,{text:n.get("Quality_Change_Result")+"<span>"+oe._switchingDesc+"</span>",duration:3e3,align:"lb"})})}function Y(Z,oe){var re=this;if(console.log("to handle error of:",Z,oe,"this._isError",this._isError),this._isError)this.traceLog(h,"drm extra error ["+Z+"]"+oe+"}",!0);else{oe=oe||{};var Te={mediaId:this.getOptions().vid||"",error_code:"",error_msg:""};switch(Z){case j.LoadJs:Te.error_code=c.ErrorCode.ModuleLoadError,Te.error_msg="drm player module load error."+(oe?.message||"");break;case j.LoadSource:case j.PlayerError:Te.error_code=c.ErrorCode.DrmLoadError,Te.error_msg=n.get("Error_Drm_Load")+" | "+(f[oe.code]||"")+" "+(Ce=>{var ke="";return ke=Ce.code===shaka.util.Error.Code.BAD_HTTP_STATUS?(Ce==null||(Ce=Ce.data)==null?void 0:Ce[1])||"":ke})(oe),Te.diagnosis_info=(Ce=>{var ke=shaka.util.Error.Code,ye="",J=Ce.data||[];switch(Ce.code){case ke.BAD_HTTP_STATUS:case ke.HTTP_ERROR:case ke.TIMEOUT:case ke.LICENSE_REQUEST_FAILED:ye=n.get("Tip_Drm_Request_Err")+ae(J);break;case ke.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:case ke.SESSION_TIMEOUT:window.isSecureContext?(ye=n.get("Tip_Drm_Key_System_Unavailable"),J.length&&(ye+="<br />"+n.get("Tip_Err_Common_Short")+J)):ye=n.get("Tip_Drm_Secure_Context");break;case ke.FAILED_TO_CREATE_CDM:window.location.protocol==="file:"&&(ye=n.get("Tip_Drm_File_Not_Allowed"));break;case ke.HLS_INVALID_PLAYLIST_HIERARCHY:ye=n.get("Tip_Drm_Playlist_Hierarchy");break;case ke.ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:ye=n.get("Tip_Drm_Info_Missing")}return Ce=ae(J),ye||Ce})(oe),Te.shaka_error=oe||{},oe.code===shaka.util.Error.Code.LICENSE_REQUEST_FAILED&&console.log("LICENSE_REQUEST_FAILED => ",oe.data[0]);break;case j.SupportError:Te.error_code=c.ErrorCode.DrmNotSupported,oe._code==="no-secure-context"?Te.error_msg=n.get("Tip_Drm_Secure_Context"):(Te.error_msg=n.get("Error_Drm_Not_Supported"),Te.diagnosis_info=n.get("Tip_Drm_Unsupported"));break;case j.ParamsError:Te.error_code=c.ErrorCode.InvalidParameter,Te.error_msg=oe.message||""}this.logError(Te),this.trigger(l.Player.Error,Te),shaka.Player.probeSupport().then(function(Ce){re.traceLog(h,"probeSupport::"+JSON.stringify(Ce),!0)}).catch(function(Ce){re.traceLog(h,"probeSupport::"+Ce,!0)})}}function ie(Z){var oe={};return Object.keys(Z).forEach(function(re){oe[Z[re]]=re}),oe}function ae(Z){return n.get("Tip_Err_Common")+Z}function de(){var Z=(oe=this._drm.getVariantTracks())==null?void 0:oe.find(function(re){return re.active}),oe=(this._qualityService.levels||[]).find(function(re){return re.Url===""+c.DASH_QUALITY_PROTOCOL+Z.id});Z&&oe?this.trigger(l.Private.QualityChange,{levelSwitch:!0,desc:oe.desc}):console.warn("no activeTrack or activeDisplayItem found",Z,oe)}function ce(){var Z=this._drm,oe=Z.getVariantTracks(),re=(Te=Z.getVariantTracks())==null?void 0:Te.find(function(Ce){return Ce.active}),Te=(oe=oe.filter(function(Ce){return Ce.audioId===re.audioId})).map(function(Ce){return{url:""+c.DASH_QUALITY_PROTOCOL+Ce.id,width:Ce.width,height:Ce.height,bitrate:Ce.bandwidth,attrs:{BANDWIDTH:Ce.bandwidth,RESOLUTION:Ce.width+"x"+Ce.height}}});this.trigger(l.Player.LevelsLoaded,{levels:Te}),this.trigger(l.Private.SelectorGenerateList,{type:"quality"}),Z.getConfiguration().abr.enabled||(oe=(this._qualityService.levels||[]).find(function(Ce){return Ce.Url===""+c.DASH_QUALITY_PROTOCOL+re.id}))&&this.trigger(l.Private.SelectorValueChange,{type:"quality",text:oe.desc})}function ge(Z){this.trigger(l.Private.Timeline,{name:Z,ts:performance.now()})}function he(){var Z={},oe=this.getOptions().drm||{},re=this._keySystem||((re=this._drm)==null?void 0:re.keySystem())||"";return re===F.Widevine?Z=oe.widevine||{}:re===F.FairPlay&&(Z=oe.fairplay||{}),Z}function se(Z,oe){if((re=this.getOptions())==null||(re=re.drm)==null||!re.disableReportLicense){var re=oe.data,oe="";if(typeof re=="string")oe=re;else if(re instanceof ArrayBuffer)try{oe=new TextDecoder().decode(re)}catch(Ce){console.log("error in decode license provider response",Ce),oe="[ArrayBuffer] decode error: "+Ce}this.traceLog(h,"DRM-"+W[Z]+"-response: "+oe,!0)}}e.exports.inject=(()=>{var Z=a(d().mark(function oe(re,Te,Ce,ke){var ye;return d().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:(ye=re)._baseType=Ce,ye._keySystem=null,ye.initPlay=U.bind(ye,ke),ye.play=R.bind(ye),ye.dispose=K.bind(ye),ye._getDrmTextTracks=X.bind(ye),ye._switchDrmTextTrack=z.bind(ye),ye._switchLevel=G.bind(ye),ye._switchAudioTrack=te.bind(ye);case 10:case"end":return J.stop()}},oe)}));return function(oe,re,Te,Ce){return Z.apply(this,arguments)}})(),e.exports.play=R,e.exports._switchLevel=G,e.exports._getTextTracks=X,e.exports._switchTextTrack=z,e.exports._switchAudioTrack=te,e.exports.updateLevelList=ce,e.exports.logProviderResponse=se},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../base/event/eventtype":77,"es6-promise":13}],112:[function(t,e,O){var d=t("../base/player"),o=t("./drminjector"),a=t("./drminjectorNg"),u=d.extend({init:function(s,r){r.useDrm2?a.inject(this,u,d.prototype,r):o.inject(this,u,d.prototype,r,function(n){}),r._native=!1,d.call(this,s,r)}});e.exports=u},{"../base/player":102,"./drminjector":110,"./drminjectorNg":111}],113:[function(t,e,O){(function(d){(function(){var o=t("../../lib/io"),a=t("../../config"),u=t("../../lib/constants"),s=t("../../lib/util"),r=t("../../lib/playerutil"),n=t("../../lib/ua"),l=t("../../lib/data"),c=t("../../lang/index"),h=t("../base/event/eventtype"),j="flvinjector.js";e.exports.inject=function(F,f,W,U,M,R){var K,G=U.source,X=U.optionFormat;function z(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyFlv(),this._superPt&&(f.prototype.play=this._superPt.play,f.prototype.pause=this._superPt.pause,f.prototype.initPlay=this._superPt.initPlay,f.prototype.seek=this._superPt.seek,f.prototype.canSeekable=this._superPt.canSeekable))}function te(ee){try{for(var Y=ee.buffered.length,ie="Len:"+Y+";",ae=0;ae<Y;ae++)ie+="["+(ae+1)+"]"+ee.buffered.start(ae)+"~"+ee.buffered.end(ae);return ie}catch{}}(R||(U=G,R=X,!F._flv&&r.isFlv(U,R)&&r.isSupportFlv()))&&(F._Type=f,F._superType=W,F._superPt=W.prototype,F._disposed=!1,f.prototype._checkFlvReady=function(){return this._flv!=null||(console.warn("please invoke this method after ready event"),!1)},F._isFlv=!0,F._flv=null,F._isLoadedFlv=!1,F._dumpBuffer=null,f.prototype.play=function(ee){if(this.traceLog(j,"play::"+ee),ee&&(this.trigger(h.Private.ManualPlay),this._monitor2.manualPlay()),this._checkFlvReady())return this._isManualPlay=ee||!1,this.trigger(h.Private.Cover_Hide),this._options.isLive&&ee?this._loadByUrlInner(this._options.source,0,ee):this.tag.ended||this._ended?this.replay():(this._seeking==0&&(ee=0,this.tag.ended||this._ended||(ee=this.getCurrentTime())==0&&(ee=-1),ee!=-1)&&this.seek(ee),this.tag.paused&&(this._hasLoaded||(this._hasLoaded=!0,this._flv.load()),this._flv.play())),this},f.prototype.seek=function(ee){if(this._checkFlvReady()){this._seeking=!0;var Y=this.getDuration();Y<=(ee=Math.floor(ee))&&(ee=Y);try{this._flv.currentTime=ee}catch(ie){console.log(ie)}return this}},f.prototype.pause=function(ee){if(this._checkFlvReady())return this._isManualPause=ee||!1,this._flv.pause(),this},f.prototype.getProgramDateTime=function(){var ee;if(this._checkFlvReady())return this._metadata?(ee=(ee=this._flv.getFirstSample())&&ee.pts?ee.pts:0,console.log(""+this._metadata.NtpTime),console.log("PTS"+ee),this._metadata.NtpTime+ee):""},f.prototype.initPlay=function(ee){var Y,ie,ae;function de(ce,ge){if(!ce._disposed){var he=!ce._flv,se=(ce._destroyFlv(),ce._options.isLive);if(se&&!flvjs.getFeatureList().networkStreamIO)return(Te={error_code:u.ErrorCode.FormatNotSupport,error_msg:c.get("Error_Not_Support_Mse_Flv")+"|streamIO(format:flv)"}).display_msg=Te.error_msg,void ce.trigger(h.Player.Error,Te);var Z,oe={isLive:se,enableWorker:ce._options.enableWorker,accurateSeek:!0},re=(n.IS_IE11&&(oe.enableWorker=!1),{type:"flv",isLive:se,url:ce._options.source});for(Z in se?(oe.enableStashBuffer=ce._options.enableStashBufferForFlv,oe.stashInitialSize=ce._options.stashInitialSizeForFlv,oe.autoCleanupSourceBuffer=!1):oe.lazyLoadMaxDuration=600,oe.statisticsInfoReportInterval=1e3,ce._options.isLive&&(ce._options.flvFrameChasing&&(oe.flvFrameChasing=ce._options.flvFrameChasing),ce._options.chasingFirstParagraph&&(oe.chasingFirstParagraph=ce._options.chasingFirstParagraph),ce._options.chasingSecondParagraph&&(oe.chasingSecondParagraph=ce._options.chasingSecondParagraph),ce._options.chasingFirstSpeed&&(oe.chasingFirstSpeed=ce._options.chasingFirstSpeed),ce._options.chasingSecondSpeed)&&(oe.chasingSecondSpeed=ce._options.chasingSecondSpeed),ce._options.flvOption)Z=="cors"||Z=="hasAudio"||Z=="withCredentials"||Z=="hasVideo"||Z=="type"?re[Z]=ce._options.flvOption[Z]:oe[Z]=ce._options.flvOption[Z];flvjs.LoggingControl.enableAll=ce._options.debug,ce._flv=flvjs.createPlayer(re,oe),K(ce,ce._flv),ce._flv.on(flvjs.Events.DUMP_BUFFER,function(ke){var ye,J,fe;ce._options.disableDumpBuffer||ce._liveRetryCount===0&&ce._vodRetryCount===0&&ce._nudgeCount===0&&typeof ce._dumpBuffer!="string"&&(ce._flvDumpTimer||(ce._flvDumpTimer=setTimeout(function(){ce._reportDumpBuffer&&ce._reportDumpBuffer()},5e3)),ke=new Uint8Array(ke),ce._dumpBuffer?ce._dumpBuffer=(ye=ce._dumpBuffer,J=ke,(fe=new Uint8Array(ye.length+J.length)).set(ye),fe.set(J,ye.length),fe):ce._dumpBuffer=ke)});var Te,Ce=s.throttle(function(ke){ce.traceLog(j,"dts_adjustment::"+ke.from+"->"+ke.to)},1e3);ce._flv.on(flvjs.Events.DTS_ADJUSTMENT,function(ke){Ce(ke)}),ce._flv.on(flvjs.Events.MEDIA_INFO,function(ke){ce._metadata=ke.metadata}),ce._flv.on(flvjs.Events.METADATA_ARRIVED,function(ke){ke&&ke.dataContent&&ke.dataContent.length&&ce.trigger(h.Private.SeiFrame,{dataContent:ke.dataContent,pts:ke.pts})}),ce._flv.on(flvjs.Events.STATISTICS_INFO,function(ke){ce.trigger(h.Private.StatisticsInfo,ke)}),ce._flv.attachMediaElement(ce.tag),ce._initPlayBehavior(ge)&&((ce._options.preload||ce._options.autoplay)&&(ce._hasLoaded=!0,ce._flv.load()),ce._options.autoplay&&!ce.tag.paused&&ce._flv.play(),M&&M(ce._flv),he)&&(ce._executeReadyCallback(),ce._urls)&&0<ce._urls.length&&(ce._currentPlayIndex=r.findSelectedStreamLevel(ce._urls,ce._options.defaultDefinition),Te=ce._urls[ce._currentPlayIndex],ce._options.source=Te.Url,ce.trigger(h.Private.SourceLoaded,Te))}}n.browser.safari&&this.trigger(h.Private.Snapshot_Hide),s.contentProtocolMixed(G,"",X)?((Y={mediaId:this._options.vid||"",error_code:u.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=c.get("Request_Block_Text"),this.trigger(h.Player.Error,Y)):(ie=this)._isLoadedFlv&&typeof Hls<"u"?setTimeout(function(){de(ie,ee)},1e3):(this.trigger(h.Private.H5_Loading_Show),ae=performance.now(),(function(ce,ge,he){var se="aliplayer-flv-min.js",Z="",Z=a.domain?"https://"+a.domain+a.path+a.h5Version+"/flv/"+se:"/build/flv/"+se,oe=(this._options.assetPrefix&&(Z=this._options.assetPrefix+"/flv/"+se),JSON.parse(d)&&(Z="http://localhost:8000/dist/aliplayer-flv.js"),this);o.loadJS(Z,function(){ce.apply(oe)},function(){he&&he()})}).call(ie,function(){this.traceLog(j,"got js#"+parseInt(performance.now()-ae)),this._isLoadedFlv=!0,de(this,ee)},this._options.debug,function(){var ce={mediaId:ie._options.vid||"",mediaAuth:ie._options.mediaAuth||"",error_code:u.ErrorCode.ModuleLoadError,error_msg:"flv module load error."};ie.trigger(h.Player.Error,ce)}))},f.prototype._reportDumpBuffer=function(){var ee,Y;this.__flvDumpTimer&&clearTimeout(this.__flvDumpTimer),this.__flvDumpTimer=null,this._dumpBuffer&&typeof this._dumpBuffer!="string"&&(1048576<this._dumpBuffer.byteLength&&(this._dumpBuffer=this._dumpBuffer.slice(0,1048576)),ee=this._dumpBuffer,this._dumpBuffer="REPORTED",performance.now(),ee=s.arrayBufferToB64(ee),Y=l.guid(),this.traceLog(j,"dump::"+Y),this.trigger(h.Private.DumpBuffer,{id:Y,data:ee}))},f.prototype._destroyFlv=function(){try{this._flv&&(this._flv.pause(),this._flv.destroy())}catch(ee){console.log(ee)}this.loaded=!1,this._hasLoaded=!1,this._flv=null,this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this._dumpBuffer=null},Object.defineProperty(f.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return z},set:function(){return z}}),f.prototype.canSeekable=function(ee){var Y;if(this._flv)return Y=this._flv.mediaInfo,!(!this._flv._isTimepointBuffered(ee)&&Y&&!Y.hasKeyframesIndex)},f.prototype._getbwEstimator=function(){var ee;return 1024*((ee=this._flv)==null||(ee=ee.statisticsInfo)==null?void 0:ee.speed)*8},K=function(ee,Y){var ie=!1;Y.on(flvjs.Events.ERROR,function(ae,de,ce){var ge,he,se,Z,oe="flvjs-error::"+ae+"#"+de+"#"+ce.code+"#"+ce.msg,re=ce.msg==="BodyStreamBuffer was aborted"&&Y._config.lazyLoad;if(re){oe+="#Maximum buffering duration exceeded, suspend transmuxing task";try{var Te=Y._msectl._sourceBuffers.video,Ce=Y._msectl._sourceBuffers.audio;oe+="#Video buffer:"+te(Te)+"#Audio buffer:"+te(Ce)}catch{}}ee.traceLog(j,oe),ee._reportDumpBuffer&&ee._reportDumpBuffer(),ae===flvjs.ErrorTypes.BUFFER_FULL||(ee._flv.unload(),re)||ee._isError||(ge=u.ErrorCode.OtherError,he=c.get("Error_Play_Text"),se=null,de==flvjs.ErrorDetails.NETWORK_EXCEPTION?!(Te=ee.getOptions().source)||Te.toLowerCase().indexOf("http://")!=0&&Te.toLowerCase().indexOf("https://")!=0?(ge=u.ErrorCode.InvalidSourceURL,he=c.get("Error_Invalidate_Source_Widthout_Protocal"),ie=!0):he=navigator.onLine?(ge=u.ErrorCode.RequestDataError,c.get("Maybe_Cors_Error")):(ge=u.ErrorCode.NetworkError,c.get("Error_Network_Text")):de==flvjs.ErrorDetails.NETWORK_STATUS_CODE_INVALID?ce.code=="404"?(ge=u.ErrorCode.NotFoundSourceURL,he=c.get("Error_Not_Found"),se=c.get("Tip_Err_Not_found")):ce.code=="403"?(ge=u.ErrorCode.AuthKeyExpired,he=c.get("Error_AuthKey_Text"),ie=!0):(ge=u.ErrorCode.NetworkError,he=c.get("Error_Network_Text")):de==flvjs.ErrorDetails.NETWORK_TIMEOUT?(ge=u.ErrorCode.LoadingTimeout,he=c.get("Error_Waiting_Timeout_Text")):de==flvjs.ErrorDetails.MEDIA_FORMAT_UNSUPPORTED||de==flvjs.ErrorDetails.MEDIA_CODEC_UNSUPPORTED?(ge=u.ErrorCode.FormatNotSupport,he=c.get("Error_H5_Not_Support_Text")+"|codec(format:flv)",ie=!0):de===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&(Ce=ee.tag.error)&&(ge=u.VideoErrorCode[Ce.code],he=Ce.code+" || "+Ce.message),oe=function(){var ke;setTimeout(function(){ee.trigger(h.Private.Play_Btn_Hide)}),ee.checkOnline()&&(ke={mediaId:ee._options&&ee._options.vid?ee._options.vid:"",error_code:ge,error_msg:he,diagnosis_info:se},ee.logError(ke),ke.display_msg=he,a.cityBrain&&(ee.flv=null),ee.trigger(h.Player.Error,ke))},ee._options&&ee._options.isLive&&!ie?(Z=ee._options).liveRetry>ee._liveRetryCount?(ee._liveRetryCount==0&&ee.trigger(h.Player.OnM3u8Retry),ae=Z.liveRetryInterval+Z.liveRetryStep*ee._liveRetryCount,ee._liveRetryCount++,setTimeout(function(){ee._isError||ee._liveRetryTimer||ee._loadByUrlInner(Z.source)},1e3*ae)):(ee.trigger(h.Player.LiveStreamStop),oe()):de===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&ce.code===11&&ee.getCurrentTime()<ee.getDuration()?(ee._flv.unload(),ee._flv.load(),ee._flv.detachMediaElement(),ee._flv.attachMediaElement(ee.tag)):ie?(ee._flv.unload(),oe()):ee._reloadForVod()||oe())})})}}).call(this)}).call(this,"false")},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/data":35,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../base/event/eventtype":77}],114:[function(t,e,O){var d=t("../base/player"),o=t("./flvinjector"),a=d.extend({init:function(u,s){o.inject(this,a,d,s,function(r){}),s._native=!1,d.call(this,u,s)}});e.exports=a},{"../base/player":102,"./flvinjector":113}],115:[function(t,e,O){(function(d){(function(){function o(){return(o=Object.assign?Object.assign.bind():function(G){for(var X=1;X<arguments.length;X++){var z,te=arguments[X];for(z in te)!{}.hasOwnProperty.call(te,z)||(G[z]=te[z])}return G}).apply(null,arguments)}var a,u=t("../../lib/object"),s=t("../../lib/io"),r=t("../../config"),n=t("../../lib/constants"),l=t("../../lib/util"),c=t("../../lib/playerutil"),h=t("../../lib/ua"),j=t("../../lang/index"),F=t("../base/event/eventtype"),f="hlsinjector.js";function W(){this&&this._hls&&(this._hls.stopLoad(),this._hls.destroy(),this._hls=null)}function U(G){this.trigger(F.Private.Timeline,{name:G,ts:performance.now()})}function M(G,X){return X<G.maxNumRetry}var R={};function K(G,X){X.frag.level===this.currentLevel&&(this.off(a.Events.FRAG_BUFFERED,K),this.media.currentTime=this.media.currentTime+.01)}e.exports.inject=function(G,X,z,te,ee,Y){G._hls2=!1;var ie,ae,de,ce=te.source,ge=te.optionFormat;((ee||"").length||Y||(Y=ce,ie=te.useHlsPluginForSafari,te=te.useHlsPlugOnMobile,ae=ge,!G._hls&&c.isHls(Y,ae)&&(!c.canPlayHls()||c.isSafariUsedHlsPlugin(ie)||te&&c.isUsedHlsPluginOnMobile())))&&(G._Type=X,G._superType=z,G._superPt=z.prototype,G._disposed=!1,G._isHls=!0,G._hls=null,G._isLoadedHls=!1,G._stopLoadAsPaused=!0,G._yekced_saved=ee,R.seek||(R.seek=z.prototype.seek),R.dispose||(R.dispose=z.prototype.dispose),G.initPlay=(function(he){var se,Z;function oe(re,Te){if(!re._disposed){if(re._antiRecord&&(console.log("Manual check before load source"),re._antiRecord.check()))return;var Ce,ke=!re._hls,ye=(re._destroyHls(),{xhrSetup:function(fe,Ee){fe.withCredentials=re._options.withCredentials||!1}}),J=(re._hls2||(J=re._options.loadingTimeOut||re._options.hlsLoadingTimeOut)&&(ye.manifestLoadingTimeOut=J,ye.levelLoadingTimeOut=J,ye.fragLoadingTimeOut=J),re._hls2&&(ye.manifestLoadPolicy=o({},a.DefaultConfig.manifestLoadPolicy),ye.playlistLoadPolicy=o({},a.DefaultConfig.playlistLoadPolicy),ye.fragLoadPolicy=o({},a.DefaultConfig.fragLoadPolicy),J=re._options.isLive?re._options.liveRetry:re._options.vodRetry,ye.manifestLoadPolicy.default.errorRetry.maxNumRetry=J,re._options.isLive&&(ye.manifestLoadPolicy.default.errorRetry.shouldRetry=M),ye.manifestLoadPolicy.default.timeoutRetry.maxNumRetry=J,ye.playlistLoadPolicy.default.errorRetry.maxNumRetry=J,re._options.isLive&&(ye.playlistLoadPolicy.default.errorRetry.shouldRetry=M),ye.playlistLoadPolicy.default.timeoutRetry.maxNumRetry=J,ye.fragLoadPolicy.default.maxLoadTimeMs=2e4,ye.fragLoadPolicy.default.errorRetry.shouldRetry=M,(J=re._options.hlsOption||{}).manifestLoadPolicy&&(ye.manifestLoadPolicy=u.deepMerge(ye.manifestLoadPolicy,J.manifestLoadPolicy),delete J.manifestLoadPolicy),J.playlistLoadPolicy&&(ye.playlistLoadPolicy=u.deepMerge(ye.playlistLoadPolicy,J.playlistLoadPolicy),delete J.playlistLoadPolicy),J.fragLoadPolicy&&(ye.fragLoadPolicy=u.deepMerge(ye.fragLoadPolicy,J.fragLoadPolicy),delete J.fragLoadPolicy),re._options.isLive)&&!h.IS_IE11&&(ye.backBufferLength=12,ye.liveDurationInfinity=!0),re._options.isLive&&(re._options.hlsFrameChasing&&(ye.hlsFrameChasing=re._options.hlsFrameChasing),re._options.chasingFirstParagraph&&(ye.chasingFirstParagraph=re._options.chasingFirstParagraph),re._options.chasingSecondParagraph&&(ye.chasingSecondParagraph=re._options.chasingSecondParagraph),re._options.chasingFirstSpeed&&(ye.chasingFirstSpeed=re._options.chasingFirstSpeed),re._options.chasingSecondSpeed)&&(ye.chasingSecondSpeed=re._options.chasingSecondSpeed),re._options.defaultBandwidth&&(ye.defaultBandwidth=re._options.defaultBandwidth),re._options.hlsBandWidthUpCacheTime&&(ye.abrBandWidthUpCacheTime=re._options.hlsBandWidthUpCacheTime),re._options.seamlessHandover&&(ye.seamlessHandover=re._options.seamlessHandover),re._options.liveSyncDurationCount&&(ye.liveSyncDurationCount=re._options.liveSyncDurationCount),re._options.nudgeMaxRetry&&(ye.nudgeMaxRetry=re._options.nudgeMaxRetry),re._options.maxMaxBufferLength&&(ye.maxMaxBufferLength=re._options.maxMaxBufferLength),re._options.maxBufferSize&&(ye.maxBufferSize=re._options.maxBufferSize),re._options.fragLoadingRetryDelay&&(ye.fragLoadingRetryDelay=re._options.fragLoadingRetryDelay),re._options.maxBufferLength&&(ye.maxBufferLength=re._options.maxBufferLength),re._options.accessKeyId&&(ye.accessKeyId=re._options.accessKeyId),re._options.accessKeySecret&&(ye.accessKeySecret=re._options.accessKeySecret),re._options.securityToken&&(ye.securityToken=re._options.securityToken),re._options.app&&(ye.app=re._options.app),re._options.stream&&(ye.stream=re._options.stream),re._options.domain&&(ye.domain=re._options.domain),re._options.regionId&&(ye.regionId=re._options.regionId),re._yekced_saved&&(re._hls2?ye._vpk=re._yekced_saved:ye._yekcedxx=re._yekced_saved),ye.enableWorker=re._options.enableWorker,ye.debug=re._options.debug,re._stopLoadAsPaused=re._options.hlsOption.stopLoadAsPaused,re._getPlayStartTime()+re._posOffset);for(Ce in J&&(ye.startPosition=J,console.log("hls.js startPosition => ",J)),re._options.hlsOption)ye[Ce]=re._options.hlsOption[Ce];h.IS_IE11&&(ye.enableWorker=!1),re._hls=new a(ye),de(re,re._hls),re._loadSourced=!1,re._hls.attachMedia(re.tag),re._hls.on(a.Events.INIT_PTS_FOUND,function(fe,Ee){re._initPTS=Ee.initPTS}),re._hls.on(a.Events.FRAG_LOADING,function(){U.call(re,"frag_s")}),re._hls.on(a.Events.FRAG_LOADED,function(){U.call(re,"frag_f")}),re._hls.on(a.Events.FRAG_PARSED,function(){U.call(re,"frag_parsed")}),re._hls.on(a.Events.FRAG_PARSED,function(fe,Ie){var Ie=Ie?.frag||{},Me=Ie.elementaryStreams||{},Oe="Frag(sn"+Ie.sn+"): "+((Oe=Ie.startPTS)==null?void 0:Oe.toFixed(3))+" -> "+((Oe=Ie.endPTS)==null?void 0:Oe.toFixed(3))+"(v:"+((Oe=Me.video)==null||(Oe=Oe.startPTS)==null?void 0:Oe.toFixed(3))+"/"+((Oe=Me.video)==null||(Oe=Oe.endPTS)==null?void 0:Oe.toFixed(3))+";a:"+((Oe=Me.audio)==null||(Oe=Oe.startPTS)==null?void 0:Oe.toFixed(3))+"/"+((Oe=Me.audio)==null||(Oe=Oe.endPTS)==null?void 0:Oe.toFixed(3))+"); Duration: "+((Me=Ie.duration)==null?void 0:Me.toFixed(3));re.trackLogFragBuffer&&(re.trackLogFragBuffer.push(Oe),10<re.trackLogFragBuffer.length)&&re.trackLogFragBuffer.shift()}),re._hls.on(a.Events.FRAG_PARSING_USERDATA,function(fe,Ee){Ee&&Ee.dataContent&&Ee.dataContent.length?re.trigger(F.Private.SeiFrame,{dataContent:Ee.dataContent,pts:Ee.pts}):Ee.samples.forEach(function(Ie){re.trigger(F.Private.SeiFrame,{dataContent:Ie.userDataBytes,dataContentString:Ie.userData,pts:Ie.pts,uuid:Ie.uuid})})}),re._hls.on(a.Events.MEDIA_ATTACHED,function(){var fe;re._hls.on(a.Events.MANIFEST_PARSED,function(){re._initPlayBehavior(Te||re._loadSourced)}),re._hls.on(a.Events.AUDIO_TRACKS_UPDATED,function(Ee,Ie){re.trigger(F.Player.AudioTrackUpdated,Ie)}),re._hls.on(a.Events.MANIFEST_LOADED,function(Ee,Ie){re.trigger(F.Player.LevelsLoaded,Ie)}),re._hls.on(a.Events.LEVEL_SWITCHED,function(Ee,Ie){if(re._qualityService){for(var Me=re._hls.levels[Ie.level].url,Oe=re._qualityService.levels,we="",ue="",ve=0;ve<Oe.length;ve++)if(Oe[ve].Url==Me){ue=Oe[ve].desc,we=Oe[ve].bitrate;break}(ue||we)&&re.trigger(F.Private.QualityChange,{levelSwitch:!0,url:Me,bitrate:we,desc:ue})}}),re._hls.on(a.Events.AUDIO_TRACK_SWITCH,function(Ee,Ie){re.trigger(F.Player.AudioTrackSwitch,Ie),setTimeout(function(){re.trigger(F.Player.AudioTrackSwitched,Ie)},1e3)}),(re._options.autoplay||re._options.preload||Te)&&(re._loadSourced=!0,re._levels&&1<re._levels.length?(re._hls.trigger(a.Events.MANIFEST_LOADING,{}),re._hls.trigger(a.Events.MANIFEST_LOADED,{levels:re._levels})):re._hls.loadSource(re._options.source||"__INVALID__")),ke?(re._executeReadyCallback(),re._urls&&0<re._urls.length&&(re._currentPlayIndex=c.findSelectedStreamLevel(re._urls,re._options.defaultDefinition),fe=re._urls[re._currentPlayIndex],re._options.source=fe.Url,re.trigger(F.Private.SourceLoaded,fe))):re.trigger(F.Private.H5_Loading_Show)})}}this.trigger(F.Private.H5_Loading_Show),l.contentProtocolMixed(ce,"",ge)?(se=this.getOptions()||{},(se={mediaId:se.vid||"",mediaAuth:se.mediaAuth||"",error_code:n.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=j.get("Request_Block_Text"),this.trigger(F.Player.Error,se)):(Z=this)._isLoadedHls&&a!==void 0?oe(this,he):(this.trigger(F.Private.H5_Loading_Show),this._getHlsVersion(function(re){var Te=performance.now();(function(Ce,ke,ye){var J="aliplayer-hls-min.js",fe=((ke=ke||{}).hls2&&(J="aliplayer-hls2-min.js"),ke.enableHlsH265&&(J="aliplayer-hls2-hevc-min.js"),""),fe=r.domain?"https://"+r.domain+r.path+r.h5Version+"/hls/"+J:"/build/hls/"+J,Ee=(ke.assetPrefix&&(fe=ke.assetPrefix+"/hls/"+J),JSON.parse(d)&&(fe="http://localhost:8080/dist/aliplayer-hls2.js"),U.call(this,"mod_hls_s"),this);s.loadJS(fe,function(){U.call(Ee,"mod_hls_f"),a=window.AliHls||window.Hls,Ce.apply(Ee)},function(){ye&&ye()})}).call(Z,function(){Z.traceLog(f,"got js#"+parseInt(performance.now()-Te)),Z._isLoadedHls=!0,oe(Z,he)},{debug:Z._options.debug,hls2:Z._hls2,assetPrefix:Z._options.assetPrefix,enableHlsH265:Z._options.enableHlsH265},function(){var Ce={mediaId:Z._options.vid||"",mediaAuth:Z._options.mediaAuth||"",error_code:n.ErrorCode.ModuleLoadError,error_msg:"hls module load error."};Z.trigger(F.Player.Error,Ce)})}),this.on("error",W))}).bind(G),G.seek=(function(he){if(this._checkHlsReady()){try{R.seek.call(this,he),this.tag.paused&&this._stopLoadAsPaused&&this._hls.startLoad(he)}catch(se){console.log(se)}return this}}).bind(G),G.pause=(function(he){if(this.tag){if(!this._checkHlsReady())return;this.tag.pause(),this._stopLoadAsPaused&&this._hls.stopLoad()}return this._isManualPause=he||!1,this}).bind(G),G.play=(function(he){if(this.traceLog(f,"play::"+he),he&&(this.trigger(F.Private.ManualPlay),this._monitor2.manualPlay()),this._checkHlsReady())return this._isManualPlay=he||!1,this.trigger(F.Private.Cover_Hide),this._options.autoplay||this._options.preload||this._loadSourced||(this._loadSourced=!0,this._hls.loadSource(this._options.source)),this.tag.ended||this._ended?this.replay():this.tag.paused&&(this.tag.play(),this._stopLoadAsPaused)&&(he=this.getCurrentTime(),this._hls.startLoad(he)),this}).bind(G),G.stop=(function(){if(this._checkHlsReady())return this.tag.setAttribute("src",null),this._hls.stopLoad(),this}).bind(G),G.dispose=(function(){this._disposed||(this._disposed=!0,R.dispose.call(this),this._destroyHls())}).bind(G),G.getCurrentPDT=(function(){var he,se,Z;if(this._checkHlsReady())return this._hls.currentLevel==-1?"":this._hls.playingDate?this._hls.playingDate.getTime():(se=this._hls.streamController.fragPlaying||{},(he=se.pdt)?(se=1e3*se.startPTS,Z=1e3*this.getCurrentTime(),he+(Z-se)):0)}).bind(G),G.getProgramDateTime=(function(){if(this._checkHlsReady()){if(this._hls.currentLevel==-1)return"";var he=this._hls.currentLevel,he=this._hls.levels[he].details;return he&&(he=he.programDateTime,he)?new Date(he).valueOf():0}}).bind(G),G._checkHlsReady=(function(){return this._hls!=null||(console.warn("please invoke this method after ready event"),!1)}).bind(G),G._getHlsVersion=(function(he){this._options.useHls2===!0?(this._hls2=!0,he()):this._options.useHls2===!1&&he()}).bind(G),G._getbwEstimator=(function(){var he=NaN;{var se;this._hls&&(se=this._hls.abrController._bwEstimator,he=se?se.getEstimate():this._hls.bandwidthEstimate)}return he}).bind(G),G._destroyHls=(function(){this._hls&&this._hls.destroy(),this._hls=null,this.trackLogFragBuffer=[]}).bind(G),G._switchLevel=(function(he){for(var se=this,Z=(this.traceLog(f,"switchLevel::"+he),this.trigger(F.Player.LevelSwitch),this._hls.levels),oe=!0,re=0;re<Z.length;re++)if(Z[re].url==he||Z[re].url[0]==he){oe=!1,this._hls2&&this._options.seamlessHandover?(this._hls.loadLevel=re,console.log("Seamlessly set nextLevel to",re)):(this._hls.on(a.Events.FRAG_BUFFERED,K),this._hls.currentLevel=re,console.log("Immediately set currentLevel to",re));break}oe&&(this._hls.on(a.Events.FRAG_BUFFERED,K),this._hls.currentLevel=-1),this._switchedLevel=!0,setTimeout(function(){se.trigger(F.Player.LevelSwitched),se._switchedLevel=!1},1e3)}).bind(G),de=function(he,se){se.on(a.Events.MANIFEST_LOADING,function(){U.call(he,"mani_s")}),se.on(a.Events.MANIFEST_LOADED,function(){U.call(he,"mani_f")}),se.on(a.Events.DEFAULT_BANDWIDTH,function(Z,oe){he.trigger(F.Player.DefaultBandWidth,{width:oe.width,height:oe.height,bitrate:oe.bitrate})}),se.on(a.Events.ERROR,function(Z,oe){var re="hlsjs-error::"+oe.type+"#"+oe.details+"#"+((re=oe.networkDetails)==null?void 0:re.status)+"#"+oe.reason+"#bw:"+(he._getbwEstimator()/8/1024).toFixed(2)+"KB";if(oe.details==="manifestParsingError")try{re+="#"+oe.networkDetails.getResponseHeader("Content-Type")+"#"+oe.networkDetails.getResponseHeader("Content-Length")}catch{}else if(oe.details==="fragLoadError"||oe.details==="fragLoadTimeOut")re+="#"+oe.frag.url+"#retry:"+((Ie=oe.errorAction)==null?void 0:Ie.retryCount);else if(oe.details==="internalException")try{re+="#"+oe.event+"#"+((ke=oe.error)==null?void 0:ke.message)+"#"+((Ce=oe.error)==null?void 0:Ce.stack)}catch{}oe.details!=="internalException"&&(re+="#"+oe.error);try{re+="#"+(he==null||(Oe=he.trackLogFragBuffer)==null?void 0:Oe.toString())}catch{}if(he.traceLog(f,re,!0),he._options&&oe.details!=a.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&he._seeking!=1&&oe.fatal!=0){he._clearTimeout();var Te,Ce,ke,ye=n.ErrorCode.LoadedMetadata,J=j.get("Error_Play_Text"),fe=!1,Ee=null,Ie=!1,Me=(oe.details==a.ErrorDetails.MANIFEST_LOAD_ERROR||oe.details==a.ErrorDetails.LEVEL_LOAD_ERROR?(fe=!0,ke=oe.networkDetails,Te=Number(ke.status),he.liveShiftSerivce&&he.liveShiftSerivce.isLiveShiftPlaying()&&Te===404?(ye=n.ErrorCode.NotFoundSourceURL,J=j.get("Error_Liveshift_M3U8_Not_Found_Text"),Ie=!0):Te===404?(ye=n.ErrorCode.NotFoundSourceURL,J=j.get("Error_Not_Found"),Ee=j.get("Tip_Err_Not_found")):Te===403?(Ce=c.parseHttpHeaders(ke)["x-tengine-error"])&&-1<n.RegionBlockMessages.indexOf(Ce)?(ye=n.ErrorCode.RegionBlock,J=j.get("Error_Region_Block_Text"),Ee=j.get("Tip_Err_Blocked")):(ye=n.ErrorCode.AuthKeyExpired,J=j.get("Error_AuthKey_Text")):J=Te===0&&navigator.onLine?(ye=n.ErrorCode.RequestDataError,J+""+j.get("Maybe_Cors_Error")):j.get("Error_Load_M3U8_Failed_Text")):oe.details==a.ErrorDetails.MANIFEST_LOAD_TIMEOUT||oe.details==a.ErrorDetails.LEVEL_LOAD_TIMEOUT?(fe=!0,J=j.get("Error_Load_M3U8_Timeout_Text")):oe.details==a.ErrorDetails.MANIFEST_PARSING_ERROR||oe.details==a.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR?(fe=!0,J=j.get("Error_M3U8_Decode_Text")):oe.type==a.ErrorTypes.NETWORK_ERROR?(ye=n.ErrorCode.NetworkError,J=j.get("Error_Network_Text")):oe.type!=a.ErrorTypes.MUX_ERROR&&oe.type!=a.ErrorTypes.MEDIA_ERROR||(ye=n.ErrorCode.PlayDataDecode,J=j.get("Error_TX_Decode_Text")),J=J+"("+oe.details+")",function(){var ue;setTimeout(function(){he.trigger(F.Private.Play_Btn_Hide)}),he.checkOnline()&&(ue={mediaId:(ue=he.getOptions()||{}).vid||"",mediaAuth:ue.mediaAuth||"",error_code:ye,error_msg:oe.details,diagnosis_info:Ee},he.logError(ue),ue.display_msg=J,he.trigger(F.Player.Error,ue))}),Oe=function(){he._liveErrorHandle&&clearTimeout(he._liveErrorHandle),se.stopLoad(),he.trigger(F.Player.LiveStreamStop),he._liveErrorHandle=setTimeout(Me,500)},we=he._options;if(we.isLive&&Ie)Oe();else if(he._hls2){if(fe&&we.isLive)if(we.hlsOption.progressive){if(we.liveRetry>he._liveRetryCount)return he._liveRetryCount==0&&he.trigger(F.Player.OnM3u8Retry),he.trigger(F.Private.H5_Loading_Show),he._hls.stopLoad(),he._liveRetryCount++,void setTimeout(function(){he.traceLog(f,"retry when live error in progressive mode#"+he._liveRetryCount),he._hls.loadSource(we.source)},1e3*he._liveRetryCount)}else((re=oe.errorAction)==null?void 0:re.retryCount)===0&&he.trigger(F.Player.OnM3u8Retry);oe.fatal&&Oe()}else we.isLive?we.liveRetry>he._liveRetryCount?(he._liveRetryCount==0&&he.trigger(F.Player.OnM3u8Retry),ke=we.liveRetryInterval+we.liveRetryStep*he._liveRetryCount,he._liveRetryCount++,he.trigger(F.Private.H5_Loading_Show),setTimeout(function(){fe&&he._loadByUrlInner(he._options.source,0,!0)},1e3*ke)):Oe():(fe&&-1<[403,404].indexOf(Te)||!he._reloadForVod())&&Me()}})})}}).call(this)}).call(this,"false")},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/object":47,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../base/event/eventtype":77}],116:[function(t,e,O){var d=t("../base/player"),o=t("./hlsinjector"),a=d.extend({init:function(u,s){s._native=!1,o.inject(this,a,d,s),d.call(this,u,s)}});e.exports=a},{"../base/player":102,"./hlsinjector":115}],117:[function(t,e,O){var d=["extraInfo"];function o(){return(o=Object.assign?Object.assign.bind():function(M){for(var R=1;R<arguments.length;R++){var K,G=arguments[R];for(K in G)!{}.hasOwnProperty.call(G,K)||(M[K]=G[K])}return M}).apply(null,arguments)}var a=typeof Promise>"u"?t("es6-promise").Promise:Promise,u=t("../../lib/io"),s=t("../../config"),r=t("../../lib/constants"),n=t("../../lang/index"),l=t("../base/event/eventtype"),c=t("../../lib/ua"),h=t("../base/event/eventtype"),j=t("../../lib/playerutil"),F="rtsinjector.js";function f(M){var R,K,G,X,z=this._options;z.rtsFallback&&window.Aliplayer?((R=z.rtsFallbackSource)||((K=String(z.rtsFallbackType||"").toUpperCase())&&!["HLS","FLV"].includes(K)&&(console.warn("invalid rtsFallbackType:",z.rtsFallbackType,", will use flv -> hls as fallback"),K=""),K=K||(j.isSupportFlv()?"FLV":"HLS"),X=z.source,G=!X.includes("@subvideo=no"),X=!X.includes("@subaudio=no"),X=(G={enableVideo:G,enableAudio:X}).enableVideo,G=G.enableAudio,K==="FLV"?(z.flvOption=z.flvOption||{},G||(z.flvOption.hasAudio=!1),X||(z.flvOption.hasVideo=!1)):K!=="HLS"||G||(z.mute=!0),R=((te,Y)=>{var Y=Y==="FLV"?"flv":"m3u8",ie=window.location.protocol,ie=(-1<["http:","https:"].indexOf(ie)?ie:"https:")+"//";return(te=te.replace("artc://",ie).replace("?","."+Y+"?").replace("@subvideo=no","").replace("@subaudio=no","")).includes("?")||(te+="."+Y),te.includes("auth_key")&&(te+="&rts_degrade=on"),te})(z.source,K)),X={reason:M,fallbackUrl:R},this.trigger(l.Player.RtsFallback,X),this._monitor2.rtsFallback(X),this.loadByUrl(R)):(this.trigger(l.Player.Error,M),this.logError(M))}function W(M){var R=this,K=(this.trigger(l.Private.H5_Loading_Show),this.trigger(l.Private.Play_Btn_Hide),this._options),G=new U(R,M);return R._rts.subscribe(K.source,o({retryTimes:K.rtsFallback?1:void 0,mediaTimeout:K.rtsLoadDataTimeout},K.rtsOption||{})).then(function(X){return G.preProcess(),R.tag.srcObject=null,X.play(R.tag),c.IS_IOS&&Number(c.IOS_VERSION)<=14&&R.one(h.Player.TimeUpdate,function(){setTimeout(function(){R.tag.pause(),R.tag.play()},200)}),!0}).catch(function(X){return R.traceLog(F,"subError::"+JSON.stringify(X)),!1})}e.exports.inject=function(M,R,K,G,X,z){function te(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyRts())}M._Type=R,M._superType=K,M._superPt=K.prototype,M._disposed=!1,R.prototype._checkRtsReady=function(){return this._rts!=null||(console.warn("please invoke this method after ready event"),!1)},M._isRts=!0,M._rts=null,M._isLoadedRts=!1,M.bind_rtsErrorEventHandler=null,M.bind_rtsReconnectEventHandler=null,R.prototype.play=function(ee){if(this.traceLog(F,"play::"+ee),ee&&(this.trigger(l.Private.ManualPlay),this._monitor2.manualPlay()),this._checkRtsReady()&&(this._isManualPlay=ee||!1,this.paused()))return this.trigger(l.Private.Cover_Hide),this.trigger(l.Private.Play_Btn_Hide),W.call(this),this},R.prototype.seek=function(ee){},R.prototype.setSpeed=function(ee){},R.prototype.stop=function(){return this._rts&&this._rts.unsubscribe(),this},Object.defineProperty(R.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return te},set:function(){return te}}),R.prototype._destroyRts=function(){this._rts&&(this.stop(),this._rts.off("onError",this.bind_rtsErrorEventHandler),this._rts.off("reconnect",this.bind_rtsReconnectEventHandler)),this._rts=null},R.prototype.initPlay=function(ee){var Y,ie=this;function ae(de,ce){var ge;de._disposed||(ge=!de._rts,de._destroyRts(),de._rts=new AliRTS.createClient({customReporter:function(he){if(Number(he.msgid)===126){var se={};try{se=JSON.parse(he.args)}catch{se={}}se.tcid&&de._rts&&(de._rts.traceid=se.tcid,de.traceLog(F,"tcid::"+se.tcid,!0),de.trigger(l.Player.RtsTraceId,{traceId:se.tcid,source:de._options.source}))}}}),de._checkRtsSupport(function(he){(function(se){var Z=this._rtsErrorEventHandler.bind(this),Z=(this.bind_rtsErrorEventHandler=Z,se.on("onError",Z),this._rtsReconnectEventHandler.bind(this));this.bind_rtsReconnectEventHandler=Z,se.on("reconnect",Z)}).call(de,de._rts),de._options.autoplay?W.call(de).then(function(se){se&&de._initPlayBehavior(ce)}):de._initPlayBehavior(ce),ge&&de._executeReadyCallback()},function(he){console.log("[RTS isSupport error]",he);var se=null,Z=null;switch(Number(he.errorCode)){case 10110:se=r.ErrorCode.RtsNotSupportWebRtc,Z=n.get("Rts_Err_Not_Support_Webrtc");break;case 10111:se=r.ErrorCode.RtsBrowserNotSupport,Z=n.get("Rts_Err_Browser_Not_Support");break;case 10112:se=r.ErrorCode.RtsBrowserVersionTooLow,Z=n.get("Rts_Err_Browser_Version_Too_Low");break;case 10113:se=r.ErrorCode.RtsNotSupportH264,Z=n.get("Rts_Err_Not_Support_H264");break;case 10114:se=r.ErrorCode.RtsCreateOfferError,Z=n.get("Rts_Err_Create_Offer_Error")}return f.call(de,{error_code:se,error_msg:Z}),!1}))}this._isLoadedRts?ae(this,ee):(this.trigger(l.Private.H5_Loading_Show),Y=performance.now(),(function(de,ce,ge){var se="",he=this._options,se="https://g.alicdn.com/apsara-media-box/imp-web-rts-sdk/"+(he.rtsVersion||s.rtsVersion)+"/aliyun-rts-sdk.js",Z=(he.assetPrefix&&(se=he.assetPrefix+"/rts/aliyun-rts-sdk.js"),he.rtsSdkUrl&&(se=he.rtsSdkUrl),this);u.loadJS(se,function(){de.apply(Z)},function(){ge&&ge()})}).call(ie,function(){this.traceLog(F,"got js#"+parseInt(performance.now()-Y)),this._isLoadedRts=!0,ae(this,ee)},this._options.debug,function(){var de={error_code:r.ErrorCode.ModuleLoadError,error_msg:"rts module load error."};ie.trigger(l.Player.Error,de)}))},R.prototype.getStats=function(){return this._rts&&this._rts.getTransportStats?a.all([this._rts.getTransportStats(),this._rts.getRemoteVideoStats(),this._rts.getRemoteAudioStats()]).then(function(ae){var Y=ae[0],ie=ae[1],ae=ae[2];return{rtt:Y.rtt,bytesReceived:Y.bytesReceived,framesDecoded:ie.framesDecoded,packetsLost:(ie.packetsLost||0)+(ae.packetsLost||0),packetsReceived:(ie.packetsReceived||0)+(ae.packetsReceived||0),timestamp:Y.timestamp||Date.now()}}).catch(function(ee){return console.log("ERR in RTS getstats: ",ee),{}}):a.resolve()},R.prototype._checkRtsSupport=function(ee,Y){this._options.skipRtsSupportCheck?ee():this._rts.isSupport({isReceiveVideo:!0}).then(ee).catch(Y)},R.prototype._rtsErrorEventHandler=function(ee){console.log("RTS Error:",ee),ee.extraInfo;var Y=((Z,oe)=>{if(Z==null)return{};var re,Te={};for(re in Z)if({}.hasOwnProperty.call(Z,re)){if(oe.indexOf(re)!==-1)continue;Te[re]=Z[re]}return Te})(ee,d),ie=(this.traceLog(F,"rtsError::"+JSON.stringify(Y)),null),ae=null,de=null;switch(Number(ee.errorCode)){case 10201:return;case 10101:ie=r.ErrorCode.RtsSignalError,ae=n.get("Rts_Err_Http_Signal_Error");break;case 10114:ie=r.ErrorCode.RtsCreateOfferError,ae=n.get("Rts_Err_Create_Offer_Error");break;case 10202:ie=r.ErrorCode.RtsPlayUrlError,ae=n.get("Rts_Err_Play_Url_Error");break;case 10203:ie=r.ErrorCode.RtsSubscribeNonthing,ae=n.get("Rts_Err_Subscribe_Nonthing");break;case 10205:var ce=(ce=ee.extraInfo)==null?void 0:ce.response;if(ce?.status===403){var ge=ce.headers["x-tengine-error"];if(ge&&-1<r.RegionBlockMessages.indexOf(ge)){ie=r.ErrorCode.RegionBlock,ae=n.get("Error_Region_Block_Text"),de=n.get("Tip_Err_Blocked");break}ie=r.ErrorCode.AuthKeyExpired,ae=n.get("Error_AuthKey_Text")}else de=ce?.status===404?(ie=r.ErrorCode.NotFoundSourceURL,ae=n.get("Error_Not_Found"),n.get("Tip_Err_Not_found")):(ie=r.ErrorCode.RtsHttpRequestFaild,ae=n.get("Rts_Err_Http_Request_Failed"),n.get("Tip_Err_Rts_Http_Failed"));break;case 10206:ie=r.ErrorCode.RtsHttpAnswerFaild,ae=n.get("Rts_Err_Http_Answer_Failed");break;case 10207:ie=r.ErrorCode.RtsPlayFailedError;try{var he,se=(he=ee.message.match(/after (\d+) ms/))==null?void 0:he[1]}catch{}ae=n.get("Rts_Err_Play_Failed")+", "+(se?se*ee.extraInfo.retryTimes/1e3+n.get("Rts_Err_No_Data_For"):ee.message);break;case 12e3:ie=r.ErrorCode.RtsPeerConnectionUnknown,ae=n.get("Rts_Err_PeerConnection_Unknown")}Y={error_code:ie,error_msg:ae,diagnosis_info:de,tcid:this._rts.traceid},(function(Z){var oe=this;oe.pause(),setTimeout(function(){oe.trigger(l.Private.Play_Btn_Hide)}),oe.checkOnline()&&f.call(this,Z)}).call(this,Y)},R.prototype._rtsReconnectEventHandler=function(ee){var Y=this;this.traceLog(F,"rts auto reconnect::"+ee.retryTimes+"#"+JSON.stringify(ee.reason)),this.waiting=!0,this._TimeUpdateStamp=0,this.trigger(l.Private.H5_Loading_Show),this.trigger(l.Private.Play_Btn_Hide),this._options.autoplay&&this.one(h.Player.AutoPlayPrevented,function(){Y.trigger(l.Private.Play_Btn_Hide),Y.trigger(l.Private.H5_Loading_Show)}),ee.retryTimes===1&&this.trigger(l.Player.OnM3u8Retry),this.trigger(l.Private.Retry,{type:"rts",source:this._options.source})}};var U=(()=>{function M(R,K){(this.isRetry=K)&&(this.isApple=c.IS_IOS||c.IS_SAFARI,this.player=R)}return M.prototype.preProcess=function(){var R,K,G;this.isRetry&&this.isApple&&(R=this.player.getVolume(),K=this.player.muted(),R)&&!K&&((G=this.player.tag).volume=0,this.player.one("canplay",function(){G.volume=R}))},M})()},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../base/event/eventtype":77,"es6-promise":13}],118:[function(t,e,O){var d=t("../base/player"),o=t("./rtsinjector"),a=d.extend({init:function(u,s){s.isLive&&(s._native=!1,o.inject(this,a,d,s),d.call(this,u,s))}});e.exports=a},{"../base/player":102,"./rtsinjector":117}],119:[function(o,e,O){var d=o("../../lib/constants"),o=o("../../lib/oo").extend({init:function(a){this.player=a,this.tickhandle=null}});o.prototype.tick=function(a,u){var s=this;this.tickhandle=setTimeout(function(){s.player&&s.player.trigger(d.AuthKeyExpiredEvent),u&&u()},1e3*a)},o.prototype.clearTick=function(a){this.tickhandle&&clearTimeout(this.tickhandle)},e.exports=o},{"../../lib/constants":33,"../../lib/oo":48}],120:[function(t,e,O){function d(U,M,R){var G=s.randomUUID(),K="https://mts."+U.domainRegion+".aliyuncs.com/?",G={AccessKeyId:U.accessId,Action:"GetLicense",MediaId:U.vid,LicenseUrl:K,data:U.data,SecurityToken:U.stsToken,Format:"JSON",Type:U.encryptionType,Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:G};U.header&&(G.Header=U.header),K+="Signature="+s.AliyunEncodeURI(s.makeChangeSiga(G,U.accessSecret,"POST")),U=s.makeUTF8sort(G,"=","&"),o.post(K,U,function(X){X?(X=JSON.parse(X),M&&(X=X.License,M(X))):R&&R(r.createError("MPSLicense"))},function(X){if(R){var z={Code:"",Message:c.get("Error_MTS_Fetch_Urls_Text")};try{z=JSON.parse(X)}catch{}R({Code:u.ErrorCode.ServerAPIError,Message:z.Code+"|"+z.Message,sri:z.RequestId||""})}})}var o=t("../../lib/io"),a=(t("../../lib/ua"),t("../../lib/bufferbase64")),u=t("../../lib/constants"),s=t("./signature"),r=t("./util"),n=t("../../lib/url"),l=t("../../lib/playerutil"),c=t("../../lang/index"),h=t("../base/event/eventtype");function j(U){window.console.error("The license request failed.")}function F(U){window.console.error("A decryption key error was encountered"),window.console.error("A decryption key error was encountered",U)}function f(U){window.console.log("Decryption key was added to session.")}function W(U,M,R){R.addEventListener(U,function(){M(arguments[0])},!1)}e.exports.requestLicenseKey=function(U){var M=U;return M._options.vid&&(M.__vid=M._options.vid),function(R,K){var G,X,z=M._options,te=M._getDRMEncryptItem();te&&(G={vid:M.__vid,accessId:z.accId,accessSecret:z.accSecret,stsToken:z.stsToken,domainRegion:z.domainRegion,authInfo:z.authInfo,encryptionType:te.encryptionType},te.encryptionType==u.EncryptionType.Widevine?G.data=a.encode(R.message):te.encryptionType==u.EncryptionType.PlayReady&&(z=a.unpackPlayReady(R.message),G.data=z.changange,z.header)&&(G.header=JSON.stringify(z.header)),console.log(G.data),R=M.__licenseKeys,X=M.__vid+te.Url,R&&R[X],d(G,function(ee){M.__licenseKeys||(M.__licenseKeys={}),10<G.data.length&&(M.__licenseKeys[X]=ee),ee=a.decode(ee),K(ee)},function(ee){ee={mediaId:M.__vid,error_code:ee.Code,error_msg:ee.Message},M.logError(ee),M.trigger("error",ee)}))}},e.exports.loadCertificate=function(ee,te){var R,K,G,X=new XMLHttpRequest,z=(X.addEventListener("load",(function(Y,de){var ae,de=de.target;if(de.status!==200){var ge=u.ErrorCode.DrmLicenseRequestFailed,ce=c.get("Error_Drm_License_Request_Failed"),ge={mediaId:this._options.vid||"",error_code:ge,error_msg:de.response};player.logError(ge),ge.display_msg=ce,player.trigger(h.Player.Error,ge)}else{try{ae=this._options.isLive?JSON.parse(de.response).Response.B64ServCert:JSON.parse(JSON.parse(de.response).DRMCertInfo).b64ServCert}catch(he){console.log(he)}ce=s.base64DecodeUint8Array(ae),ge=(function(he,oe){var Z=oe.target,oe=oe.initData,re=s.arrayToString(oe).split("skd://")[1].split("?")[0],Te=s.stringToArray(re);if(oe=((Ce,ke,ye)=>{typeof ke=="string"&&(ke=stringToArray(ke));var J=0,fe=new ArrayBuffer(Ce.byteLength+4+ke.byteLength+4+ye.byteLength),Ee=new DataView(fe);return new Uint8Array(fe,0,Ce.byteLength).set(Ce),J+=Ce.byteLength,Ee.setUint32(J,ke.byteLength,!0),J+=4,(Ce=new Uint16Array(fe,J,ke.length)).set(ke),J+=Ce.byteLength,Ee.setUint32(J,ye.byteLength,!0),J+=4,new Uint8Array(fe,J,ye.byteLength).set(ye),new Uint8Array(fe,0,fe.byteLength)})(oe,Te,he),Z.webkitKeys||((()=>{if(!WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4"))throw"Key System not supported";keySystem="com.apple.fps.1_0"})(),Z.webkitSetMediaKeys(new WebKitMediaKeys(keySystem))),!Z.webkitKeys)throw"Could not create MediaKeys";if(Te=Z.webkitKeys.createSession("video/mp4",oe),!Te)throw"Could not create key session";Te.contentId=re,W("webkitkeymessage",(function(fe){var ke=this,ye=fe.target,Oe=fe.message,J=new XMLHttpRequest,fe=(fe.sessionId,J.responseType="text",J.session=ye,J.addEventListener("load",(function(ue){ue=ue.target,ve=this._options.isLive?JSON.parse(ue.response).Response.B64License:JSON.parse(JSON.parse(ue.response).License).b64License;var ve=s.base64DecodeUint8Array(ve),ve=s.Uint8ArrayToString(ve);ve.substr(0,5)==="<ckc>"&&ve.substr(-6)==="</ckc>"&&(ve=ve.slice(5,-6)),ve=s.base64DecodeUint8Array(ve),ue.session.update(ve)}).bind(this),!1),J.addEventListener("error",j,!1),btoa("spc="+s.base64EncodeUint8Array(Oe)+"&assetId="+encodeURIComponent(ye.contentId))),Ee={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:s.ISODateString(new Date),SignatureNonce:s.randomUUID(),AccessKeyId:ke._options.accessKeyId,SecurityToken:ke._options.securityToken,CertId:ke._options.certId};ke._options.isLive?(Ee.RegionId=ke._options.region,Ee.Action="DescribeDRMLicense",Ee.Version="2016-11-01",Ee.CdmData=fe,Ee.Type="fairplay",Ee.Domain=n.parseUrl(ke._options.source).hostname):(Ee.region=ke._options.region,Ee.Action="GetDRMLicense",Ee.Version="2017-03-21",Ee.VideoId=ke._options.vid,Ee.CDMData=fe,Ee.DRMType="FairPlay");var Ie,Me,Oe="Signature="+s.AliyunEncodeURI(s.makeChangeSiga(Ee,ke._options.accessKeySecret,"POST"));ye=ke._options.isLive?"https://"+l.getLiveHostByRegion(ke._options.region)+"/?"+Oe:"https://vod."+ke._options.region+".aliyuncs.com/?"+Oe;for(Me in J.open("POST",ye,!0),J.setRequestHeader("Content-type","application/x-www-form-urlencoded"),Ee){var we;Ee.hasOwnProperty(Me)&&(we=Ee[Me],Ie=Ie?Ie+"&"+s.AliyunEncodeURI(Me)+"="+s.AliyunEncodeURI(we):s.AliyunEncodeURI(Me)+"="+s.AliyunEncodeURI(we))}J.send(Ie)}).bind(this),Te),W("webkitkeyadded",f,Te),W("webkitkeyerror",F,Te)}).bind(this,ce),de=(this._fairPlayHandlers.onNeedKey=ge,(function(he){window.console.error("A video playback error occurred")}).bind(this)),this._fairPlayHandlers.onError=de,this.tag.addEventListener("webkitneedkey",ge,!1),this.tag.addEventListener("error",de,!1),this.tag.src=this._options.source}Y&&Y()}).bind(ee,te),!1),X.addEventListener("error",(function(Y){window.console.error("Failed to retrieve the server certificate.")}).bind(ee),!1),{Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:s.ISODateString(new Date),SignatureNonce:s.randomUUID(),AccessKeyId:ee._options.accessKeyId,SecurityToken:ee._options.securityToken,CertId:ee._options.certId}),te=(ee._options.isLive?(z.RegionId=ee._options.region,z.Action="DescribeDRMCertificate",z.Version="2016-11-01"):(z.region=ee._options.region,z.Action="GetDRMCertInfo",z.Version="2017-03-21",z.VideoId=ee._options.vid),"Signature="+s.AliyunEncodeURI(s.makeChangeSiga(z,ee._options.accessKeySecret,"POST"))),ee=ee._options.isLive?"https://"+l.getLiveHostByRegion(ee._options.region)+"/?"+te:"https://vod."+ee._options.region+".aliyuncs.com/?"+te;for(R in X.open("POST",ee,!0),X.setRequestHeader("Content-type","application/x-www-form-urlencoded"),z)z.hasOwnProperty(R)&&(K=z[R],G=G?G+"&"+s.AliyunEncodeURI(R)+"="+s.AliyunEncodeURI(K):s.AliyunEncodeURI(R)+"="+s.AliyunEncodeURI(K),console.log(K));X.send(G)},e.exports.getRequestUrl=function(R,M){var R={AccessKeyId:M._options.accessKeyId,Format:"JSON",Version:"2016-11-01",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:s.ISODateString(new Date),SignatureNonce:s.randomUUID(),SecurityToken:M._options.securityToken,RegionId:M._options.region,Action:"DescribeDRMLicense",Type:"widevine",CdmData:R,Domain:n.parseUrl(M._options.source).hostname},K=(M._options.widevineCertId&&(R.CertId=M._options.widevineCertId),"Signature="+s.AliyunEncodeURI(s.makeChangeSiga(R,M._options.accessKeySecret,"POST")));return{url:"https://"+l.getLiveHostByRegion(M._options.region)+"/?"+K,data:s.makeUTF8sort(R,"=","&"),jsonData:s.makeUTF8sort(R,"=","&","json")}},e.exports.postData=function(K,M){var R=s.randomUUID(),R={AccessKeyId:M._options.accessKeyId,VideoId:M._options.vid,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:R,SecurityToken:M._options.securityToken,region:M._options.region,Action:"GetDRMLicense",DRMType:"Widevine",CDMData:K},K=(M._options.widevineCertId&&(R.CertId=M._options.widevineCertId),"Signature="+s.AliyunEncodeURI(s.makeChangeSiga(R,M._options.accessKeySecret,"POST")));return{url:"https://vod."+M._options.region+".aliyuncs.com/?"+K,data:s.makeUTF8sort(R,"=","&"),jsonData:s.makeUTF8sort(R,"=","&","json")}},e.exports.destroyFairPlay=function(){this._fairPlayHandlers.onNeedKey&&this.tag.removeEventListener("webkitneedkey",this._fairPlayHandlers.onNeedKey),this._fairPlayHandlers.onError&&this.tag.removeEventListener("error",this._fairPlayHandlers.onError),this._fairPlayHandlers={}}},{"../../lang/index":28,"../../lib/bufferbase64":30,"../../lib/constants":33,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/url":54,"../base/event/eventtype":77,"./signature":126,"./util":127}],121:[function(t,e,O){var d=t("../../lib/io"),o=t("../../lib/constants"),a=t("../../lib/data"),u=t("./util");e.exports.getDataByAuthInfo=function(s,r,n,l){s={playAuth:s.playAuth,requestId:s.requestId},d.get("https://api.h5video.shop/api/page/getMediaPlayInfo"+(c=>(c.requestId=a.guid(),Object.keys(c).reduce(function(h,j){return h+(h?"&":"?")+j+"="+encodeURIComponent(c[j])},"")))(s),function(c){if(c)if(c=JSON.parse(c),c.httpStatusCode!==200)l&&l({Code:o.ErrorCode.ServerAPIError,Message:c.httpStatusCode+"|"+c.code,sri:c.requestId});else{for(var h=c.data.PlayInfoList,j=[],F=h.length-1;0<=F;--F)h[F].Definition==="AUTO"&&(j=[h.splice(F,1)[0]]);var f,W=null;(W=(W=j.length===0?u.objectPlayerMessageSort(h,r):u.objectPlayerMessageSort(j)).map(function(U){return U.format==="m3u8"&&(U.Url=U.Url+"&_ext=.m3u8"),U}))&&n&&(f=c.data.VideoBase||{},n({videoId:f.VideoId,userId:f.UserId,requestId:c.requestId,urls:W,encryptUrlArr:[],thumbnailUrl:"",coverUrl:f.CoverURL,playInfoAry:h,textTracks:c.data.SubtitlesList}))}else l&&l(u.createError("SaaS"))},function(c){c&&typeof c=="string"&&-1<c.indexOf("Invalid CORS request")?l&&l({Code:o.ErrorCode.ServerAPIError,Message:c}):l&&l(u.createError("SaaS"))})}},{"../../lib/constants":33,"../../lib/data":35,"../../lib/io":45,"./util":127}],122:[function(u,e,O){var d=u("./saasplayer"),o=u("./light"),a=u("../base/event/eventtype"),u=d.extend({init:function(s,r){d.call(this,s,r),this.service=o,this.loadByLightSaas()}});u.prototype.loadByLightSaas=function(s){var r=this._options,n={playAuth:r.mediaAuth,defaultDefinition:r.defaultDefinition};this.log("STARTFETCHDATA",{it:"lightSaasPlayAuth",pa:{playAuth:r.mediaAuth}}),this.loadData(n,s)},u.prototype.replayByMediaAuth=function(s){this.trigger(a.Private.Error_Hide),this.tag&&(this.tag.pause(),this.tag.removeAttribute("src"),this.tag.load()),this.setTextTracks([]),this.trigger(a.Private.UserTrackReset),this._options.source="",this._options.mediaAuth=s,this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.loadByLightSaas(!0)},e.exports=u},{"../base/event/eventtype":77,"./light":121,"./saasplayer":125}],123:[function(t,e,O){var d=t("../../lib/io"),o=t("../../lib/constants"),a=t("./signature"),u=t("./util"),s=t("../../lang/index"),r=t("../../lib/ua"),n=function(c,h){for(var j="",F=(c.sort(function(R,K){return R=parseInt(R.bitrate),K=parseInt(K.bitrate),h=="desc"?K<R?-1:R<K?1:void 0:R<K?-1:K<R?1:void 0}),c.length),f=0;f<F;f++){var W=c[f],U=o.QualityLevels[W.definition],M="",M=U===void 0?W.bitrate:j==U?U+W.bitrate:U;W.desc=M,j=U}},l=function(c,h){for(var j="",F=(c.sort(function(R,K){return R=parseInt(R.width),K=parseInt(K.width),h=="desc"?K<R?-1:R<K?1:void 0:R<K?-1:K<R?1:void 0}),c.length),f=0;f<F;f++){var W=c[f],U=o.QualityLevels[W.definition],M="",M=U===void 0?"":j==U?U+W.height:U;W.desc=M,j=U}};e.exports.getDataByAuthInfo=function(W,h,j,F){a.returnUTCDate(),a.randomUUID();var f=a.randomUUID(),f={AccessKeyId:W.accessId,Action:"PlayInfo",MediaId:W.vid,Formats:W.format,AuthInfo:W.authInfo,AuthTimeout:W.authTimeout||o.AuthKeyExpired,IncludeSnapshotList:W.includeSnapshotList,Rand:W.rand,SecurityToken:W.stsToken,Format:"JSON",Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Terminal:r.IS_CHROME?"Chrome":r.IS_EDGE?"Edge":r.IS_IE11?"IE":r.IS_SAFARI?"Safari":r.IS_FIREFOX?"Firefox":"",SignatureNonce:f},f=(W.hlsUriToken&&(W.MtsHlsUriToken=W.hlsUriToken),W.playConfig&&(f.PlayConfig=JSON.stringify(W.playConfig)),a.makeUTF8sort(f,"=","&")+"&Signature="+a.AliyunEncodeURI(a.makeChangeSiga(f,W.accessSecret))),W="https://mts."+W.domainRegion+".aliyuncs.com/?"+f;d.get(W,function(U){var M,R,K;U?(M=(U=JSON.parse(U)).PlayInfoList.PlayInfo,R="",(K=U.SnapshotList?U.SnapshotList.Snapshot:[])&&0<K.length&&(R=K[0].Url),K=((G,X)=>{for(var z=[],te=[],ee=[],Y=[],ie=G.length-1;0<=ie;ie--){var ae=G[ie];(ae.format=="mp4"?te:ae.format=="mp3"?ee:ae.format=="m3u8"?z:Y).push(ae)}return 0<ee.length?(n(ee,X),ee):0<te.length?(l(te,X),te):0<z.length?(l(z,X),z):(l(Y,X),Y)})(M,h),j&&j({requestId:U.RequestId,urls:K,thumbnailUrl:R})):F&&F(u.createError("MPS"))},function(U){if(F){var M={Code:"",Message:s.get("Error_MTS_Fetch_Urls_Text")};try{M=JSON.parse(U)}catch{}F({Code:o.ErrorCode.ServerAPIError,Message:M.Code+"|"+M.Message,sri:M.RequestId||""})}})}},{"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/ua":53,"./signature":126,"./util":127}],124:[function(a,e,O){var d=a("./saasplayer"),o=(a("../../lib/constants"),a("./mts")),a=d.extend({init:function(u,s){d.call(this,u,s),this.service=o,this.loadByMts()}});a.prototype.loadByMts=function(u){var s={vid:this._options.vid,accessId:this._options.accId,accessSecret:this._options.accSecret,stsToken:this._options.stsToken,domainRegion:this._options.domainRegion,authInfo:this._options.authInfo,format:this._options.format,includeSnapshotList:this._options.includeSnapshotList||!1,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,hlsUriToken:this._options.hlsUriToken,playConfig:this._options.playConfig};this.loadData(s,u)},a.prototype.replayByVidAndAuthInfo=function(u,s,r,n,l,c){this.trigger("error_hide"),this._options.source="",this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.reloadNewVideoInfo(u,s,r,n,l,c)},a.prototype.reloadNewVideoInfo=function(u,s,r,n,l,c){if(this.trigger("error_hide"),this._options.source="",u&&(this._options.vid=u,this._options.accId=s,this._options.accessSecret=r,this._options.stsToken=n,this._options.domainRegion=c,this._options.authInfo=l),!(this._options.vid&&this._options.accId&&this._options.accessSecret&&this._options.stsToken&&this._options.domainRegion&&this._options.authInfo))throw new Error("vidaccIdaccessSecretstsTokendomainRegionauthInfo");this.log("STARTFETCHDATA",{it:"mps",pa:{vid:u}}),this.loadByMts(!0)},e.exports=a},{"../../lib/constants":33,"./mts":123,"./saasplayer":125}],125:[function(t,e,O){var d=t("../base/player"),o=t("../audio/audioplayer"),a=t("../../lib/io"),u=t("../../lib/constants"),s=t("./signature"),r=t("./authkeyexpiredhandle"),n=t("../hls/hlsinjector"),l=t("../flv/flvinjector"),c=t("../drm/drminjector"),h=t("../sw/swinjector"),j=t("../../lang/index"),F=t("../../lib/ua"),f=t("../../config"),W=t("../../lib/playerutil"),U=t("../base/event/eventtype"),M=t("../../protected/anti-injector-protected"),R=d.extend({init:function(X,z){F.IS_PC&&M(z,this),this._authKeyExpiredHandle=new r(this),d.prototype._videoCreateEl||(d.prototype._videoCreateEl=d.prototype.createEl),z.format=="mp3"?(z.height="auto",z.mediaType="audio",d.prototype.createEl=o.prototype.createEl,o.call(this,X,z),R.prototype.play=d.prototype.play,R.prototype.pause=d.prototype.pause,R.prototype.initPlay=d.prototype.initPlay,R.prototype.replay=d.prototype.replay,R.prototype.stop=d.prototype.stop,R.prototype.seek=d.prototype.seek):(d.prototype.createEl=d.prototype._videoCreateEl,z._native=!1,d.call(this,X,z))}});function K(){var X,z=!1;return Number(this._options.encryptType)!==1?(X={error_code:u.ErrorCode.InvalidParameter,error_msg:j.get("Error_Not_Support_encrypt_Text")},this.logError(X),this.trigger("error",X),!0):z}function G(){var X=W.checkSecuritSupport();if(X)return this._mtsError_message(this,{Code:u.ErrorCode.EncrptyVideoNotSupport,Message:X,display_msg:X},""),!0}R.prototype.loadData=function(X,z){var te,ee,Y;this._options.encryptType!=1?this._loadData(X,z):(te="aliplayer-vod-min.js",ee="",ee=f.domain?"https://"+f.domain+f.path+f.h5Version+"/hls/"+te:"/build/hls/"+te,this.trigger(U.Private.Timeline,{name:"mod_rand_s",ts:performance.now()}),Y=this,a.loadJS(ee,function(){Y.trigger(U.Private.Timeline,{name:"mod_rand_f",ts:performance.now()}),Y._loadData(X,z)}))},R.prototype._loadData=function(X,z){var te,ee=new Date().getTime(),Y=this;this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._authKeyExpiredHandle.clearTick(),X.format!=""&&X.format!="m3u8"||this._options.encryptType!=1?X.rand=s.randomUUID():(te=_rtsneg(Y._vdnct6f===3?X.vid:void 0),X.rand=_dnaRekam(te,Y._vdnct6f)),this._options.thumbnailUrl&&(X.thumbnailUrl=this._options.thumbnailUrl),this.trigger(U.Private.H5_Loading_Show),this.service.getDataByAuthInfo.call(this,X,this._options.qualitySort,function(ie){if(Y.trigger(U.Private.PlayInfoLoaded,ie),ie.userId&&(Y._options.from=ie.userId),ie.videoId&&Y._monitor&&Y._monitor.updateLightSaasVideoId(ie.videoId),ie.textTracks&&ie.textTracks.length&&(ae=W.unqiueTextTracks(ie.textTracks),Y.trigger(U.Private.TextTrackFounded,{from:"saas",textTracks:ae})),ie.urls&&ie.urls.length==0)Y._mtsError_message(Y,{Code:u.ErrorCode.URLsIsEmpty,Message:j.get("Error_Vod_URL_Is_Empty_Text")+(X.format?"(format:"+X.format+")":"")},"");else{Y.log("COMPLETEFETCHDATA",{cost:new Date().getTime()-ee,mi:JSON.stringify((oe=>{for(var re=[],Te=0;Te<oe.length;Te++)re.push({width:oe[Te].width,height:oe[Te].height,definition:oe[Te].definition,format:oe[Te].format,encryptionType:oe[Te].encryptionType,duration:oe[Te].duration});return re})(ie.urls))}),Y._urls=ie.urls,Y._currentPlayIndex=W.findSelectedStreamLevel(Y._urls,X.defaultDefinition);var ae=(de=ie.urls[Y._currentPlayIndex]).Url;if(Y._vodDuration=de.duration||0,Y._options.source=ae,Y.encType="",Y.trigger(U.Private.PREPARE,de.definition),Y.UI.cover&&ie.coverUrl&&!Y._options.cover&&Y.setCover(ie.coverUrl),W.isHls(ae))if(ie&&ie.playInfoAry&&0<ie.playInfoAry.length&&ie.playInfoAry[0].EncryptType=="Widevine-FairPlay")c.inject(Y,R,d.prototype,Y._options);else{if(ie.encryptUrlArr&&0<ie.encryptUrlArr.length){for(var de,ce=[],ge=!1,he=0;he<ie.encryptUrlArr.length;++he)if((de=ie.encryptUrlArr[he]).encryptionType===u.EncryptionType.Private){if(K.call(Y))return;if(ge||G.call(Y))return void(ge=!0);var se=_yekced(te,de.rand,de.plaintext);ce.push({url:de.Url,secData:se})}}else if(ce="",de.encryptionType==u.EncryptionType.Private){if(K.call(Y)||G.call(Y))return;Y.encType=de.encryptionType,ce=_yekced(te,de.rand,de.plaintext)}var Z=F.IS_IOS&&parseFloat(F.IOS_FULL_VERSION)<17.1;(ce&&(Y._options.useSW||Z)?h:(Y._hls&&(Y._hls.destroy(),Y._hls=null),n)).inject(Y,R,d,Y._options,ce)}else W.isFlv(ae)?l.inject(Y,R,d,Y._options):W.isDash(ae)?(console.log("isDash"),c.inject(Y,R,d,Y._options)):Y._player._executeReadyCallback();Y._authKeyExpiredHandle.tick(u.AuthKeyRefreshExpired),Y.trigger(U.Private.SourceLoaded,de),Y._monitor2.vodSelectUrl(de),Y.initPlay(z),Y.trigger(U.Private.ChangeURL,{from:"saas"}),ie.thumbnailUrl&&Y._thumbnailService.get(ie.thumbnailUrl),Z=Y._player._isFlv,ae=-1<Y._player.getOptions().source.indexOf("mp4"),Y._player.encType==1||Z||ae||(F.IS_IOS||F.IS_MAC_SAFARI||F.IS_X5||F.IS_EDGE)&&(Y._player._executeReadyCallback(),Y._urls.length)&&Y.trigger(U.Private.SourceLoaded,de)}},function(ie){var ae;-1<((ae=ie.Message)==null?void 0:ae.indexOf('The specified parameter "Rand" is not valid'))&&K.call(Y)||Y._mtsError_message(Y,ie,"")})},R.prototype._changeStream=function(X,z){this._urls.length>X&&(this._loadByUrlInner(this._urls[X].Url,this.getCurrentTime(),!0),this._currentPlayIndex=X,this.trigger(U.Private.QualityChange,z||j.get("Quality_Change_Fail_Switch_Text")))},R.prototype._getLowerQualityLevel=function(){if(this._urls.length!=0&&this._currentPlayIndex!=-1){if(this.options().qualitySort=="asc"){if(0<this._currentPlayIndex)return{item:this._urls[this._currentPlayIndex-1],index:this._currentPlayIndex-1}}else if(this._currentPlayIndex<this._urls.length-1)return{item:this._urls[this._currentPlayIndex+1],index:this._currentPlayIndex+1}}return""},R.prototype._mtsError_message=function(X,z,te){X._serverRequestId=z.sri,X.trigger(U.Private.H5_Loading_Hide),z.Code=z.Code||z.code,z.Message=z.Message||z.message;var ee=z.Code||"OTHER_ERR_CODE",Y=z.Message||"OTHER_ERR_MSG",ie=(u.ErrorCode.ServerAPIError,z.display_msg||""),ae=(-1<Y.indexOf("InvalidParameter.Rand")||-1<Y.indexOf('"Rand" is not valid.')?(u.ErrorCode.EncrptyVideoNotSupport,ie=j.get("Error_Encrypt_Fetch_Failed_Text")):-1<Y.indexOf("SecurityToken.Expired")?(u.ErrorCode.AuthKeyExpired,ie=j.get("Error_Playauth_Expired_Text")):-1<Y.indexOf("InvalidVideo.NoneStream")?(u.ErrorCode.URLsIsEmpty,ie=j.get("Error_Fetch_NotStream")+"("+X._options.format+"|"+X._options.definition+")"):-1<Y.indexOf("DataNotFound")&&(u.ErrorCode.MediaNotFound,ie=j.get("Error_Fetch_Media_Not_Found")),X._options.vid||""),ae=(X._options.from,{mediaId:ae,mediaAuth:X._options.mediaAuth||"",error_code:ee,error_msg:Y});z.sri&&(ae.sri=z.sri),X.logError(ae),ae.display_msg=ie&&ie===Y?ie:(ie||j.get("Error_Vod_Fetch_Urls_Text"))+"</br>"+Y,X.trigger("error",ae),console.log("PrismPlayer Error: "+te+"! error_msg :"+Y+";")},e.exports=R},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/ua":53,"../../protected/anti-injector-protected":142,"../audio/audioplayer":75,"../base/event/eventtype":77,"../base/player":102,"../drm/drminjector":110,"../flv/flvinjector":113,"../hls/hlsinjector":115,"../sw/swinjector":140,"./authkeyexpiredhandle":119,"./signature":126}],126:[function(t,e,O){var d=t("crypto-js/hmac-sha1"),o=t("crypto-js/enc-base64"),a=t("crypto-js/enc-utf8");e.exports.randomUUID=function(){for(var u=[],s="0123456789abcdef",r=0;r<36;r++)u[r]=s.substr(Math.floor(16*Math.random()),1);return u[14]="4",u[19]=s.substr(3&u[19]|8,1),u[8]=u[13]=u[18]=u[23]="-",u.join("")},e.exports.returnUTCDate=function(){var h=new Date,u=h.getUTCFullYear(),s=h.getUTCMonth(),r=h.getUTCDate(),n=h.getUTCHours(),l=h.getUTCMinutes(),c=h.getUTCSeconds(),h=h.getUTCMilliseconds();return Date.UTC(u,s,r,n,l,c,h)},e.exports.AliyunEncodeURI=function(u){return u=encodeURIComponent(u),u=(u=(u=u.replace("+","%2B")).replace("*","%2A")).replace("%7E","~")},e.exports.makesort=function(u,s,r){if(!u)throw new Error("PrismPlayer Error: vid should not be null!");var n=[];for(j in u)n.push(j);for(var l=n.sort(),c="",h=l.length,j=0;j<h;j++)c==""?c=l[j]+s+u[l[j]]:c+=r+l[j]+s+u[l[j]];return c},e.exports.makeUTF8sort=function(u,s,r){if(!u)throw new Error("PrismPlayer Error: vid should not be null!");var n=[];for(j in u)n.push(j);for(var l=n.sort(),c="",h=l.length,j=0;j<h;j++){var F=e.exports.AliyunEncodeURI(l[j]),f=e.exports.AliyunEncodeURI(u[l[j]]);c==""?c=F+s+f:c+=r+F+s+f}return c},e.exports.makeChangeSiga=function(u,s,r){if(u)return o.stringify(d((r=r||"GET")+"&"+e.exports.AliyunEncodeURI("/")+"&"+e.exports.AliyunEncodeURI(e.exports.makeUTF8sort(u,"=","&")),s+"&"));throw new Error("PrismPlayer Error: vid should not be null!")},e.exports.ISODateString=function(u){function s(r){return r<10?"0"+r:r}return u.getUTCFullYear()+"-"+s(u.getUTCMonth()+1)+"-"+s(u.getUTCDate())+"T"+s(u.getUTCHours())+":"+s(u.getUTCMinutes())+":"+s(u.getUTCSeconds())+"Z"},e.exports.encPlayAuth=function(u){if(u=a.stringify(o.parse(u)))return JSON.parse(u);throw new Error("playuth")},e.exports.encRsa=function(){},e.exports.stringToArray=function(u){for(var s=new ArrayBuffer(2*u.length),r=new Uint16Array(s),n=0,l=u.length;n<l;n++)r[n]=u.charCodeAt(n);return r},e.exports.Uint8ArrayToString=function(u){for(var s="",r=0;r<u.length;r++)s+=String.fromCharCode(u[r]);return s},e.exports.arrayToString=function(u){return u=new Uint16Array(u.buffer),String.fromCharCode.apply(null,u)},e.exports.base64DecodeUint8Array=function(u){var s=window.atob(u),r=s.length,n=new Uint8Array(new ArrayBuffer(r));for(i=0;i<r;i++)n[i]=s.charCodeAt(i);return n},e.exports.base64EncodeUint8Array=function(u){for(var s,r,n,l,c,h,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",F="",f=0;f<u.length;)n=(s=u[f++])>>2,l=(3&s)<<4|(s=f<u.length?u[f++]:Number.NaN)>>4,c=(15&s)<<2|(r=f<u.length?u[f++]:Number.NaN)>>6,h=63&r,isNaN(s)?c=h=64:isNaN(r)&&(h=64),F+=j.charAt(n)+j.charAt(l)+j.charAt(c)+j.charAt(h);return F}},{"crypto-js/enc-base64":8,"crypto-js/enc-utf8":9,"crypto-js/hmac-sha1":10}],127:[function(t,e,O){var d=t("../../lib/constants");e.exports.createError=function(o,a){return{requestId:"",code:a||"",message:o}},e.exports.getItem=function(o){var a={};return a.width=o.Width,a.height=o.Height,a.definition=o.Definition,a.Url=o.PlayURL,a.format=o.Format,a.desc=d.QualityLevels[a.definition],a.encryptionType=d.VodEncryptionType[o.EncryptType],a.plaintext=o.Plaintext,a.rand=o.Rand,a.encrypt=o.Encrypt,a.duration=o.Duration,a.bitrate=o.Bitrate,a},e.exports.objectPlayerMessageSort=function(o,a){for(var u=[],s=[],r=[],n=[],l=o.length-1;0<=l;l--){var c=o[l],c=e.exports.getItem(c);(c.format=="mp4"?s:c.format=="mp3"?r:c.format=="m3u8"?u:n).push(c)}var h=[],h=0<r.length?r:0<s.length?s:0<u.length?u:n;return a=="asc"&&h.reverse(),h}},{"../../lib/constants":33}],128:[function(t,e,O){var d,o,a=t("../../lib/io"),u=t("../../lib/constants"),s=t("./signature"),r=t("./util"),n=t("../../config"),l=t("../../lang/index"),c=t("../base/event/eventtype"),h="saas/vod.js",j=1,F=2,f={MAIN:"main",BACKUP:"backup",CUSTOM:"custom"},W=function(K){return(K||"").split("?")[0]},U={type:f.MAIN,time:0};function M(K,G,X,z){var te=this,ee=(this&&(d=this.getOptions().customVodServerFirst,o=this.getOptions().customVodServer),this&&!this._hasRetrySuccess&&U.time===0&&o!=null&&d===!0&&(j=2,F=1,this._useCustomVodServer=!0,U.type=f.CUSTOM),(function(ie){var ae=s.randomUUID(),ae={AccessKeyId:ie.accessId,Action:"GetPlayInfo",VideoId:ie.vid,Formats:ie.format,AuthTimeout:ie.authTimeout||u.AuthKeyExpired,Rand:ie.rand,SecurityToken:ie.stsToken,StreamType:ie.mediaType,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:ae,PlayerVersion:n.h5Version,Channel:"HTML5"};return ie.definition==="AUTO"?ae.ResultType="Multiple":ie.definition&&(ae.Definition=ie.definition),ie.authInfo&&(ae.AuthInfo=ie.authInfo),ie.outputType&&(ae.OutputType=ie.outputType),ie.playConfig&&(ae.PlayConfig=JSON.stringify(ie.playConfig)),ie.reAuthInfo&&(ae.ReAuthInfo=JSON.stringify(ie.reAuthInfo)),ae=s.makeUTF8sort(ae,"=","&")+"&Signature="+s.AliyunEncodeURI(s.makeChangeSiga(ae,ie.accessSecret)),ie=this._useCustomVodServer?(/^https?:\/\//i.test(o)||console.warn("Warning: customVodServer URL is missing protocol (http/https)."),window.location.protocol!=="https:"||/^https:\/\//i.test(o)||console.warn("Error: customVodServer URL must use HTTPS when the page is served over HTTPS."),""+o+(o.includes("?")?"&":"?")+ae+"&RegionId="+ie.domainRegion):"https://vod"+(this._useBackupVodDomain?"-product":"")+"."+ie.domainRegion+".aliyuncs.com/?"+ae,ie}).call(this,K)),Y=performance.now();U.time===0&&this.trigger(c.Private.Timeline,{name:"vod_s",ts:Y}),a.get.call(this,ee,function(ie){R.call(te,ee,{status:200}),(function(ae,de,ce,ge,he){var se,Z=U.type;if(this.trigger(c.Private.Timeline,{name:"vod_f",ts:performance.now()}),this.traceLog(h,"Vod request ok."+ae),U={type:f.MAIN,time:0},ae){try{if(se=JSON.parse(ae),!(Z!==f.CUSTOM||se.VideoBase&&se.PlayInfoList))throw new Error("Invalid VOD response.")}catch{if(this.traceLog(h,"Invalid VOD response."+ae,!0),he)return void he(r.createError("",u.ErrorCode.ServerAPIError))}this._monitor2.vodMediaInfo(se);for(var oe,Z="",ae=se.VideoBase.ThumbnailList,re=(ae&&ae.Thumbnail&&0<ae.Thumbnail.length?Z=ae.Thumbnail[0].URL:de.thumbnailUrl&&(Z=String(de.thumbnailUrl)),se.PlayInfoList.PlayInfo),Te=[],Ce=[],ke=re.length-1;0<=ke;--ke)re[ke].Definition==="AUTO"?(this.getOptions().isVBR=!0,oe=re.splice(ke,1)[0],Te=[oe]):re[ke].Encrypt===1&&Ce.push(re[ke]);ae=null,Ce=Te.length===0?(ae=r.objectPlayerMessageSort(re,ce),[]):(ae=r.objectPlayerMessageSort(Te),r.objectPlayerMessageSort(Ce)),ae&&ge&&ge({requestId:se.RequestId,urls:ae,encryptUrlArr:Ce,thumbnailUrl:Z,coverUrl:se.VideoBase.CoverURL,playInfoAry:re})}else he&&he(r.createError(""))}).call(te,ie,K,G,X,z)},function(ie,ae,de){if((ge=(ce=de).status)===0||500<=ge&&ge<=599&&(ce.responseText||"").indexOf("RequestId")===-1){if(ge=U.type===f.BACKUP&&2<=U.time&&(o==null||d==1)||U.type===f.CUSTOM&&U.time>=F&&!d,ce={url:W(ee),status:de.status,response:de.responseText,retryType:U.type,retryTime:U.time,isRetryExhausted:ge},te.trigger(c.Private.VodRequestException,ce),te._monitor2.vodRequestFatalError(ce),5e3<performance.now()-Y&&(U.type===f.MAIN?U.time=j:U.type===f.BACKUP&&(U.time=2)),U.type===f.MAIN)return U.time<j?(U.time++,void setTimeout(function(){M.call(te,K,G,X,z)},200)):(U.type=f.BACKUP,U.time=1,void setTimeout(function(){te._useBackupVodDomain=!0,M.call(te,K,G,X,z)},200));if(U.type===f.BACKUP){if(U.time<2)return U.time++,void setTimeout(function(){M.call(te,K,G,X,z)},200);if(te&&(te._useBackupVodDomain=!1),o!=null&&d!=1)return U.type=f.CUSTOM,U.time=1,void setTimeout(function(){te._useCustomVodServer=!0,M.call(te,K,G,X,z)},200)}else if(U.type===f.CUSTOM){if(U.time<F)return U.time++,void setTimeout(function(){M.call(te,K,G,X,z)},200);if(te&&(te._useCustomVodServer=!1),d==1)return U.type=f.MAIN,U.time=1,void setTimeout(function(){M.call(te,K,G,X,z)},200)}}else R.call(te,ee,de);var ce,ge;(function(he,se){if(this.traceLog(h,"Vod request error::"+he),U={type:f.MAIN,time:0},se){var Z={Code:"",Message:l.get("Error_Vod_Fetch_Urls_Text")};try{Z=JSON.parse(he)}catch{}se({Code:u.ErrorCode.ServerAPIError,Message:Z.Code+"|"+Z.Message,sri:Z.RequestId||""})}}).call(te,ie,z)},void 0,void 0,5e3)}function R(K,G){U.time!==0&&(this._hasRetrySuccess=!0,K={url:W(K),status:G?.status,response:G?.status!==200?G?.responseText:"",retryType:U.type,retryTime:U.time},this.trigger(c.Private.VodRequestExceptionResume,K),this._monitor2.vodRequestFatalErrorResume(K))}e.exports.getDataByAuthInfo=M},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../base/event/eventtype":77,"./signature":126,"./util":127}],129:[function(l,e,O){var d=l("./saasplayer"),o=l("../../lib/constants"),a=l("./vod"),u=l("./signature"),s=l("../../lib/io"),r=l("../../config"),n=l("../base/event/eventtype"),l=d.extend({init:function(c,h){d.call(this,c,h),this.service=a,this.loadByVod()}});l.prototype.loadByVod=function(c){var h,j,F;typeof _apesrap<"u"?this._loadByVod(c):(typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__),h="aliplayer-vod-p-min.js",j="",j=r.domain?"https://"+r.domain+r.path+r.h5Version+"/hls/"+h:"/build/hls/"+h,this.trigger(n.Private.Timeline,{name:"mod_pa_s",ts:performance.now()}),F=this,s.loadJS(j,function(){F.trigger(n.Private.Timeline,{name:"mod_pa_f",ts:performance.now()}),F._loadByVod(c)}))},l.prototype._loadByVod=function(c){var h="",j="",F="",f="",W="";if(this._options.accessKeyId&&this._options.accessKeySecret)h=this._options.accessKeyId,j=this._options.accessKeySecret,F=this._options.securityToken,f=this._options.region,this.log("STARTFETCHDATA",{it:"sts",pa:{vid:this._options.vid}});else{try{var U=_apesrap(this._options.playauth,this._options.vid),M=(this._vdnct6f=U.v,U.value),R=u.encPlayAuth(M),h=R.AccessKeyId,j=R.AccessKeySecret,F=R.SecurityToken,f=R.Region,W=R.AuthInfo}catch(K){return console.log("e",K),U={Code:o.ErrorCode.PlayauthDecode,Message:"playauth decoded failed.",displayMessage:"playauth"},void this._mtsError_message(this,U,M)}this._options.from=R.CustomerId||"",this.log("STARTFETCHDATA",{it:"playAuth",pa:{vid:this._options.vid}})}this._loadByVodBySTS(h,j,F,f,W,c)},l.prototype.replayByVidAndPlayAuth=function(c,h){this.trigger("error_hide"),this.setTextTracks([]),this.trigger(n.Private.UserTrackReset),this._options.source="",this._options.vid=c,this._options.playauth=h,this._options._userOptions.vid=c,this._options._userOptions.playauth=h,this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._posOffset=this._getSubVideoConfig().start||0,this._monitor2.playAbort("replayByVidAndPlayAuth",c),this._monitor&&(this._monitor.reportPlayAbort("replayByVidAndPlayAuth"),this._monitor.reset(),this._monitor.startHeartBeat()),this._clearTimeout(),this.loadByVod(!0)},l.prototype.updateSourcesByVidAndPlayAuth=function(c,h){var j,F,f;typeof _apesrap<"u"?this._updateSourcesByVidAndPlayAuth(c,h):(j="aliplayer-vod-p-min.js",F="",F=r.domain?"https://"+r.domain+r.path+r.h5Version+"/hls/"+j:"/build/hls/"+j,f=this,s.loadJS(F,function(){f._updateSourcesByVidAndPlayAuth(c,h)}))},l.prototype._updateSourcesByVidAndPlayAuth=function(c,h){if(c!=this._options.vid)console.log("vid");else{this._options.vid=c,this._options.playauth=h;try{var j=_apesrap(this._options.playauth,this._options.vid),F=(this._vdnct6f=j.v,j.value),f=u.encPlayAuth(F)}catch{return void console.log("playauth")}var h={vid:c,accessId:f.AccessKeyId,accessSecret:f.AccessKeySecret,stsToken:f.SecurityToken,domainRegion:f.Region,authInfo:f.AuthInfo,playDomain:f.PlayDomain,format:this._options.format,mediaType:this._options.mediaType},W=(this._authKeyExpiredHandle.clearTick(),this);this.service.loadData(h,this._options.qualitySort,function(M){W._serverRequestId=M.requestId,M.urls.length!=0&&(W._urls=M.urls),W._authKeyExpiredHandle.tick(o.AuthKeyRefreshExpired)},function(M){console.log(M)})}},l.prototype.reloaduserPlayInfoAndVidRequestMts=function(c,h){this.replayByVidAndPlayAuth(c,h,accessSecret)},l.prototype._loadByVodBySTS=function(c,h,j,F,f,W){c={vid:this._options.vid,accessId:c,accessSecret:h,stsToken:j,authInfo:f,domainRegion:F,format:this._options.format,mediaType:this._options.mediaType,definition:this._options.definition,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,outputType:this._options.outputType,playConfig:this._options.playConfig,reAuthInfo:this._options.reAuthInfo},this.loadData(c,W)},e.exports=l},{"../../config":19,"../../lib/constants":33,"../../lib/io":45,"../base/event/eventtype":77,"./saasplayer":125,"./signature":126,"./vod":128}],130:[function(t,e,O){function d(a){this._player=a,this._video=a.tag;var u=this;this._isCreated=!1,this._canPlayTriggered=!1,this._defaultTrack="",a.on(o.Private.ChangeURL,function(){u._isCreated=!1,u._canPlayTriggered=!1,u._defaultTrack=""}),a.on(o.Player.CanPlay,function(){var s;u._player._drm||u._canPlayTriggered||((s=u._getTracks())&&(u._isCreated=!0,u._player._options.isVBR||u._hls||(a.trigger(o.Player.AudioTrackReady,s),u._notifyDefaultValue(s))),u._canPlayTriggered=!0)}),a.on(o.Player.AudioTrackUpdated,function(s){u._isCreated||(s=u._getTracks(s.paramData.audioTracks))&&(u._isCreated=!0,a.trigger(o.Player.AudioTrackReady,s),u._notifyDefaultValue(s))})}var o=t("../base/event/eventtype");d.prototype._notifyDefaultValue=function(a){!this._defaultTrack&&0<a.length&&(this._defaultTrack=a[0]),this._defaultTrack&&this._player.trigger(o.Private.SelectorUpdateList,{type:"audio",text:this._defaultTrack.text})},d.prototype.support=function(){return!!this._video.audioTracks},d.prototype._getTracks=function(a){if(!this.support()&&!a)return null;for(var u=[],s=(a=!this._video||!this._video.audioTracks||a&&a.length!=0?a:this._video.audioTracks)?a.length:0,r=0;r<s;r++){var n=a[r],l={value:n.id,text:n.label||n.name||n.language};(n.default||n.enabled)&&(this._defaultTrack=l),u.push(l)}return u},d.prototype.switch=function(a){if(this._player._hls)this._player._hls.audioTrack=+a;else if(this._player._switchAudioTrack)this._player._switchAudioTrack(a);else for(var u=this._video.audioTracks?this._video.audioTracks.length:0,s=0;s<u;s++){var r=this._video.audioTracks[s];r.id==a?r.enabled=!0:r.enabled=!1}},d.prototype.dispose=function(){this._player=null},e.exports=d},{"../base/event/eventtype":77}],131:[function(t,e,O){function d(l){this._video=l.tag,this._player=l,this._isCreated=!1,this._backupCC="",this.tracks=[],this._defaultTrack="",this._currentValue="",this._switchTimer=null,this._storedTracks=[];var c=this,h=(l.on(o.Player.LevelsLoaded,function(j){l.getOptions().useDrm2||(u.IS_MAC_SAFARI||u.IS_IOS)&&(j&&j.paramData&&j.paramData.subtitles&&j.paramData.subtitles.length?c._storedTracks=j.paramData.subtitles||[]:c._resotreTracks())}),l.on(o.Private.SafariDrmLevelSwitch,function(){c._resotreTracks()}),l.on(o.Private.ChangeURL,function(j){j&&j.paramData&&j.paramData.from==="saas"||(c._disabledTracks(),c._isCreated=!1,c._defaultTrack="",c._backupCC="")}),l.on(o.Private.VttClearTracks,function(){c.switch("off"),c._disabledTracks(),c._isCreated=!1,c._defaultTrack={value:"off",text:"Off"},c.tracks=[c._defaultTrack],l.trigger(o.Private.SelectorGenerateList,{type:"cc"}),l.trigger(o.Private.CCStateChanged,{value:"off",lang:""})}),l.on(o.Player.CanPlay,function(){c._isCreated||(c.tracks=c._getTracks(),l.trigger(o.Player.TextTrackReady,c.tracks),l.trigger(o.Private.CCReset)),c._isCreated&&!c._player._setDefaultCC||!c._defaultTrack||(l.trigger(o.Private.SelectorUpdateList,{type:"cc",text:c._defaultTrack.text}),c.switch(c._defaultTrack.value),c._player._setDefaultCC=!1,c._isCreated=!0)}),u.os.ios&&parseFloat(u.os.version)<=15.1&&a.addCssByStyle("video::-webkit-media-text-track-container{position: relative; top: -44px !important;}"),l.getOptions().controlBarVisibility==="always"&&a.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}"),n.throttle(function(){l._vttBroker&&l._vttBroker.enabled||a.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}")},100)),h=(l.on(o.Private.ShowBar,h),n.throttle(function(){l._vttBroker&&l._vttBroker.enabled||a.addCssByStyle("video::-webkit-media-text-track-container{transform: none;}")},100));l.on(o.Private.HideBar,h),l.on(o.Private.CCReset,function(){c._updateSelectorList()})}var o=t("../base/event/eventtype"),a=(t("../../lib/event"),t("../../lib/dom")),u=t("../../lib/ua"),s=t("../../lib/cookie"),r=t("../../lib/constants"),n=t("../../ui/component/util");d.prototype._adaptiveCueStype=function(){var l,c=-10;u.IS_SAFARI?(c=-65,(l=this._player.fullscreenService)&&l.getIsFullScreen()&&(c=-95)):u.IS_MOBILE&&(c=-30),a.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY("+c+"px) !important;}")},d.prototype.close=function(){for(var l=this.getTextTracks(),c=l.length,h=0;h<c;h++){var j=l[h];j.mode!="expired"&&(j.mode=="showing"&&(this._backupCC=j),j.mode="disabled",this._player._switchDrmTextTrack)&&this._player._switchDrmTextTrack()}this._player.trigger(o.Private.VttHide)},d.prototype.open=function(){var l,c,h;return!this.tracks||this.tracks.length<2||(c=this._backupCC?this._backupCC.language:"",h=this._backupCC?this._backupCC.label:"",this.tracks.forEach(function(j){c===j.value&&(l=!0)}),(c=l?c:h="")||(c=this.tracks[1].value,h=this.tracks[1].text),this.switch(c)),{label:h,language:c}},d.prototype.getCurrentSubtitle=function(){return this._currentValue},d.prototype._getTracks=function(){for(var l=this.getTextTracks(),c=l.length,h=(this._defaultTrack={value:"off",text:"Off"},[this._defaultTrack]),j=s.get(r.SelectedCC),F="",f=!1,W=0;W<c;W++){var U,M=l[W];M.mode=="expired"||M.kind!="subtitles"&&M.kind!="captions"||(U={value:M.language,text:M.label},M.default&&(this._defaultTrack=U,f=!0),U.value==j&&(F=U),h.push(U))}return!f&&F&&(this._defaultTrack=F),h},d.prototype._disabledTracks=function(){for(var l=this.getTextTracks(),c=l.length,h=0;h<c;h++)l[h].mode="expired"},d.prototype.switch=function(l){var c=this._player;if(this.close(),l!="off")for(var h=this.getTextTracks(),j=h.length,F=0;F<j;F++){var f=h[F];f.language===l&&f.mode!="expired"&&(c._switchDrmTextTrack&&c._switchDrmTextTrack(l),h[F].mode="showing",c.trigger(o.Private.VttSwitchTrack,f.language))}else this.close();this._currentValue=l,c.trigger(o.Private.CCChanged,l)},d.prototype.updateUI=function(l){var c=this._player,h="on",j="";j=l?(this.tracks.find(function(F){return F.value===l})||{}).text||"":(h="off","Off"),c.trigger(o.Private.CCChanged,h),c.trigger(o.Private.CCStateChanged,{value:h,lang:j})},d.prototype.dispose=function(){this._player=null,this._switchTimer&&(clearTimeout(this._switchTimer),this._switchTimer=null)},d.prototype._patchSafariTracks=function(){var l=this;if(u.IS_MAC_SAFARI||u.IS_IOS){if(!(this._video&&this._video.textTracks&&this._video.textTracks.length)){var c=!1;if(c=this._video.textTracks&&this._video.textTracks.length?!0:c)return;for(var h=0;h<this._storedTracks.length;h++){var j=this._storedTracks[h],F=j.vttUrl,f=document.createElement("track");f.src=F,f.kind="subtitles",f.label=j.name,f.srclang=j.lang,this._video.appendChild(f)}}this._switchTimer&&clearTimeout(this._switchTimer),this._switchTimer=setTimeout(function(){var W=l.getCurrentSubtitle();W&&W!=="off"&&l.switch(W)},1e3)}},d.prototype.getTextTracks=function(){var l=this._player,c=l.tag;return l._vttBroker&&l._vttBroker.enabled&&l.getTextTracks?l.getTextTracks()||[]:l._getDrmTextTracks?l._getDrmTextTracks()||[]:c&&c.textTracks||[]},d.prototype._updateSelectorList=function(){var l=this._player;this.tracks=this._getTracks(),l.trigger(o.Private.SelectorGenerateList,{type:"cc",value:"Off"})},d.prototype._resotreTracks=function(){this._patchSafariTracks(),this.tracks=this._getTracks(),this._player.trigger(o.Player.TextTrackReady,this.tracks)},e.exports=d},{"../../lib/constants":33,"../../lib/cookie":34,"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../../ui/component/util":173,"../base/event/eventtype":77}],132:[function(t,e,O){var d=t("../../lib/playerutil");e.exports=[{service:t("./ccservice"),name:"_ccService",condition:!0},{service:t("./audiotrackservice"),name:"_audioTrackService"},{service:t("./qualityservice"),name:"_qualityService"},{service:t("./fullscreenservice"),name:"fullscreenService",condition:function(){return!0}},{service:t("./liveshiftservice"),name:"_liveshiftService",condition:function(){var o=this.options();return d.isLiveShift(o)}},{service:t("./thumbnailservice"),name:"_thumbnailService",condition:function(){return!0}},{service:t("./progressmarkerservice"),name:"_progressMarkerService",condition:function(){return!0}}]},{"../../lib/playerutil":50,"./audiotrackservice":130,"./ccservice":131,"./fullscreenservice":133,"./liveshiftservice":134,"./progressmarkerservice":135,"./qualityservice":136,"./thumbnailservice":137}],133:[function(t,e,O){function d(c){var h=this,j=(this.isFullWindow=!1,this.isFullScreen=!1,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer=null,this._player=c,this),F=r;this._fullscreenChanged=function(f){var W;j._player!=null&&(f.target||f.srcElement)===(f=j._player.el())&&(W=document[F.fullscreenElement],j.isFullScreen=W===f,(j.isFullScreenChanged=!0)===j.isFullScreen?j._player.trigger(s.Player.RequestFullScreen):j._player.trigger(s.Player.CancelFullScreen))},F&&u.on(document,F.eventName,this._fullscreenChanged),u.on(c.tag,"webkitendfullscreen",function(f){f=f.target||f.srcElement,c&&c.tag===f&&(h.isFullScreenChanged=!0,h.isFullScreen=!1,h._player.trigger(s.Player.CancelFullScreen),h._player.trigger(s.Private.Play_Btn_Show))})}var o=t("../../lib/ua"),a=t("../../lib/dom"),u=t("../../lib/event"),s=t("../base/event/eventtype"),r=(t("../base/x5play"),t("../../lang/index"),(()=>{a.createEl("div");var c={},h=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullScreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitfullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozFullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","MSFullScreen"]],j=!1;if(!(j=o.IS_IOS&&(c.requestFn="webkitEnterFullscreen",c.cancelFn="webkitExitFullscreen",c.fullscreenElement="webkitFullscreenElement",c.eventName="webkitfullscreenchange",c.isFullScreen="webkitDisplayingFullscreen",document[c.requestFn])?!0:j)){for(var F=0;F<5;F++)if(h[F][1]in document){c.requestFn=h[F][0],c.cancelFn=h[F][1],c.fullscreenElement=h[F][2],c.eventName=h[F][4],c.isFullScreen=h[F][6];break}"requestFullscreen"in document?c.requestFn="requestFullscreen":"webkitRequestFullscreen"in document?c.requestFn="webkitRequestFullscreen":"webkitRequestFullScreen"in document?c.requestFn="webkitRequestFullScreen":"webkitEnterFullscreen"in document?c.requestFn="webkitEnterFullscreen":"mozRequestFullScreen"in document?c.requestFn="mozRequestFullScreen":"msRequestFullscreen"in document&&(c.requestFn="msRequestFullscreen"),"fullscreenchange"in document?c.eventName="fullscreenchange":"webkitfullscreenchange"in document||"webkitfullscreenchange"in document||"webkitfullscreenchange"in document?c.eventName="webkitfullscreenchange":"mozfullscreenchange"in document?c.eventName="mozfullscreenchange":"MSFullscreenChange"in document&&(c.eventName="MSFullscreenChange"),"fullScreen"in document?c.isFullScreen="fullScreen":"webkitfullScreen"in document?c.isFullScreen="webkitfullScreen":"webkitIsFullScreen"in document?c.isFullScreen="webkitIsFullScreen":"webkitDisplayingFullscreen"in document?c.isFullScreen="webkitDisplayingFullscreen":"mozFullScreen"in document?c.isFullScreen="mozFullScreen":"mozfullScreen"in document?c.isFullScreen="mozfullScreen":"MSFullScreen"in document&&(c.isFullScreen="MSFullScreen"),"fullscreenElement"in document?c.fullscreenElement="fullscreenElement":"webkitFullscreenElement"in document?c.fullscreenElement="webkitFullscreenElement":"webkitFullScreenElement"in document?c.fullscreenElement="webkitFullScreenElement":"mozFullScreenElement"in document?c.fullscreenElement="mozFullScreenElement":"msFullscreenElement"in document?c.fullscreenElement="msFullscreenElement":"MSFullscreenElement"in document&&(c.fullscreenElement="MSFullscreenElement")}return c.requestFn?c:null})()),n=(d.prototype.requestFullScreen=function(){var c=r,h=this._player.el(),j=this;if(o.IS_IOS){var F=this._player._splayer;if(!F||F.renderType!==2){h=this._player.tag,F&&F.renderType!==2&&(h=this._player.el().querySelector("video"));try{var f=h[c.requestFn]();f&&typeof f.catch=="function"&&f.catch(function(U){console.log(U)}),j._player.trigger(s.Player.RequestFullScreen)}catch(U){console.log(U)}return this}this._player._options.enableMockFullscreen=!0}if(this.isFullScreen=!0,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer||clearTimeout(this._cancelFullScreenTimer),j=this,c&&!this._player._options.enableMockFullscreen)try{var W=h[c.requestFn]();W&&typeof W.catch=="function"&&W.catch(function(U){console.log(U)}),this._requestFullScreenTimer=setTimeout(function(){j.isFullScreenChanged||(n.apply(j),j._player.trigger(s.Player.RequestFullScreen)),j._requestFullScreenTimer=null},1e3)}catch(U){console.log(U)}else n.apply(j),this._player.trigger(s.Player.RequestFullScreen);return this._player},d.prototype.cancelFullScreen=function(){var c=r,h=(this.isFullScreen=!1,this.isFullScreenChanged=!1,this._cancelFullScreenTimer=null,this._requestFullScreenTimer||clearTimeout(this._requestFullScreenTimer),this);if(c&&!this._player._options.enableMockFullscreen){try{var j=document[c.cancelFn]();j&&typeof j.catch=="function"&&j.catch(function(F){console.log(F)})}catch(F){console.log(F)}h._cancelFullScreenTimer=setTimeout(function(){h.isFullScreenChanged||(l.apply(h),h._player.trigger(s.Player.CancelFullScreen)),h._cancelFullScreenTimer=null},500)}else l.apply(h),this._player.trigger(s.Player.CancelFullScreen);return this._player.tag.paused||this._player.trigger(s.Player.Play),this._player},d.prototype.getIsFullScreen=function(){return this.isFullScreen},d.prototype.dispose=function(){this._player=null,r&&u.off(document,r.eventName,this._fullscreenChanged)},function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",a.addClass(document.getElementsByTagName("body")[0],"prism-full-window")}),l=function(){this.isFullWindow=!1,document.documentElement.style.overflow=this.docOrigOverflow,a.removeClass(document.getElementsByTagName("body")[0],"prism-full-window")};e.exports=d},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../base/event/eventtype":77,"../base/x5play":107}],134:[function(t,e,O){function d(F,f){var W;if(F)return F=new Date(F),W=(f=new Date(f)).valueOf()/1e3-F.valueOf()/1e3,{start:F,end:f,endDisplay:s.extractTime(f),totalTime:W}}function o(F,f){f&&(F.currentTimestamp=f,F.currentTime=s.convertToDate(f),F.currentTimeDisplay=s.extractTime(F.currentTime),F.liveShiftStart=F.liveTimeRange.start,F.liveShiftEnd=F.liveTimeRange.end,F.liveShiftStartDisplay=s.extractTime(F.liveShiftStart),F.liveShiftEndDisplay=s.extractTime(F.liveShiftEnd),F.availableLiveShiftTime=f-F.liveShiftStart.valueOf()/1e3,F.timestampStart=s.convertToTimestamp(F.liveShiftStart),F.timestampEnd,s.convertToTimestamp(F.liveShiftEnd))}function a(F){function f(){var U=F._options.source;this._originalPlayUrl=U,this._liveShiftUrl=F._options.liveTimeShiftUrl,this.liveTimeRange=d(F._options.liveStartTime,F._options.liveOverTime),this.availableLiveShiftTime=0,this.seekTime=-1}this._player=F,this._isLiveShiftPlaying=!1;var W=this;f.call(this),F.liveShiftSerivce={setLiveTimeRange:function(U,M){W.setLiveTimeRange(U,M)},queryLiveShift:function(U,M,R){W.queryLiveShift(U,M,R)},isLiveShiftPlaying:function(){return W._isLiveShiftPlaying}},F.on(j.Private.ChangeURL,function(){f.call(W)})}var u=t("../../lib/io"),s=t("../../lib/util"),r=t("../../lib/playerutil"),n=t("../../lang/index"),l=t("../flv/flvinjector"),c=t("../hls/hlsinjector"),h=t("../../lib/constants"),j=t("../base/event/eventtype");t("../../lib/url"),a.prototype.validate=function(){return!(this.liveTimeRange.start>=this.liveTimeRange.end)},a.prototype.switchToLive=function(){this.seekTime=-1;var F=this._originalPlayUrl,f=this._player._options.liveShiftSource,W=this._player._options.source;r.isHls(W)&&r.isFlv(F)&&f&&r.isHls(f)&&(this._player._hls&&this._player._destroyHls(),W=this._player._superType,f=this._player._Type,this._player._options._autoplay=!0,l.inject(this._player,f,W,this._player._options,"",!0)),this._player._loadByUrlInner(F,null,!0),this._isLiveShiftPlaying=!1,this._player.trigger(j.Private.LiveShiftSwitchToLive)},a.prototype.getBaseTime=function(){return this.liveShiftStartDisplay,this.seekTime==-1?s.parseTime(this.currentTimeDisplay):s.parseTime(this.liveShiftStartDisplay)+this.seekTime},a.prototype.getSourceUrl=function(F,f){var W=this._originalPlayUrl;return this.availableLiveShiftTime<F||(this._isLiveShiftPlaying=!0,F=parseInt(F),W=(W=this._switchLiveShiftPlayer(f))&&this._cleanUrl(W),f=parseInt(this.currentTimestamp)-F,(W=W.indexOf("?")==-1?W+"?lhs_start_unix_s_0="+f:W+"&lhs_start_unix_s_0="+f).indexOf("aliyunols=on")===-1&&(W+="&aliyunols=on"),W.indexOf("continue=on")===-1&&(W+="&continue=on")),W},a.prototype._cleanUrl=function(F){var f;return F.indexOf("?")===-1?F:(F=(F=(f=F.split("?"))[1])&&((F=F.replace(/&?lhs_start_unix_s_0=[0-9]*/g,"")).indexOf("&")===0?F.replace("&",""):F))?f[0]+"?"+F:f[0]},a.prototype._switchLiveShiftPlayer=function(F){var f,W=this._originalPlayUrl,U=this._player._options.liveShiftSource,M=this._player._options.source;if(r.isHls(M))W=M;else if(r.isFlv(W)&&U&&r.isHls(U))return this._player._flv&&this._player._destroyFlv(),M=this._player._superType,f=this._player._Type,this._player._options._autoplay=!0,c.inject(this._player,f,M,this._player._options,"",!0),U;return W},a.prototype.getTimeline=function(F,f){var W;this._player.trigger(j.Private.LiveShiftQueryCompleted),this._liveShiftUrl?(W=this).queryLiveShift(this._liveShiftUrl,function(U){U?(U=U).retCode==0?(o(W,U.content.current),F&&F()):f({Code:h.ErrorCode.ServerAPIError,Message:U.retCode+"|"+U.description+"|"+U.content}):console.log("")},function(U){if(f&&U){var M={};if(U){if(typeof U=="string"&&-1<U.indexOf("403 Forbidden"))M.Code=h.ErrorCode.AuthKeyExpired,M.Message="Query liveshift failed:"+n.get("Error_AuthKey_Text");else{var R,M=U;try{R=JSON.parse(U)}catch{}R&&(M.Code=h.ErrorCode.ServerAPIError,M.Message=R.retCode+"|"+R.description+"|"+R.content)}f(M)}}}):(o(this,new Date().valueOf()/1e3),F&&F())},a.prototype.start=function(F,f){var W=this,U=function(){W._loopHandler&&clearTimeout(W._loopHandler),W._loopHandler=setTimeout(function(){W.getTimeline(function(){},f),U()},F)};W.getTimeline(function(M){W._localLiveTimeHandler||W.tickLocalLiveTime()},f),U()},a.prototype.tickLocalLiveTime=function(){function F(){f._localLiveTimeHandler=setTimeout(function(){f.currentTimestamp++,o(f,f.currentTimestamp),f._player.trigger(j.Private.LiveShiftQueryCompleted),F()},1e3)}var f=this;F()},a.prototype.setLiveTimeRange=function(F,f){F=F||this._player._options.liveStartTime,f=f||this._player._options.liveOverTime,this.liveTimeRange=d(F,f),o(this,this.currentTimestamp),this._player.trigger(j.Private.LiveShiftQueryCompleted)},a.prototype.queryLiveShift=function(F,f,W){u.get(F,function(U){var M;U?(M=JSON.parse(U)).retCode==0?f&&f(M):W&&W(M):W&&W(U)},function(U){W&&W(U)})},a.prototype.stop=function(F){this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null)},a.prototype.dispose=function(){this.stop(),this._localLiveTimeHandler&&(clearTimeout(this._localLiveTimeHandler),this._localLiveTimeHandler=null),this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null),this._player=null},e.exports=a},{"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/url":54,"../../lib/util":55,"../base/event/eventtype":77,"../flv/flvinjector":113,"../hls/hlsinjector":115}],135:[function(t,e,O){function d(s){function r(){var l=document.querySelector("#"+s.id()+" .prism-progress-marker");if(l){l.innerHTML="";var c=n._player.getDuration();if(0<c){for(var h=0;h<n.progressMarkers.length;h++){var j,F=n.progressMarkers[h];F.offset!==void 0&&F.offset!==""&&(F=document.createElement("div"),a.addClass(F,"prism-marker-dot"),j=n.progressMarkers[h].offset/c,F.style.left=100*j+"%",l.appendChild(F),j=((W,U)=>function(){n._player.trigger(o.Private.MarkerTextShow,{left:W,progressMarker:U})})(j,n.progressMarkers[h]),u.on(F,"mouseover",j),u.on(F,"mouseout",function(W){n._player.trigger(o.Private.MarkerTextHide)}),u.on(F,"touchstart",j),u.on(F,"mousemove",function(W){W.preventDefault()}),u.on(F,"touchmove",function(W){W.preventDefault()}))}var f=document.querySelector("#"+n._player.id()+" .prism-progress-cursor");n._player.on(f,"click",function(W){for(var U=n._player.getCurrentTime(),M=0;M<n.progressMarkers.length;M++){var R,K=n.progressMarkers[M];K&&U-1<K.offset&&K.offset<U+1&&(R=K.offset/c*100+"%",n._player.trigger(o.Private.MarkerTextShow,{left:R,progressMarker:K}))}})}}}this.progressMarkers=[],this._player=s;var n=this;s.on(o.Private.ProgressMarkerLoaded,function(l){l=l.paramData,l&&0<l.length&&(n.progressMarkers=l)}),s.on(o.Private.ProgressMarkerChanged,function(l){l=l.paramData,l&&0<l.length&&(n.progressMarkers=l,r())}),s.on(o.Video.LoadedMetadata,r)}var o=t("../base/event/eventtype"),a=(t("../../lang/index"),t("../../lib/hls/hlsparse"),t("../../lib/object"),t("../../lib/dom")),u=t("../../lib/event");t("../../lib/playerutil"),d.prototype.dispose=function(){this._player=null,this.progressMarkers=[]},e.exports=d},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/hls/hlsparse":43,"../../lib/object":47,"../../lib/playerutil":50,"../base/event/eventtype":77}],136:[function(t,e,O){function d(){return(d=Object.assign?Object.assign.bind():function(h){for(var j=1;j<arguments.length;j++){var F,f=arguments[j];for(F in f)!{}.hasOwnProperty.call(f,F)||(h[F]=f[F])}return h}).apply(null,arguments)}function o(h){this.levels=[],this.drmUrl={},this._player=h;var j=this;h.on(a.Private.PlayInfoLoaded,function(F){for(var f=F.paramData.encryptUrlArr||[],W=[],U=0;U<f.length;U++){var M=f[U];M.encryptionType===l.VodEncryptionType["Widevine-FairPlay"]&&W.push(M)}j.drmUrl=W}),h.on(a.Player.LevelsLoaded,function(F){if(0<j.levels.length&&(j.levels=[]),(F=F.paramData)&&F.levels){for(var f,W=F.levels.length-1;-1<W;W--){var U,M=F.levels[W];M.url&&0<M.url.length&&M.attrs&&M.attrs.BANDWIDTH&&(U=M.url,r.isArray(U)&&(U=U[0]),U={Url:U=!h._hls&&h._options.isVBR&&h._options.isDrm&&h._options.vid?c.call(j,M):U,desc:Math.min(M.width,M.height),bitrate:M.bitrate,resolution:M.attrs.RESOLUTION,bandwidth:M.attrs.BANDWIDTH},j.levels.push(U))}h._options.definition==="AUTO"&&(h._urls=[],Object.assign(h._urls,this.levels)),j.levels.sort(function(R,K){return(R.bitrate||R.desc)-(K.bitrate||K.desc)}),j.levels=((R,K)=>typeof K=="function"?R.map(function(G){return d({},G,{desc:K({bandwidth:Number(G.bandwidth),bitrate:Number(G.bitrate),width:Number(G.resolution.split("x")[0]),height:Number(G.resolution.split("x")[1])})})}):R.map(function(G){return d({},G,{desc:G.desc+"p@"+parseInt(G.bitrate/1e3)+"k"})}))(j.levels,h._options.bitrateDisplayHandler),(j.levels&&0<j.levels.length||h._drm&&h._options.useDrm2)&&this._player._options.isVBR&&(f=u.get("Auto"),j.levels.push({Url:F.url,desc:f}),h.trigger(a.Private.SelectorUpdateList,{type:"quality",text:f}))}}),h.on(a.Video.LoadStart,function(){var F,f,W;h._options&&(F=h._options.source,f=h._options.isVBR,W=h._options.useDrm2,!h._hls)&&F&&n.isHls(F)&&(h._manuallySwitchDrmLevel?(h._manuallySwitchDrmLevel=!1,h.trigger(a.Private.SafariDrmLevelSwitch)):(f||h._drm&&!W)&&j.loadLevels(F))})}var a=t("../base/event/eventtype"),u=t("../../lang/index"),s=t("../../lib/hls/hlsparse"),r=t("../../lib/object"),n=t("../../lib/playerutil"),l=t("../../lib/constants");function c(h){for(var j,F=this.drmUrl,f=0;f<this.drmUrl.length;f++)if(Number(h.height)===Number(F[f].height)){j=F[f].Url;break}return j}(o.prototype={loadLevels:function(h){var j=new s,F=this;j.load(h,function(f){var W;(W=f.subtitles)!=null&&W.forEach(function(U){j.loadMediaPlaylist({url:U.url},function(M){M=M.fragments[0],M&&(U.vttUrl=j.resolve(M.relurl,M.baseurl))},function(M){console.log("parse vtt url error: ",M)})}),F._player._created?F._player.trigger(a.Player.LevelsLoaded,f):F._player.one(a.Private.Created,function(){F._player.trigger(a.Player.LevelsLoaded,f)})})}}).dispose=function(){this._player=null},e.exports=o},{"../../lang/index":28,"../../lib/constants":33,"../../lib/hls/hlsparse":43,"../../lib/object":47,"../../lib/playerutil":50,"../base/event/eventtype":77}],137:[function(t,e,O){function d(r){this._player=r,this.cues=[],this.baseUrl="";var n=this;r.on(s.Private.ChangeURL,function(){n.cues=[],n.baseUrl=""})}var o=t("../../lib/io"),a=t("../../lib/url"),u=t("../../lib/vtt/thumbnailvtt"),s=t("../base/event/eventtype");(d.prototype={get:function(r){var n,l,c,h=this;this.baseUrl=(n=r,l="",(c=a.parseUrl(n))&&(c=c.segments)&&0<c.length&&(c=c[c.length-1],l=n.split("?")[0].replace(c,"")),l),o.get(r,function(j){j&&u.parse(j,function(F){h.cues=F,h._player.trigger(s.Private.ThumbnailLoaded,F)})},function(j){console.log(j)})},findAvailableCue:function(r){for(var n=this.cues.length,l=0;l<n;l++){var c=this.cues[l];if(c.startTime<=r&&r<c.endTime)return c}return null},makeUrl:function(r){return r=r.indexOf("://")==-1?this.baseUrl+r:r}}).dispose=function(){this._player=null},e.exports=d},{"../../lib/io":45,"../../lib/url":54,"../../lib/vtt/thumbnailvtt":56,"../base/event/eventtype":77}],138:[function(t,e,O){function d(){return(d=Object.assign?Object.assign.bind():function(K){for(var G=1;G<arguments.length;G++){var X,z=arguments[G];for(X in z)!{}.hasOwnProperty.call(z,X)||(K[X]=z[X])}return K}).apply(null,arguments)}var o=t("../base/player"),a=t("./splayerinjector"),u=t("../flv/flvinjector"),s=t("../hls/hlsinjector"),r=t("../../lib/playerutil"),n=t("../base/event/eventtype"),l=t("../../lib/constants"),c=t("../../lib/codec-probe"),h=t("../../lib/ua"),j=l.USER_EVENT_NAME,F=r.isH265Codec,f=r.isH266Codec,W=r.getVideoTrack,U={},M={codecCost:0,decoderCost:0},R=o.extend({init:function(K,G){var X,z=this,te=(this._options=G,r.isFlv(G.source,G.format)),ee=r.isHls(G.source,G.format),Y=this._extraMultiSources(),ie={};function ae(){te?(u.inject(this,R,o,G),G._native=!1):ee&&!r.canPlayHls()&&(s.inject(this,R,o,G),G._native=!1),o.call(this,K,G),this._monitor&&this._monitor.updateH265ProbeInfo(d({},M,U)),ce.call(this),U.codecTag&&a.reportH265PlayInfo.call(this,{renderType:"native",codecTag:U.codecTag})}function de(){G._native=!1,a.inject(this,R,o,G,U),o.call(this,K,G),this._monitor&&this._monitor.updateH265ProbeInfo(d({},M,U,{waitRenderType:!0})),ce.call(this)}function ce(){var ge,he,se=this,Z=ie,oe=this[j];oe&&(Z=Object.assign({},ie,oe),ge=Object.keys(ie),he=Object.keys(oe),ge.forEach(function(re){-1<he.indexOf(re)&&(Z[re]=ie[re].concat(oe[re]))})),Object.keys(Z).forEach(function(re){Z[re].forEach(function(Te){Te.binded||o.prototype.on.call(se,re,Te)})})}ie[n.Player.Ready]=[function(){z._setupSourceList(Y),z.trigger(n.Private.SelectorGenerateList,{type:"quality"})}],G.from==="zhihu"||G.forceH265||G.forceH266?de.call(this):h.IS_ANDROID&&h.dingTalk()&&!te?ae.call(this):(X=performance.now(),c(G.source,G,function(se){M.codecCost+=performance.now()-X;var he,se=W(se.tracks),Z=(se||{}).codecTag||((Z=(se||{}).codec)==null?void 0:Z.split(".")[0]);U.codecTag=Z,se&&F(Z)?(he=performance.now(),te||ee&&!r.canPlayHls()?(M.decoderCost+=performance.now()-he,de.call(z)):r.shouldUseBasePlayer({codecTag:Z,url:G.source},function(oe){M.decoderCost+=performance.now()-he,(oe?ae:de).call(z)})):(se&&f(Z)?de:ae).call(z)},function(ge){console.log("error in demuxer, fallback to basePlayer",ge),M.codecCost+=performance.now()-X,ae.call(z),a.checkProtocol.call(z,G.source)}))}});e.exports=R},{"../../lib/codec-probe":31,"../../lib/constants":33,"../../lib/playerutil":50,"../../lib/ua":53,"../base/event/eventtype":77,"../base/player":102,"../flv/flvinjector":113,"../hls/hlsinjector":115,"./splayerinjector":139}],139:[function(t,e,O){function d(){return(d=Object.assign?Object.assign.bind():function(M){for(var R=1;R<arguments.length;R++){var K,G=arguments[R];for(K in G)!{}.hasOwnProperty.call(G,K)||(M[K]=G[K])}return M}).apply(null,arguments)}var o=t("../../lib/io"),a=t("../base/event/eventtype"),u=t("../base/event/eventmanager"),s=(t("../../lib/event"),t("../../lib/util")),r=t("../../lib/dom"),n=t("../../lib/playerutil"),l=t("../../lib/constants"),c=t("../../lang/index"),h="splayerinjector.js";function j(M){var R=this._options,K=(W.call(this),(function(){n.isVideoTag(this.tag)&&(u.offVideoAll(this),this.tag.parentNode&&this.tag.parentNode.removeChild(this.tag),this.tag=null)}).call(this),Videox.Videox),G=R.splayerWasmDomain,G=(!G&&R.assetPrefix&&(G=R.assetPrefix+"/splayer"),new K(d({container:this._el,wasmDomain:G,progressive:!0,skipFrame:K.DiscardType.NONE,loop:R.rePlay,controls:!1,muted:!1,threads:R.h265Threads,simd:R.h265Simd,autoplay:R.autoplay||R._autoplay,live:R.isLive,poster:R.cover||void 0,src:R.source,trackOptions:{disable:!0},preload:R.preload?"auto":"none",timeout:1e3*R.waitingTimeout},R.splayerOptions||{}))),X=(R.debug&&(G.setLogLevel(K.LogLevel.LOG),G.setLogPrintLevel(K.LogLevel.LOG)),this._splayer=G,(this.tag=G).play),z=this;this.tag.play=function(){z._monitor&&z._monitor.reportStartPlay(),X.call(this)},(function(){var te,ee=this,Y=document.createElement("video");for(te in Y)(ie=>{ee.tag[ie]||ie.indexOf("on")===0||typeof Y[ie]!="function"||(ee.tag[ie]=function(){console.warn("Function ["+ie+"] is called on splayer, which should be a mistake."),Y[ie].apply(Y,arguments)})})(te)}).call(this),(function(te){var ee=this,Y=(u.onAll(this),this._splayer);Y.addEventListener("error",(function(ie){var ae,de,ce,se=Videox.Videox,ge=(ie||{}).detail,he=Number((ge||{}).code),se=se.ErrorCode;switch(this.traceLog(h,"splayer-error::"+he,!0),he){case se.WASM_NOT_SUPPORTED:case se.CANVAS_NOT_SUPPORTED:case se.AUDIOCONTEXT_NOT_SUPPORTED:case se.WORKER_NOT_SUPPORTED:case se.WEBGL_NOT_SUPPORTED:ae=l.ErrorCode.SplayerEnvCheckError,de=c.get("Splayer_Err_Env_Check")+" | "+F(ge);break;case se.DECODE:ae=l.ErrorCode.SplayerDecodeError,de=c.get("Splayer_Err_Decode")+" | "+F(ge);break;case se.NETWORK:ae=l.ErrorCode.NetworkError,de=c.get("Error_Network_Text")+" | "+F(ge);var Z=(ge.origin||{}).response;Z?(Z=Z.status)===404?(ae=l.ErrorCode.NotFoundSourceURL,de=c.get("Error_Not_Found")+" | "+F(ge),ce=c.get("Tip_Err_Not_found")):Z===403&&(ae=l.ErrorCode.AuthKeyExpired,de=c.get("Error_AuthKey_Text")+" | "+F(ge)):navigator.onLine&&(ae=l.ErrorCode.RequestDataError,de=de+""+c.get("Maybe_Cors_Error"));break;case se.PARSER:ae=l.ErrorCode.SplayerParserNotFound,de=c.get("Splayer_Err_Parser_Not_Found")+" | "+F(ge);break;default:ae=l.ErrorCode.OtherError,de="(SP)"+c.get("Error_Play_Text")+" | "+F(ge)}if(ce=ce||c.get("Tip_Err_Splayer")+'<a href="https://help.aliyun.com/zh/vod/developer-reference/advanced-features-3#section-j4v-zwt-641" target="_blank">'+c.get("Tip_Err_Splayer_Doc")+"</a>",!(ae===l.ErrorCode.NetworkError&&this._reloadForVod())){try{this.pause()}catch{}he={error_code:ae,error_msg:de,diagnosis_info:ce},he.error_code!==null&&he.error_msg!==null&&(this.logError(he),this.trigger(a.Player.Error,he)),U.call(this,{splayer:!0})}}).bind(this)),Y.addEventListener("decoderoverload",function(ie){ie=ie.detail,delete ie.shouldWarn,ee.trigger(a.Player.H265DecoderOverload,ie)}),Y.addEventListener("loadedsupportinfo",function(ae){var ae=ae.detail||{},de=ae.detail||{},ce=Y.controller.options||{};Y.renderType=ae.renderer,U.call(ee,{renderer:ae.renderer,wasmThreads:de.wasmThreads&&ce.threads,wasmThreadsOption:ce.threads,simd:de.simd&&ce.simd,simdOption:ce.simd,codecTag:Y.controller.videoTrack&&Y.controller.videoTrack.codecTag||Y.controller.videoTrack&&((ae=Y.controller.videoTrack.codec)==null?void 0:ae.split(".")[0]),splayer:!0})}),(this._options.autoplay||this._options._autoplay)&&(Y.once("canplay",function(){Y.paused&&ee._autoplayFailedHandler()}),Y.once("timeupdate",function(){ee.trigger(a.Player.Play)}),this._monitor)&&this._monitor.reportStartPlay(),Y.on("playing",function(){ee._monitor&&ee._monitor.reportPlaying()}),Y.on("timeupdate",function(){ee._monitor&&ee._monitor.reportPlaying()})}).call(this,M)}function F(R){var R=R=R===void 0?{}:R,K=R.code,G=Videox.Videox.ErrorCode,X="";return X=K?X+K+(": "+(R.message||G[K])):X}function f(M){return!s.contentProtocolMixed(M,"alwaysCheck")||((M={mediaId:this._options.vid||"",error_code:l.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=c.get("Request_Block_Text"),this.logError(M),this.trigger(a.Player.Error,M),!1)}function W(){this._splayer&&(this._splayer.destroy(),this._splayer=null)}function U(M){var R;M===void 0&&(M={}),!this._h265InfoReported&&(this._h265InfoReported=!0,R={0:"native",1:"mse",2:"wasm"},delete(M=d({codecTag:(this._probeInfo||{}).codecTag||M.codecTag,renderType:M.renderType||R[M.renderer]},M)).renderer,M.renderType!==R[2]&&(delete M.simd,delete M.simdOption,delete M.wasmThreads,delete M.wasmThreadsOption),this._splayerRenderType=M.renderType,R=M.codecTag)&&(n.isH265Codec(R)?this.trigger(a.Player.H265PlayInfo,M):n.isH266Codec(R)&&this.trigger(a.Player.H266PlayInfo,M))}e.exports.checkProtocol=f,e.exports.reportH265PlayInfo=U,e.exports.inject=function(M,R,K,G,X){function z(ee,Y){this._superPt.setPlayerSize.call(this,ee,Y),ee=this._el.querySelector("canvas"),ee&&(Y=this._el.offsetWidth/this._el.offsetHeight,ee.offsetWidth/ee.offsetHeight<Y?(ee.style.height="100%",ee.style.width="initial"):(ee.style.width="100%",ee.style.height="initial"))}function te(){this._disposed||(this._superPt&&(this._superPt.dispose.call(this),R.prototype.replay=this._superPt.replay,R.prototype.setPlayerSize=this._superPt.setPlayerSize,R.prototype._setTransform=this._superPt._setTransform,R.prototype.initPlay=this._superPt.initPlay),W.call(this),this._Type=null,this._superType=null,this._superPt=null,this._disposed=!0,this._splayerLoaded=!1,this._h265InfoReported=!1,this._splayerRenderType=null)}M._Type=R,M._superType=K,M._superPt=K.prototype,M._disposed=!1,M._splayer=null,M._splayerLoaded=!1,M._probeInfo=X,M._splayerRenderType=null,R.prototype.initPlay=function(ee){var Y=this;this.trigger(a.Private.H5_Loading_Show),f.call(this,this._options.source)&&(this._splayerLoaded?j.call(this,ee):(function(ie,ae){var de=this._options,ce=de.splayerUrl||"https://g.alicdn.com/apsara-media-components/amcom-splayer/0.7.8/dist/index.js";!de.splayerUrl&&de.assetPrefix&&(ce=de.assetPrefix+"/splayer/index.js"),o.loadJS(ce,ie.bind(this),function(){ae&&ae()})}).call(this,function(){this._splayerLoaded=!0,j.call(this,ee),Y._executeReadyCallback()},function(){var ie={mediaId:Y._options.vid||"",mediaAuth:Y._options.mediaAuth||"",error_code:l.ErrorCode.ModuleLoadError,error_msg:"splayer module load error."};Y.trigger(a.Player.Error,ie)}))},R.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this._splayer.load(),this._splayer.play(),this},Object.defineProperty(R.prototype,"setPlayerSize",{enumerable:!0,configurable:!0,get:function(){return z},set:function(){return z}}),R.prototype._setTransform=function(){var ee=this._player.el(),Y=this._splayerRenderType==="wasm",ee=Y?ee.querySelector("canvas"):ee.querySelector("video"),Y=(this._transformProp||(this._transformProp=r.getTransformName(ee)),Y?"":" translate(-50%, -50%)");this._rotate&&(Y+=" rotate("+this._rotate+"deg)"),this._image&&(this._image=="vertical"?Y+=" scaleY(-1)":this._image=="horizon"&&(Y+=" scaleX(-1)")),ee.style[this._transformProp]=Y},Object.defineProperty(R.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return te},set:function(){return te}})}},{"../../lang/index":28,"../../lib/constants":33,"../../lib/dom":37,"../../lib/event":38,"../../lib/io":45,"../../lib/playerutil":50,"../../lib/util":55,"../base/event/eventmanager":76,"../base/event/eventtype":77}],140:[function(t,e,O){function d(K,G){var X,z=typeof Symbol<"u"&&K[Symbol.iterator]||K["@@iterator"];if(z)return(z=z.call(K)).next.bind(z);if(Array.isArray(K)||(z=((te,ee)=>{var Y;if(te)return typeof te=="string"?o(te,ee):(Y=(Y={}.toString.call(te).slice(8,-1))==="Object"&&te.constructor?te.constructor.name:Y)==="Map"||Y==="Set"?Array.from(te):Y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)?o(te,ee):void 0})(K))||G)return z&&(K=z),X=0,function(){return X>=K.length?{done:!0}:{done:!1,value:K[X++]}};throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(K,G){(G==null||G>K.length)&&(G=K.length);for(var X=0,z=Array(G);X<G;X++)z[X]=K[X];return z}var a=typeof Promise>"u"?t("es6-promise").Promise:Promise,u=t("../../lib/io"),s=t("../../config"),r=t("../../lang/index"),n=t("../../lib/ua"),l=t("../base/event/eventtype"),c=t("../../lib/constants"),h=c.PLAYER_SCOPE,j=c.SW_MSG_EVT,F=c.DM_MSG_EVT,f=c.ErrorCode,W=t("./tsremuxer").TSRemuxer,U="swinjector.js";function M(K){K={mediaId:this._options.vid||"",error_code:K.code,error_msg:K.msg,diagnosis_info:K.info},this.trigger(l.Player.Error,K)}function R(K){return K.split("?")[0].split("#")[0]}e.exports.inject=function(K,G,X,z,te){K.swPlayer=!0,K.firstBuild=!0,K.sw=null,K.tsDemuxerWorker=null,K.tsRemuxer=null,K.preloadError=!1,K.fetchHasResult=!1,K._initServiceWorker=new a(function(ce){setTimeout(ce,1e3),"serviceWorker"in navigator?navigator.serviceWorker.getRegistrations().then(function(ge){if(!ge.length)return console.log("No serviceWorker registrations found."),ce();for(var he,se=[],Z=d(ge);!(he=Z()).done;)(()=>{var oe=he.value,re=oe.unregister().then(function(Te){console.log(Te?"Successfully unregistered":"Failed to unregister",`ServiceWorkerRegistration
`+(oe.installing?"  .installing.scriptURL = "+oe.installing.scriptURL+`
`:"")+(oe.waiting?"  .waiting.scriptURL = "+oe.waiting.scriptURL+`
`:"")+(oe.active?"  .active.scriptURL = "+oe.active.scriptURL+`
`:"")+"  .scope: "+oe.scope+`
`)});se.push(re)})();a.all(se).then(ce).catch(ce)}).catch(function(ge){console.log("clear sw error",ge),ce()}):ce()}).then((function(ce){var ge=this;return new a(function(he){var se=(oe=>{if(!oe)return r.get("Error_SW_ScriptURL_Empty");if((oe=String(oe)).indexOf("https")!==0&&oe.indexOf("localhost")===-1&&oe.indexOf("127.0.0.1")===-1)return r.get("Error_SW_ScriptURL_Https");try{re=new URL(oe)}catch(Te){return r.get("Error_SW_ScriptURL_ILlegal","",{detail:Te})}(oe=R(location.href).split("/")).pop();var oe=oe.join("/"),re=((re=R(re.href).split("/")).pop(),re.join("/"));return oe!==re?r.get("Error_SW_ScriptURL_Scope","",{scope1:re,scope2:oe}):void 0})(ce.swScriptURL);if(se)return ge.preloadError=!0,M.call(ge,{code:f.ModuleLoadError,msg:se});"serviceWorker"in navigator?(navigator.serviceWorker.register(ce.swScriptURL,{scope:"./"}).then(function(Z){ge.traceLog(U,"sw registered"),Z=Z.active||Z.waiting||Z.installing,Z.postMessage({scope:h,name:j.SETUP}),ge.sw=Z}).catch(function(Z){ge.preloadError=!0,M.call(ge,{code:f.ModuleLoadError,msg:r.get("Error_SW_Register_Failed")+"("+Z+")",info:r.get("Tip_SW_Register")})}),navigator.serviceWorker.addEventListener("controllerchange",function(Z){Z.target.controller.scriptURL!==ce.swScriptURL&&M.call(ge,{code:f.ModuleLoadError,msg:r.get("Error_SW_Conflict"),info:"controlled by "+Z.target.controller.scriptURL})}),navigator.serviceWorker.addEventListener("message",function(Z){var oe;if((re=Z.data)&&re.scope===h){var re=Z.data.name;switch(console.log("[MESSAGE FROM SW]["+re+"]",(ke=>{var ye;try{ye=/[0-9]+\.ts/.exec(ke)[0]}catch{}return ye})((oe=Z.data.payload)==null?void 0:oe.url),Z.data.payload),re){case j.SETUP_ACK:he(),ge.traceLog(U,"sw ack");var Te=(Te=Z.data.payload)==null?void 0:Te.version;Te!==s.h5Version&&(ge.preloadError=!0,M.call(ge,{code:f.ModuleLoadError,msg:r.get("Error_SW_Version_Not_Match","",{swVersion:Te,playerVersion:s.h5Version})}));break;case j.ENC_SEGMENT:var Ce=Z.data.payload;ge._getDemuxer.then(function(){ge.tsDemuxerWorker&&ge.tsDemuxerWorker.postMessage({name:F.DEMUX,payload:{buffer:Ce.buffer,url:Ce.url,playlistUrl:Ce.playlistUrl}})});break;case j.ABORT_SEGMENT:ge.tsDemuxerWorker&&ge.tsDemuxerWorker.postMessage({name:F.FLUSH}),ge.tsRemuxer&&ge.tsRemuxer.flush()}}})):(ge.preloadError=!0,se=location.protocol==="http:"?r.get("Error_SW_Https_required"):r.get("UseChromeForVodEncription")+"(SW not found)",M.call(ge,{code:f.EncrptyVideoNotSupport,msg:se}))})}).call(K,z));var ee,Y,ie=performance.now(),ae=(K._getDemuxer=(ee=z,new a(function(ce,ge){var he="aliplayer-hls2-demuxer-min.js",se="https://"+s.domain+s.path+s.h5Version+"/hls/"+he;ee.assetPrefix&&(se=ee.assetPrefix+"/hls/"+he),u.loadJS(se,ce,ge)}).then(function(){K.traceLog(U,"got demuxer#"+parseInt(performance.now()-ie)),window.AliDemuxerWorker&&(K.tsDemuxerWorker=window.AliDemuxerWorker.injectWorker().worker,K.tsDemuxerWorker.postMessage({name:F.SETUP,payload:{key:te,debug:z.debug}}),K.tsDemuxerWorker.addEventListener("message",function(ce){var ge=ce.data;switch(ge.name){case F.RESULT:if(K.tsRemuxer)try{K.tsRemuxer.remux(ge.payload.demuxResult)}catch(he){K.traceLog(U,"remux error: "+he.message+", "+he.stack+"}")}break;case F.DISPOSED:K.tsDemuxerWorker&&(K.tsDemuxerWorker.terminate(),K.tsDemuxerWorker=null);break;case F.ERROR:K.traceLog(U,"demuxer error:  "+ge.payload.reason)}}),K.tsDemuxerWorker.addEventListener("error",function(ce){K.traceLog(U,"demuxer uncaught error: "+ce.message)}))}).catch(function(ce){K.preloadError=!0,M.call(K,{code:f.ModuleLoadError,msg:"ts-demuxer module load error"})})),performance.now());function de(){this.swPlayer=!1,this.preloadError=!1,this.fetchHasResult=!1,this.tsDemuxerWorker&&this.tsDemuxerWorker.postMessage({name:F.DISPOSE}),this.tsRemuxer&&(this.tsRemuxer.destroy(),this.tsRemuxer=null);var ce=X.prototype;ce&&(ce.dispose.call(this),G.prototype.initPlay=ce.initPlay),this.sw&&(this.sw.postMessage({scope:h,name:j.DISPOSE}),this.sw=null)}K._getRemuxer=(Y=z,new a(function(ce,ge){var he,se="aliplayer-remuxer-min.js",Z="https://"+s.domain+s.path+s.h5Version+"/hls/"+se;Y.assetPrefix&&(Z=Y.assetPrefix+"/hls/"+se),n.IS_IOS&&Number(n.IOS_VERSION)<=14?(he="https://"+s.domain+s.path+s.h5Version+"/hls/aliplayer-remuxer-polyfill.js",Y.assetPrefix&&(Z=Y.assetPrefix+"/hls/"+se),u.loadJS(he,function(){u.loadJS(Z,ce,ge)},ge)):u.loadJS(Z,ce,ge)}).then(function(){K.traceLog(U,"got remuxer#"+parseInt(performance.now()-ae)),window.LibMux&&(K.tsRemuxer=new W({onResult:function(ce){K.sw.postMessage({scope:h,name:j.DEC_SEGMENT,payload:{buffer:ce.data.buffer,url:ce.id}},[ce.data.buffer])}}))}).catch(function(){K.preloadError=!0,M.call(K,{code:f.ModuleLoadError,msg:"ts-remuxer module load error"})})),G.prototype.initPlay=function(){var ce=this;a.all([this._getDemuxer,this._getRemuxer,this._initServiceWorker]).then(function(){ce.trigger(l.Private.H5_Loading_Show),u.get(z.source,function(ge){var he;K.fetchHasResult=!0,ce.preloadError||(ge=((se,Z)=>{var oe,re=-1<Z.indexOf("EXT-X-STREAM-INF");if(Z=Z.replace(/#EXT-X-KEY:.*\n?/g,""),se=se.match(/^(.*)\/[^\/]*$/))return oe=se[1],se=re?/(#EXT-X-STREAM-INF:[^\n]+\n)([^\n]+)/g:/(#EXTINF:[^\n]+\n)([^\n]+)/g,Z=Z.replace(se,function(Te,Ce,ke){return""+Ce+oe+"/"+ke+(-1<ke.indexOf("?")?"&":"?")+"_s=enc"});console.warn("no match base url found.")})(z.source,ge),he="",he=n.IS_IOS?"data:application/x-mpegurl;base64,"+btoa(ge):(ge=new Blob([ge],{type:"application/vnd.apple.mpegurl"}),URL.createObjectURL(ge)),ce.tag.src=he,ce._initPlayBehavior(),ce.firstBuild&&(ce.firstBuild=!1,ce._executeReadyCallback()))},function(ge,he){if(console.log("fetch m3u8 error",ge,he),ce.traceLog(U,"fetch m3u8 error "+he+"-"+ge),!K.fetchHasResult&&(K.fetchHasResult=!0,!ce.preloadError)){var se,Z;switch(he){case 403:se=f.AuthKeyExpired,Z=r.get("Error_AuthKey_Text");break;case 404:se=f.NotFoundSourceURL,Z=r.get("Error_Not_Found");break;default:se=f.RequestDataError,Z=r.get("Error_Load_M3U8_Failed_Text")}M.call(ce,{code:se,msg:Z})}})})},Object.defineProperty(G.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return de},set:function(){return de}})}},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/io":45,"../../lib/ua":53,"../base/event/eventtype":77,"./tsremuxer":141,"es6-promise":13}],141:[function(t,e,O){e.exports.TSRemuxer=(()=>{function d(a){this.mux=null;var u=window.LibMux;console.log("LibMux ->",u),this.mux=new u({outputFormat:2,hasVideo:!0,hasAudio:!0,onResult:function(s){console.log("remux result -> ",s),a.onResult(s)}})}var o=d.prototype;return o.remux=function(a){this.mux.remuxTS({id:a.id,videoTrack:a.videoTrack,audioTrack:a.audioTrack})},o.flush=function(){this.mux.flush()},o.destroy=function(){this.mux.destroy()},d})()},{}],142:[function(require,module,exports){(function _SkeinEnclosedFunction($jsskein_array_102,$jsskein_array_103,$jsskein_array_104){function kl5f8(){function t(j){var F=window[$jsskein_array_102[10]];return $jsskein_array_103[2],$jsskein_array_104[0],F[j]=function(){}}for(var e=1;e!==void 0;){var O=3&e>>2;switch(3&e){case 0:switch(O){case 0:e=h?5:9;continue;case 1:h++,e=8;continue;case 2:e=h<l[$jsskein_array_103[1]]?0:2;continue}continue;case 1:switch(O){case 0:$jsskein_array_103[2],e=window?10:6;continue;case 1:var d=l[$jsskein_array_102[7]](h),o=~(~(d&~a)&~(~d&a)),a=d;c+=$jsskein_array_104[10][$jsskein_array_103[9]](o),e=4;continue;case 2:d=$jsskein_array_103[8],a=parseInt($jsskein_array_104[9],$jsskein_array_102[6])+d,e=5;continue}continue;case 2:switch(O){case 0:u[s]($jsskein_array_102[8],$jsskein_array_102[9],r,$jsskein_array_103[10],$jsskein_array_103[11],$jsskein_array_103[12],n,c),u[$jsskein_array_102[11]](t),e=6;continue;case 1:e=void 0;continue;case 2:var u=[],s=$jsskein_array_103[3];s+=$jsskein_array_103[4];var r=(r=$jsskein_array_104[6])[$jsskein_array_103[5]]($jsskein_array_103[6])[$jsskein_array_102[3]]()[$jsskein_array_104[7]]($jsskein_array_103[6]),n=$jsskein_array_102[4],l=(n=(n+=$jsskein_array_104[8])+$jsskein_array_102[5],$jsskein_array_103[7]),c=$jsskein_array_103[6],a=$jsskein_array_103[2],h=$jsskein_array_104[0];e=8;continue}continue}}}function gas4s8(){for(var NEXTBB24=3;NEXTBB24!==void 0;){var $jsskein_indexLevel106_0=1&NEXTBB24,$jsskein_indexLevel106_1_Base=NEXTBB24>>1,$jsskein_indexLevel106_1=1&$jsskein_indexLevel106_1_Base;switch($jsskein_indexLevel106_0){case 0:switch($jsskein_indexLevel106_1){case 0:eval(fs56j57),NEXTBB24=1;continue;case 1:NEXTBB24=void 0;continue}continue;case 1:switch($jsskein_indexLevel106_1){case 0:NEXTBB24=$jsskein_array_103[13]?0:2;continue;case 1:NEXTBB24=1;continue}continue}}}function n5fg6f(player){function _SkeinIIFE31(){function cl48s87(isOpen){for(var NEXTBB34=10;NEXTBB34!==void 0;){var $jsskein_indexLevel107_0=3&NEXTBB34,$jsskein_indexLevel107_1_Base=NEXTBB34>>2,$jsskein_indexLevel107_1=3&$jsskein_indexLevel107_1_Base;switch($jsskein_indexLevel107_0){case 0:switch($jsskein_indexLevel107_1){case 0:kl5f8(),player[$jsskein_array_104[23]](),gas4s8(),NEXTBB34=6;continue;case 1:$jsskein_simplify_tmp31=Aliplayer[$jsskein_decrypt_variable62_ret],$jsskein_simplify_tmp31=$jsskein_array_103[11]===$jsskein_simplify_tmp31,NEXTBB34=$jsskein_simplify_tmp31?13:0;continue;case 2:var $jsskein_cl48s87_string_plus54=$jsskein_array_104[11],$jsskein_decrypt_variable55_v=($jsskein_cl48s87_string_plus54+=$jsskein_array_103[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_103[15],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[13],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_104[12],$jsskein_simplify_tmp31=Aliplayer[$jsskein_cl48s87_string_plus54],$jsskein_array_103[16]),$jsskein_decrypt_variable57_ret=$jsskein_array_104[1],$jsskein_decrypt_variable58_i=$jsskein_array_103[2],NEXTBB34=9;continue;case 3:var $jsskein__rand98=$jsskein_array_104[16],$jsskein_decrypt_variable64_c=$jsskein_decrypt_variable60_v[$jsskein_array_102[7]]($jsskein_decrypt_variable63_i)-(parseInt($jsskein_array_102[17],$jsskein_array_102[18])+$jsskein__rand98);$jsskein_decrypt_variable62_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable64_c),NEXTBB34=14;continue}continue;case 1:switch($jsskein_indexLevel107_1){case 0:var $jsskein__rand97=$jsskein_array_104[13],$jsskein_decrypt_variable59_c=$jsskein_decrypt_variable55_v[$jsskein_array_104[4]]($jsskein_decrypt_variable58_i)-(parseInt($jsskein_array_102[15],$jsskein_array_103[17])+$jsskein__rand97);$jsskein_decrypt_variable57_ret+=$jsskein_array_104[10][$jsskein_array_104[14]]($jsskein_decrypt_variable59_c),NEXTBB34=2;continue;case 1:eval(fs56j57);var $jsskein_decrypt_variable60_v=$jsskein_array_104[15],$jsskein_decrypt_variable62_ret=$jsskein_array_104[1],$jsskein_decrypt_variable63_i=$jsskein_array_104[0];NEXTBB34=11;continue;case 2:NEXTBB34=$jsskein_decrypt_variable58_i<$jsskein_decrypt_variable55_v[$jsskein_array_103[1]]?1:7;continue;case 3:var $jsskein_cl48s87_string_plus65=$jsskein_array_104[17],$jsskein_cl48s87_string_plus66=($jsskein_cl48s87_string_plus65+=$jsskein_array_102[19],$jsskein_cl48s87_string_plus65+=$jsskein_array_104[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[20],$jsskein_cl48s87_string_plus65+=$jsskein_array_103[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[21],devtoolsDetector[$jsskein_cl48s87_string_plus65](cl48s87),$jsskein_array_102[22]);$jsskein_cl48s87_string_plus66+=$jsskein_array_102[23],$jsskein_cl48s87_string_plus66+=$jsskein_array_102[24],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[19],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[20],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[21],$jsskein_cl48s87_string_plus66=$jsskein_cl48s87_string_plus66[$jsskein_array_102[25]]($jsskein_array_104[1])[$jsskein_array_104[22]]()[$jsskein_array_104[7]]($jsskein_array_102[26]),devtoolsDetector[$jsskein_cl48s87_string_plus66]($jsskein_array_104[0]),devtoolsDetector[$jsskein_array_102[27]](),NEXTBB34=6;continue}continue;case 2:switch($jsskein_indexLevel107_1){case 0:$jsskein_decrypt_variable58_i++,NEXTBB34=9;continue;case 1:NEXTBB34=void 0;continue;case 2:var $jsskein_simplify_tmp31=$jsskein_array_102[12],$jsskein_cl48s87_var14=isOpen;NEXTBB34=$jsskein_cl48s87_var14?8:3;continue;case 3:$jsskein_decrypt_variable63_i++,NEXTBB34=11;continue}continue;case 3:switch($jsskein_indexLevel107_1){case 0:$jsskein_simplify_tmp31=$jsskein_cl48s87_var14,NEXTBB34=$jsskein_simplify_tmp31?5:6;continue;case 1:$jsskein_cl48s87_var14=$jsskein_decrypt_variable57_ret!==$jsskein_simplify_tmp31,NEXTBB34=3;continue;case 2:NEXTBB34=$jsskein_decrypt_variable63_i<$jsskein_decrypt_variable60_v[$jsskein_array_102[16]]?12:4;continue}continue}}}for(var NEXTBB32=0;NEXTBB32!==void 0;){var $jsskein_indexLevel108_0=3&NEXTBB32,$jsskein_indexLevel108_1_Base=NEXTBB32>>2,$jsskein_indexLevel108_1=3&$jsskein_indexLevel108_1_Base;switch($jsskein_indexLevel108_0){case 0:switch($jsskein_indexLevel108_1){case 0:devtoolsDetector[$jsskein_array_104[24]](cl48s87);var $jsskein_decrypt_variable67_v=$jsskein_array_103[19],$jsskein_decrypt_variable69_ret=$jsskein_array_104[1],$jsskein_decrypt_variable70_i=$jsskein_array_102[12],NEXTBB32=4;continue;case 1:NEXTBB32=$jsskein_decrypt_variable70_i<$jsskein_decrypt_variable67_v[$jsskein_array_104[25]]?5:8;continue;case 2:devtoolsDetector[$jsskein_decrypt_variable69_ret](),NEXTBB32=void 0;continue}continue;case 1:switch($jsskein_indexLevel108_1){case 0:$jsskein_decrypt_variable70_i++,NEXTBB32=4;continue;case 1:var $jsskein_decrypt_variable71_c=~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&~$jsskein_array_103[20])&~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&$jsskein_decrypt_variable67_v[$jsskein_array_103[21]]($jsskein_decrypt_variable70_i))&parseInt($jsskein_array_104[26],$jsskein_array_104[27])));$jsskein_decrypt_variable69_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable71_c),NEXTBB32=1;continue}continue}}}for(var NEXTBB29=2;NEXTBB29!==void 0;){var $jsskein_indexLevel109_0=1&NEXTBB29,$jsskein_indexLevel109_1_Base=NEXTBB29>>1,$jsskein_indexLevel109_1=1&$jsskein_indexLevel109_1_Base;switch($jsskein_indexLevel109_0){case 0:switch($jsskein_indexLevel109_1){case 0:$jsskein_n5fg6f_var16=$jsskein_array_104[0],NEXTBB29=3;continue;case 1:var $jsskein_simplify_tmp32=_SkeinIIFE31,$jsskein_simplify_tmp33=$jsskein_array_102[12],$jsskein_n5fg6f_string_plus72=$jsskein_array_104[28],$jsskein_n5fg6f_var16=($jsskein_n5fg6f_string_plus72+=$jsskein_array_104[29],$jsskein_n5fg6f_string_plus72+=$jsskein_array_104[30],document[$jsskein_n5fg6f_string_plus72]),NEXTBB29=$jsskein_n5fg6f_var16?0:1;continue}continue;case 1:switch($jsskein_indexLevel109_1){case 0:var $jsskein__rand99=$jsskein_array_104[3],$jsskein_n5fg6f_var16=$jsskein__rand99-$jsskein_array_103[22];NEXTBB29=3;continue;case 1:$jsskein_simplify_tmp33=$jsskein_n5fg6f_var16,setTimeout($jsskein_simplify_tmp32,$jsskein_simplify_tmp33),NEXTBB29=void 0;continue}continue}}}function _SkeinIIFE58(t,e){for(var O=27;O!==void 0;){var d=7&O>>3;switch(7&O){case 0:switch(d){case 0:n5fg6f(e),O=28;continue;case 1:F++,O=2;continue;case 2:var o=$jsskein_array_104[38],a=$jsskein_array_102[26],u=$jsskein_array_103[2],s=$jsskein_array_102[12],O=18;continue;case 3:var r=$jsskein_array_103[28],n=$jsskein_array_104[1],l=$jsskein_array_103[2],c=$jsskein_array_103[2];O=33;continue;case 4:console[$jsskein_array_102[36]](a),O=28;continue}continue;case 1:switch(d){case 0:s++,O=18;continue;case 1:var f=$jsskein_array_102[32],h=(f=(f=(f=(f+=$jsskein_array_103[14])+$jsskein_array_104[36])+$jsskein_array_102[33])+$jsskein_array_102[34]+$jsskein_array_103[30],R=Aliplayer[f],$jsskein_array_103[31]),j=$jsskein_array_102[26],F=$jsskein_array_103[2];O=2;continue;case 2:var f=r[$jsskein_array_102[7]](c),W=~(~(f&~l)&~(~f&l)),l=f;n+=$jsskein_array_103[29][$jsskein_array_103[9]](W),O=10;continue;case 3:u=parseInt($jsskein_array_102[35],$jsskein_array_103[33])-$jsskein_array_104[39],O=26;continue;case 4:O=c<r[$jsskein_array_103[1]]?11:4;continue}continue;case 2:switch(d){case 0:O=F<h[$jsskein_array_104[25]]?36:34;continue;case 1:c++,O=33;continue;case 2:O=s<o[$jsskein_array_104[25]]?12:32;continue;case 3:var U=o[$jsskein_array_103[21]](s),M=~(~(U&~u)&~(~U&u));u=U,a+=$jsskein_array_104[10][$jsskein_array_102[2]](M),O=1;continue;case 4:O=(R=j!==R)?0:16;continue}continue;case 3:switch(d){case 0:var K=parseInt($jsskein_array_104[34],$jsskein_array_104[27]);l=$jsskein_array_104[35]+K,O=17;continue;case 1:O=c?17:3;continue;case 2:return;case 3:var R=t[$jsskein_array_104[31]];O=(R=$jsskein_array_102[29]==R)?35:28;continue;case 4:var K=$jsskein_array_104[32],G=(K=(K=(K=(K+=$jsskein_array_103[23])+$jsskein_array_102[30])+$jsskein_array_102[31])[$jsskein_array_102[25]]($jsskein_array_103[6])[$jsskein_array_103[24]]()[$jsskein_array_104[7]]($jsskein_array_104[1]),R=window[K],$jsskein_array_104[33]),X=R[(G+=$jsskein_array_103[25])+$jsskein_array_103[26]],z=$jsskein_array_103[27]===X;O=z?20:24;continue}continue;case 4:switch(d){case 0:z=n===X,O=20;continue;case 1:O=s?26:25;continue;case 2:O=(R=z)?19:9;continue;case 3:O=void 0;continue;case 4:var te=~(~(h[$jsskein_array_102[7]](F)&~parseInt($jsskein_array_104[37],$jsskein_array_104[27]))&~(~(h[$jsskein_array_103[21]](F)&h[$jsskein_array_103[21]](F))&parseInt($jsskein_array_103[32],$jsskein_array_104[27])));j+=$jsskein_array_104[10][$jsskein_array_102[2]](te),O=8;continue}continue}}}for(var NEXTBB0=0;NEXTBB0!==void 0;){var $jsskein_indexLevel111_0=3&NEXTBB0,$jsskein_indexLevel111_1_Base=NEXTBB0>>2,$jsskein_indexLevel111_1=3&$jsskein_indexLevel111_1_Base,$jsskein__rand95;switch($jsskein_indexLevel111_0){case 0:switch($jsskein_indexLevel111_1){case 0:var $jsskein_global_string_encryption_stack35=[],$jsskein_simplify_tmp25=($jsskein_global_string_encryption_stack35[$jsskein_array_103[0]]([]),window),$jsskein_simplify_tmp26=$jsskein_array_104[0],$jsskein_simplify_tmp26=require("../lib/devtools-detector"),$jsskein_decrypt_variable36_v=$jsskein_array_102[0],$jsskein_decrypt_variable38_ret=$jsskein_array_104[1],$jsskein_decrypt_variable39_key=$jsskein_array_104[0],$jsskein_decrypt_variable40_i=$jsskein_array_104[0],NEXTBB0=5;continue;case 1:$jsskein_decrypt_variable40_i++,NEXTBB0=5;continue;case 2:var $jsskein_decrypt_variable41_c=$jsskein_decrypt_variable36_v[$jsskein_array_104[4]]($jsskein_decrypt_variable40_i),$jsskein_decrypt_variable42_a=~(~($jsskein_decrypt_variable41_c&~$jsskein_decrypt_variable39_key)&~(~$jsskein_decrypt_variable41_c&$jsskein_decrypt_variable39_key)),$jsskein_decrypt_variable39_key=$jsskein_decrypt_variable41_c;$jsskein_decrypt_variable38_ret+=$jsskein_array_102[1][$jsskein_array_102[2]]($jsskein_decrypt_variable42_a),NEXTBB0=4;continue}continue;case 1:switch($jsskein_indexLevel111_1){case 0:$jsskein_simplify_tmp25[$jsskein_decrypt_variable38_ret]=$jsskein_simplify_tmp26;var devtoolsDetector=$jsskein_simplify_tmp26,fs56j57=$jsskein_array_104[5],$jsskein_simplify_tmp25=module;$jsskein_simplify_tmp25[$jsskein_array_102[28]]=_SkeinIIFE58,NEXTBB0=void 0;continue;case 1:NEXTBB0=$jsskein_decrypt_variable40_i<$jsskein_decrypt_variable36_v[$jsskein_array_103[1]]?9:1;continue;case 2:NEXTBB0=$jsskein_decrypt_variable40_i?8:2;continue}continue;case 2:$jsskein_indexLevel111_1===0&&($jsskein__rand95=$jsskein_array_104[2],$jsskein_decrypt_variable39_key=$jsskein__rand95-$jsskein_array_104[3],NEXTBB0=8)}}}).call(this,["",String,"fromCharCode","reverse","d","ml",2,"charCodeAt","info","log","console","forEach",0,"le2Anti9","Debugger","101001011","length","30d",16,"m","i","ener","ya","leDt","ce","split","","stop","exports",1,"ac","ol","__","2Anti9D","ebugger13K","414","error"],["unshift","length",0,"p","ush","split","","",14,"fromCharCode","warn","error","dir",!0,"u","nab","",2,"st","",290,"charCodeAt",13,"oit","reverse","ostn","ame","localhost","",String,"ey","[LLQL","62",10],[0,"",412,113,"charCodeAt","debugger","gubed","join","irx","111100001",String,"__","13Key",315,"fromCharCode","",57,"re","oveL","teD","t","es","reverse","dispose","addListener","length","290",10,"bo","d","y","encryptType","n","h","474",449,"nable","62","\uD855",65])},{"../lib/devtools-detector":36}],143:[function(l,e,O){var c=l("../lib/oo"),d=l("../lib/data"),o=l("../lib/object"),a=l("../lib/dom"),u=l("../lib/event"),s=l("../lib/function"),r=l("../lib/layout"),n=(l("../lib/constants"),l("../lib/util"),l("../player/base/event/eventtype")),l=l("./component/util"),c=c.extend({init:function(h,j){var F=this,f=(this._player=h,this._eventState="",this._options=o.copy(j),this._el=this.createEl(),h.id);typeof h.id=="function"&&(f=h.id()),this._id=f+"_component_"+d.guid(),this._children=[],this._childIndex={},j.className&&this.addClass(j.className),this._player.on(n.Private.UiH5Ready,function(){F.renderUI(),F.syncUI(),F.bindEvent()})}});c.prototype.renderUI=function(){r.render(this.el(),this.options()),this.el().id=this.id()},c.prototype.syncUI=function(){},c.prototype.bindEvent=function(){},c.prototype.createEl=function(h,j){return a.createEl(h,j)},c.prototype.options=function(h){return h===void 0?this._options:this._options=o.merge(this._options,h)},c.prototype.el=function(){return this._el},c.prototype._contentEl,c.prototype.player=function(){return this._player},c.prototype.contentEl=function(){return this._contentEl||this._el},c.prototype._id,c.prototype.id=function(){return this._id},c.prototype.getId=function(){return this._id},c.prototype.addChild=function(h,j){var F;if(typeof h=="string"){if(!this._player.UI[h])return;F=new this._player.UI[h](this._player,j)}else F=h;return this._children.push(F),typeof F.id=="function"&&(this._childIndex[F.id()]=F),typeof F.el=="function"&&F.el()&&((j=F.el()).id=F.id(),this.contentEl().appendChild(j)),F},c.prototype.removeChild=function(h){if(h&&this._children){for(var j,F=!1,f=this._children.length-1;0<=f;f--)if(this._children[f]===h){F=!0,this._children.splice(f,1);break}F&&(this._childIndex[h.id]=null,j=h.el())&&j.parentNode===this.contentEl()&&this.contentEl().removeChild(h.el())}},c.prototype.initChildren=function(){var h,j,F=this,f=this.options().children;if(f)if(o.isArray(f))for(var W=0;W<f.length;W++)j=typeof(j=f[W])=="string"?(h=j,{}):(h=j.name,j),F.addChild(h,j);else o.each(f,function(U,M){M!==!1&&F.addChild(U,M)})},c.prototype.on=function(h,j){return u.on(this._el,h,s.bind(this,j)),this},c.prototype.off=function(h,j){return u.off(this._el,h,j),this},c.prototype.one=function(h,j){return u.one(this._el,h,s.bind(this,j)),this},c.prototype.trigger=function(h,j){if(this._el)return!j&&j!=0||(this._el.paramData=j),this._eventState=h,u.trigger(this._el,h),this},c.prototype.offAll=function(h){return u.off(this._el,h),this},c.prototype.addClass=function(h){return a.addClass(this._el,h),this},c.prototype.removeClass=function(h){return a.removeClass(this._el,h),this},c.prototype.show=function(){return this._el&&(this._el.style.display="block"),this},c.prototype.hide=function(){return this._el&&(this._el.style.display="none"),this},c.prototype.destroy=function(){if(this.trigger({type:"destroy",bubbles:!1}),this._children)for(var h=this._children.length-1;0<=h;h--)this._children[h].destroy&&this._children[h].destroy();typeof this.disposeUI=="function"&&this.disposeUI(),this.children_=null,this.childIndex_=null,this.offAll(),this._el.parentNode&&this._el.id!=this._player.id()&&this._el.parentNode.removeChild(this._el),d.removeData(this._el),this._el=null},c.prototype.registerControlBarTooltip=l.registerTooltipEvent,e.exports=c},{"../lib/constants":33,"../lib/data":35,"../lib/dom":37,"../lib/event":38,"../lib/function":40,"../lib/layout":46,"../lib/object":47,"../lib/oo":48,"../lib/util":55,"../player/base/event/eventtype":77,"./component/util":173}],144:[function(r,e,O){var d=r("../component"),o=r("../../lib/dom"),a=r("../../lib/event"),u=r("../../player/base/event/eventtype"),s=r("../../player/base/plugin/status"),r=d.extend({init:function(n,l){d.call(this,n,l),this.addClass("prism-big-play-btn")},createEl:function(){var n=d.prototype.createEl.call(this,"div");return n.setAttribute("data-testid","playButton"),n.innerHTML='<div class="outter"></div>',n},bindEvent:function(){var n=this,l=(this._player.on(u.Player.Play,function(){n.addClass("playing"),n.removeClass("pause"),n._hide()}),this._player.on(u.Player.Pause,function(){var c,h;n._player._switchSourcing||(n.removeClass("playing"),n.addClass("pause"),c=n._player._status,h=n._player._seeking,c==s.ended)||c==s.error||c==s.playing||h||n._show()}),document.querySelector("#"+n.id()+" .outter"));a.on(this.el(),"mouseover",function(){o.addClass(l,"big-playbtn-hover-animation")}),a.on(this.el(),"mouseout",function(){o.removeClass(l,"big-playbtn-hover-animation")}),this.on(u.Private.PlayClick,function(){n._player.paused()?n._player.play(!0):n._player.pause(!0)}),this._player.on(u.Private.Play_Btn_Show,function(){n._show()}),this._player.on(u.Private.Play_Btn_Hide,function(){n._hide()})},_show:function(){o.css(this.el(),"display","block")},_hide:function(){o.css(this.el(),"display","none")}});e.exports=r},{"../../lib/dom":37,"../../lib/event":38,"../../player/base/event/eventtype":77,"../../player/base/plugin/status":106,"../component":143}],145:[function(r,e,O){var d=r("../component"),o=r("../../lib/dom"),a=r("./util"),u=r("../../lang/index"),s=r("../../player/base/event/eventtype"),r=d.extend({init:function(n,l){this.isOpened=!1,d.call(this,n,l),this.addClass("prism-cc-btn")},createEl:function(){return d.prototype.createEl.call(this,"div")},bindEvent:function(){var n=this;this.on("click",function(){o.addClass(n._el,"disabled");var l="on",c="";n.isOpened?(n._player._ccService.close(),l="off"):c=n._player._ccService.open().label,n._player.trigger(s.Private.CCChanged,l),n._player.trigger(s.Private.CCStateChanged,{value:l,lang:c}),n.disabledHandler&&clearTimeout(n.disabledHandler),n.disabledHandler=setTimeout(function(){o.removeClass(n._el,"disabled")},1e3),n._player.trigger(s.Private.MarkerTextHide)}),this._player.on(s.Private.CCChanged,function(l){l=l.paramData,n.isOpened=l!="off"}),a.registerTooltipEvent.call(this,this.el(),function(){return n.isOpened?u.get("CloseSubtitle"):u.get("OpenSubtitle")})},disposeUI:function(){this.disabledHandler&&(clearTimeout(this.disabledHandler),this.disabledHandler=null)}});e.exports=r},{"../../lang/index":28,"../../lib/dom":37,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],146:[function(r,e,O){var d=r("../component"),o=r("../../player/base/event/eventtype"),a=r("../../lib/event"),u=r("../../lib/dom"),s=r("../../lib/ua"),r=d.extend({init:function(n,l){d.call(this,n,l),this.addClass("prism-controlbar"),this.initChildren(),this.onEvent()},createEl:function(){var n=d.prototype.createEl.call(this);return n.innerHTML='<div class="prism-controlbar-bg"></div>',n},onEvent:function(){var n,l=this.player(),c=l.options(),h=this,j=(a.on(this._el,"mouseover",function(){var F=document.querySelector("#"+h.id()+" .prism-progress-cursor");u.css(F,"display","block")}),a.on(this._el,"mouseout",function(F){var f=document.querySelector("#"+h.id()+" .prism-progress-cursor");u.css(f,"display","none"),l.trigger(o.Private.ThumbnailHide)}),a.on(this._el,"click",function(F){l.trigger(o.Private.ControlBarClick,F)}),s.IS_IOS&&(a.on(this._el,"touchstart",function(){var F=document.querySelector("#"+h.id()+" .prism-progress-cursor");u.css(F,"display","block")}),a.on(this._player.tag,"touchstart",function(){var F=document.querySelector("#"+h.id()+" .prism-progress-cursor");u.css(F,"display","none"),l.trigger(o.Private.ThumbnailHide)})),this.timer=null,c.controlBarVisibility);(j=c.controlBarForOver==1?"hover":j)=="hover"?(h.hide(),n=function(){h._hideHandler&&clearTimeout(h._hideHandler),h._show(),l.fullscreenService.getIsFullScreen()&&h._hide()},l.on(o.Private.MouseOver,function(){n()}),a.on(this._player.tag,"click",function(F){F&&F.target==F.currentTarget&&n()}),a.on(this._player.tag,"touchstart",function(F){F&&F.target==F.currentTarget&&n()}),l.on(o.Private.MouseOut,function(){h._hideHandler=setTimeout(function(){h.hide(),l.trigger(o.Private.HideBar),l.trigger(o.Private.ThumbnailHide),l.trigger(o.Private.VolumeVisibilityChange,""),l.trigger(o.Private.SettingListHide)})})):j=="click"?(l.on(o.Private.Click,function(F){l._isError||(F.preventDefault(),F.stopPropagation(),h._show(),h._hide())}),l.on(o.Player.Ready,function(){h._hide()}),l.on(o.Private.TouchStart,function(){h._show()}),l.on(o.Private.TouchMove,function(){h._show()}),l.on(o.Private.TouchEnd,function(){h._hide()})):j=="never"?h._hide():h._show()},_show:function(){this.show(),this._player.trigger(o.Private.ShowBar),this.timer&&(clearTimeout(this.timer),this.timer=null)},_hide:function(){var n=this,l=this.player().options(),l=l.controlBarVisibility=="never"?0:l.showBarTime;this.timer=setTimeout(function(){n.hide(),n._player.trigger(o.Private.HideBar),n._player.trigger(o.Private.ThumbnailHide),n._player.trigger(o.Private.VolumeVisibilityChange,""),n._player.trigger(o.Private.SettingListHide)},l)},disposeUI:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._hideHandler&&(clearTimeout(this._hideHandler),this._hideHandler=null)}});e.exports=r},{"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../../player/base/event/eventtype":77,"../component":143}],147:[function(u,e,O){var d=u("../component"),o=u("../../lib/dom"),a=u("../../player/base/event/eventtype"),u=d.extend({init:function(s,r){d.call(this,s,r),this.addClass("prism-cover")},createEl:function(){var s=d.prototype.createEl.call(this,"div"),r=this.options().cover;return r?s.style.backgroundImage="url("+r+")":o.css(s,"display","none"),s},_hide:function(s){var r=document.querySelector("#"+this.id()+" .prism-cover");r&&o.css(r,"display","none")},_show:function(s){var r=document.querySelector("#"+this.id()+" .prism-cover");r&&o.css(r,"display","block")},bindEvent:function(){this._player.on(a.Private.Cover_Show,this._show),this._player.on(a.Private.Cover_Hide,this._hide)}});e.exports=u},{"../../lib/dom":37,"../../player/base/event/eventtype":77,"../component":143}],148:[function(u,e,O){var d=u("../component"),o=u("../../lib/dom"),a=u("../../lib/event"),u=d.extend({init:function(r,n){d.call(this,r,n),this.addClass("prism-double-click-skip")},createEl:function(){var r=d.prototype.createEl.call(this,"div");return r.innerHTML=`
        <div class="click-skip-container click-skip-container-left">
          <div class="ff-arrow-container">
              <span class="ff-arrow ff-arrow1"></span>
              <span class="ff-arrow ff-arrow2"></span>
              <span class="ff-arrow ff-arrow3"></span>
              <span class="ff-text">10s</span>
          </div>
        </div>
        <div class="click-skip-container click-skip-container-right">
          <div class="ff-arrow-container">
              <span class="ff-arrow ff-arrow1"></span>
              <span class="ff-arrow ff-arrow2"></span>
              <span class="ff-arrow ff-arrow3"></span>
              <span class="ff-text">10s</span>
          </div>
        </div>
      `,r},bindEvent:function(){var r=this,n="prism-double-click-skip-active",l="click-skip-container-active",c="ff-arrow-container-hide",h="ff-arrow-container-revert",j=(this.nodeLeft=this.el().querySelector(".click-skip-container-left"),this.nodeRight=this.el().querySelector(".click-skip-container-right"),this.arrowLeft=this.nodeLeft.querySelector(".ff-arrow-container"),this.arrowRight=this.nodeRight.querySelector(".ff-arrow-container"),o.addClass(this.arrowLeft,c),o.addClass(this.arrowRight,c),null),F=(a.on(this.nodeLeft,"dblClick",function(){j?(clearTimeout(j),j=null):(r.addClass(n),o.addClass(r.nodeLeft,l),o.removeClass(r.arrowLeft,c),o.addClass(r.arrowLeft,h)),j=setTimeout(function(){j=null,r.removeClass(n),o.removeClass(r.nodeLeft,l),o.removeClass(r.arrowLeft,h),o.addClass(r.arrowLeft,c)},1e3),r._skip("backward")}),null);a.on(this.nodeRight,"dblClick",function(){F?(clearTimeout(F),F=null):(r.addClass(n),o.addClass(r.nodeRight,l),o.removeClass(r.arrowRight,c)),F=setTimeout(function(){F=null,o.removeClass(r.nodeRight,l),r.removeClass(n),o.addClass(r.arrowRight,c)},1e3),r._skip("forward")}),s(this.nodeLeft),s(this.nodeRight),this._player._handleLongPress(this._player.getOptions(),this.el()),this._player._handleClickPause_dbClickFullscreen(this._player.getOptions(),this.el())},_skip:function(r){var n=this._player.getCurrentTime(),l=this._player.getDuration(),c=n,c=r==="forward"?Math.min(n+10,l):Math.max(n-10,0);this._player.seek(c)},disposeUI:function(){}});function s(r){var n=null;a.on(r,"touchstart",function(){n?(clearTimeout(n),n=null,a.trigger(r,"dblClick")):n=setTimeout(function(){n=null},300)})}e.exports=u},{"../../lib/dom":37,"../../lib/event":38,"../component":143}],149:[function(l,e,O){var d=l("../component"),o=l("../../lib/util"),a=l("../../lib/dom"),u=l("../../lib/event"),s=l("../../lib/ua"),r=l("../../lang/index"),n=l("../../player/base/event/eventtype"),l=(l("../../lib/playerutil"),d.extend({init:function(c,h){d.call(this,c,h),this.addClass("prism-ErrorMessage")},createEl:function(){var c=d.prototype.createEl.call(this,"div");return c.innerHTML="<div class='prism-error-content'><p></p></div><div class='prism-error-detail'><p></p></div><div class='prism-error-operation'><a class='prism-button prism-button-refresh'>"+r.get("Refresh_Text")+"</a><a class='prism-button prism-button-orange'  target='_blank'>"+r.get("Detection_Text")+"</a></div><div class='prism-detect-info prism-center'><p class='errorCode'><span class='info-label'>code:&nbsp;</span><span class='info-content'></span></p><p class='vid'><span class='info-label'>vid:&nbsp;</span><span class='info-content'></span></p><p class='mediaAuth'><span class='info-label'>mediaAuth:&nbsp;</span><span class='info-content'></span></p><p class='uuid'><span class='info-label'>uuid:&nbsp;</span><span class='info-content'></span></p><p class='requestId'><span class='info-label'>requestId(player):&nbsp;</span><span class='info-content'></span></p><p class='vodRequestId'><span class='info-label'>requestId(vod):&nbsp;</span><span class='info-content'></span></p><p class='dateTime'><span class='info-label'>"+r.get("Play_DateTime")+":&nbsp;</span><span class='info-content'></span></p></div>",c},bindEvent:function(){var c=this,j=(c._player.on(n.Private.Error_Show,function(F){var f=null;c._player.getMonitorInfo&&(f=c._player.getMonitorInfo()),c._show(F,f)}),c._player.on(n.Private.Error_Hide,function(){c._hide()}),document.querySelector("#"+c.id()+" .prism-button-refresh")),h=(u.on(j,"click",function(){c._player.traceLog("error-display.js","refreshBtn::clicked"),location.reload(!0)}),s.IS_MOBILE&&(j=document.querySelector("#"+c.id()+" .prism-detect-info"),a.addClass(j,"prism-width90")),document.querySelector("#"+c.id()+" .prism-error-detail")),j=document.querySelector("#"+this.id()+" .prism-button-orange");a.css(h,"display","none"),u.on(j,"click",function(){a.css(h,"display","block")})},_show:function(F,h){var F=F.paramData,j=(F.mediaId&&F.mediaId,F.mediaAuth&&F.mediaAuth,F.display_msg||F.error_msg),j=(document.querySelector("#"+this.id()+" .prism-error-content p").innerHTML=j,document.querySelector("#"+this.id()+" .errorCode .info-content").innerText=F.error_code,F.diagnosis_info),j=(j?document.querySelector("#"+this.id()+" .prism-error-detail p").innerHTML=j:(j=document.querySelector("#"+this.id()+" .prism-button-orange"),a.css(j,"display","none")),document.querySelector("#"+this.id()+" .vid")),j=(F.mediaId?(a.css(j,"display","block"),document.querySelector("#"+this.id()+" .vid .info-content").innerText=F.mediaId):a.css(j,"display","none"),document.querySelector("#"+this.id()+" .mediaAuth")),F=(F.mediaAuth?(a.css(j,"display","block"),document.querySelector("#"+this.id()+" .mediaAuth .info-content").innerText=F.mediaAuth):a.css(j,"display","none"),F.uuid?document.querySelector("#"+this.id()+" .uuid .info-content").innerText=F.uuid:(j=document.querySelector("#"+this.id()+" .uuid"),a.css(j,"display","none")),F.requestId?document.querySelector("#"+this.id()+" .requestId .info-content").innerText=F.requestId:(j=document.querySelector("#"+this.id()+" .requestId"),a.css(j,"display","none")),F.serverRequestId?document.querySelector("#"+this.id()+" .vodRequestId .info-content").innerText=F.serverRequestId:(j=document.querySelector("#"+this.id()+" .vodRequestId"),a.css(j,"display","none")),document.querySelector("#"+this.id()+" .dateTime .info-content").innerText=o.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),document.querySelector("#"+this.id())),f=(a.css(F,"display","block"),this);f.playHideHandler&&clearTimeout(f.playHideHandler),f.playHideHandler=setTimeout(function(){f._player.trigger("play_btn_hide")})},_hide:function(){var c=document.querySelector("#"+this.id());a.css(c,"display","none")},disposeUI:function(){this.playHideHandler&&(clearTimeout(this.playHideHandler),this.playHideHandler=null)}}));e.exports=l},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../../player/base/event/eventtype":77,"../component":143}],150:[function(r,e,O){var d=r("../component"),o=r("../../player/base/event/eventtype"),a=(r("../../lib/event"),r("../../lib/ua")),u=r("../../lang/index"),s=r("./util"),r=d.extend({init:function(n,l){d.call(this,n,l),this.addClass("prism-fullscreen-btn")},bindEvent:function(){var n=this;this._player.on(o.Player.RequestFullScreen,function(){a.IS_IOS||n.addClass("fullscreen")}),this._player.on(o.Player.CancelFullScreen,function(){n.removeClass("fullscreen")}),s.registerTooltipEvent.call(this,this.el(),function(){return n._player.fullscreenService.getIsFullScreen()?u.get("ExistFullScreen"):u.get("Fullscreen")}),this.on("click",function(){n._player.fullscreenService.getIsFullScreen()?n._player.fullscreenService.cancelFullScreen():n._player.fullscreenService.requestFullScreen(),n._player.trigger(o.Private.MarkerTextHide)})}});e.exports=r},{"../../lang/index":28,"../../lib/event":38,"../../lib/ua":53,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],151:[function(s,e,O){var d=s("../component"),o=s("../../lib/dom"),a=s("../../player/base/event/eventtype"),u=s("../../lib/ua.js"),s=d.extend({init:function(r,n){d.call(this,r,n),this.addClass("prism-hide")},createEl:function(){var r=d.prototype.createEl.call(this,"div");return r.innerHTML=u.IS_ANDROID_FIREFOX?'<div class="circle-androidFirefox"></div> <div class="circle1-androidFirefox"></div>':'<div class="circle"></div> <div class="circle1"></div>',r},_loading_hide:function(r){var n=document.querySelector("#"+this.id()+" .prism-loading");n&&(o.removeClass(n,"prism-loading"),o.addClass(n,"prism-hide"))},_loading_show:function(r){var n=document.querySelector("#"+this.id()+" .prism-hide");n&&(o.removeClass(n,"prism-hide"),o.addClass(n,"prism-loading"))},bindEvent:function(){this._player.on(a.Private.H5_Loading_Show,this._loading_show),this._player.on(a.Private.H5_Loading_Hide,this._loading_hide)}});e.exports=s},{"../../lib/dom":37,"../../lib/ua.js":53,"../../player/base/event/eventtype":77,"../component":143}],152:[function(u,e,O){var d=u("../component"),o=(u("../../lib/util"),u("../../lib/dom")),a=(u("../../lib/event"),u("../../lib/ua"),u("../../lang/index"),u("../../player/base/event/eventtype")),u=d.extend({init:function(s,r){d.call(this,s,r),this.addClass("prism-info-display")},createEl:function(){return d.prototype.createEl.call(this,"p")},bindEvent:function(){var s=this;s._player.on(a.Private.Info_Show,function(l){var n=document.querySelector("#"+s.id()),l=l.paramData;l&&(l.text!==void 0&&l.text?(n.innerHTML=l.text,l.duration!==void 0&&l.duration&&(s.handler&&clearTimeout(s.handler),s.handler=setTimeout(function(){o.css(n,"display","none")},l.duration)),l.align=="lb"?(o.addClass(n,"prism-info-left-bottom"),o.removeClass(n,"prism-info-top-center")):l.align=="tc"?(o.addClass(n,"prism-info-top-center"),o.removeClass(n,"prism-info-left-bottom")):(o.removeClass(n,"prism-info-left-bottom"),o.removeClass(n,"prism-info-top-center")),l.isBlack?o.addClass(n,"prism-info-black"):o.removeClass(n,"prism-info-black")):n.innerHTML=l,o.css(n,"display","block"))}),s._player.on(a.Private.Info_Hide,function(r){var n=document.querySelector("#"+s.id());o.css(n,"display","none")})},disposeUI:function(){this.handler&&(clearTimeout(this.handler),this.handler=null)}});e.exports=u},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../../lib/util":55,"../../player/base/event/eventtype":77,"../component":143}],153:[function(n,e,O){var d=n("../component"),o=n("./util"),a=(n("../../lib/util"),n("../../lib/dom")),u=n("../../lib/event"),s=n("../../lib/playerutil"),r=n("../../lang/index"),n=d.extend({init:function(l,c){d.call(this,l,c),this.addClass("prism-live-display")},createEl:function(){var l=d.prototype.createEl.call(this,"p");return l.innerText="LIVE",s.isLiveShift(this._player._options)&&a.addClass(l,"live-shift-display"),l},bindEvent:function(){var l=document.querySelector("#"+this.id()),c=this;s.isLiveShift(this._player._options)&&(u.on(l,"click",function(){c._player._liveshiftService.switchToLive()}),o.registerTooltipEvent.call(this,this.el(),r.get("SwitchToLive")))}});e.exports=n},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/playerutil":50,"../../lib/util":55,"../component":143,"./util":173}],154:[function(s,e,O){var d=s("../component"),o=s("../../player/base/event/eventtype"),a=s("./util"),u=s("../../lang/index"),s=d.extend({init:function(r,n){d.call(this,r,n),this.addClass("prism-play-btn")},bindEvent:function(){var r=this;this._player.on(o.Player.Play,function(){r.addClass("playing")}),this._player.on(o.Player.Pause,function(){r.removeClass("playing")}),this.on(o.Private.PlayClick,function(){var n;r._player.paused()?(n=r._player.getCurrentTime(),(r._player.getDuration()<=n||r._player._ended||r._player.exceedPreviewTime(n))&&!r._player._splayer&&r._player.seek(r._player._getPlayStartTime()),r._player.play(!0),r.addClass("playing")):(r._player.pause(!0),r.removeClass("playing")),r._player.trigger(o.Private.MarkerTextHide)}),a.registerTooltipEvent.call(this,this.el(),function(){return r._player.paused()?u.get("Play"):u.get("Pause")})}});e.exports=s},{"../../lang/index":28,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],155:[function(s,e,O){var d=s("../component"),o=s("../../lib/dom"),a=s("../../lang/index"),u=s("../../player/base/event/eventtype"),s=d.extend({init:function(r,n){d.call(this,r,n),this.addClass("prism-press-fast-forward")},createEl:function(){var r=d.prototype.createEl.call(this,"div");return r.innerHTML=`
    <div class="ff-arrow-container">
        <span class="ff-arrow ff-arrow1"></span>
        <span class="ff-arrow ff-arrow2"></span>
        <span class="ff-arrow ff-arrow3"></span>
        <span class="ff-text">`+a.get("Speed_Long_Press")+`</span>
    </div>
    `,r},bindEvent:function(){var r=this;this._player.on(u.Private.FastForwardShow,function(){r.show()}),this._player.on(u.Private.FastForwardHide,function(){r.hide()})},show:function(){o.css(this.el(),"display","flex")},hide:function(){o.css(this.el(),"display","none")},disposeUI:function(){}});e.exports=s},{"../../lang/index":28,"../../lib/dom":37,"../../player/base/event/eventtype":77,"../component":143}],156:[function(j,e,O){var d=j("../component"),o=j("../../lib/dom"),a=(j("../../lib/constants"),j("../../lib/event")),u=j("../../lib/ua"),s=j("../../lib/function"),r=j("../../lang/index"),n=j("../../config"),l=j("../../lib/util"),c=(j("../../lib/playerutil"),j("../../player/base/event/eventtype")),h=j("./util").debounce,j=d.extend({init:function(F,f){d.call(this,F,f),this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this._thumbnailHideTimer=null,this.addClass("prism-progress"),F.getOptions().disableSeek&&this.addClass("prism-progress-disabled")},createEl:function(){var F=d.prototype.createEl.call(this);return F.innerHTML='<div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-marker"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-progress-mask-left"></div><div class="prism-progress-mask-right"></div>',F},bindEvent:function(){function F(K){W._progressDown=K}var f=this,W=this,U=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this._player._options.id+" .prism-progress-time"),this.thumbnailNode=document.querySelector(".prism-thumbnail"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),document.querySelector("#"+this.id())),M=document.querySelector("#"+this.id()+" .prism-progress-cursor img"),R=(this.markerNode=document.querySelector("#"+this.id()+" .prism-progress-marker"),this.maskNodeLeft=document.querySelector("#"+this.id()+" .prism-progress-mask-left"),this.maskNodeRight=document.querySelector("#"+this.id()+" .prism-progress-mask-right"),"");this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,R=this._player._options.skinsDomain?this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":n.domain?"https://"+n.domain+n.path+n.h5Version+"/skins/default/img/dragcursor.png":"/build/skins/default/img/dragcursor.png",M&&(M.src=R),a.on(this.cursorNode,"mousedown",function(K){W._onMouseDown(K)}),a.on(this.cursorNode,"touchstart",function(K){W._onMouseDown(K)}),a.on(U,"mousemove",function(K){W._progressMove(K)}),a.on(U,"touchmove",function(K){W._progressMove(K)}),a.on(U,"mousedown",function(K){F(!0)}),a.on(U,"touchstart",function(K){F(!0)}),a.on(U,"mouseup",function(K){F(!1)}),a.on(U,"touchend",function(K){F(!1),W._moving&&u.IS_MOBILE&&(W._player.trigger(c.Private.EndStart,{toTime:W._lastSeekTime}),W._moving=!1)}),a.on(this._el,"click",function(K){W._onMouseClick(K)}),this._player.on(c.Private.HideProgress,function(K){W._hideProgress(K)}),this._player.on(c.Private.CancelHideProgress,function(K){W._cancelHideProgress(K)}),this._player.on(c.Private.HideBar,function(K){W._player._seeking=!1}),this._player.on(c.Video.LoadedMetadata,function(){f._updateMaskNode()}),this._player.on(c.Private.UpdateWatchTime,function(){f._updateMaskNode()}),a.on(U,c.Private.MouseOver,function(K){W._onMouseOver(K)}),a.on(U,c.Private.MouseOut,function(K){W._onMouseOut(K)}),a.on(this.controlNode,c.Private.MouseLeave,function(K){W._offMouseUp()}),a.on(this.maskNodeLeft,"mouseenter",function(){W._offMouseUp()}),a.on(this.maskNodeRight,"mouseenter",function(){W._offMouseUp()}),u.IS_PC?(M=h(function(){o.addClass(U,"prism-progress-hover"),o.addClass(W.cursorNode,"cursor-hover")},100),a.on(U,"mouseover",M),R=h(function(){o.removeClass(U,"prism-progress-hover"),o.removeClass(W.cursorNode,"cursor-hover"),W._progressDown=!1},100),a.on(U,"mouseout",R)):(o.addClass(U,"prism-progress-hover"),o.addClass(U,"prism-progress-mobile"),o.addClass(W.cursorNode,"cursor-hover")),this.bindTimeupdate=s.bind(this,this._onTimeupdate),this._player.on(c.Player.TimeUpdate,this.bindTimeupdate),u.IS_IPAD?this.interval=setInterval(function(){W._onProgress()},500):this._player.on(c.Video.Progress,function(){W._onProgress()}),this._player.on(c.Private.UpdateProgress,function(K){W._updateProgressBar(W.playedNode,K.paramData.targetTime)}),this._player.on(c.Private.UpdateCursorPosition,function(K){W._updateCursorPosition(K.paramData.targetTime)})},_progressMove:function(F){F.preventDefault();var f,W,U=this._getSeconds(F);U!=1/0&&(f=l.formatTime(U),W=this._getDistance(F),this.cursorNode)&&(this._player.trigger(c.Private.ThumbnailShow,{time:U,formatTime:f,left:W,progressWidth:this.el().offsetWidth}),this._autoHideThumbnail(),this._progressDown)&&this._onMouseMove(F)},_hideProgress:function(F){a.off(this.cursorNode,"mousedown"),a.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(F){var f=this;a.on(this.cursorNode,"mousedown",function(W){f._onMouseDown(W)}),a.on(this.cursorNode,"touchstart",function(W){f._onMouseDown(W)})},_canSeekable:function(F){var f=!0;return f=typeof this._player.canSeekable=="function"?this._player.canSeekable(F):f},_onMouseOver:function(F){this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseInProgress||this._updateCursorPosition(this._player.getCurrentTime()),this._mouseInProgress=!0},_onMouseOut:function(F){var f=this;this._cursorHideHandler&&clearTimeout(this._cursorHideHandler),this._cursorHideHandler=setTimeout(function(){f._player.trigger(c.Private.ThumbnailHide),f._mouseInProgress=!1})},_getSeconds:function(W){var W=this._getDistance(W),f=this.el().offsetWidth,W=this._player.getDuration()?W/f*this._player.getDuration():0;return W=(W=W<0?0:W)>this._player.getDuration()?this._player.getDuration():W},_getDistance:function(F){if(F.touches&&F.touches[0]){for(var f=this.el().offsetLeft,W=this.el();W.offsetParent;){var W=W.offsetParent,U=o.getTranslateX(W);f+=W.offsetLeft+U}W.tagName&&W.tagName.toLowerCase()==="body"&&(f+=document.getElementsByTagName("html")[0].offsetLeft);var M=(F.touches?F.touches[0]:F).pageX-f;return M=M<0?0:M}return M=F.offsetX,F.target===this.cursorNode||F.target.offsetParent===this.cursorNode?M+=this.cursorNode.offsetLeft:F.target!==this._el&&F.target.offsetParent!==this._el&&F.target.offsetParent===this.markerNode&&(M+=F.target.offsetLeft),M},_onMouseClick:function(F){var f=this,W=f._getSeconds(F);f._canSeekable(W)?f._player._canSeek(W+f._posOffset)&&(f._player.exceedPreviewTime(W)&&(W=f._player.getPreviewTime()),this._seekTime=W,f._updateProgressBar(this.playedNode,W),f._updateCursorPosition(W),this._mouseClickTimeHandle&&clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=setTimeout(function(){f._player._seeking=!0,f._mouseDown&&!u.IS_MOBILE||(f._player.trigger(c.Private.SeekStart,{fromTime:f._player.getCurrentTime()}),f._player.trigger(c.Private.EndStart,{toTime:W})),f._player.seek(W),f._mouseDown=!1,f._mouseClickTimeHandle=null,f._inWaitingSeek=!1},0),this._inWaitingSeek=!0):f._player.trigger(c.Private.Info_Show,{text:r.get("Can_Not_Seekable"),duration:2e3})},_onMouseDown:function(W){var f=this,W=(W.preventDefault(),this._mouseDown=!0,u.IS_PC&&this._player.trigger(c.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),a.on(this.controlNode,"mousemove",function(U){f._onMouseMove(U)}),a.on(this.controlNode,"touchmove",function(U){f._onMouseMove(U)}),a.on(this.controlNode,"mouseup",function(U){f._onControlBarMouseUp(U)}),a.on(this.controlNode,"touchend",function(U){f._onControlBarMouseUp(U)}),f._getSeconds(W));f._canSeekable(W)?f._player.exceedPreviewTime(W)&&f._player.getPreviewTime():f._player.trigger(c.Private.Info_Show,{text:r.get("Can_Not_Seekable"),duration:2e3})},_onMouseUp:function(F){this._onMouseUpIntern(F)},_onControlBarMouseUp:function(F){this._onMouseUpIntern(F)},_onPlayerMouseUp:function(F){this._onMouseUpIntern(F)},_offMouseUp:function(){a.off(this.controlNode,"mousemove"),a.off(this.controlNode,"touchmove"),a.off(this.controlNode,"mouseup"),a.off(this.controlNode,"touchend")},_onMouseUpIntern:function(F){F.preventDefault(),this._offMouseUp(),F=this._getDistance(F)/this.el().offsetWidth*this._player.getDuration(),this._player.getDuration(),isNaN(F)||this._player.seek(F),u.IS_PC&&this._player.trigger(c.Private.EndStart,{toTime:F}),this._autoHideThumbnail()},_onMouseMove:function(F){F.preventDefault(),!this._moving&&u.IS_MOBILE&&(this._player.trigger(c.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),this._moving=!0),F=this._getSeconds(F),this._player.exceedPreviewTime(F)&&(F=this._player.getPreviewTime()),this._player.seek(F),this._updateProgressBar(this.playedNode,F),this._updateCursorPosition(F),this._lastSeekTime=F},_onTimeupdate:function(F){var f=this._player._options.source,f=this._getUrlSuffix(f),W=!1;f==="mp4"&&(u.IS_MAC_SAFARI&&(W=!0),u.IS_IOS&&(W=!0),u.IS_IE11)&&(W=!0),f==="m3u8"&&u.IS_IE11&&(W=!0),this._player._options.mediaType=="audio"&&u.IS_IOS&&(this._player._seeking=!1),(this._inWaitingSeek||this._progressDown)&&!W||(this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger(c.Private.UpdateProgressBar,{time:this._player.getCurrentTime()}))},_onProgress:function(F){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(F,f){var W=this._player.getDuration();this._player._switchSourcing!=1&&W&&(this._seekTime!=-1&&(this._player.getCurrentTime()>=this._seekTime||!this._player._seeking?this._seekTime=-1:f=this._seekTime),1<(f=f/W)&&(f=1),F)&&o.css(F,"width",100*f+"%")},_updateCursorPosition:function(F){var f,W,U,M=this._player.getDuration();this._player._switchSourcing!=1&&M&&(f=1,W=(this.cursorNode.offsetWidth||16)/2/(U=this._player.el().clientWidth),U!=0&&(f=1-W),U=(U=F/M-W)<0?0:U,this.cursorNode)&&(f<U?(o.css(this.cursorNode,"right","0px"),o.css(this.cursorNode,"left","auto")):(o.css(this.cursorNode,"right","auto"),o.css(this.cursorNode,"left",100*U+"%")))},_getUrlSuffix:function(F){return!F||typeof F!="string"?"":((F=(F.split("?")[0]||"").split("."))[F.length-1]||"").toLowerCase()},_autoHideThumbnail:function(){var F=this;u.IS_MOBILE&&(this._thumbnailHideTimer&&clearTimeout(this._thumbnailHideTimer),this._thumbnailHideTimer=setTimeout(function(){F._moving||F._player.trigger(c.Private.ThumbnailHide)},2e3))},_makeUninteractible:function(F){["click","mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach(function(f){a.on(F,f,function(W){W.stopPropagation()})})},_updateMaskNode:function(){var F,f=this._player._getSubVideoConfig();f.start||f.end?(o.css(this.maskNodeLeft,"width","0px"),o.css(this.maskNodeRight,"width","0px")):((f=this._player._getWatchTimeConfig()).watchStartTime&&f.watchEndTime?(F=100*Math.min(f.watchStartTime/this._player.getDuration(),1)+"%",o.css(this.maskNodeLeft,"width",F)):o.css(this.maskNodeLeft,"width","0px"),f.watchEndTime?(F=100*(1-Math.min(f.watchEndTime/this._player.getDuration(),1))+"%",o.css(this.maskNodeRight,"width",F)):o.css(this.maskNodeRight,"width","0px"),this._makeUninteractible(this.maskNodeLeft),this._makeUninteractible(this.maskNodeRight))},disposeUI:function(){this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this.cursorNodeHandler&&(clearTimeout(this.cursorNodeHandler),this.cursorNodeHandler=null),this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseClickTimeHandle&&(clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=null),this.interval&&(clearInterval(this.interval),this.interval=null)}});e.exports=j},{"../../config":19,"../../lang/index":28,"../../lib/constants":33,"../../lib/dom":37,"../../lib/event":38,"../../lib/function":40,"../../lib/playerutil":50,"../../lib/ua":53,"../../lib/util":55,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],157:[function(s,e,O){var d=s("../component"),o=(s("../../lib/util"),s("../../lib/dom")),a=s("../../lib/event"),u=s("../../player/base/event/eventtype"),s=d.extend({init:function(r,n){d.call(this,r,n),this.addClass("prism-marker-text")},createEl:function(){var r=d.prototype.createEl.call(this,"div");return r.innerHTML="<p></p>",r},bindEvent:function(){var r=this;r._player.on(u.Private.MarkerTextShow,function(n){var l=n.paramData,c=u.Player.MarkerDotOver;r._player.trigger(c,n.paramData),l.progressMarker.isCustomized?r._player.trigger(u.Private.LifeCycleChanged,{type:c,data:n.paramData}):(r._thumbnailShowHanlde&&(o.css(r.el(),"display","none"),clearTimeout(r._thumbnailShowHanlde)),r._thumbnailShowHanlde=setTimeout(function(){var h;document.querySelector("#"+r.id()+" p").innerText=l.progressMarker.text||"",l&&(o.css(r.el(),"display","block"),h=r._player.el().offsetWidth,left=h*l.left,width=r.el().offsetWidth,left+width>h?(o.css(r.el(),"right","0px"),o.css(r.el(),"left","auto")):(left=(left-=width/2)<0?0:left,o.css(r.el(),"right","auto"),o.css(r.el(),"left",left+"px")))},30))}),r._player.on(u.Private.MarkerTextHide,function(n){r._player.trigger(u.Player.MarkerDotOut),r._player.trigger(u.Private.LifeCycleChanged,{type:u.Player.MarkerDotOut,data:""}),r._thumbnailShowHanlde&&clearTimeout(r._thumbnailShowHanlde),o.css(r.el(),"display","none")}),a.on(r._player.tag,"click",function(n){n&&n.target==n.currentTarget&&r._player.trigger(u.Private.MarkerTextHide)}),a.on(r._player.tag,"touchstart",function(n){n&&n.target==n.currentTarget&&r._player.trigger(u.Private.MarkerTextHide)})},disposeUI:function(){this._thumbnailShowHanlde&&(clearTimeout(this._thumbnailShowHanlde),this._thumbnailShowHanlde=null)}});e.exports=s},{"../../lib/dom":37,"../../lib/event":38,"../../lib/util":55,"../../player/base/event/eventtype":77,"../component":143}],158:[function(r,e,O){var d=r("./selector"),o=r("../../../lib/object"),a=(r("../../../lib/util"),r("../../../lib/cookie"),r("../../../lib/dom")),u=(r("../../../lib/event"),r("./util"),r("../../../lang/index")),s=r("../../../player/base/event/eventtype"),r=d.extend({init:function(n,l){this.Name=u.get("AudioTrack"),this.Type="audio",this.Tooltip=u.get("AudioTrack_Switch_To"),d.call(this,n,l)},bindEvent:function(){this.bindCommonEvent();var n=this,l=document.querySelector("#"+n.id()+" .selector-list");document.querySelector("#"+n.id()+" .header"),n._player.on(s.Private.ChangeURL,function(){n._hasGeneratedList=!1}),this._player.on(s.Player.AudioTrackSwitch,function(){a.addClass(l,"disabled")}),this._player.on(s.Player.AudioTrackSwitched,function(){a.removeClass(l,"disabled")}),n._player.on(s.Player.AudioTrackReady,function(c){!n._hasGeneratedList&&(n._clear(),c=c.paramData)&&(o.each(c,function(h,j){var F=a.createEl.call(n,"li",{key:h.value,text:h.text}),f=a.createEl.call(n,"span",{key:h.value,text:h.text});f.innerText=h.text,F.appendChild(f),l.appendChild(F)}),n._hasGeneratedList=!0)})},execute:function(n){this._player._audioTrackService.switch(n)}});e.exports=r},{"../../../lang/index":28,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../lib/util":55,"../../../player/base/event/eventtype":77,"./selector":164,"./util":166}],159:[function(r,e,O){var d=r("../../component"),o=(r("../../../lib/dom"),r("../../../player/base/event/eventtype")),a=r("./list"),u=r("../../../lang/index"),s=r("../util"),r=d.extend({init:function(n,l){d.call(this,n,l),this.addClass(l.className||"prism-setting-btn"),this._settingList=new a(n,l),n.addChild(this._settingList,l)},createEl:function(){return d.prototype.createEl.call(this,"div")},bindEvent:function(){var n=this;this.on("click",function(){n._settingList.isOpened?n._player.trigger(o.Private.SettingListHide):n._player.trigger(o.Private.SettingListShow),n._player.trigger(o.Private.SelectorHide),n._player.trigger(o.Private.MarkerTextHide),n._player.trigger(o.Private.VolumeVisibilityChange,"")}),s.registerTooltipEvent.call(this,this.el(),u.get("Setting"))}});e.exports=r},{"../../../lang/index":28,"../../../lib/dom":37,"../../../player/base/event/eventtype":77,"../../component":143,"../util":173,"./list":162}],160:[function(l,e,O){var d=l("./selector"),o=l("../../../lib/object"),a=l("../../../lib/dom"),u=(l("../../../lib/event"),l("./util"),l("../../../lib/cookie")),s=l("../../../lib/constants"),r=l("../../../lang/index"),n=l("../../../player/base/event/eventtype"),l=d.extend({init:function(c,h){this.Name=r.get("Subtitle"),this.Type="cc",this.Tooltip=r.get("CC_Switch_To"),d.call(this,c,h)},bindEvent:function(){this.bindCommonEvent();var c=this;this._player.on(n.Private.CCStateChanged,function(F){var j=F.paramData.value,F=F.paramData.lang,F=(j=="on"&&F?c._backCCText=F:j=="off"&&c._backCCText==""&&(c._backCCText=c._previousSelection.text),"Off");j=="on"&&(F=c._backCCText),c._player.trigger(n.Private.SelectorUpdateList,{type:"cc",text:F})})},generateList:function(c){var h=document.querySelector("#"+this.id()+" .selector-list"),j=this._player._ccService.tracks,F=this;o.each(j,function(f,W){var U=a.createEl.call(this,"li",{key:f.value,text:f.text}),M=a.createEl.call(this,"span",{key:f.value,text:f.text});f.text==c&&(a.addClass(U,"current"),F._previousSelection=U),M.innerText=f.text,U.appendChild(M),h.appendChild(U)})},execute:function(c){this._backCCText="",u.set(s.SelectedCC,c,365),this._player._ccService.switch(c)}});e.exports=l},{"../../../lang/index":28,"../../../lib/constants":33,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../player/base/event/eventtype":77,"./selector":164,"./util":166}],161:[function(t,e,O){e.exports={CC:t("./cc"),Speed:t("./speed"),Quality:t("./quality"),Audio:t("./audio")}},{"./audio":158,"./cc":160,"./quality":163,"./speed":165}],162:[function(c,e,O){var d=c("../../component"),o=c("../../../lib/dom"),a=c("../../../lib/ua"),u=c("../../../lib/event"),s=c("../../../player/base/event/eventtype"),r=c("./export"),n=c("./util"),l=c("../../../lang/index"),c=d.extend({init:function(h,j){for(var F in this.isOpened=!1,d.call(this,h,j),this.addClass(j.className||"prism-setting-list"),r)F=new r[F](h,j),h.addChild(F,j)},createEl:function(){var h=d.prototype.createEl.call(this,"div"),W="<div class='prism-setting-item prism-setting-{type}' type={type}><div class='setting-content'><span class='setting-title'>{value}</span><span class='array'></span><span class='current-setting'></span></div></div>",j=W.replace(/{type}/g,"speed").replace("{value}",l.get("Speed")),F=W.replace(/{type}/g,"cc").replace("{value}",l.get("Subtitle")),f=W.replace(/{type}/g,"audio").replace("{value}",l.get("AudioTrack")),W=W.replace(/{type}/g,"quality").replace("{value}",l.get("Quality"));return h.innerHTML=j+F+f+W,h},bindEvent:function(){function h(){F._player.trigger(s.Private.SettingListHide),F.isOpened=!1}function j(W){W&&W.type&&(document.querySelector("#"+F.id()+" .prism-setting-"+W.type+" .current-setting").innerText=W.text||"")}var F=this,f=(this._player.on(s.Private.SettingListShow,function(W){F.isOpened=!0,W=W.paramData,j(W),o.css(F.el(),"display","block")}),this._player.on(s.Private.UpdateToSettingList,function(W){W=W.paramData,j(W)}),this._player.on(s.Private.SelectorUpdateList,function(W){W=W.paramData,j(W),F._player.trigger(s.Private.SelectorValueChange,W)}),this._player.on(s.Private.SettingListHide,function(){F.isOpened=!1,o.css(F.el(),"display","none")}),u.on(this.el(),"click",function(U){F._player.trigger(s.Private.SettingListHide);var U=U.srcElement||U.target;(U=n.findItemElementForList(U))&&(U=U.getAttribute("type"),F._player.trigger(s.Private.SelectorShow,{type:U}))}),a.IS_MOBILE?"touchleave":"mouseleave");u.on(this.el(),f,function(){h()}),u.on(this._player.tag,"click",function(W){W&&W.target==W.currentTarget&&h()}),u.on(this._player.tag,"touchstart",function(W){W&&W.target==W.currentTarget&&h()}),this._player.on(s.Private.QualityChange,function(R){var U,M,R=R.paramData;R.levelSwitch&&(U=document.querySelector("#"+F.id()+" .prism-setting-quality .current-setting"),M=l.get("Auto"),R=R.desc,-1<U.innerText.indexOf(M))&&(R&&-1<String(R).indexOf("(")?M=M+"-"+R:M+=R?"("+R+")":"",U.innerText=M)})}});e.exports=c},{"../../../lang/index":28,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/ua":53,"../../../player/base/event/eventtype":77,"../../component":143,"./export":161,"./util":166}],163:[function(l,e,O){var d=l("./selector"),o=l("../../../lib/object"),a=(l("../../../lib/util"),l("../../../lib/cookie")),u=l("../../../lib/dom"),s=(l("../../../lib/event"),l("../../../lib/constants")),r=l("../../../lang/index"),n=l("../../../player/base/event/eventtype"),l=d.extend({init:function(c,h){this.Name=r.get("Quality"),this.Type="quality",this.Tooltip=r.get("Quality_Switch_To"),d.call(this,c,h),this._isMasterLevel=!1},showTip:function(c,h){this._player.trigger(n.Private.Info_Show,{text:c,duration:h,align:"lb"})},bindEvent:function(){this.bindCommonEvent();var c=this,h=(this._player.on(n.Private.QualityChange,function(j){var F,f,W=0<c._player._urls.length?c._player._urls:c._player._qualityService.levels;(data=j.paramData).levelSwitch?(F=data.desc||data.bitrate,c._autoSWitchDesc=F,c._updateText(F)):0<c._player._currentPlayIndex&&(c._autoSWitchDesc="",f=W[(F=c._player._currentPlayIndex)-1].desc,W=W[F].desc,c.showTip(f+j.paramData+W,1e3),c._player.trigger(n.Private.SelectorValueChange,{type:c.Type,text:W}))}),document.querySelector("#"+c.id()+" .selector-list"));this._player.on(n.Player.LevelSwitch,function(){u.addClass(h,"disabled")}),this._player.on(n.Player.LevelSwitched,function(){u.removeClass(h,"disabled")})},generateList:function(c){var h,j=this._player._urls,F=this._player._currentPlayIndex,f=this._player._qualityService.levels,W=(0<f.length&&(this._isMasterLevel=!0,this._player._options.isVBR)&&(F=(j=f).length-1),document.querySelector("#"+this.id()+" .selector-list"));0<j.length&&(h=this,o.each(j,function(U,M){var R,K;(U.desc||U.bitrate)&&(R=u.createEl.call(this,"li",{key:U.Url,index:M,text:U.desc||U.bitrate}),K=u.createEl.call(this,"span",{key:U.Url,index:M,text:U.desc||U.bitrate}),M==F&&(u.addClass(R,"current"),h._previousSelection=R),K.innerText=U.desc||U.bitrate,R.appendChild(K),W.appendChild(R))})),this._autoSWitchDesc&&this._updateText(this._autoSWitchDesc)},execute:function(c){if(this._player._switchSourcing=!0,this._isMasterLevel){for(var h,j=this._player._qualityService.levels,F=0;F<j.length;F++)j[F].Url==c&&j[F].desc!=r.get("Auto")&&(h=j[F],this._resetAutoText());this._player._switchLevel?this._player._switchLevel(c,h):(f=this._player.autoplay||this._player._status!="pause",this._player._loadByUrlInner(c,this._player.getCurrentTime(),f))}else{for(var f,W=this._player._urls.length,U=this._player._currentPlayIndex,M=-1,F=0;F<W;F++)if(this._player._urls[F].Url==c){M=this._player._currentPlayIndex=F,a.set(s.SelectedStreamLevel,this._player._urls[F].definition,365);break}U!=M&&-1<M&&(U=this._player.getCurrentTime(),f=this._player.autoplay||this._player._status!="pause",this._player.autoplay||U!=0||(f=!1),this._player._switchLevel&&!this._player._options.isLive&&this._player._options.isVBR?this._player._switchLevel(c):this._player._loadByUrlInner(c,U,f))}var R=this;setTimeout(function(){R._player._switchSourcing=!1})},_updateText:function(c){var h=document.querySelector("#"+this.id()+" .selector-list .current"),j=document.querySelector("#"+this.id()+" .selector-list .current span"),F=r.get("Auto");j&&j.innerText&&-1<j.innerText.indexOf(F)&&(c&&-1<String(c).indexOf("(")?F=F+"-"+c:F+=c?"("+c+")":"",j.innerText=F,h)&&(h.text=F)},_resetAutoText:function(){for(var c=r.get("Auto"),h=document.querySelectorAll("#"+this.id()+" .selector-list li"),j=0;j<h.length;j++){var F=h[j],f=F.querySelector("span");if(-1<f.innerText.indexOf(c)){f.innerText=c,F.text=c;break}}}});e.exports=l},{"../../../lang/index":28,"../../../lib/constants":33,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../lib/util":55,"../../../player/base/event/eventtype":77,"./selector":164}],164:[function(n,e,O){var d=n("../../component"),o=(n("../../../lib/object"),n("../../../lib/util"),n("../../../lib/ua")),a=(n("../../../lib/cookie"),n("../../../lib/dom")),u=n("../../../lib/event"),s=n("./util"),r=(n("../../../lang/index"),n("../../../player/base/event/eventtype")),n=d.extend({init:function(l,c){this._hasGeneratedList=!1,this._previousSelection=null,this._backupSelector="",d.call(this,l,c),this.className=c.className||"prism-"+this.Type+"-selector prism-setting-selector",this.addClass(this.className)},createEl:function(){var l=d.prototype.createEl.call(this,"div");return l.innerHTML='<div class="header"><div class="left-array"></div><span>'+this.Name+'</span></div><ul class="selector-list"></ul>',l},bindEvent:function(){this.bindCommonEvent()},bindCommonEvent:function(){var l=this,c=document.querySelector("#"+l.id()+" .selector-list"),F=document.querySelector("#"+l.id()+" .header");function h(){l._hasGeneratedList||(l._clear(),l.generateList(l._backupSelector),l._backupSelector="",l._hasGeneratedList=!0)}this._player.on(r.Private.ChangeURL,function(){l._hasGeneratedList=!1}),u.on(F,"click",function(){l._player.trigger(r.Private.SelectorHide),l._player.trigger(r.Private.SettingListShow,{type:l.Type,text:l._previousSelection?l._previousSelection.text:""})}),u.on(c,"click",function(W){var W=W.srcElement||W.target,U=W.key,M=W.text;l._player.traceLog("selector.js","selector::click#"+l.Name+"#"+l.Type+"#"+M+"#"+U),l._player.trigger(r.Player.SettingSelected,{name:l.Name,type:l.Type,text:M,key:U}),M!==void 0&&(l._previousSelection&&a.removeClass(l._previousSelection,"current"),l._previousSelection=s.findliElementForSelector(W),a.addClass(l._previousSelection,"current"),l.execute&&l.execute(U),W=l.Tooltip+"<span>"+M+"</span>",l._player.trigger(r.Private.Info_Show,{text:W,duration:3e3,align:"lb"}))}),l._player.on(r.Private.SelectorHide,function(){j()}),l._player.on(r.Private.SelectorValueChange,function(f){var W=f.paramData;if(W&&W.type==l.Type){var U=document.querySelectorAll("#"+l.id()+" .selector-list li");if(U){for(var M=U.length,R=(M==0&&(l._backupSelector=W.text),-1),K=0;K<M;K++)if(U[K].text==W.text){R=K;break}l._previousSelection&&(a.removeClass(l._previousSelection,"current"),l._previousSelection=null),R!==-1?(a.addClass(U[R],"current"),l._previousSelection=U[R]):l._previousSelection||console.warn("UI Not Sync: No Such Option '"+W.text+"' in '"+W.type+"'")}}}),l._player.on(r.Private.SettingListShow,function(){h()}),l._player.on(r.Private.SelectorGenerateList,function(U){var W=U.paramData&&U.paramData.type,U=U.paramData&&U.paramData.value;W===l.Type&&(l._hasGeneratedList=!1,U&&(l._backupSelector=U),h())}),l._player.on(r.Private.SelectorShow,function(f){(f=f.paramData).type==l.Type&&(f=document.querySelector("#"+l._player.id()+" .prism-"+f.type+"-selector"),l._hasGeneratedList||h(),a.css(f,"display","block"))});var j=function(){a.css(l.el(),"display","none"),l._player.trigger(r.Private.UpdateToSettingList,{type:l.Type,text:l._previousSelection?l._previousSelection.text:""})},F=o.IS_MOBILE?"touchleave":"mouseleave";u.on(this.el(),F,function(){j()}),u.on(this._player.tag,"click",function(f){f&&f.target==f.currentTarget&&j()}),u.on(this._player.tag,"touchstart",function(f){f&&f.target==f.currentTarget&&j()})},setSelected:function(l){},generateList:function(){},_clear:function(){document.querySelector("#"+this.id()+" .selector-list").innerHTML=""}});e.exports=n},{"../../../lang/index":28,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../lib/ua":53,"../../../lib/util":55,"../../../player/base/event/eventtype":77,"../../component":143,"./util":166}],165:[function(n,e,O){var d=n("./selector"),o=n("../../../lib/object"),a=(n("../../../lib/util"),n("../../../lib/cookie"),n("../../../lib/dom")),u=(n("../../../lib/event"),n("./util"),n("../../../lib/constants")),s=n("../../../lang/index"),r=n("../../../player/base/event/eventtype"),n=d.extend({init:function(l,c){var h=this;this.Name=s.get("Speed"),this.Type="speed",this.Tooltip=s.get("Speed_Switch_To"),this.speedPreStore=1,this.listGenerated=!1,d.call(this,l,c),this._player.on(r.Private.PlaybackRateChanged,function(j){h.speedPreStore=j.paramData,h.listGenerated&&h._player.trigger(r.Private.SelectorUpdateList,{type:"speed",text:j.paramData})})},generateList:function(){var l=document.querySelector("#"+this.id()+" .selector-list"),c=this._player._options.speedLevels,c=this.verifySpeedLevels(c)?c:u.SpeedLevels,h=this;o.each(c,function(j,F){var f=a.createEl.call(this,"li",{key:j.key,text:j.text}),W=a.createEl.call(this,"span",{key:j.key,text:j.text});W.innerText=j.text,j.key==h.speedPreStore&&(a.addClass(f,"current"),h._previousSelection=f),f.appendChild(W),l.appendChild(f)}),this.listGenerated=!0},execute:function(l){this._player.setSpeed(l,!1)},verifySpeedLevels:function(l){var c=0;if(l&&l.length)try{l.forEach(function(h){typeof h.key=="number"&&h.key==h.key&&0<=h.key&&c++})}catch{return!1}return l&&c===l.length}});e.exports=n},{"../../../lang/index":28,"../../../lib/constants":33,"../../../lib/cookie":34,"../../../lib/dom":37,"../../../lib/event":38,"../../../lib/object":47,"../../../lib/util":55,"../../../player/base/event/eventtype":77,"./selector":164,"./util":166}],166:[function(t,e,O){e.exports.findliElementForSelector=function(d){var o;return d&&d.tagName.toLowerCase()!="li"?(o=d.parentElement)&&o.tagName.toLowerCase()=="li"?o:null:d},e.exports.findliElementByKey=function(d,o){return document.querySelectors(d),null},e.exports.findItemElementForList=function(d){var o;return!d||-1<d.className.indexOf("prism-setting-item")||(o=d.parentElement)&&(d=e.exports.findItemElementForList(o)),d}},{}],167:[function(r,e,O){var d=r("../component"),o=r("../../lib/dom"),a=r("../../lang/index"),u=r("../../player/base/event/eventtype"),s=r("./util"),r=d.extend({init:function(n,l){d.call(this,n,l),this.addClass("prism-snapshot-btn")},createEl:function(){return d.prototype.createEl.call(this,"div")},bindEvent:function(){var n=this,l=this._player;l.on(u.Private.Snapshot_Hide,function(){o.css(n._el,"display","none")}),s.registerTooltipEvent.call(this,this.el(),a.get("Snapshot")),this.on("click",function(){n.trigger(u.Player.Snapshoting),n.trigger(u.Player.Snapshoted,l.takeSnapshot())})}});e.exports=r},{"../../lang/index":28,"../../lib/dom":37,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],168:[function(o,e,O){var d=o("../component"),o=(o("../../lib/dom"),o("../../player/base/event/eventtype"),d.extend({init:function(a,u){d.call(this,a,u),this.addClass("prism-text-overlay")},createEl:function(){return d.prototype.createEl.call(this,"div")},_hide:function(a){},_show:function(a){},bindEvent:function(){}}));e.exports=o},{"../../lib/dom":37,"../../player/base/event/eventtype":77,"../component":143}],169:[function(r,e,O){var d=r("../component"),o=(r("../../lib/util"),r("../../lib/dom")),a=r("../../lib/event"),u=(r("../../lib/ua"),r("../../lang/index"),r("../../player/base/event/eventtype")),s=r("./util"),r=d.extend({init:function(n,l){d.call(this,n,l),this.addClass("prism-thumbnail")},createEl:function(){var n=d.prototype.createEl.call(this,"div");return n.innerHTML="<img></img><span></span>",n},bindEvent:function(){var n=this,l=(a.on(this._el,"mousemove",function(c){c.preventDefault()}),a.on(this._el,"touchmove",function(c){c.preventDefault()}),n._player.on(u.Private.ThumbnailLoaded,function(f){var h,j,F,f=f.paramData;f&&0<f.length&&(h=n._player._thumbnailService.makeUrl(f[0].text),n._player.log("THUMBNAILSTART",{tu:encodeURIComponent(h)}),j=new Date().getTime(),f[0].isBig?(o.css(n.el(),"background","url("+h+")"),o.css(n.el(),"width",f[0].w+"px"),o.css(n.el(),"height",f[0].h+"px"),n._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-j})):((F=document.querySelector("#"+n.id()+" img")).onload=function(){var W=F.width,U=F.height;o.css(n.el(),"width",W+"px"),o.css(n.el(),"height",U+"px"),n._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-j})},F.src=h))}),s.throttle(function(W){var h,j,F,W=W[0],f=document.querySelector("#"+n.id()+" span"),W=W.paramData;f.innerText=W.formatTime,W&&((h=n._player._thumbnailService.findAvailableCue(W.time))?h.isBig?(j=n._player._thumbnailService.makeUrl(h.text),o.css(n.el(),"background","url("+j+")"),h.w,h.h,F=-1*h.x+"px "+-1*h.y+"px",o.css(n.el(),"background-position",F)):(F=document.querySelector("#"+n.id()+" img"),j=n._player._thumbnailService.makeUrl(h.text),F.src!=j&&(F.src=j)):(o.css(n.el(),"border","none"),o.css(f,"left","0px")),o.css(n.el(),"display","block"),F=0,j=(h?n.el():f).offsetWidth,F=W.left+j>W.progressWidth?W.left-j:(F=W.left-j/2)<0?0:F,o.css(n.el(),"left",F+"px"))},30));n._player.on(u.Private.ThumbnailShow,l),n._player.on(u.Private.ThumbnailHide,function(c){o.css(n.el(),"display","none")})},_createSamllThumbnail:function(){},disposeUI:function(){}});e.exports=r},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../lib/ua":53,"../../lib/util":55,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],170:[function(u,e,O){var d=u("../component"),o=u("../../lib/util"),a=u("../../player/base/event/eventtype"),u=d.extend({init:function(s,r){d.call(this,s,r),this.addClass("prism-time-display")},createEl:function(){var s=d.prototype.createEl.call(this,"div");return s.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="duration">00:00</span>',s},bindEvent:function(){var s=this;this._player.on(a.Video.DurationChange,function(){var r=o.formatTime(s._player.getDisplayDuration());r?(document.querySelector("#"+s.id()+" .time-bound").style.display="inline",document.querySelector("#"+s.id()+" .duration").style.display="inline",document.querySelector("#"+s.id()+" .duration").innerText=r):(document.querySelector("#"+s.id()+" .duration").style.display="none",document.querySelector("#"+s.id()+" .time-bound").style.display="none")}),this._player.on(a.Video.TimeUpdate,function(){var r=s._player.getCurrentTime(),r=o.formatTime(r);document.querySelector("#"+s.id()+" .current-time")&&(r?(document.querySelector("#"+s.id()+" .current-time").style.display="inline",document.querySelector("#"+s.id()+" .current-time").innerText=r):document.querySelector("#"+s.id()+" .current-time").style.display="none")})}});e.exports=u},{"../../lib/util":55,"../../player/base/event/eventtype":77,"../component":143}],171:[function(u,e,O){var d=u("../component"),o=u("../../lib/dom"),a=u("../../player/base/event/eventtype"),u=d.extend({init:function(s,r){d.call(this,s,r),this.addClass("prism-tooltip")},createEl:function(){var s=d.prototype.createEl.call(this,"p");return s.innerText="",s},bindEvent:function(){var s=this;s._player.on(a.Private.TooltipShow,function(l){var n=document.querySelector("#"+s.id()),l=l.paramData,c=(n.innerText=l.text,o.css(n,"display","block"),n.offsetWidth),h=document.querySelector("#"+s._player.id()+" .prism-controlbar");h&&(h=h.offsetWidth,l.left+c>h?o.css(n,"left",h-c+"px"):o.css(n,"left",l.left-(c-l.width)/2+"px"))}),s._player.on(a.Private.TooltipHide,function(r){var n=document.querySelector("#"+s.id());o.css(n,"display","none")})}});e.exports=u},{"../../lib/dom":37,"../../player/base/event/eventtype":77,"../component":143}],172:[function(r,e,O){var d=r("../component"),o=r("../../lib/dom"),a=r("../../lib/event"),u=r("../../lang/index"),s=r("../../player/base/event/eventtype"),r=d.extend({init:function(n,l){d.call(this,n,l),this.addClass("prism-unmute-btn")},createEl:function(){var n=d.prototype.createEl.call(this,"div");return n.innerText=u.get("Click_To_Unmute"),n},bindEvent:function(){var n=this;this._player.on(s.Private.MutedAutoplay,function(){var l;(l=n._player.getOptions().autoplayPolicy)!=null&&l.showUnmuteBtn&&n._show()}),this._player.on(s.Private.HideUnmuteButton,function(){n._hide()}),a.on(this.el(),"click",function(){n._player.unMute(!0),n._hide()})},_show:function(){o.css(this.el(),"display","block")},_hide:function(){o.css(this.el(),"display","none")}});e.exports=r},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../player/base/event/eventtype":77,"../component":143}],173:[function(t,e,O){var d=t("../../lib/event"),o=t("../../player/base/event/eventtype");e.exports.registerTooltipEvent=function(a,u){function s(){r._controlbarTooltipHandler&&(clearTimeout(r._controlbarTooltipHandler),r._controlbarTooltipHandler=null)}var r=this;d.on(this.el(),"mouseover",function(n){s(),r._controlbarTooltipHandler=setTimeout(function(){r._player.trigger(o.Private.TooltipHide)},4e3);var l=r.el().offsetLeft,c=r.el().offsetWidth,h=u;typeof u=="function"&&(h=u.call(this)),r._player.trigger(o.Private.TooltipShow,{left:l,width:c,text:h})}),d.on(this.el(),"mouseout",function(){s(),r._player.trigger(o.Private.TooltipHide)})},e.exports.throttle=function(a,u){var s=Date.now();return function(){var r=arguments,n=Date.now();u<=n-s&&(a(r),s=n)}},e.exports.debounce=function(a,u){var s;return function(){var r=this,n=arguments;clearTimeout(s),s=setTimeout(function(){a.apply(r,n)},u)}}},{"../../lib/event":38,"../../player/base/event/eventtype":77}],174:[function(l,e,O){var d=l("../component"),o=l("../../lib/dom"),a=l("../../lib/event"),u=l("../../player/base/event/eventtype"),s=l("./util"),r=l("../../lang/index"),n=l("./volumecontrol"),l=d.extend({init:function(c,h){d.call(this,c,h),this.addClass("prism-volume");var j=new n(c,h);c.addChild(j,h),this.volumeControl=j},createEl:function(){var c=d.prototype.createEl.call(this,"div");return c.innerHTML='<div class="volume-icon"><div class="short-horizontal"></div><div class="long-horizontal"></div></div>',c},bindEvent:function(){var c=this,h=c._player,j=(this.icon=document.querySelector("#"+c.id()+"  .volume-icon"),s.registerTooltipEvent.call(this,this.el(),function(){return c._player.muted()||c._player.getVolume()==0?r.get("Muted"):r.get("Volume")}),a.on(this.icon,"click",function(f){var W;c.volumeControl._shown?h.muted()?h.unMute():h.mute():(W=c.el().offsetLeft,c._player.trigger(u.Private.SettingListHide),c._player.trigger(u.Private.SelectorHide),c._player.trigger(u.Private.VolumeVisibilityChange,W),c._player.trigger(u.Private.MarkerTextHide))}),document.querySelector("#"+c.id()+"  .long-horizontal")),F=document.querySelector("#"+c.id()+"  .short-horizontal");a.on(this.el(),"mouseover",function(){o.removeClass(j,"volume-hover-animation"),setTimeout(function(){o.addClass(j,"volume-hover-animation")}),setTimeout(function(){o.removeClass(j,"volume-hover-animation"),o.addClass(F,"volume-hover-animation"),setTimeout(function(){o.removeClass(F,"volume-hover-animation"),o.addClass(j,"volume-hover-animation")},300)},300)}),a.on(window,"resize",function(){var f;c.volumeControl._shown&&(f=c.el().offsetLeft,c._player.trigger(u.Private.VolumeUpdatePosition,f))})}});e.exports=l},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../player/base/event/eventtype":77,"../component":143,"./util":173,"./volumecontrol":175}],175:[function(s,e,O){var d=s("../component"),o=s("../../lib/dom"),a=s("../../lib/event"),u=s("../../player/base/event/eventtype"),s=(s("./util"),s("../../lang/index"),d.extend({init:function(r,n){d.call(this,r,n),this.addClass("prism-volume-control"),this._shown=!1},createEl:function(){var r=d.prototype.createEl.call(this,"div");return r.innerHTML='<div class="volume-range"><div class="volume-value"></div><div class="volume-cursor"></div></div>',r},bindEvent:function(){var r=this;this.icon=document.querySelector("#"+r._player.id()+"  .volume-icon"),this.control=document.querySelector("#"+r.id()),this.volumnValue=document.querySelector("#"+r.id()+"  .volume-value"),this.volumnRange=document.querySelector("#"+r.id()+"  .volume-range"),this.volumnCursor=document.querySelector("#"+r.id()+"  .volume-cursor"),this._player.on(u.Private.VolumeVisibilityChange,function(c){var l,c=c.paramData;!r._shown&&c?(l=r._player.getVolume(),r._setVolumnUI(l),o.css(r.control,"display","block"),c&&r._updatePosition(c),r._shown=!0):r._hide()}),this._player.on(u.Private.VolumeUpdatePosition,function(n){n=n.paramData,r._shown&&r._updatePosition(n)}),this._player.on(u.Private.ControlBarClick,function(n){o.hasClass(n.paramData.target,"prism-controlbar-bg")&&r._hide()}),a.on(this.volumnRange,"click",function(n){n=o.getPointerPosition(r.volumnRange,n).y,n<0||1<n||(r._setVolumnUI(n=1<(n=n<0?0:n)?1:n),r._setMuteUI(n),r._player.setVolume(n))}),a.on(this._player.tag,"click",function(n){n&&n.target==n.currentTarget&&r._hide()}),a.on(this._player.tag,"touchstart",function(n){n&&n.target==n.currentTarget&&r._hide()}),a.on(this.volumnCursor,"mousedown",function(n){r._onMouseDown(n)}),a.on(this.volumnCursor,"touchstart",function(n){r._onMouseDown(n)}),this._player.on(u.Private.VolumnChanged,function(n){n=n.paramData,-1<n&&r._setVolumnUI(n),r._setMuteUI(n)}),a.on(this.control,"mouseleave",function(){r._offEvent(),r._hide()}),a.on(this.control,"mouseover",function(){o.addClass(r.control,"hover")}),r._rangeBottom=r._getBottom()},_getBottom:function(){var r;return window.getComputedStyle?(r=window.getComputedStyle(this.volumnRange,null).getPropertyValue("bottom"),parseFloat(r)):26},_onMouseDown:function(r){var n=this;r.preventDefault(),a.on(this.control,"mousemove",function(l){n._onMouseMove(l)}),a.on(this.control,"touchmove",function(l){n._onMouseMove(l)}),a.on(this._player.tag,"mouseup",function(l){n._onMouseUp(l)}),a.on(this._player.tag,"touchend",function(l){n._onMouseUp(l)}),a.on(this.control,"mouseup",function(l){n._onMouseUp(l)}),a.on(this.control,"touchend",function(l){n._onMouseUp(l)})},_onMouseUp:function(r){r.preventDefault(),this._offEvent(),this.volumnRange.offsetHeight&&(r=(this.volumnValue.offsetHeight/this.volumnRange.offsetHeight).toFixed(2),this._player.setVolume(r),this._setMuteUI(r))},_onMouseMove:function(r){r.preventDefault(),r=o.getPointerPosition(this.volumnRange,r).y,r<0||1<r||this._setVolumnUI(r=1<(r=r<0?0:r)?1:r)},_getPosition:function(r){for(var n=this.volumnRange,l=0;n=n.offsetParent;)l+=n.offsetTop;var c=this.volumnRange.offsetHeight,h=this.volumnCursor.offsetHeight,j=(r.touches?r.touches[0]:r).pageY;return(c-((j=c<j-l?r.clientY:j)-l)+h)/this.volumnRange.offsetHeight},_offEvent:function(){a.off(this._player.tag,"mouseup"),a.off(this._player.tag,"touchend"),a.off(this.control,"mousemove"),a.off(this.control,"touchmove"),a.off(this.control,"mouseup"),a.off(this.control,"touchend")},_setMuteUI:function(r){isNaN(r)||(r==0||r==-1?o.addClass(this.icon,"mute"):o.removeClass(this.icon,"mute"))},_setVolumnUI:function(r){isNaN(r)||(o.css(this.volumnValue,"height",100*r+"%"),o.css(this.volumnCursor,"bottom",100*(r=r==1?.99:r)+"%"))},_hide:function(){o.css(this.control,"display","none"),this._shown=!1},_updatePosition:function(r){o.css(this.control,"left",r-5+"px")}}));e.exports=s},{"../../lang/index":28,"../../lib/dom":37,"../../lib/event":38,"../../player/base/event/eventtype":77,"../component":143,"./util":173}],176:[function(t,e,O){e.exports={H5Loading:t("./component/h5-loading"),bigPlayButton:t("./component/big-play-button"),unmuteButton:t("./component/unmute-button"),controlBar:t("./component/controlbar"),progress:t("./component/progress"),playButton:t("./component/play-button"),liveDisplay:t("./component/live-display"),timeDisplay:t("./component/time-display"),fullScreenButton:t("./component/fullscreen-button"),volume:t("./component/volume"),snapshot:t("./component/snapshot"),errorDisplay:t("./component/error-display"),infoDisplay:t("./component/info-display"),liveShiftProgress:t("../commonui/liveshiftprogress"),liveShiftTimeDisplay:t("../commonui/livetimedisplay"),setting:t("./component/setting/button"),subtitle:t("./component/cc-button"),thumbnail:t("./component/thumbnail"),tooltip:t("./component/tooltip")}},{"../commonui/liveshiftprogress":17,"../commonui/livetimedisplay":18,"./component/big-play-button":144,"./component/cc-button":145,"./component/controlbar":146,"./component/error-display":149,"./component/fullscreen-button":150,"./component/h5-loading":151,"./component/info-display":152,"./component/live-display":153,"./component/play-button":154,"./component/progress":156,"./component/setting/button":159,"./component/snapshot":167,"./component/thumbnail":169,"./component/time-display":170,"./component/tooltip":171,"./component/unmute-button":172,"./component/volume":174}]},{},[20])(20)})}(aliplayerMin)),aliplayerMin.exports}var aliplayerMinExports=requireAliplayerMin();const g=getDefaultExportFromCjs(aliplayerMinExports),v='<div class="bullet-screen paused"></div>';function p(t){let e=document.createElement("div");return e.innerHTML=t,e.childNodes[0]}function b(t,e,O){var d=new Date;d.setTime(d.getTime()+O*24*60*60*1e3);var o="expires="+d.toUTCString();document.cookie=t+"="+escape(e)+"; "+o}function x(t){const e=document.cookie.split("; ");for(let O=0;O<e.length;O++){const d=e[O].split("=");if(d[0]===t)return d[1]}return""}let C=class{html;text;style;bulletPosition;constructor(t,e,O="random"){this.text=t,this.style=e||{fontSize:"14px",color:"#fff"},this.html=p(v),this.bulletPosition=O}createEl(t){this.html.innerText=this.text,t.appendChild(this.html),t.style.overflow="hidden"}ready(t){t.getOptions().autoplay===!1&&(this.html.style.animationPlayState="paused"),Object.keys(this.style).forEach(o=>this.html.style[o]=this.style[o].toString());var e=this.html.offsetHeight,O=parseInt(getComputedStyle(t.tag).height.replace("px","")),d=O-e;if(this.bulletPosition==="bottom")this.html.style.bottom="0";else{let o=this.bulletPosition==="top"?0:this.randomTop(d);this.html.style.top=o.toString()}this.bulletPosition==="random"&&this.html.addEventListener("animationiteration",()=>{this.html.style.top=this.randomTop(d)})}playing(){this.html.style.animationPlayState="running"}timeupdate(t){let e=t.el(),O=e.querySelector(".bullet-screen");if(!O)e.appendChild(this.html);else{O.className!=="bullet-screen"&&(O.className="bullet-screen");let d=getComputedStyle(O),o=d.getPropertyValue("display"),a=d.getPropertyValue("opacity"),u=d.getPropertyValue("visibility"),s=this.text,r=O.innerText;o==="none"&&O.style.setProperty("display","block"),a!=="1"&&O.style.setProperty("opacity","1"),u==="hidden"&&O.style.setProperty("visibility","visible"),s!=r&&(O.innerText=s)}}pause(){this.html.style.animationPlayState="paused"}randomTop(t){return Math.floor(Math.random()*t)+"px"}};const S=`<div class="custom-setting-components">
  <div class="custom-setting-btn-container">
    <div class="custom-setting-btn-tip"></div>
    <div class="custom-setting-btn"></div>
  </div>
  <div class="custom-setting-content">
    <div class="custom-setting-content-body">
      <div class="custom-setting-content-item playNextEnabled">
        <div class="custom-setting-content-item-title"></div>
        <div class="custom-setting-content-item-content">
          <div class="item_checkbox"></div>
        </div>
      </div>
      <div class="custom-setting-content-item loopEnabled">
        <div class="custom-setting-content-item-title"></div>
        <div class="custom-setting-content-item-content">
          <div class="item_checkbox"></div>
        </div>
      </div>
    </div>
  </div>
</div>
`,m={settingPlayNextChange:"setting-play-next-change"};class _{html;playlist;constructor(e){this.html=p(S),this.playlist=e}createEl(e){e.querySelector(".prism-controlbar").appendChild(this.html)}created(e){const O=e._options&&e._options.language,d=O&&O==="en-us",o=this.html.querySelector(".custom-setting-btn-tip");d?o.textContent="Setting":o.textContent="";const a=this.html.querySelector(".custom-setting-btn"),u=this.html.querySelector(".custom-setting-content");u.style.display="none",e.on("settingListHide",()=>{u.style.display="none"}),a.onclick=()=>{u.style.display!=="none"?u.style.display="none":u.style.display="block"};let s=null;a.onmouseleave=()=>{s&&clearTimeout(s),s=setTimeout(()=>{u.style.display="none"},150)},u.onmouseenter=()=>{clearTimeout(s)},u.onmouseleave=()=>{s&&clearTimeout(s),s=setTimeout(()=>{u.style.display="none"},150)};const r=this.html.querySelector(".custom-setting-content-item.playNextEnabled"),n=this.html.querySelector(".custom-setting-content-item.loopEnabled");this.playlist&&this.playlist.length>1?r.classList.remove("disabled"):r.classList.add("disabled"),n.onclick=()=>{let l=n.querySelector(".item_checkbox");l.classList.contains("checked")?(l.classList.remove("checked"),e._options.rePlay=!1):(l.classList.add("checked"),r.querySelector(".item_checkbox").classList.remove("checked"),e._options.rePlay=!0,e.trigger(m.settingPlayNextChange,{playNextEnabled:!1}))},r.onclick=()=>{let l=r.querySelector(".item_checkbox");l.classList.contains("checked")?(l.classList.remove("checked"),e.trigger(m.settingPlayNextChange,{playNextEnabled:!1})):(l.classList.add("checked"),n.querySelector(".item_checkbox").classList.remove("checked"),e._options.rePlay=!1,e.trigger(m.settingPlayNextChange,{playNextEnabled:!0}))}}ready(e){const O=this.html.querySelector(".custom-setting-content-item.playNextEnabled"),d=this.html.querySelector(".custom-setting-content-item.loopEnabled");e._options&&e._options.rePlay?d.querySelector(".item_checkbox").classList.add("checked"):this.playlist&&this.playlist.length>1&&O.querySelector(".item_checkbox").classList.add("checked")}setVisible(e){this.html.style.display=e?"flex":"none"}}const k=`<div class="playback-rate-components">
  <div class="current-rate"></div>
  <ul class="rate-list"></ul>
</div>
`;class w{html;speedLevels;constructor(e){this.html=p(k),this.speedLevels=e.reverse()}createEl(e){let O=e.querySelector(".prism-controlbar"),d=this.html.querySelector(".current-rate"),o=this.html.querySelector(".rate-list");this.speedLevels.length>0?this.speedLevels.forEach(a=>{let u=document.createElement("li");u.dataset.rate=a.key.toString(),u.innerText=a.text,Number(a.key)===1&&(u.className="current",d.innerText=a.text),o.appendChild(u)}):this.html.style.display="none",O&&O.appendChild(this.html)}ready(e){let O=this.html.querySelector(".current-rate"),d=this.html.querySelector(".rate-list"),o=null,a=document.querySelector(".prism-setting-item.prism-setting-speed");a&&a.classList.add("player-hidden"),O&&(O.onclick=()=>{d.style.display="block"},O.onmouseleave=()=>{o=setTimeout(()=>{d.style.display="none"},100)}),d.onmouseenter=()=>{clearTimeout(o)},d.onmouseleave=()=>{d.style.display="none"},d.onclick=({target:u})=>{let s=u.dataset.rate,r=u.innerText;if(s){if(e.setSpeed(s),u.className!=="current"){let n=d.querySelector(".current");n&&(n.className=""),u.className="current"}d.style.display="none",O.innerText=r}}}setVisible(e){this.html.style.display=e?"flex":"none"}}const P=`<div class="player-olympic-player-next">
  <div class="player-olympic-player-next-tip"></div>
</div>
`;class y{_html;clickHandle;constructor(e){this.clickHandle=e,this._html=p(P)}createEl(e){this._html.addEventListener("click",this.clickHandle);let O=e.querySelector(".prism-play-btn");O&&O.insertAdjacentElement("afterend",this._html)}created(e){const O=e._options&&e._options.language,d=O&&O==="en-us";let o=this._html.querySelector(".player-olympic-player-next-tip");d?o.textContent="Next":o.textContent=""}setVisible(e){this._html.style.display=e?"flex":"none"}}const T=`<div class="lt-playlist-component">
  <div class="list-choose"></div>
</div>`,q=`<div class="lt-playlist-content">
  <div class="list"></div>
</div>`,E=`<div class="playlist-modal">
  <div class="playlist-modal-content">
    <span class="switchimg"></span> <span class="current-playlist-tag"></span> ,
    <span class="wait"></span>
  </div>
</div>
`,H={VideoChange:"plugin-playlist-change"};class L{html;listHtml;modalHtml;playlist;playingVideoIndex;listHideTimeout;constructor(e){this.html=p(T),this.listHtml=p(q),this.modalHtml=p(E),this.playlist=e,this.playingVideoIndex=0,this.listHideTimeout=null}createEl(e,O){const d=O._options&&O._options.language,o=d&&d==="en-us",a=this.html.querySelector(".list-choose");a&&(a.innerText=o?"Playlist":""),e.querySelector(".prism-controlbar").appendChild(this.html),a.onclick=this.tooglePlaylist.bind(this),this.listHtml.onmouseleave=()=>{this.listHtml.style.display="none"},this.listHtml.onmouseenter=this.clearHideListTimeout.bind(this);const u=this.listHtml.querySelector(".list");u&&(u.innerHTML=this.computedListDom(this.playlist));let s=O.getOptions()&&O.getOptions().memoryVideo,r=0;s&&(r=this.playlist.findIndex(h=>h.id===s),r=r>-1?r:0,this.playingVideoIndex=r>-1?r:0);const n=this.listHtml.querySelector(".list");n&&n.childNodes.length>0&&(n.childNodes[r].className="video-item active"),e.appendChild(this.listHtml);const l=this.modalHtml.querySelector(".switchimg");l.innerText=o?"Switching to you for":"";const c=this.modalHtml.querySelector(".wait");c.innerText=o?"Please wait...":"...",e.appendChild(this.modalHtml)}ready(e){this.modalHtml.style.display="none";const O=this.listHtml.querySelector(".list").querySelectorAll(" .video-item");O&&O.length>0&&O.forEach(d=>{d.onclick=()=>{const o=parseInt(d.getAttribute("data-index")||"0"),a=this.playlist[o];e&&e.trigger(H.VideoChange,{changeIndex:o,changeItem:a}),this.listHtml.style.display="none";const u=this.modalHtml.querySelector("span.current-playlist-tag");u.innerHTML=a.name,this.modalHtml.style.display="block",setTimeout(()=>{this.modalHtml.style.display="none"},2e3)}})}clearHideListTimeout(){this.listHideTimeout!==null&&(clearTimeout(this.listHideTimeout),this.listHideTimeout=null)}tooglePlaylist(){this.clearHideListTimeout(),this.listHtml.style.display==="block"?this.listHtml.style.display="none":(this.listHtml.style.display="block",this.listHideTimeout=setTimeout(()=>{this.listHtml.style.display="none"},5e3))}formatDuration(e){let O=Math.floor(e/60),d=Math.floor(e%60);return`${O}:${d<10?"0"+d:d}`}computedListDom(e){return e.map((O,d)=>`<div class="video-item" data-index="${d}" title="${O.name}">
            <div class="video-item-poster"><img src="${O.poster}">
            <div class="video-item-duration">${O.duration?this.formatDuration(O.duration):""}</div>
            </div>
            <div class="video-item-name"><div class="video-item-name-text">${O.name}</div></div>
            </div>`).join("")}}const N=`<div class="quality-components">
  <div class="current-quality" data-ref=""></div>
  <ul class="quality-list">
  </ul>
</div>`,A=`<div class="quality-modal">
  <span class="switchimg"></span> <span class="current-quality-tag"></span> ,
  <span class="wait"></span>
</div>
`,I="selectedStreamLevel";class V{html;modalHtml;hasCreated;definition;_levels;_urls;handleChange;constructor(e){this.html=p(N),this.modalHtml=p(A),this.hasCreated=!1,this.definition="",this._levels=[],this._urls=[],this.handleChange=e}createEl(e,O){const d=O._options&&O._options.language,o=d&&d==="en-us",a=this.html.querySelector(".current-quality");a.innerText=o?"Resolution":"";const u=this.modalHtml.querySelector(".switchimg");u.innerText=o?"Switching to you for":"";const s=this.modalHtml.querySelector(".wait");s.innerText=o?"Please wait...":"...",e.querySelector(".prism-controlbar").appendChild(this.html),e.appendChild(this.modalHtml)}setCurrentQuality(e,O){let d=this.html.querySelector(".current-quality");d.innerText=e||"",d.dataset.def=O||"",this.definition=O;let o=this.html.querySelector(".quality-list"),a=o.querySelector(".current");a&&(a.className="");let u=o.querySelector(`li[data-def="${O}"]`);u&&(u.className="current")}created(e){const O=x(I),d=e.getSourceUrl();this._urls=e._urls;let o=this.html.querySelector(".current-quality"),a=this.html.querySelector(".quality-list");a.style.display="none",e.on("settingListHide",()=>{a.style.display="none"}),e.on("selectorUpdateList",r=>{if(r.paramData.type!=="quality"||!e.getOptions().isVBR)return;let n=e._qualityService.levels;this._levels=(n||[]).map(h=>({...h,definition:h.bitrate||"AUTO"}));let l=this._levels.map(h=>`<li data-def="${h.definition}">${h.desc}</li>`);a.innerHTML=l.join(""),o.style.width="100px",a.style.width="100px";const c=this._levels.find(h=>h.definition===this.definition)?.desc;this.setCurrentQuality(c,this.definition)});let u=this._urls.map(r=>`<li data-def="${r.definition}">${r.desc}</li>`);if(a.innerHTML=u.join(""),this.hasCreated==!1&&this.definition){let r=a.querySelector(`li[data-def="${this.definition}"]`);r.className="current"}this.hasCreated=!0;let s=null;if(o.onclick=()=>{a.style.display!=="none"?a.style.display="none":a.style.display="block"},o.onmouseleave=()=>{s&&clearTimeout(s),s=setTimeout(()=>{a.style.display="none"},150)},a.onmouseenter=()=>{clearTimeout(s)},a.onmouseleave=()=>{s&&clearTimeout(s),s=setTimeout(()=>{a.style.display="none"},150)},a.onclick=({target:r})=>{let n=r.dataset.def,l=r.innerText;if(n&&r.className!=="current"){let c=(this._levels?.length>0?this._levels:this._urls).find(h=>String(h.definition)===n);this._switchQuality(e,c,n)}typeof this.handleChange=="function"&&this.handleChange(n,l)},this._urls.length>0&&O){let r=null;for(let n=0;n<this._urls.length;n++)if(this._urls[n].Url===d){r=this._urls[n];break}if(r&&r.definition===O)this.setCurrentQuality(r.desc,r.definition);else{let n=null;for(let l=0;l<this._urls.length;l++)if(this._urls[l].definition===O){n=this._urls[l];break}n&&this._switchQuality(e,n,n.definition)}}}_switchQuality(e,O,d){if(O){if(b("selectedStreamLevel",O.definition,365),e._switchLevel&&!e._options.isLive&&e._options.isVBR){let a=this._levels.find(u=>Number(u.bitrate)===Number(d));e._switchLevel(O.Url,a)}else e._loadByUrlInner(O.Url,e.getCurrentTime(),e._options.autoplay);this.setCurrentQuality(O.desc,O.definition),this.modalHtml.style.display="block";const o=this.modalHtml.querySelector("span.current-quality-tag");o.innerText=O.desc,setTimeout(()=>{this.modalHtml.style.display="none"},2e3)}}ready(){this.modalHtml.style.display="none";let e=document.querySelector(".prism-setting-item.prism-setting-quality");e&&e.classList.add("player-hidden")}setVisible(e){this.html.style.display=e?"flex":"none"}}const B=`<div class="player-skip-btn">
  <div class="player-skip-btn-backward">
    <div class="player-skip-btn-backward-tip"></div>
  </div>
  <div class="player-skip-btn-forward">
    <div class="player-skip-btn-forward-tip"></div>
  </div>
</div>
`;class D{html;constructor(){this.html=p(B)}createEl(e){let O=e.querySelector(".prism-play-btn");O&&O.insertAdjacentElement("afterend",this.html)}created(e){const O=e._options.keyFastForwardStep,d=e._options&&e._options.language,o=d&&d==="en-us",a=this.html.querySelector(".player-skip-btn-backward-tip"),u=this.html.querySelector(".player-skip-btn-forward-tip");o?(a.textContent=`Backward ${O}s`,u.textContent=`Forward ${O}s`):(a.textContent=`${O}`,u.textContent=`${O}`);const s=this.html.querySelector(".player-skip-btn-backward"),r=this.html.querySelector(".player-skip-btn-forward");s.onclick=()=>{e.seek(e.getCurrentTime()-O)},r.onclick=()=>{e.seek(e.getCurrentTime()+O)}}setVisible(e){this.html.style.display=e?"flex":"none"}}class Q{container;opt;callback;_player;ready=!1;customSettingPlayNextEnabled=!1;audioContext=new(window.AudioContext||window.webkitAudioContext);audioSource;audioAnalyser;audioAnalyserDataArray=new Uint8Array(0);audioWaveformCanvas=document.createElement("canvas");audioWaveformCtx=this.audioWaveformCanvas.getContext("2d");constructor(e,{...O},d){if(e){this.container=e,this.callback=d||(()=>{});let o;const a=document.getElementById(e);if(!a)throw new Error(` ID  ${e} `);o=a;const u=window.getComputedStyle(o);this.opt={type:"video",width:parseInt(u.width.replace("px",""),10),height:parseInt(u.height.replace("px",""),10),autoSize:!0,isLive:!1,poster:"",cover:"",loop:!1,preload:!1,muted:!1,autoplay:!1,autoplayPolicy:{fallbackToMute:!1,showUnmuteBtn:!0},useH5Prism:!0,playsinline:!0,enableHotkeys:!0,showRate:!0,speedLevels:[{key:.5,text:"0.5x"},{key:.75,text:"0.75x"},{key:1,text:""},{key:1.25,text:"1.25x"},{key:1.5,text:"1.5x"},{key:2,text:"2x"}],showPlayNext:!1,bulletText:"",bulletStyle:{fontSize:"16px",color:"#00c1de"},showSkipButton:!0,skipStep:10,isLiveUpdateWatchEndTime:!1,isLiveUpdateWatchEndTimeIncrement:10,saveTimeInterval:30,disablePip:!1,controlBarVisibility:"hover",skinLayout:[{name:"bigPlayButton",align:"blabs",x:"50%",y:"50%"},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:40},{name:"playButton",align:"tl",x:10,y:14},{name:"timeDisplay",align:"tl",x:24,y:6},{name:"fullScreenButton",align:"tr",x:10,y:14},{name:"volume",align:"tr",x:24,y:12}]}],skinLayoutIgnore:["controlBar.subtitle","setting"],...O},this.initPlayer()}else throw new Error("container ")}initOptions(){let e="",O=!1;if(typeof this.opt.sources=="string")e=this.opt.sources;else if(Array.isArray(this.opt.sources)){if(this.opt.sources.length===0)throw new Error("sources ");if(this.opt.sources.length===1)e=this.opt.sources[0].url;else{let o=new Map;for(let a=0;a<this.opt.sources.length;a++)o.set(this.opt.sources[a].name,this.opt.sources[a].url);e=JSON.stringify(Object.fromEntries(o)),O=!0}}else throw new Error("sources ");let d=Object.assign({},{id:this.container,memoryVideo:this.opt.memoryVideo,license:{domain:this.opt.licenseDomain,key:this.opt.licenseKey},width:this.opt.width,height:this.opt.height,autoSize:this.opt.autoSize,cover:this.opt.cover||this.opt.poster,isLive:this.opt.isLive,language:"zh-cn",rePlay:this.opt.loop,mute:this.opt.muted,autoplay:this.opt.autoplay,autoplayPolicy:this.opt.autoplayPolicy,useH5Prism:this.opt.useH5Prism,playsinline:this.opt.playsinline,speedLevels:this.opt.speedLevels,source:e,start:this.opt.start,end:this.opt.end,watchStartTime:this.opt.watchStartTime,watchEndTime:this.opt.watchEndTime,disablePip:this.opt.disablePip,disableSeek:this.opt.disableSeek,controlBarVisibility:this.opt.controlBarVisibility,keyShortCuts:this.opt.enableHotkeys,textTracks:this.opt.textTracks,saveTimeInterval:this.opt.saveTimeInterval,skinLayout:this.opt.skinLayout,skinLayoutIgnore:this.opt.skinLayoutIgnore,keyFastForwardStep:this.opt.skipStep,components:[]});if(d.components.push({name:"CustomSettingComponent",type:_,args:[this.opt.playlist]}),this.opt.bulletText&&d.components.push({name:"BulletScreenComponent",type:C,args:[this.opt.bulletText,this.opt.bulletStyle,"random"]}),this.opt.showSkipButton&&d.components.push({name:"SkipButtonComponent",type:D}),this.opt.showRate&&d.components.push({name:"PlaybackRateComponent",type:w,args:[this.opt.speedLevels]}),O&&d.components.push({name:"QualityComponent",type:V}),this.opt.playlist&&this.opt.playlist.length>0){d.components.push({name:"PlaylistComponent",type:L,args:[this.opt.playlist]});let o=this.opt.playlist.findIndex(a=>a.id===this.opt.memoryVideo);o+1<this.opt.playlist.length&&d.components.push({name:"PlayerNextComponent",type:y,args:[()=>{this.playPlaylist(o+1)}]})}else this.opt.showPlayNext&&d.components.push({name:"PlayerNextComponent",type:y,args:[this.opt.handlePlayNext]});return d=Object.assign(d,this.opt.deepOptions),d}initPlayer(){const e=this;try{const O=this.initOptions();this.opt.playlist&&this.opt.playlist.length>0?this.customSettingPlayNextEnabled=!0:this.customSettingPlayNextEnabled=!1,e._player=new g(O,d=>{e.ready=!0,(d._isAudio||this.opt.type==="audio")&&e.initAudioAnalyser(d),d.on("playing",()=>{this.startCurrentTimeInterval(),(d._isAudio||this.opt.type==="audio")&&this.drawAudioWave()}),d.on("pause",()=>{this.stopCurrentTimeInterval()}),d.on("ended",()=>{if(e.stopCurrentTimeInterval(),e._saveMemoryTime(e.opt.memoryVideo,e._player.getDuration()),typeof e.opt.saveTime=="function"&&e.opt.saveTime(e.opt.memoryVideo,e._player.getDuration()),!d._options.rePlay&&e.customSettingPlayNextEnabled&&e.opt.playlist){let o=e.opt.playlist.findIndex(a=>a.id===e.opt.memoryVideo);o+1<e.opt.playlist.length&&e.playPlaylist(o+1)}else!d._options.rePlay&&e.opt.showPlayNext&&typeof e.opt.handlePlayNext=="function"&&e.opt.handlePlayNext()}),d.on("plugin-playlist-change",o=>{const a=o.paramData;a&&(a.changeIndex||a.changeIndex===0)&&this.opt.playlist&&this.playPlaylist(a.changeIndex)}),d.on("setting-play-next-change",o=>{const a=o.paramData;a&&a.playNextEnabled?this.customSettingPlayNextEnabled=!0:this.customSettingPlayNextEnabled=!1}),document.onvisibilitychange=()=>{document.visibilityState==="hidden"&&(e.stopCurrentTimeInterval(),e._saveMemoryTime(e.opt.memoryVideo,e._player.getCurrentTime()),typeof e.opt.saveTime=="function"&&e.opt.saveTime(e.opt.memoryVideo,e._player.getCurrentTime()))},window.onbeforeunload=()=>{this.stopCurrentTimeInterval(),e.stopCurrentTimeInterval(),e._saveMemoryTime(e.opt.memoryVideo,e._player.getCurrentTime()),typeof e.opt.saveTime=="function"&&e.opt.saveTime(e.opt.memoryVideo,e._player.getCurrentTime())},this.callback&&typeof this.callback=="function"&&this.callback(d)})}catch(O){console.error("player",O)}}initAudioAnalyser(e){try{const O=document.createElement("canvas");document.getElementById(this.container).appendChild(O);const d=O.getContext("2d");O.className="audio-visualizer",console.log("====offsetWidth=====",O.offsetWidth),O.width=O.offsetWidth*window.devicePixelRatio,O.height=O.offsetHeight*window.devicePixelRatio,d.scale(window.devicePixelRatio,window.devicePixelRatio),this.audioWaveformCanvas=O,this.audioWaveformCtx=d,this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.audioAnalyser=this.audioContext.createAnalyser(),this.audioAnalyser.fftSize=256;const o=this.audioAnalyser.frequencyBinCount;this.audioAnalyserDataArray=new Uint8Array(o),this.audioSource=this.audioContext.createMediaElementSource(e.tag),this.audioSource.connect(this.audioAnalyser),this.audioAnalyser.connect(this.audioContext.destination),this.drawAudioWave()}catch(O){console.error("audioContext",O)}}drawAudioWave(){if(!this.audioAnalyser)return;this.audioWaveformCtx.clearRect(0,0,this.audioWaveformCanvas.offsetWidth,this.audioWaveformCanvas.offsetHeight),this.audioAnalyser.getByteFrequencyData(this.audioAnalyserDataArray);const e=this.audioWaveformCanvas.offsetWidth/this.audioAnalyserDataArray.length*2.5;let O=0;for(let d=0;d<this.audioAnalyserDataArray.length;d++){const o=this.audioAnalyserDataArray[d]/255*this.audioWaveformCanvas.offsetHeight,a=this.audioWaveformCtx.createLinearGradient(0,this.audioWaveformCanvas.offsetHeight,0,this.audioWaveformCanvas.offsetHeight-o);a.addColorStop(0,"#4F46E5"),a.addColorStop(1,"#10B981"),this.audioWaveformCtx.fillStyle=a,this.audioWaveformCtx.fillRect(O,this.audioWaveformCanvas.offsetHeight-o,e,o),O+=e+1}requestAnimationFrame(()=>{this.drawAudioWave()})}_timer=null;startCurrentTimeInterval(){this._timer&&clearInterval(this._timer),this._timer=setInterval(()=>{typeof this.opt.saveTime=="function"&&this.opt.saveTime(this.opt.memoryVideo,this._player.getCurrentTime())},(this.opt.saveTimeInterval??30)*1e3)}stopCurrentTimeInterval(){this._timer&&(clearInterval(this._timer),this._timer=null)}_saveMemoryTime(e,O){localStorage.setItem("video_play_"+e,O)}getAliPlayer(){return this._player?this._player:(console.error("callbackplayer"),null)}play(){this._player&&this._player.play()}pause(){this._player&&this._player.pause()}replay(){this._player&&this._player.replay()}dispose(){this._player&&this._player.dispose()}seek(e){this._player&&this._player.seek(e)}getCurrentTime(){return this._player?this._player.getCurrentTime():0}getDuration(){return this._player?this._player.getDuration():0}getVolume(){return this._player?this._player.getVolume():0}setVolume(e){this._player&&this._player.setVolume(e)}mute(){this._player&&this._player.mute()}unMute(){this._player&&this._player.unMute()}getPlayTime(){return this._player?this._player.getPlayTime():0}getStatus(){return this._player?this._player.getStatus():""}on(e,O){this._player&&this._player.on(e,O)}hidePlayerNext(){if(this._player){const e=this._player.getComponent("PlayerNextComponent");e&&e.setVisible(!1)}}hideSkipButton(){if(this._player){const e=this._player.getComponent("SkipButtonComponent");e&&e.setVisible(!1)}}hidePlaybackRate(){if(this._player){const e=this._player.getComponent("PlaybackRateComponent");e&&e.setVisible(!1)}}hideQuality(){if(this._player){const e=this._player.getComponent("QualityComponent");e&&e.setVisible(!1)}}showQuality(){if(this._player){const e=this._player.getComponent("QualityComponent");e&&e.setVisible(!0)}}playPlaylist(e){if(this.opt.playlist&&e<this.opt.playlist.length){const O=this.opt.playlist[e];this.opt.memoryVideo=O.id,O.sources?(this.opt.sources=O.sources,this._player.dispose(),this.initPlayer()):this.opt.getCDNSourceAndProgress&&typeof this.opt.getCDNSourceAndProgress=="function"&&this.opt.getCDNSourceAndProgress(O.id).then(d=>{d&&d.source&&(this.opt.sources=d.source,this.opt.watchStartTime=d.progress?d.progress:0,this._player.dispose(),this.initPlayer())})}else console.error("index ")}loadByUrl(e,O,d){this._player&&this._player.loadByUrl(e,O,d)}}const _hoisted_1$2={class:"aliyun-player-wrapper"},_hoisted_2$1={class:"aliyun-player-container"},_hoisted_3$1={id:"video",class:"video-player",ref:"videoRef"},_sfc_main$2=defineComponent({__name:"aliyun",setup(t){const e=ref(),O=ref([]),d=ref(0);onMounted(async()=>{u("1")});const o=n=>(console.log(n,"=======get videoId CDN"),new Promise(l=>{setTimeout(()=>{l([{name:"1080p",url:"https://d2zihajmogu5jn.cloudfront.net/bipbop-advanced/bipbop_16x9_variant.m3u8"},{name:"720p",url:"https://d2zihajmogu5jn.cloudfront.net/bipbop-advanced/bipbop_16x9_variant.m3u8"}])},500)})),a=n=>(console.log(n,"=======get videoId Progress"),new Promise(l=>{setTimeout(()=>{l(5)},100)})),u=n=>{setTimeout(()=>{O.value=[{name:"SD",url:"https://ckplayer-video.oss-cn-shanghai.aliyuncs.com/mp4/1_1920x1080.mp4"},{name:"LD",url:"https://ckplayer-video.oss-cn-shanghai.aliyuncs.com/mp4/1_1024x768.mp4"},{name:"FD",url:"https://ckplayer-video.oss-cn-shanghai.aliyuncs.com/mp4/1_640x480.mp4"}],d.value=5,r(n)},300)},s=async n=>{const l=await o(n),c=await a(n);return new Promise(h=>{h({source:l,progress:c})})},r=n=>{e.value=new Q("video",{licenseDomain:"localhost",licenseKey:"fPns7ih4YTqRoFcZOc6674e05f2854a6082e3dac2e1bfa961",memoryVideo:n,sources:O.value,autoplay:!0,watchStartTime:d.value,saveTimeInterval:15,saveTime:(l,c)=>{console.log(l,c)},playlist:[{id:"1",name:" 1",poster:"http://localhost/poster.jpg",duration:700},{id:"2",name:" 2",poster:"http://localhost/poster.jpg",duration:600}],getCDNSourceAndProgress:s},()=>{})};return(n,l)=>(openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3$1,null,512)]),l[0]||(l[0]=createBaseVNode("div",{class:"aliyun-player-method"},null,-1))]))}}),_export_sfc=(t,e)=>{const O=t.__vccOpts||t;for(const[d,o]of e)O[d]=o;return O},AliyunPlayer=_export_sfc(_sfc_main$2,[["__scopeId","data-v-fab25edc"]]),_sfc_main$1={},_hoisted_1$1={class:"empty"};function _sfc_render(t,e){return openBlock(),createElementBlock("div",_hoisted_1$1,"videojs")}const VideojsPlayer=_export_sfc(_sfc_main$1,[["render",_sfc_render],["__scopeId","data-v-52acfb73"]]),_hoisted_1={class:"app-container"},_hoisted_2={class:"video-player-choose"},_hoisted_3={class:"video-player-container"},_sfc_main=defineComponent({__name:"App",setup(t){const e=ref("aliyun"),O=d=>{e.value!==d&&(e.value=d)};return(d,o)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",{class:"choose-item",onClick:o[0]||(o[0]=a=>O("aliyun"))},"  "),createBaseVNode("div",{class:"choose-item",onClick:o[1]||(o[1]=a=>O("videojs"))}," videojs ")]),createBaseVNode("div",_hoisted_3,[e.value==="aliyun"?(openBlock(),createBlock(AliyunPlayer,{key:0})):e.value==="videojs"?(openBlock(),createBlock(VideojsPlayer,{key:1})):createCommentVNode("",!0)])]),o[2]||(o[2]=createBaseVNode("div",{class:"videojs"},null,-1))],64))}}),App=_export_sfc(_sfc_main,[["__scopeId","data-v-c7cffdf0"]]);createApp(App).mount("#app");
